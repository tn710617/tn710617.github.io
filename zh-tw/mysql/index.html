<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>MySQL 學習筆記 - Learn or Die</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="# 前言如果可以過目不忘, 那可能就不用寫 Blog 了…">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 學習筆記">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/mysql/index.html">
<meta property="og:site_name" content="Learn or Die">
<meta property="og:description" content="# 前言如果可以過目不忘, 那可能就不用寫 Blog 了…">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/HoKpRaqnp69GFRRySf7YLuvwORyD-no4-1LyhADdw6bUxr7R7GwNcxzrV0GWPE2clKg_S0T9iLGOwNaC4aLOIjOngCia2cELgeR7HBsQFwW9bfWfI89fMo1CM4ofiuKUm_tgi23ipVgB2In_fgWSh2eHGbHNsrnqYTB5gBqalITl7aXhRlbJqDVOkyleCnodSlDKuEo3sRHutDsafnvuw4KjE3h2goMYuIXNk1XxVUW9Xv5PxOQs_avtunxYNx7fHAWJ-3grxeQkExQrCIWRFknirZpXmNhJizPGMhUkbOpShQ0u3TLVNTOHrntDuooU1m8FaxmnNBUponu7m6I-E66f5HAU5RPYcg7ns3Wq84wFshLkwb19B8m8M1hSBrlqg8TOOmZUoONKiDDR9FDqCNZ_evjJ33bQOgfFF_R6cqp_Qj-ZusHzxEeDj_s56OYiCueV0HovIGlEIdICwxLsy4xfm57SoDA1ly1qGWMgNPjsDXicfv8D6lE8VzIr_wPGUk7Onuy-iNt13JKiPv47W2Nfl3FjnThCoxIRpVLE48dOhRacw-T6tD0GLfSx_GAsAuSYlsjAYAScUw45Gb7njPrJITZrb9bmrRYEyU-JbwIeTTuaF7z72IfsKd18VFxYr0nq50Wc8tT9CaUVdeJEnCvt1hrUjS4coP-yRj09L7SvBtjEdulYDa7kKst3yGpqcoB3NudVIC3OFOLEWoRgLzHtb8vGUH95LPn1hYriGffFhojUSbGAIwDC=w522-h800-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cDOjbLekQ9V7XlmiZx-0WdkLFrixLUmqJexJrjH4sSgHqbah9RL1dlGo43plbONK2-BlrurueJStkN_0gMJDv9XZXPUii8KWAOqDEBXcreMHOGUMZiX09AXwZBs0p0tVBRzdTgfATycLshTKqnzvd4VA=w696-h1704-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fRVByzBoNC2ZHa5xcOibwQ4dg92GqTXG5GfTA4jGHwkUSKd-8Ut45re0xSI_QqBPteoUB6qiTdKQzOo8EeH2Qz8SrF_mbO6609SVRaOubpuyb-IobR676pAgkC4YCTdpmVnb4ZhfAeonbBMH4p1Bj31A=w1112-h1600-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXrDyFIeiIWKwyXzvrKEyBflg4sIkhMhY6S3fTmB7LE104i6lRssSW-Nvhyz317ObEz-ZzbzGQFzTaiZQ4_cHFwBT4xVW-2nE4fwofbfUAdvYq0t52FLgpptb8pq8nFq9oLC9d4iCw6YeTKI5jmD6kkRQ=w933-h278-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUiZvrou0Xk3TdXS6JDnIkh5U0fueQswANw6zJf-BoqpUgx1qnV3ZrceBwQgLRU-cdfz1kCEgOAfoJWI0q7HTcXEXV53b9UR-GtnNVgrbUyvpl9CYFi1FDUlDq1XaUxM-s34e8TVPZEBapuP529iYvStQ=w659-h641-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXnqEFcoQ6dLf3lLLplOL-X8dJ_olxnGbqIAJ0l2ObFDC6sFTOHj7QxnTNNBs_imXs4xO8Xi1CbeSCYLgIk5x8hupJuayTSKJgGXUyHjg9WgP2KoYqqPqh4_XpewvMsLIrxkwvjVvhN7UHxsJo89ABXdg=w641-h540-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUJi_p3eAuraxJkdMm2MxVGtu9oUCePIdCui23bPxc1LkVQTc9eP9PsRdUMAgxgNtiQbnS-VbPZps5c42xeDCgsMvUklRx32rEC4AYRGTsqowyR0U1G9CfovqF1MWPylR84YBCgBI3eTAFoK1GrsXhrQw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXMWTcLKurlYV1ImxQ4FiDVunJzieKT97wpGU09u51NBwYbhkbehonfR7PRCjRxnwgzTp4MgO1qoYgZYYDgb_tLru4IYkv68g9dm3H3CUM3L3xBc9Qw26Wsib481coC8XvEE1LUAG4NDPw29B3ASDwPhg=w1610-h706-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUWdsTQ6xqFGXvUX40nSnesH3I8uY4ti1cm4Ce5InKY4V-tCyyhN0zZTzThLgk7GIFm1Dwa6JQr-F7FR7FXn4HWLTqxjwQFIpB1jcYA5tyt466EyXVq7nl0l6L-fdxrJjRwL7fTZXXyhZXoIMoz38dJ8w=w2028-h1082-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXb3j5cloN_lxV2MXZCRQKvFxvsTlrBKmMEDDUWNCdSa_Su8_-wOEn-c6j7M-ufY3dVCynkxzeEpnmeJbzVAtOVshfimS89YRakrK7QKXdme40e7R-yE-Q4-dtaeUFcTZa5dYTFF9EzfrFHMhxYOuErTQ=w1393-h131-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVnE09IzBhjtlRE3Wl8uD_Ca5XdA__NIOxemXfRmO3wUivsnOaVwIYTTaXQjwurTzh1mjG_LGwnNpxpOBrrhQXUO64IuYWMiEaIfD8_LvdxyKQyxembKajeqrhAIwLQnZjsybTfKm8mu9XZWOO_K7eR0g=w1862-h300-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLV_TTZU7u-ysZ2q53kMLohx4Mxvl3lCSWF9SCuZEMUPSt9D2xItNPM2x-AmMXn9CV8y4-XJoKGiuY6F7s3mek1s5LDx_8TKLn6MlsAVsHOjPpfLiax0efq2luX8SLQqUaD7HXK5-R4h2mdW1I3igf-oMg=w2274-h1062-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVNXWgblvI4HEtgYAbYMSku7YBv9UOU6BJFbVJAQsuxv20kQMthFgbuCqhs9taM3v0hrPEocxSIs4eoWvdpR-AeLW5EuTzQO3qKuP20v8sVb2CEgTVSDzzfJfoSCAAmhYWDbGQVAbwpSkhEWwbwk7c1pw=w1930-h116-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXYACxpsHTbyruakNdCDNunmUKtmyR0HCY8lOW37h0xmizE4u3eR9f29yeXQUQ0eJMcTj5453r3ca9aW8Ixzw9357yWVMUcBtUd8UnygIQAQjylOX7tZplBukKczZ53AuraDwMcXSwosdN9J5MVEo7e3g=w1702-h143-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXexbNmjdc4JBoyiO80-WSzehf-SpmjGLSozHn5IyM4NnRGmpqIiN7XPgu5ei8QwVZSrbvuq7gSU2oS6fxTSQcxoBbqnnVndBvITbTiXy0MV5UAooRN-i-ki2x7uKjdRgwSa2iUmzbPQoMffpUE3sm1mA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXUPN1BloeYfyJk-e4uvecnah8DdcQ6JBguL7puoe9PIVz1paIN35KVmJ2e0MeVuS34q2bhTMbt7pB7sgTxuzEIJRLaiy1_4GhvEx7cnXNg_B036IacM23pBRGf21NWtKqeYyEeFph0XyJb-WtYGYf6bw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVw8Ko2cNLRAd9C_fvUqmtcdKhhYb__cnLW1VwJVas7GP3FRiCgMJPQNQeAQcYDr1Y_Li6LUfO_Ck3dZP0k6mnHBKOj75TxU6JPYh4-Vr1WOrYX8bRGSFaV1So9iNRetJ6kOpLNQbp2eY9KqFif_VXmvw=w935-h293-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWKcETwjeqXU362GIAnvZ84Wtxnyb0FWGkuiBGIxEqc0AA5Vg8oZ5VF6wZWAMJ_YPYRKneA6UFRdeOADFaddrMxYMP3ui6O9yH6axKgD8n8BnbL4B8hSr4kXlI-CA3Dm8KZyW6sajwKc78XslWdFb4IUA=w930-h261-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWoRfpD4hlG_WSjcHqD7EgS8oBbstfbGha_Z7eryGOdIIDAkWLL-BEHq977B8p1JoGpPZEKyzo32WTM_ulcDMOQX1Id1uSgjloin4EiHY-CvTHrtvw2dCNM9glI_fn6m_cgcdIv2brG0_SKX2Emfdu2Hg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXqsALnJuGugpVSdoH08wMdr6vi9Z5ySd3kYRcuJP4L-CpaPs_wf0oAHTKer5ETHRoImZ9w_RqGDKzmkZkd8E9707yh-KtGBhQd3ibuSY4lTz19KaRuFm3M_l6jcEhzFSN8qcDAnPkjpFlPbfDUqslAkQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVUxv1dfWXqow2M8tEr4CK72a58uxedKuRaAqV3-lxW9i6r2lOoSUNATBQc9XnR2FLokBy8HjwjSLbxRnyZCyBkQdh-PRvrHusMM6KYbvaw5j2r9X27fp0-sreSaTz8VYqOFn1td3IyiQDoBW66N6MsKw=w1776-h169-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUaa-GwRSVtCV_zjXE6aYCfb0ePADywjL8p5GHfLpv_Wc4BbillMxxrBF0wXNoOA9FT5S-I5XgE5M8ZOaeO9SKQUGOKtkIOT1uNVZdE1c8IozZ4UYyz_XHJj3Z2qlx7RNENDtszMlTXVpkS6D4h17b9-Q=w550-h130-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVvPTSGT5A0hl_fHMc37wILzubT0a_TqmVAhSVo_oAOC0neKmWystDJz5fcke49ZqVZI6RCGLB37LIIU1xdUWEybYmt91xru9QUA1Wj8ABUN7Aj3cDXVRAw7vI9E2eaaULM9x4CeTtEnIPSvFAAAWPvLg=w1130-h547-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWTV4a7Z6oADUWFJy6B6quHX4jFOGL0-4uFno8ansbcMdc7zZr94GX4hDqcB3hrHi3E6BbrMuftPNgWIx843VSSaIcqZ5EaOate8vzvaT_dcqxrDL-KuMWp7cDx0ykHt5zYAcq58Avws7pLkTk_pxWhCA=w1583-h149-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXn1EnlaBEMWhOWolQERW1J7OARxUjcwSbrPw50dZzRHn1MLY77GkZnrIMMCBLTfvPqAVdrANClGAVlc5wSgavuLKPBl84bhY7suSlCiZ4g7m-lBsXAOYzg__bPbMHLCyUfzRjbLtP8Ort9TsLBXtINXw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX42rISsnHKioBc6uBp42JC_RCBd7TUdN5vz2hfhh-7coZWVKq4IiHb1Qb6dkxADZPmHHPMAqLwXMH67Yg6x4CdFBwlKIQUO6pCK7c312GKuDRlFdMMaSlgIi95cAQCXKS9lfHkFi-yCnGu7L505U2GqQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXHpmWItfdsI9YCyJdRXw3u_8oUgK1AHQa05ALCf2Rhdik4Ma6HPyQkSTbb6gKcOWMRfjWtdSg0AgadMlLt8BZQp9Z98lHyKA1pXnEO29RkyPTaKO-kehVEXyaImVNjMKRU5I2iP-3M4XWbxfDpG7pUbg=w1246-h278-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUPJwBl67g5XW4BDAp5dUkRyVAdZ5fW9-u9ckmVI71__wcKYGLa_mbIMiwibpFxr4kX7M87kqmfsouxdEiU4lRtGl7-1Inr-L70UHwZezWzni2la8aBBNFa6AdqUPFM88Ssc4WFRcrX9ZOVMJQGThD7Ng=w1224-h190-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWgtstallS4PAJ3pDGxWcvTWfOBmTWJsEcFTy0T0jZ6yHLxVaD7piXBztbilFvhbEPzQArZB0O_K6dz6cO9eAnPQCvBfMbJeqG9ekZn4coOoWRSSK1tivZlGU89_E1En6BV2zvBWNMvG84zjaz5zuTXdg=w1024-h168-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXVV0CwdSZ_m5cn4Io5FjHN0AwZcT9LABcQls6PpNvjVqo0iRJWpTJQoGqzhp-sElpy9wNoxtu3TUGomWnu4Oy9QZzdtBJaehIg1tkQOh_tfD8CggfcAZp27JCyrc_geh0Ie0q_85FOVpXsDTh7TgZRUA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUsxmY9vC7WS_-cOP0QyHDZSU00tB8EKRGmeRA191chp7uPLIYhTPIfBu7vHNOYr8_R-mYTo7BgXSE6BK3vjfGChJHc_2R4uPDaadvlG6cH_Fj449ru2hvk4QMFxFSdS9ocuE6CJDhc8UD39HO6CxrXQA=w1535-h641-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWjXl5DSgu-En42JXcs2VYqjLIBRTg6NYMrezZJp3IFK9jlq9kYGl5dYNC-Ke9dOD4K9-m0lp-9N9oKBvZyBurQ0hNavsYp6u6HPmWmuLBkcvE79z1Lyn0Yq-JjNr-Vp-pvgIVvj9vup9HCQchpijPzbA=w932-h290-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX5O7IEg37z0sI7kdYUi2lNoL-z_eVJaxd2hXpkbAG6q5QvWkZSfmwrss3bYRs845L72qP5kjXXfHABle_g2NBs6h3KTz755UbjgUFOTAzcq0wcCcZR7SLRFIiYmuew7IxJvwzYLhhb76Eo-uBewNpapA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIkBE1DYH8PFGZ943Ef9MSupI_vqg8ofl-VlXWeKtDrmqDGmgvcZXJ2a-dsIQ3SVBLCryJn5OR5Z0ksnIA6e_uLau5SluieJn5o7wO8JKUSagw2xMj5p2lvXdfz2jae6bdkzaBEoZVkUeJa09Vnq-F-Q=w1763-h164-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXOcvzNF5389SAhk5P0qo6qvBWtJaAjIOS8Pb7SPRvVWBeBqtTs58Bkg_pX8iVJWl0ip5_Cu-Lr65sHxSdrOcVlnK74z2fxbNeVPjECA8A2JLtrNt7rG9T_Xu9-EoS_T2Z6l96uL1GoFOj0mLm56xyFCQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWaF6kCW1Mf-oVaa8LNdmgi5NTIuTw7Ahu87maWTI5PCnhGEVwLfWScHUOWsAL4LwiR2deZEBG-NnDkZkg8YDJu4Ni9q4qf1Wl35SNhRu1S2oqI32RKzvWjv0U3BhouH5kRmiLeNduYKlw8Q4R9mGu-Gg=w1252-h500-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVH7J0E977PErI-lbE5psSSqfM-GSYPon4GnsuDRrttz4sYjRc93ixUvdIN97hzQAALTuEw27KYkVCUsYgE-VdA26aGD6qxyJnhMPXy_1OG_YT2CnntgByeoPh_yR7ua2RVSBBgi_p5nXgCnfZnj0d4qg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLV_nO41_bXjkGHmjT9V0UzugmugbVvdIB-f7e7pQ8mro6RlRFq6YYXMukVLcQjjYEuK87C98fQO5VR-Ovt4FDeCHXTCiKttCFYu6P-1-3MymK1RAguKYnWEvik7GN3ELBuiwuyiH2gjfRhIDzsaxWQ_hg=w1246-h402-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cSO26QFo7Tckclv8ruQaoKlzXZ-TbR9DjrVrf_jrf7pwsWo9uAy76tpIYhd3dLF-xSzrqfDrE8pGGbHLemJyiNGtVHGivHKWGbIwcdM09Erw6wuBmfa-ctj2KJUH9mDG2ys9VbX1FIS6rDK2q_BUMhng=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f7AaGmn0oIEvVAWCNtvVoxEYLIr4Jf0StvoypC7dcZBzSCHUl4uY6HH5eU5FLany9W3xVNZUi__Qcxc6Pu1u3sg5frF7z3qs-4LcFtWVWUNfumsZYTQHy1nEGqqm5mhSNE-64T4cV9h1iyC9YQc7DW5g=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cyC-ZwUSpO8LOQNHtHFS1TgQxqH3VkSmQfiJbjquT2aab119zyQDGnT_Sj3v91gOy1nhBm1ZptXdFtJcgj3_mn3QUvXzlQujHO6WhwXqRSzeulVwMDNUXoV8AlHhKrmo8_kusnOTbYj-uqHzeESHMrBA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3t18ugP1YOjiUarqL1URaFzrwLa5HXNQZim1SMYhiF4oRAoAqgQVjnq9r56IDVa24OGpYdQTLJ9S6eJ51OFbOPmTzpHXCxLhUFLH9_wJHEG7Bj-F9KHGNbtsD4HUtQC_FV_WBmp-YsQ0IeXoFGtC5tw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3duP8mZlftFYGFVlrZFaCOe8Z9IVX3hH0jeb0pRQn_jvOXFLJ8wIsX1cdpKPXkS7qk_ciG2TcLaRdT6F_W2unAoacxebyTxea9_qpAQfkcKJUkx5EthGX53cO_i13GFc4ItsCCTdHY7-epaeun_EJZOug=w1920-h664-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e0wrGipULEORbddHpKZR1nbi-MUTlLs2q1B96FV9dVkZkrb7EVp5mazu1bCW7eBni8qlHDoi_4ysSLU-razOg2TT2eRAlLKkB_et-jPAzl2zaxshlYvpa2rP8OV5aq01alnwcxu2iU1yzaRPFj2rkUUw=w1920-h533-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dGcBYsTleclC6uBJtC2FTVjvp3cMf9FYYPtOhCLnOKq5qdQeWmdSD0rk-vTVUo1S_FdjTC58S500yKq6XMe5W-4nd0WtNUBsbgqXGVYimuDV2ebHgzPiO5Uh3jHXQiNJg8Xk2r7JDL2oeQAc5FmJUfIQ=w1882-h213-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fgfqlee27BAbVTvP-eHrrWGpmNP80hlz-gkG70XVTSsjE1kWaXwTiyvez1jatj5y9IU2emaF96O5-n-YGfhUDHv1Rlsxe4Gm2i2QzIEdGHrbiXcc0zLDnuDDzRi5GR7v2S0oTVDYq0R_XeNVn8F1K4YA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eebs18pb8v6Rb02A8Fw2pW76tz2WGlrTUeoGevqlT8vmzvrG2dpMdVolAA1VE8ZOD1l-Z8JYPCcByIJNufSJG_uRNQhx8_5ACIaIBEw2545qqy4qKobmARDz9N3mTYux1nrD_85nfAdyBdKbINtY3Uyw=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dmDihT9j-YsC5zaBjEHDir8wOLVptthTIb0-Bhifjr2daFNgMqfgjcNVTQMqsUjtIQ3RBsJzKFiYfaDOGkbzAa8-OdAyJzGkEzveu-ziin_h0HSOVzr_MxfOluzbmsCx3lNj6uRt4On2O7o4Shf6vqmA=w1030-h1956-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e7g3-trWDYn-VbXpyorSseXoofde9xTy2v1T8976bzq5MAnlI5BQel78sjFH5aC48KvbkXZ3asw0CYINwCwmeILXO7ts1jwmSYRWY-5YLDTESzDh99l476woQsInStD8C9k1yjt-pMCor_ymTCzYUVAA=w1734-h385-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c2dyTkIpSWbNBBJakWr_Pu4u1AOdhl2kufY-i_k7laqVaLg9lsGGv3GOa4Ghc9xRmzL5nmAZNXwJm9IGukXz2u7PdIzx95y3vASdKPfASxJ0fCX1m6xsxlkRkIZ2_TiY5F9E4A6obx-VlMVfFDMEq35Q=w755-h682-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cWpndpLGpdel-0feiKGWaYBlJS864wq9elkDf9xvIXoxlAGnQAOGzih5FVwzUkzbKbhzd2tv3xYISsHrOFK7vYa33iUNSJKU-HGtdlugGHcJpbGmb-1F7OrQBLv3WplWs59Rk9HECSf7HJNI__TP36aA=w1246-h234-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3edOeouRpQrg0APydxGtWrLzPtXzno60KJRvavAwT-_ip8OKxA74cMrumeLK78LpgjkUgiyHe_LH2taeEw_M6zwjARl6EwSn-p9hjI3WbQavPY-5_ueqdFL8-Ozh7_XDnz8EmWIKBk_oQBZoBc6fmnSTw=w935-h496-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c7To1y-Gv_C8DHS5hxv2ybC6G_E2X2V9Qt4l3lFybqNZHpfgZjo9AB3XgA5lVNqQdTqn0STNrYWUYDCRbjhFXXpHwiykAox1z6rvFTa136JoVWhcrLTL1Zf5gZKaHP2_HIBbCKuawLUgCdk5LMUTcaGg=w1106-h650-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eckqyzsolfIylpcdUGJzkB8WAuESlS7ODm6COB2U6mtO3rJZpHvt_2rsTG-uYrs-Z4TkJTy9ypssGuYKExKOYYdUSX5lBcT6MDeGT-EOcNhqy3umgIqOJH6ZI5v37F4RM5HHIMIDKCfnjXJfy6un5rrQ=w954-h318-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eHVehy3sVTiOIcET9Iy-ffFaeXV3-TvpYxZxr9LBUZXKnjw_1534bM1ud5VGCYGCXsFDpdWeI6MgA9EEKCf0cMWKloeG3wMzLe2P5SqVhJSXTEMbraRct5NQU_A0eIhYtH5bcP6zD783V8o61heVx1EQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ckdHvphYtuNvBxziXZO3dOyPgc5ajMLTANJm3sepL_yCNR73EpSkuFw9eH_uG3UuDsViPGlAPmOsrn0CBsNP5vx7Grgac5ok0Uwy4lWgfOtZOED4NzpH4PvrOP4s90AEX_MpgbC5l9xjgPni8INbe2Sg=w1248-h556-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dKmJzViH8UkDQTfTQjD7FItWtMNaq8BoszVnUO4ndwJhL9LDoAkH5vd-pDMAWvDZQq6BXaYrQcbmBK2K-VhnvO4yl0IC3P5xlpoDQXscZMrsJWdbty_7RPwXM-ZjUgDEdclef06d7l_UwuT4BCEKsb2g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c-XbyvNaTqFTSfgemxw6k9nUgwmAWuVWFDU1Bmvl4bv9L4QClJgOZ-L9hVYuaAybOmBThFITRcer-IDvAsrFJA0FDChIl4x8_7jBPl5nYrf6ZqOBy-DHjmYZmV-106C_JEaDr96aEwHSzxL2rqf2AOLw=w1246-h550-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cZqrdbv2sTNYQQW38errG1i0rNvQZ-biBHtErpsX5dzXtLDkB9CA4SHAxGQJS1lw03kjMnqpgHG4dZ2wNd5CB5tEVC-JDlBGdg3JwG_wGBpW-srpvv2AI1fIRqXL-Cqp-OIVbYWjsg0vQnvRLvNnpweQ=w1244-h718-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e_bInAdCWt-qXCuzf0AgwEDPjkHQvNbk1uGN2YNBizGPOBV8uHHG9yhVF7niqPMbRaT2B5ELCK_sWhn3Qp69Y2qZky9tWvAKwj4Qec9KKVRdDVx3DUlPBr3UdC5P6_PTmacTZTDSM13_RDQPiol0CcXA=w936-h313-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dz9YwaHAYbIyVtgpuxreP1ntNpDvDxBJXYwHZpc50MADXEoaeW2KBQCcUbIggz0Rtlh2EaXQsCvyCNeUwSt96hYmNuBVGRJqWGNM5-O2K-pj3ocWHpR93z5rK4eycqGWuS84a8zkGEwfpmrNrkPDSwaQ=w1142-h550-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dAR6AbAza5i9xMCTuqwvgmsj8pc-dlaIOB_mlAnbc7hTzgrx4OHMWXKTnaKkchd7p4KRahAtUp9FsU57loYKzpmdG_9GifW5yml8fOLDdjLK26z7TPjJj-giVM3lEADdNVfE3nz4Sb_lvvh2xhuywCuA=w595-h353-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c7GX0KbqPB9OVuzff4NETxLU_nzcmObkyF5l-e1sRhyUAabjqGPf0WLKWS-6mLqCwbX_Nek2TaN9SwwPvVHrNTET6Ho39cuj9YUlRYGHuvZd6U1kUKzN1Jk9JBjBM1EN4ZzHF-x36G974owdhv2V1LpA=w936-h322-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cCtL2A63LTARWu-hEyQG3LJ0fsBZZgKyEZAtQvSKc0u_0PLr-XbPqHFVofgxRrnnXSuVlaNbM_5n7ultrqY3_iU7-Hpe2Ckx0IB-AdDEv4uG79ae8OcK4q337ULzmtL5ktwqOD_3oFOMxF0I8g3enabA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fmxHm4oqxdObXYVp67f0FSPYuF1pqkOelOLe5EITcdQO9Iz0rs3AJYlNpXPYWA1snKzXpqK5HDjsA8EmozMDe1HUzuxRp8m-cfDszpic1dC7YstWJfx_KOVDQiYTP7qXg-sQYczWlT8fwhAtxA5x6Qcw=w1224-h212-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d6XrB6349vQgQoK_La5csGbI4nstaZ-Ezxt5Nk1eg8d-PQTVRgQoUroWeJ77r6LGfhIdysvJsfc31UGQn2PG-Uv39eTD9b1sfvvmmf6LZT6UeGTZnpkGvpUlCYozdLC1A-oIl8v8COj0QsLYlzf2MBbQ=w1312-h213-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dJNJu3eLqn7iyxvd8yAjlY4hmvlFBYe-ZDu8v-NiYYXxOl4bLCNMeWTBEkZyzjuFbgkyy_qC-ppjVUweTC-DpHj8qiY2RN3rPHWUd3h3dZkqn7Z-oOiOcG0CTqbfTXKqS_K1o5Zmod-cChLgP9FX6Y6A=w289-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dFP2FZprix8YnJeCal1TE_k9vGDq0RXu00-sXPsEGcJapezAG7_7-Lh22EVpB8GpbyJ2ESRwom3gUetuoqonrgxESXZCMNSH0fJ4XofEhr4CAzK0wYeNp2ZawwEP8Kl7AJbXz0kpM6zLFUBM5vxhJHNw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eQVQ-2nKccx_-X_bDKSgK4B88ZOPlHTuqGamo3oMqCPZw1QSEWb9j8QMwd2YnT8jPsSU6nk2hJT9H_0mdQMuvwzom_Oc0IqfJty0bPApUbidIJGZ8-gQ9eCS3g_sqI_j-PlXGfXY_fWoFqA2GRtkMIbA=w1502-h2002-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fwb828g3KZqAlXBl72boE1KCRFgEc4lOr1b_OrZL4rqiW_XsDSV2NewvgloKrnbKJ35lL8uS85_03ym_tnDG6Dym2YmRb7r-xKsoGEiBA-1j4yb1NpL8CXlN9Dl9M0KMJr8OsJVw2trCW8qEAmIedLSA=w646-h369-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cRZuSIR--SqaA1Jmk790QvArTf-pPuQEDVhnPDja5wqHLKgYIuvoJpJEIB1cIjz_l2QX43sEIuau1dg_BdbzJOqdvaHA2_Irlq_G_kKBtc2XvgcKN9tcdjDxM0zs8rFdFONU2aW6rSa96GQTCXdREXtg=w1553-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dMgwAyApcUMnrXbDVyERl6T-UKA2D2NwJO9bqPEC5bHj5KW_GkqC3Xvw_DR69YzAql3udSjgRccGNs43_2ikhz_qSpNNze9nfZM7Sj4Mg7Ishxo2Cd_eAaX7yGaJ5N4g76AG8XoF7cEDfcotp26-JntQ=w938-h423-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eVu2LJOYhiglA0GMBVFHROfy_h_uuEmiyIo51vg6FkK43gerREUf-UW6U3uktSU2dnuauuMFp2VhlXKuDOWggqYUmzTh544d31TO98Sqajs5o4-HbG5Vt2odOMJTsitJrgAQRi-_5AR8g2WqJzqtTdiQ=w964-h447-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dlWDXu2kUHYR5xX7tqVonAN2sF34FGnPcGV4TBWB8wERuDo9PpxwIDj29-kDGyJ4fmstQ2nAiLO0KyYs9utS4Eol-JL8uu5BgGGIzLzuyuCvxAN4vCd7hn-Rs7XoDLNzOMMVNv8SfBH3BNblO0-TdfcA=w1586-h125-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dvFWlQud1Rci55YPu6kTIgSTLTpyNRTldzVAj99aRCwH0Kaxs_9Flo4oWa95emmjGb4EwRf_bqcIzB-KI-9_Em6pDA8iASHhe2j-6hOQJ44W0938UX5olwDmqFC5TRvdmNuoPsLYEA323_N6MXFO8Zmg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cLn0wcLCUevbOmThBluBWgaQmpOQNogGhpf67oyNmS9AvoAlnMD9EXGZiMfhq6VRmJoxZu7vmtvOFXWiRRZf1rZYKU9RSat2QmZ-vFRtoOx1HxGaXjgLXu-Docl12pJtwvE5J38muWyaVvtpyDzEQHEg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ck_926eQdrihqnNHzVWFn_SWBS0_1PKqrx32WDH0L2A49wQf4OicPX1GfWwncmvIJFW9vdJsFD4bY2UrhW08f-bGjiLKQX_fI5r-FAcm1Tu6WtEl-lz6WkR4SsfQ3e85b58b9S95cmb8UUPcyzJAeupw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cHYzqgRqJ8ZaYbS2kTw8gtDXclRN7E-0di_BJtYoMTgMEvvjF7egbVWOUU53YGsth5wZhxBe_osFuAqzWdexXZBH85ESGudUcHnyMdVObiKMuBPAAacC0XsADJCiHO-29Ev0OelGmtiIADH5Bi1-jdQg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c5Tpy-aRjLb2xaKmSZCizuJixrecHy6K6SIjtC1uahlFWwH9CZj8KHuKzSy_yWtkdDhuw_5dcMRJNnwA2uQpIzHt0sZ-4nEWmBFldOG06XjzQejVUAua5yq-BZDg2jGUuyycO7h_xqiHTqD67vAyCTqA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dfvkeXl_7l9RKn1O3NxVenhOusaVroFfF2ocRcfKQ2O5nmcHqXhd5mkuPp0FUkKScmNcaT8q8H_XeQ0hdDBbLijoq6GmxX9Nrbczij-XeeD91yh3QdboPoAdVzsPp4etfG75IYMXpk5zVnvmvVM_ibyg=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dH_pD7q6HmrG2sg8GNL_SpWCCOkjZ-hImqZS16M3F8mGGH7Kgv4hOS1wlMJ341cIn12pdH5tKzNTtfPos7Z2IMWTzCD_YG6zOkM27ZzWdQzoO5LqztgWQ-SysY5zMtsH9QAq6fitwC1Tv2nYgO2VJ98A=w1100-h404-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f5MDcuzuOcB34ZCH6k-MThV56ck3z8OhZNEsQWOPXzewbx_Pul5TccXmIt5UVET1PrxNpY8ewoiO1-EpGk8wPgDIth-ZorWwMxn9KO2D8ipzsIV8ROrVrY3OWloXCGYOGEpp7EtToeDZ15PnYElzNT6g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eD82GqeZe63k4gFbdSaup__AFNwY2TyHVOVWBx5nG4rcwpNTQPUXH5Sh7dYjwIvaduCpiZG_AL-XGbyzCmlPI0X9Ii0n6_u30S2pne2_BMLhysiTyvqmmH7biQn0hsb9TEL_eI_SVQuM2gHZ9izsvjtg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f7pdHUMOZ0ipSV7x_mabnyHdyOnn0NJiP9DxoROBt2SDKe5ysk_sHgRv-5oJh9g2dUGVLdqKwF4ScXYsFKdfNibpEu1qtK-RbO3DV5-Mp7X-kBO2-2JfjRTvhtoWXhD3OaYENE8Fj0bLsG-MuRGwldMQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fet0e9Sg-H0Et-kFdSd4dmQP9f4GUEp14iGpTP4w1J-HSNUv810FSy9KIl4Ulv5Gqi2hF9mkZL45Z79CIFdhnGcWcO_iqNdPDcvu81TBDFpgCpIw9cud3vDWk9P1J9jE_Ghxoyj9kIfYKetvgXipQPdQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cMGmLJ5HwqwFJgOomC-FJhJax22fIhUeUpBCI1qNRIzFKZgFYpQ15vcUEOURMN5Iv50b_HuyD-fPwHDHNC6GN0Nn6tPkdOHxSzvqdErQJdLBadSEhdklj3c5XTi5yDdEWb3NEEAuzpeKkgrhqZOaZ5OQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dzFwpZNY5_MSkghxMHvmVoHEPYkNNJhTg7e9eV2iMNd5n5FhrI3BdgTv6GWJeIUCpjP68xEgoet2xoljwjTeWBwiYWJAC0gjjrZOAV2FAJuAyEBFvio0lse-H1T_OpJuYuZB94MzcTObMo0Nl7TsXNfw=w1092-h612-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cW6e8Oe7SR7IrjEv80v0x8trzLZi_1BkpcnqQHFCuZukd6RYz-kMqXB7eN6AVKqFDaY00vhKailnSiQUbM0sRU9-ly_FPJB-_cay2Dy5hrZJ1b8VE2R1AMQV7XhKz0TB2Bezf1aN2TKEcXqfvPCQ_gvw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d30nPsE9aOzazcF_KunVQO7N8WxpCcqAd6xlW5M5f7qY52wYseBSDaZ2UZId9MyizR6XJF_grHe0TP_eeNSIMWPwSGaWY50KODQ6b4we_qCNz_H3h-pq9vaBpjVpMr4jTSdSUhadum--MZ6SB0oKqWpQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fNMv7iVJfUoAGi3CBpijs6oN1lS2sJU0lfeqZ08LbUusdjk1KWGu2JWSNU4pN7foHarjsf4LBq0aLfWfLRYb2KiuAtx_tXzh01coM2qlicZ7N3uO5KXtrZSfI_ruD9Zt2UzBjhBY6TcCwr0NQw5PPhYw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dNiKlPYFEVYaFoU6hMupXEjs_UNAjjhSflTVjt24T2YG7YnEPPyFrdA0sOXZGZoOJSiZgyu-0Bo-H9qNjuBbqyi5NezcrVeICa-Gk-Y-9W0kyR0cSQDpl_6oLt0IDKZ-ff_TPYU7dfq4XLWdVytjwk4w=w1142-h833-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cBp8gFyvZHdM9cRknywRl-1bXGyYiIZ90NMS6k5TBtL9FhjVbY7x_fNjUszd785aryRvs9milfXHgM_OflFSuyiC9Y51PU_ngJywi2n5yifZEyHeftvtyJk_2WHd4kCYrZ82mHxX4XiTF9HO8kdUEBcw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dztqVh_OItXI8hcjMmg5fZXB-4eSVDsD-XbEJOZ2UHZ54hBjOei1E3m8wMPEoGlqb2id29hSxfwNBV7A_9nWzpKyxKir9gvQZ1Ke4_J-TEv9cSgz0gwzpsR3lEEeagtxxxbtId3sfEDHItrAncZmZKiw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dDeUFBKih_YOvZUPhdjgtlj21G7dwDKlSWsfwtMIGb23uEmNldWDVoWlfWEKo63ixi5GqfPRpXAXjQSUO9SXRqs6-vQmqifLclt_z0gn9S9ZnJ8pmhYRfTMi95dtiAubODl_EFA3-FzO3AxpOvutr-HA=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fjW0XEfmW2DyzVQ4VCCMFUjfdGCpFWggzuTG071ohPhLEagEzLpyZ8BRURKjHsLcJMn5GRWweuRR0wyZzMvYTsP81Az-v0TXmvXiHiiAF2qlUuatDXSzpvf9iPksJQqcEDZ50CjN-VPq843gaJKr7saQ=w1920-h1440-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ekwu-P3VY_S0_1hK5J-kdfmp0wrN7clSPT-G2QjU6EKZSy3fCf0DAhzvrIx1KEg3VEt9dALWAzccCgUoHFTEiR496rvQ7eNS2mIwniIO6gpzvXKB25z9SlBiNKH5VwHoQxmAa2OmaOUkmIvNFwed_OwQ=w1922-h1082-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eNnbNqUcPVOcj7T89BAI0MySfznedETHOYkouABM3KqdJCYYznbPScZ_2GxXRIp7JSBPGSfsSqXC7gIu7c3PwOoERWGiZET0SF065Ag2ZQnLLQ8Rdu_xPfzqdWxNbJyn__xqHJqoiNyYMvgrYt9yOqIg=w1400-h1178-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cIlzcow0TaxIoSNLt8t-KlF4vTnzkHcxpAd5PY3G2ZO1fTRlCHs6mA1QIRfmvLrd_KEh6aAfrBwKnIYJ45atJjq-chqsdUFDTd-vGRFhPA5HemoO11mRlRgR6vCTg-tZtHlROplllre7DGo558OsoTxA=w1400-h1258-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cSrjdapjyC57uQPG55HZIc_KJxUokfg3YQzp0CX5D18325Cki7ho-O3jKdMCbKMdEym1LtUGrd72KnRLI40c-d3cFYiLzQE1m9NpMsLELWTS0x47Qs67rU3ugnXxufRO5grKF6s0YLFFhub4aVo3gBuw=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fgHsR4hH9u3VrwYE9FWHyJhZw4TsMHM5n9tbLKInhgwE4dX8_8woqOxqklNzkxmwPY6Qe55JyHP_7BA7BVBflzImjiwGuOfe5Dofwt1NUgn-DQTofoz41BRZeUrdnxC1mTKEUbFaN6znXnGRn31iH2QA=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ebqdFM2ZmkDrmMigbqRe887FSRNiO3_vPqVRBmxWNaspmbTGfZuQh45FpeF6sGvmpfK_R3AkEfTiuoit_CugmX_l9CGELIhDD2qNAbc-I_goMzK-A-20n6gJRwVsyfQ0hAfsVqsXTRYdNnHM8yfOdfUg=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3coTHFB5d9fvCUVMGMT-ygib7lAk8LmoaCKKdXoNapFR_1ux8klLdfDT_XMcctS-HK8Ts_djId1kf1-0Ut6SKCrLlXCQ0CiBBCJ5b6SIVXvRAb7wAvHhelbeA2oL98AKE4H5uR5ayP3OipquGwFNhIN6g=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dgsXj5ZD0YgEzsv6DA3YvsBMak86F_h23dEnDnd-hEJWuY9KV5s7eAcUb0D2b2I7kRHYahe25l2w9QsB2JB6ZA9YrZeUcR4lhTRpzdOVhnomMCtmDEW8NT6NrJvn1r-psDcyq0o-8UcLkST4t54ueztg=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f8F7UIcwsl1kqV9s8A-iZ62JiTHlM4hYJCsrvNeyVmTS_UlzKN97od8Ii-JRNAfYH5aH7xP5TopMTZdN-5YiNeWoI5q3_ptgXzreCB1EqaOlNi22_meBIrlSkRhCDb5zLE2IH2yeZlB6trQKVSyv8zYA=w1559-h744-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eITBPO8i_Eaq2_BvUbQNGY-rY5vbz9kVaNMCkotQXVIUkzjkjh6t0y1UI_gH04U9JrBvLNX8fSKCmBYx_5nMG9RV6mGCWg50y4g8XZoqqF4HyruWRhd9Mowml7yKFOmZl3d_PP49EmQtgbzJt2h-Qzvw=w2940-h374-no?authuser=2">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dnV6FOj-6J3wQ-FDwa2S46j11ngndzbvAaG03B6HA7oQrTP1xyyDigAyt4L-qgZWdgSAiG9JPg3DSEETU8rqnl7q5dTdUysgbXBYqh2ZMJHvKie7t4eFJWbbST28-cRH7DzQpkmhskx7zx2wI4tS8w7Q=w1350-h150-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9w98Lp6bWxrsSeOPErWilxclYurqga7yfCDB3gdoR_J4CG_nYoUasEeGzfUdkH3JuFIvNQkfIz7pF6s-wXCh5KiucijT9sI9CjWe2aF4UpHQ5dwQiMsNvnD2V5f1cS4wMxoZV74RgnfGRlRdFTE2QfQ=w1098-h166-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eU2uwBaix5YszaenNWm8fXL3IJ0ayqe9qp8apx8-Nq-vJgUYvpbajziTM2EFmPxruDe5_oUEeWgdnxnHAaqResY3qLFF0RpN8IA_n3r-TCjneLaCexff3MWUz8_4u4Q7Hr46ZlNd_jXvvcWrX7XP71_A=w722-h282-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dKyHGO5w46f2XGJMjIE2hm8CLTOHEtA6ummhPc2JtSWVfW1zPZp0kfdg4psDTciLU5Jh8lgEUjJqd-RGGE3CjwdkHE_xqH4Yh215D-TEW2cvmkr3BsW3iL1c0zMODa_L4U2BY6U4uT1jSR71wWO5CTEA=w976-h156-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cRNgaEJnYozPr1Fu1JgGhNK1m9xvtJa_FMBBI1f_4VxpztvbMOG51HJseURsQ594Lm3nCVpCizBHk43n3zdaS0hyNqgUla1qMncCrOlegqsA6PUZDcfCZ4xdmNXZfNDm0PzrmznB-F2Pv_JHCykDF8gg=w1194-h210-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d4VGASGTQBeW0k4Vl5RMAB4soLpPjR0DmM8GvLBhA6nTnohK7dkDxDEwBZ35QbYmV0vgqt3kE7yaJXG4NrB0oICf12ZkudAVgi1s_fvLG_OqofnS8cv8WULW7JfjEF81cDhwfgqUFLB748n2PzmDIDig=w408-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f4lntKBqX4j2wgHYDVmtHRmM3rsj5T69tGNW1_T_NK13JKp5-GZAseiMbDlkmWtIEELMCrr58GMREp2RM1s1gZ7_LyDep5lqzlom536LkFYaoy5cnaGliBOj4rBAi2OLQj2LjLgVOKhUJZ-YNfLrzwFQ=w852-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dtMv8Io-btkq2UQwoqVM0uo_vYJC6QCr29XDqc4lQ8ayt1h2d4vT_XURAirpy34KHND13o5DmB6Lp-gCMrIfG6di0ygI6u7vjT995tPwFABlkSkb10yj2QVCCAYuEdfhDwFclx5BdMhSU3MT9-aaQVow=w1200-h202-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eoskj7AUogq4jmWfLb7-dI5iGJUWz8UV6L5eDFXrafIGL9w5ZaVIHs9-XN3KiLWMuTQ_HKFvIpc6Za5G5YYlSJaQNwxp_gzNWrG9uYEwiEXvI8jKywSlEVtFVn3uzSRQq8Hw7fRgDQ-amYaa1-nW7mGA=w1352-h212-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c3GhlwuBEL-0uPRC9FJ-ImkNJxSXb1HDkRz571CZkFs3ZfoH2f2TV3_t4QVeTvWIVyKMo6VniY6dzp-VfpvOiFWCzOEeCB0n1JysgCnDgVMGRWX7Da6IQY9jbsKy0i_9yDxGgQi6jKjkAgGkN62ZIXTQ=w1074-h260-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dlhJ2763E6CXuF5pp3k00zJTFc_7OJgHVvjth0NQCHyrPvo5pmY37E_9M14U5iyuZdAKV_ehH9IY1lGBpj5cKq0wM17AiyKUUbjFeGy4IyK_Oi335QExW8xShQH8eTfpI3uJRnuH2g2Q3u4_0zBWMnHA=w1072-h204-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3feB2ngYRfVdXNaL3c94cuoPCGBleI_fkgIZxm-CgRI6ALNMgPcRshpeLH_ZGDJtO1NZG8axLMUO7h4W-2m6IXVBgsAn7imnLlN1w9EMLOe83frCffIpBtJN5IDcfqwdqrsmjvxk8zpebhTSIExlYgKaA=w1254-h152-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eLNtMOG3MF8YjmvFeuyU0E_1DFukmbz5JOT_ZUOH6GXoUnsjao1HKaWmlr7tjvXHeCo1G2DnO8iOBgqa1SvPgKgYbL2hsdrMTyhERwgLWbHrO2ShsIbjIbhY5asOEUyPYYh_CO62Me0zz4SRLOB822Jg=w618-h152-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f2Q6KEQsP2PqS2DY-m8VwUYZAvw2gifnl2WZQgR-4ftknaxYFuLYMskW8AHy2Rejfk8iYdsP1ubbgILMXyl9_Q440wcP9YiqzNjsRQ7w_jop4QttbJsFZdZgSZg4HA1_zxLT8L54XkbgAjPqYFdxOMgw=w732-h102-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dF4ZjW2F4Us_lz5QG_fhn3FgK_vDcwYXzsH84ISaw24SAKvuMXX1Om0FLDBv0CjOPDctRE4vhWsq_TESBvtvOhw5xX37XjGLJ8aJfMfcOhTnMap2rS4zEenBIVFUJZRPVxIXx2uuwcpL7up-iua1iGCA=w1658-h102-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fPAS4KqqtzGeAU12yKAWD2BP9Zen-xVonh7-Gh6E5EE8jc8HenpqFzj3OUG58SVoA7N2tqY4__6RJoTRi4j05QyWYjoJ8NRj7yt5AThkItAJjPcGd6uGvFIWrnHmlc4Pk4JibmiSHF_A3_PpBedzAzjA=w1044-h280-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dZmUV2lxpqaVP8bgD6SCJAjA-vaPSY0RQaYfWCYqo0NlODpYV_1xfvpo_BKcVeVquShiT50JFTyzzjUTd56MBxHDgizOwff27--7doto15R4hZVqJRdqCg5iq5o9p9BGA9EoLtZTUzRWb0QdOO-3Whig=w710-h160-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dBcljw4liFBsgiYPQ9qeStIrWDoE22Xba3Zyd4446hYqcdDfCmTWijLiSWx-5bMkxdlZQ5M8H8nToPlxfjf79xR710ax3LazSzRJOEv_0xxvh5ApzpT-IY2R5peojEnIX1fVOpC2FQRCvsrUnUOk-W_Q=w710-h160-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fv-rQ7tzspcmyeZ2XQUaRcRD9rrd0RyH-gxr7NOXB-jOBoIUKZRf8Zm9ww6m1veO0MO7Z5F4H4U6Ho4MOpnsiZlm-_kamXXv-Dk3MU8EYSz297cq8MZH56BqOIy_0xaVwBqssH7tsSmAHIcHg8iPr77w=w774-h224-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eTTAw26GSGEeuRePK-a-nHoYnqV-CnjY-sYCnF6QrevQ_Sbnm5J99Mn2tTK_Kkn23uaLSuc9v1K_o7gDKfNOkLxhmX5ilCqlF9zLluV-KtnjEN6q05faeaiVmLTA4MbmEXYPdfteBZezRladlBEhqcmg=w214-h164-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3evheWl4A6EdFxznfZBHZ2EZrpoCIfbblBndOR4rE69PPacvJNTtvPak2V5f9fqwFWhVdsFnjNKSu49PlvOakOKJMWqvdCBe2JfDetwMba9_gO1z_3zj20FuZwoHJT7ux4V_IS1cdPwFyqekyiGNykNaw=w364-h248-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e2PdSbQRQ1cIqySO17As5bRqmoyyPF4pWMGWCPPB7YOs3tLsB7t7aV-MQZ3a1pCmJVsJ6h-losYKEbbedwOLjzhu1CIer8tE9pHU5phwm1dlldS3Xj6K-6ZzaCa8gX5wOKkvqtKmFHNrrrX9GZwZXjuw=w264-h248-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dAIYjJ92lwi-2YKq_9IVVY-779K6GbYuQfgdjCGlSJAgWeaBVWJrzwMtQL2wk6G_o8vLbJuuyIT3BcHq0OTvlw08sMFaZMMytL10EbfhiiIwQyDRglE6XGJMXJlfYVjufFRRSWLIlmTI8pnIniMb71Ww=w3414-h2002-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eO_NrScVvF5M6te4kEX7VTplPkSEI-_0gkyRvJgKbeeANIH1XkUiS6nXi7ELtyGh0EDk4S6z0CR3WtHfsdEuGh4OQYaISqeEioE2dY6p0d0ENZAgD10YOsvnXs8desk4fYwGgPX7vv9Pa8Rq_P04qshw=w920-h472-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cyStcyEOpQ3RC-ZwRm0sdp2S0QJmpG6vdYXhw1tIk3TqLLIGYxiS6zcaFguwpOxOfCbxNI5CP6JT10C90alEBwRuDEF5Fo8qTm54RRQ2k4jEZBVwqn_pM4NmB5aYf7YVCJx1B75F_EzGPAEv7pzsMMLw=w3158-h214-no?authuser=2">
<meta property="article:published_time" content="2019-08-01T12:32:19.000Z">
<meta property="article:modified_time" content="2021-08-23T07:30:05.885Z">
<meta property="article:author" content="Ray">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


    <link href="/mysql/" rel="alternate"
          hreflang="en"/>








    <meta name="description" content="# 前言如果可以過目不忘, 那可能就不用寫 Blog 了…">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 學習筆記">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/mysql/index.html">
<meta property="og:site_name" content="Learn or Die">
<meta property="og:description" content="# 前言如果可以過目不忘, 那可能就不用寫 Blog 了…">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/HoKpRaqnp69GFRRySf7YLuvwORyD-no4-1LyhADdw6bUxr7R7GwNcxzrV0GWPE2clKg_S0T9iLGOwNaC4aLOIjOngCia2cELgeR7HBsQFwW9bfWfI89fMo1CM4ofiuKUm_tgi23ipVgB2In_fgWSh2eHGbHNsrnqYTB5gBqalITl7aXhRlbJqDVOkyleCnodSlDKuEo3sRHutDsafnvuw4KjE3h2goMYuIXNk1XxVUW9Xv5PxOQs_avtunxYNx7fHAWJ-3grxeQkExQrCIWRFknirZpXmNhJizPGMhUkbOpShQ0u3TLVNTOHrntDuooU1m8FaxmnNBUponu7m6I-E66f5HAU5RPYcg7ns3Wq84wFshLkwb19B8m8M1hSBrlqg8TOOmZUoONKiDDR9FDqCNZ_evjJ33bQOgfFF_R6cqp_Qj-ZusHzxEeDj_s56OYiCueV0HovIGlEIdICwxLsy4xfm57SoDA1ly1qGWMgNPjsDXicfv8D6lE8VzIr_wPGUk7Onuy-iNt13JKiPv47W2Nfl3FjnThCoxIRpVLE48dOhRacw-T6tD0GLfSx_GAsAuSYlsjAYAScUw45Gb7njPrJITZrb9bmrRYEyU-JbwIeTTuaF7z72IfsKd18VFxYr0nq50Wc8tT9CaUVdeJEnCvt1hrUjS4coP-yRj09L7SvBtjEdulYDa7kKst3yGpqcoB3NudVIC3OFOLEWoRgLzHtb8vGUH95LPn1hYriGffFhojUSbGAIwDC=w522-h800-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cDOjbLekQ9V7XlmiZx-0WdkLFrixLUmqJexJrjH4sSgHqbah9RL1dlGo43plbONK2-BlrurueJStkN_0gMJDv9XZXPUii8KWAOqDEBXcreMHOGUMZiX09AXwZBs0p0tVBRzdTgfATycLshTKqnzvd4VA=w696-h1704-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fRVByzBoNC2ZHa5xcOibwQ4dg92GqTXG5GfTA4jGHwkUSKd-8Ut45re0xSI_QqBPteoUB6qiTdKQzOo8EeH2Qz8SrF_mbO6609SVRaOubpuyb-IobR676pAgkC4YCTdpmVnb4ZhfAeonbBMH4p1Bj31A=w1112-h1600-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXrDyFIeiIWKwyXzvrKEyBflg4sIkhMhY6S3fTmB7LE104i6lRssSW-Nvhyz317ObEz-ZzbzGQFzTaiZQ4_cHFwBT4xVW-2nE4fwofbfUAdvYq0t52FLgpptb8pq8nFq9oLC9d4iCw6YeTKI5jmD6kkRQ=w933-h278-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUiZvrou0Xk3TdXS6JDnIkh5U0fueQswANw6zJf-BoqpUgx1qnV3ZrceBwQgLRU-cdfz1kCEgOAfoJWI0q7HTcXEXV53b9UR-GtnNVgrbUyvpl9CYFi1FDUlDq1XaUxM-s34e8TVPZEBapuP529iYvStQ=w659-h641-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXnqEFcoQ6dLf3lLLplOL-X8dJ_olxnGbqIAJ0l2ObFDC6sFTOHj7QxnTNNBs_imXs4xO8Xi1CbeSCYLgIk5x8hupJuayTSKJgGXUyHjg9WgP2KoYqqPqh4_XpewvMsLIrxkwvjVvhN7UHxsJo89ABXdg=w641-h540-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUJi_p3eAuraxJkdMm2MxVGtu9oUCePIdCui23bPxc1LkVQTc9eP9PsRdUMAgxgNtiQbnS-VbPZps5c42xeDCgsMvUklRx32rEC4AYRGTsqowyR0U1G9CfovqF1MWPylR84YBCgBI3eTAFoK1GrsXhrQw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXMWTcLKurlYV1ImxQ4FiDVunJzieKT97wpGU09u51NBwYbhkbehonfR7PRCjRxnwgzTp4MgO1qoYgZYYDgb_tLru4IYkv68g9dm3H3CUM3L3xBc9Qw26Wsib481coC8XvEE1LUAG4NDPw29B3ASDwPhg=w1610-h706-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUWdsTQ6xqFGXvUX40nSnesH3I8uY4ti1cm4Ce5InKY4V-tCyyhN0zZTzThLgk7GIFm1Dwa6JQr-F7FR7FXn4HWLTqxjwQFIpB1jcYA5tyt466EyXVq7nl0l6L-fdxrJjRwL7fTZXXyhZXoIMoz38dJ8w=w2028-h1082-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXb3j5cloN_lxV2MXZCRQKvFxvsTlrBKmMEDDUWNCdSa_Su8_-wOEn-c6j7M-ufY3dVCynkxzeEpnmeJbzVAtOVshfimS89YRakrK7QKXdme40e7R-yE-Q4-dtaeUFcTZa5dYTFF9EzfrFHMhxYOuErTQ=w1393-h131-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVnE09IzBhjtlRE3Wl8uD_Ca5XdA__NIOxemXfRmO3wUivsnOaVwIYTTaXQjwurTzh1mjG_LGwnNpxpOBrrhQXUO64IuYWMiEaIfD8_LvdxyKQyxembKajeqrhAIwLQnZjsybTfKm8mu9XZWOO_K7eR0g=w1862-h300-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLV_TTZU7u-ysZ2q53kMLohx4Mxvl3lCSWF9SCuZEMUPSt9D2xItNPM2x-AmMXn9CV8y4-XJoKGiuY6F7s3mek1s5LDx_8TKLn6MlsAVsHOjPpfLiax0efq2luX8SLQqUaD7HXK5-R4h2mdW1I3igf-oMg=w2274-h1062-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVNXWgblvI4HEtgYAbYMSku7YBv9UOU6BJFbVJAQsuxv20kQMthFgbuCqhs9taM3v0hrPEocxSIs4eoWvdpR-AeLW5EuTzQO3qKuP20v8sVb2CEgTVSDzzfJfoSCAAmhYWDbGQVAbwpSkhEWwbwk7c1pw=w1930-h116-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXYACxpsHTbyruakNdCDNunmUKtmyR0HCY8lOW37h0xmizE4u3eR9f29yeXQUQ0eJMcTj5453r3ca9aW8Ixzw9357yWVMUcBtUd8UnygIQAQjylOX7tZplBukKczZ53AuraDwMcXSwosdN9J5MVEo7e3g=w1702-h143-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXexbNmjdc4JBoyiO80-WSzehf-SpmjGLSozHn5IyM4NnRGmpqIiN7XPgu5ei8QwVZSrbvuq7gSU2oS6fxTSQcxoBbqnnVndBvITbTiXy0MV5UAooRN-i-ki2x7uKjdRgwSa2iUmzbPQoMffpUE3sm1mA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXUPN1BloeYfyJk-e4uvecnah8DdcQ6JBguL7puoe9PIVz1paIN35KVmJ2e0MeVuS34q2bhTMbt7pB7sgTxuzEIJRLaiy1_4GhvEx7cnXNg_B036IacM23pBRGf21NWtKqeYyEeFph0XyJb-WtYGYf6bw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVw8Ko2cNLRAd9C_fvUqmtcdKhhYb__cnLW1VwJVas7GP3FRiCgMJPQNQeAQcYDr1Y_Li6LUfO_Ck3dZP0k6mnHBKOj75TxU6JPYh4-Vr1WOrYX8bRGSFaV1So9iNRetJ6kOpLNQbp2eY9KqFif_VXmvw=w935-h293-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWKcETwjeqXU362GIAnvZ84Wtxnyb0FWGkuiBGIxEqc0AA5Vg8oZ5VF6wZWAMJ_YPYRKneA6UFRdeOADFaddrMxYMP3ui6O9yH6axKgD8n8BnbL4B8hSr4kXlI-CA3Dm8KZyW6sajwKc78XslWdFb4IUA=w930-h261-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWoRfpD4hlG_WSjcHqD7EgS8oBbstfbGha_Z7eryGOdIIDAkWLL-BEHq977B8p1JoGpPZEKyzo32WTM_ulcDMOQX1Id1uSgjloin4EiHY-CvTHrtvw2dCNM9glI_fn6m_cgcdIv2brG0_SKX2Emfdu2Hg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXqsALnJuGugpVSdoH08wMdr6vi9Z5ySd3kYRcuJP4L-CpaPs_wf0oAHTKer5ETHRoImZ9w_RqGDKzmkZkd8E9707yh-KtGBhQd3ibuSY4lTz19KaRuFm3M_l6jcEhzFSN8qcDAnPkjpFlPbfDUqslAkQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVUxv1dfWXqow2M8tEr4CK72a58uxedKuRaAqV3-lxW9i6r2lOoSUNATBQc9XnR2FLokBy8HjwjSLbxRnyZCyBkQdh-PRvrHusMM6KYbvaw5j2r9X27fp0-sreSaTz8VYqOFn1td3IyiQDoBW66N6MsKw=w1776-h169-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUaa-GwRSVtCV_zjXE6aYCfb0ePADywjL8p5GHfLpv_Wc4BbillMxxrBF0wXNoOA9FT5S-I5XgE5M8ZOaeO9SKQUGOKtkIOT1uNVZdE1c8IozZ4UYyz_XHJj3Z2qlx7RNENDtszMlTXVpkS6D4h17b9-Q=w550-h130-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVvPTSGT5A0hl_fHMc37wILzubT0a_TqmVAhSVo_oAOC0neKmWystDJz5fcke49ZqVZI6RCGLB37LIIU1xdUWEybYmt91xru9QUA1Wj8ABUN7Aj3cDXVRAw7vI9E2eaaULM9x4CeTtEnIPSvFAAAWPvLg=w1130-h547-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWTV4a7Z6oADUWFJy6B6quHX4jFOGL0-4uFno8ansbcMdc7zZr94GX4hDqcB3hrHi3E6BbrMuftPNgWIx843VSSaIcqZ5EaOate8vzvaT_dcqxrDL-KuMWp7cDx0ykHt5zYAcq58Avws7pLkTk_pxWhCA=w1583-h149-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXn1EnlaBEMWhOWolQERW1J7OARxUjcwSbrPw50dZzRHn1MLY77GkZnrIMMCBLTfvPqAVdrANClGAVlc5wSgavuLKPBl84bhY7suSlCiZ4g7m-lBsXAOYzg__bPbMHLCyUfzRjbLtP8Ort9TsLBXtINXw=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX42rISsnHKioBc6uBp42JC_RCBd7TUdN5vz2hfhh-7coZWVKq4IiHb1Qb6dkxADZPmHHPMAqLwXMH67Yg6x4CdFBwlKIQUO6pCK7c312GKuDRlFdMMaSlgIi95cAQCXKS9lfHkFi-yCnGu7L505U2GqQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXHpmWItfdsI9YCyJdRXw3u_8oUgK1AHQa05ALCf2Rhdik4Ma6HPyQkSTbb6gKcOWMRfjWtdSg0AgadMlLt8BZQp9Z98lHyKA1pXnEO29RkyPTaKO-kehVEXyaImVNjMKRU5I2iP-3M4XWbxfDpG7pUbg=w1246-h278-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUPJwBl67g5XW4BDAp5dUkRyVAdZ5fW9-u9ckmVI71__wcKYGLa_mbIMiwibpFxr4kX7M87kqmfsouxdEiU4lRtGl7-1Inr-L70UHwZezWzni2la8aBBNFa6AdqUPFM88Ssc4WFRcrX9ZOVMJQGThD7Ng=w1224-h190-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWgtstallS4PAJ3pDGxWcvTWfOBmTWJsEcFTy0T0jZ6yHLxVaD7piXBztbilFvhbEPzQArZB0O_K6dz6cO9eAnPQCvBfMbJeqG9ekZn4coOoWRSSK1tivZlGU89_E1En6BV2zvBWNMvG84zjaz5zuTXdg=w1024-h168-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXVV0CwdSZ_m5cn4Io5FjHN0AwZcT9LABcQls6PpNvjVqo0iRJWpTJQoGqzhp-sElpy9wNoxtu3TUGomWnu4Oy9QZzdtBJaehIg1tkQOh_tfD8CggfcAZp27JCyrc_geh0Ie0q_85FOVpXsDTh7TgZRUA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLUsxmY9vC7WS_-cOP0QyHDZSU00tB8EKRGmeRA191chp7uPLIYhTPIfBu7vHNOYr8_R-mYTo7BgXSE6BK3vjfGChJHc_2R4uPDaadvlG6cH_Fj449ru2hvk4QMFxFSdS9ocuE6CJDhc8UD39HO6CxrXQA=w1535-h641-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWjXl5DSgu-En42JXcs2VYqjLIBRTg6NYMrezZJp3IFK9jlq9kYGl5dYNC-Ke9dOD4K9-m0lp-9N9oKBvZyBurQ0hNavsYp6u6HPmWmuLBkcvE79z1Lyn0Yq-JjNr-Vp-pvgIVvj9vup9HCQchpijPzbA=w932-h290-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLX5O7IEg37z0sI7kdYUi2lNoL-z_eVJaxd2hXpkbAG6q5QvWkZSfmwrss3bYRs845L72qP5kjXXfHABle_g2NBs6h3KTz755UbjgUFOTAzcq0wcCcZR7SLRFIiYmuew7IxJvwzYLhhb76Eo-uBewNpapA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIkBE1DYH8PFGZ943Ef9MSupI_vqg8ofl-VlXWeKtDrmqDGmgvcZXJ2a-dsIQ3SVBLCryJn5OR5Z0ksnIA6e_uLau5SluieJn5o7wO8JKUSagw2xMj5p2lvXdfz2jae6bdkzaBEoZVkUeJa09Vnq-F-Q=w1763-h164-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLXOcvzNF5389SAhk5P0qo6qvBWtJaAjIOS8Pb7SPRvVWBeBqtTs58Bkg_pX8iVJWl0ip5_Cu-Lr65sHxSdrOcVlnK74z2fxbNeVPjECA8A2JLtrNt7rG9T_Xu9-EoS_T2Z6l96uL1GoFOj0mLm56xyFCQ=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLWaF6kCW1Mf-oVaa8LNdmgi5NTIuTw7Ahu87maWTI5PCnhGEVwLfWScHUOWsAL4LwiR2deZEBG-NnDkZkg8YDJu4Ni9q4qf1Wl35SNhRu1S2oqI32RKzvWjv0U3BhouH5kRmiLeNduYKlw8Q4R9mGu-Gg=w1252-h500-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLVH7J0E977PErI-lbE5psSSqfM-GSYPon4GnsuDRrttz4sYjRc93ixUvdIN97hzQAALTuEw27KYkVCUsYgE-VdA26aGD6qxyJnhMPXy_1OG_YT2CnntgByeoPh_yR7ua2RVSBBgi_p5nXgCnfZnj0d4qg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/AM-JKLV_nO41_bXjkGHmjT9V0UzugmugbVvdIB-f7e7pQ8mro6RlRFq6YYXMukVLcQjjYEuK87C98fQO5VR-Ovt4FDeCHXTCiKttCFYu6P-1-3MymK1RAguKYnWEvik7GN3ELBuiwuyiH2gjfRhIDzsaxWQ_hg=w1246-h402-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cSO26QFo7Tckclv8ruQaoKlzXZ-TbR9DjrVrf_jrf7pwsWo9uAy76tpIYhd3dLF-xSzrqfDrE8pGGbHLemJyiNGtVHGivHKWGbIwcdM09Erw6wuBmfa-ctj2KJUH9mDG2ys9VbX1FIS6rDK2q_BUMhng=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f7AaGmn0oIEvVAWCNtvVoxEYLIr4Jf0StvoypC7dcZBzSCHUl4uY6HH5eU5FLany9W3xVNZUi__Qcxc6Pu1u3sg5frF7z3qs-4LcFtWVWUNfumsZYTQHy1nEGqqm5mhSNE-64T4cV9h1iyC9YQc7DW5g=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cyC-ZwUSpO8LOQNHtHFS1TgQxqH3VkSmQfiJbjquT2aab119zyQDGnT_Sj3v91gOy1nhBm1ZptXdFtJcgj3_mn3QUvXzlQujHO6WhwXqRSzeulVwMDNUXoV8AlHhKrmo8_kusnOTbYj-uqHzeESHMrBA=w1142-h880-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3t18ugP1YOjiUarqL1URaFzrwLa5HXNQZim1SMYhiF4oRAoAqgQVjnq9r56IDVa24OGpYdQTLJ9S6eJ51OFbOPmTzpHXCxLhUFLH9_wJHEG7Bj-F9KHGNbtsD4HUtQC_FV_WBmp-YsQ0IeXoFGtC5tw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3duP8mZlftFYGFVlrZFaCOe8Z9IVX3hH0jeb0pRQn_jvOXFLJ8wIsX1cdpKPXkS7qk_ciG2TcLaRdT6F_W2unAoacxebyTxea9_qpAQfkcKJUkx5EthGX53cO_i13GFc4ItsCCTdHY7-epaeun_EJZOug=w1920-h664-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e0wrGipULEORbddHpKZR1nbi-MUTlLs2q1B96FV9dVkZkrb7EVp5mazu1bCW7eBni8qlHDoi_4ysSLU-razOg2TT2eRAlLKkB_et-jPAzl2zaxshlYvpa2rP8OV5aq01alnwcxu2iU1yzaRPFj2rkUUw=w1920-h533-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dGcBYsTleclC6uBJtC2FTVjvp3cMf9FYYPtOhCLnOKq5qdQeWmdSD0rk-vTVUo1S_FdjTC58S500yKq6XMe5W-4nd0WtNUBsbgqXGVYimuDV2ebHgzPiO5Uh3jHXQiNJg8Xk2r7JDL2oeQAc5FmJUfIQ=w1882-h213-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fgfqlee27BAbVTvP-eHrrWGpmNP80hlz-gkG70XVTSsjE1kWaXwTiyvez1jatj5y9IU2emaF96O5-n-YGfhUDHv1Rlsxe4Gm2i2QzIEdGHrbiXcc0zLDnuDDzRi5GR7v2S0oTVDYq0R_XeNVn8F1K4YA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eebs18pb8v6Rb02A8Fw2pW76tz2WGlrTUeoGevqlT8vmzvrG2dpMdVolAA1VE8ZOD1l-Z8JYPCcByIJNufSJG_uRNQhx8_5ACIaIBEw2545qqy4qKobmARDz9N3mTYux1nrD_85nfAdyBdKbINtY3Uyw=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dmDihT9j-YsC5zaBjEHDir8wOLVptthTIb0-Bhifjr2daFNgMqfgjcNVTQMqsUjtIQ3RBsJzKFiYfaDOGkbzAa8-OdAyJzGkEzveu-ziin_h0HSOVzr_MxfOluzbmsCx3lNj6uRt4On2O7o4Shf6vqmA=w1030-h1956-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e7g3-trWDYn-VbXpyorSseXoofde9xTy2v1T8976bzq5MAnlI5BQel78sjFH5aC48KvbkXZ3asw0CYINwCwmeILXO7ts1jwmSYRWY-5YLDTESzDh99l476woQsInStD8C9k1yjt-pMCor_ymTCzYUVAA=w1734-h385-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c2dyTkIpSWbNBBJakWr_Pu4u1AOdhl2kufY-i_k7laqVaLg9lsGGv3GOa4Ghc9xRmzL5nmAZNXwJm9IGukXz2u7PdIzx95y3vASdKPfASxJ0fCX1m6xsxlkRkIZ2_TiY5F9E4A6obx-VlMVfFDMEq35Q=w755-h682-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cWpndpLGpdel-0feiKGWaYBlJS864wq9elkDf9xvIXoxlAGnQAOGzih5FVwzUkzbKbhzd2tv3xYISsHrOFK7vYa33iUNSJKU-HGtdlugGHcJpbGmb-1F7OrQBLv3WplWs59Rk9HECSf7HJNI__TP36aA=w1246-h234-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3edOeouRpQrg0APydxGtWrLzPtXzno60KJRvavAwT-_ip8OKxA74cMrumeLK78LpgjkUgiyHe_LH2taeEw_M6zwjARl6EwSn-p9hjI3WbQavPY-5_ueqdFL8-Ozh7_XDnz8EmWIKBk_oQBZoBc6fmnSTw=w935-h496-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c7To1y-Gv_C8DHS5hxv2ybC6G_E2X2V9Qt4l3lFybqNZHpfgZjo9AB3XgA5lVNqQdTqn0STNrYWUYDCRbjhFXXpHwiykAox1z6rvFTa136JoVWhcrLTL1Zf5gZKaHP2_HIBbCKuawLUgCdk5LMUTcaGg=w1106-h650-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eckqyzsolfIylpcdUGJzkB8WAuESlS7ODm6COB2U6mtO3rJZpHvt_2rsTG-uYrs-Z4TkJTy9ypssGuYKExKOYYdUSX5lBcT6MDeGT-EOcNhqy3umgIqOJH6ZI5v37F4RM5HHIMIDKCfnjXJfy6un5rrQ=w954-h318-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eHVehy3sVTiOIcET9Iy-ffFaeXV3-TvpYxZxr9LBUZXKnjw_1534bM1ud5VGCYGCXsFDpdWeI6MgA9EEKCf0cMWKloeG3wMzLe2P5SqVhJSXTEMbraRct5NQU_A0eIhYtH5bcP6zD783V8o61heVx1EQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ckdHvphYtuNvBxziXZO3dOyPgc5ajMLTANJm3sepL_yCNR73EpSkuFw9eH_uG3UuDsViPGlAPmOsrn0CBsNP5vx7Grgac5ok0Uwy4lWgfOtZOED4NzpH4PvrOP4s90AEX_MpgbC5l9xjgPni8INbe2Sg=w1248-h556-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dKmJzViH8UkDQTfTQjD7FItWtMNaq8BoszVnUO4ndwJhL9LDoAkH5vd-pDMAWvDZQq6BXaYrQcbmBK2K-VhnvO4yl0IC3P5xlpoDQXscZMrsJWdbty_7RPwXM-ZjUgDEdclef06d7l_UwuT4BCEKsb2g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c-XbyvNaTqFTSfgemxw6k9nUgwmAWuVWFDU1Bmvl4bv9L4QClJgOZ-L9hVYuaAybOmBThFITRcer-IDvAsrFJA0FDChIl4x8_7jBPl5nYrf6ZqOBy-DHjmYZmV-106C_JEaDr96aEwHSzxL2rqf2AOLw=w1246-h550-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cZqrdbv2sTNYQQW38errG1i0rNvQZ-biBHtErpsX5dzXtLDkB9CA4SHAxGQJS1lw03kjMnqpgHG4dZ2wNd5CB5tEVC-JDlBGdg3JwG_wGBpW-srpvv2AI1fIRqXL-Cqp-OIVbYWjsg0vQnvRLvNnpweQ=w1244-h718-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e_bInAdCWt-qXCuzf0AgwEDPjkHQvNbk1uGN2YNBizGPOBV8uHHG9yhVF7niqPMbRaT2B5ELCK_sWhn3Qp69Y2qZky9tWvAKwj4Qec9KKVRdDVx3DUlPBr3UdC5P6_PTmacTZTDSM13_RDQPiol0CcXA=w936-h313-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dz9YwaHAYbIyVtgpuxreP1ntNpDvDxBJXYwHZpc50MADXEoaeW2KBQCcUbIggz0Rtlh2EaXQsCvyCNeUwSt96hYmNuBVGRJqWGNM5-O2K-pj3ocWHpR93z5rK4eycqGWuS84a8zkGEwfpmrNrkPDSwaQ=w1142-h550-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dAR6AbAza5i9xMCTuqwvgmsj8pc-dlaIOB_mlAnbc7hTzgrx4OHMWXKTnaKkchd7p4KRahAtUp9FsU57loYKzpmdG_9GifW5yml8fOLDdjLK26z7TPjJj-giVM3lEADdNVfE3nz4Sb_lvvh2xhuywCuA=w595-h353-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c7GX0KbqPB9OVuzff4NETxLU_nzcmObkyF5l-e1sRhyUAabjqGPf0WLKWS-6mLqCwbX_Nek2TaN9SwwPvVHrNTET6Ho39cuj9YUlRYGHuvZd6U1kUKzN1Jk9JBjBM1EN4ZzHF-x36G974owdhv2V1LpA=w936-h322-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cCtL2A63LTARWu-hEyQG3LJ0fsBZZgKyEZAtQvSKc0u_0PLr-XbPqHFVofgxRrnnXSuVlaNbM_5n7ultrqY3_iU7-Hpe2Ckx0IB-AdDEv4uG79ae8OcK4q337ULzmtL5ktwqOD_3oFOMxF0I8g3enabA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fmxHm4oqxdObXYVp67f0FSPYuF1pqkOelOLe5EITcdQO9Iz0rs3AJYlNpXPYWA1snKzXpqK5HDjsA8EmozMDe1HUzuxRp8m-cfDszpic1dC7YstWJfx_KOVDQiYTP7qXg-sQYczWlT8fwhAtxA5x6Qcw=w1224-h212-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d6XrB6349vQgQoK_La5csGbI4nstaZ-Ezxt5Nk1eg8d-PQTVRgQoUroWeJ77r6LGfhIdysvJsfc31UGQn2PG-Uv39eTD9b1sfvvmmf6LZT6UeGTZnpkGvpUlCYozdLC1A-oIl8v8COj0QsLYlzf2MBbQ=w1312-h213-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dJNJu3eLqn7iyxvd8yAjlY4hmvlFBYe-ZDu8v-NiYYXxOl4bLCNMeWTBEkZyzjuFbgkyy_qC-ppjVUweTC-DpHj8qiY2RN3rPHWUd3h3dZkqn7Z-oOiOcG0CTqbfTXKqS_K1o5Zmod-cChLgP9FX6Y6A=w289-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dFP2FZprix8YnJeCal1TE_k9vGDq0RXu00-sXPsEGcJapezAG7_7-Lh22EVpB8GpbyJ2ESRwom3gUetuoqonrgxESXZCMNSH0fJ4XofEhr4CAzK0wYeNp2ZawwEP8Kl7AJbXz0kpM6zLFUBM5vxhJHNw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eQVQ-2nKccx_-X_bDKSgK4B88ZOPlHTuqGamo3oMqCPZw1QSEWb9j8QMwd2YnT8jPsSU6nk2hJT9H_0mdQMuvwzom_Oc0IqfJty0bPApUbidIJGZ8-gQ9eCS3g_sqI_j-PlXGfXY_fWoFqA2GRtkMIbA=w1502-h2002-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fwb828g3KZqAlXBl72boE1KCRFgEc4lOr1b_OrZL4rqiW_XsDSV2NewvgloKrnbKJ35lL8uS85_03ym_tnDG6Dym2YmRb7r-xKsoGEiBA-1j4yb1NpL8CXlN9Dl9M0KMJr8OsJVw2trCW8qEAmIedLSA=w646-h369-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cRZuSIR--SqaA1Jmk790QvArTf-pPuQEDVhnPDja5wqHLKgYIuvoJpJEIB1cIjz_l2QX43sEIuau1dg_BdbzJOqdvaHA2_Irlq_G_kKBtc2XvgcKN9tcdjDxM0zs8rFdFONU2aW6rSa96GQTCXdREXtg=w1553-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dMgwAyApcUMnrXbDVyERl6T-UKA2D2NwJO9bqPEC5bHj5KW_GkqC3Xvw_DR69YzAql3udSjgRccGNs43_2ikhz_qSpNNze9nfZM7Sj4Mg7Ishxo2Cd_eAaX7yGaJ5N4g76AG8XoF7cEDfcotp26-JntQ=w938-h423-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eVu2LJOYhiglA0GMBVFHROfy_h_uuEmiyIo51vg6FkK43gerREUf-UW6U3uktSU2dnuauuMFp2VhlXKuDOWggqYUmzTh544d31TO98Sqajs5o4-HbG5Vt2odOMJTsitJrgAQRi-_5AR8g2WqJzqtTdiQ=w964-h447-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dlWDXu2kUHYR5xX7tqVonAN2sF34FGnPcGV4TBWB8wERuDo9PpxwIDj29-kDGyJ4fmstQ2nAiLO0KyYs9utS4Eol-JL8uu5BgGGIzLzuyuCvxAN4vCd7hn-Rs7XoDLNzOMMVNv8SfBH3BNblO0-TdfcA=w1586-h125-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dvFWlQud1Rci55YPu6kTIgSTLTpyNRTldzVAj99aRCwH0Kaxs_9Flo4oWa95emmjGb4EwRf_bqcIzB-KI-9_Em6pDA8iASHhe2j-6hOQJ44W0938UX5olwDmqFC5TRvdmNuoPsLYEA323_N6MXFO8Zmg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cLn0wcLCUevbOmThBluBWgaQmpOQNogGhpf67oyNmS9AvoAlnMD9EXGZiMfhq6VRmJoxZu7vmtvOFXWiRRZf1rZYKU9RSat2QmZ-vFRtoOx1HxGaXjgLXu-Docl12pJtwvE5J38muWyaVvtpyDzEQHEg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ck_926eQdrihqnNHzVWFn_SWBS0_1PKqrx32WDH0L2A49wQf4OicPX1GfWwncmvIJFW9vdJsFD4bY2UrhW08f-bGjiLKQX_fI5r-FAcm1Tu6WtEl-lz6WkR4SsfQ3e85b58b9S95cmb8UUPcyzJAeupw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cHYzqgRqJ8ZaYbS2kTw8gtDXclRN7E-0di_BJtYoMTgMEvvjF7egbVWOUU53YGsth5wZhxBe_osFuAqzWdexXZBH85ESGudUcHnyMdVObiKMuBPAAacC0XsADJCiHO-29Ev0OelGmtiIADH5Bi1-jdQg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c5Tpy-aRjLb2xaKmSZCizuJixrecHy6K6SIjtC1uahlFWwH9CZj8KHuKzSy_yWtkdDhuw_5dcMRJNnwA2uQpIzHt0sZ-4nEWmBFldOG06XjzQejVUAua5yq-BZDg2jGUuyycO7h_xqiHTqD67vAyCTqA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dfvkeXl_7l9RKn1O3NxVenhOusaVroFfF2ocRcfKQ2O5nmcHqXhd5mkuPp0FUkKScmNcaT8q8H_XeQ0hdDBbLijoq6GmxX9Nrbczij-XeeD91yh3QdboPoAdVzsPp4etfG75IYMXpk5zVnvmvVM_ibyg=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dH_pD7q6HmrG2sg8GNL_SpWCCOkjZ-hImqZS16M3F8mGGH7Kgv4hOS1wlMJ341cIn12pdH5tKzNTtfPos7Z2IMWTzCD_YG6zOkM27ZzWdQzoO5LqztgWQ-SysY5zMtsH9QAq6fitwC1Tv2nYgO2VJ98A=w1100-h404-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f5MDcuzuOcB34ZCH6k-MThV56ck3z8OhZNEsQWOPXzewbx_Pul5TccXmIt5UVET1PrxNpY8ewoiO1-EpGk8wPgDIth-ZorWwMxn9KO2D8ipzsIV8ROrVrY3OWloXCGYOGEpp7EtToeDZ15PnYElzNT6g=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eD82GqeZe63k4gFbdSaup__AFNwY2TyHVOVWBx5nG4rcwpNTQPUXH5Sh7dYjwIvaduCpiZG_AL-XGbyzCmlPI0X9Ii0n6_u30S2pne2_BMLhysiTyvqmmH7biQn0hsb9TEL_eI_SVQuM2gHZ9izsvjtg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f7pdHUMOZ0ipSV7x_mabnyHdyOnn0NJiP9DxoROBt2SDKe5ysk_sHgRv-5oJh9g2dUGVLdqKwF4ScXYsFKdfNibpEu1qtK-RbO3DV5-Mp7X-kBO2-2JfjRTvhtoWXhD3OaYENE8Fj0bLsG-MuRGwldMQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fet0e9Sg-H0Et-kFdSd4dmQP9f4GUEp14iGpTP4w1J-HSNUv810FSy9KIl4Ulv5Gqi2hF9mkZL45Z79CIFdhnGcWcO_iqNdPDcvu81TBDFpgCpIw9cud3vDWk9P1J9jE_Ghxoyj9kIfYKetvgXipQPdQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cMGmLJ5HwqwFJgOomC-FJhJax22fIhUeUpBCI1qNRIzFKZgFYpQ15vcUEOURMN5Iv50b_HuyD-fPwHDHNC6GN0Nn6tPkdOHxSzvqdErQJdLBadSEhdklj3c5XTi5yDdEWb3NEEAuzpeKkgrhqZOaZ5OQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dzFwpZNY5_MSkghxMHvmVoHEPYkNNJhTg7e9eV2iMNd5n5FhrI3BdgTv6GWJeIUCpjP68xEgoet2xoljwjTeWBwiYWJAC0gjjrZOAV2FAJuAyEBFvio0lse-H1T_OpJuYuZB94MzcTObMo0Nl7TsXNfw=w1092-h612-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cW6e8Oe7SR7IrjEv80v0x8trzLZi_1BkpcnqQHFCuZukd6RYz-kMqXB7eN6AVKqFDaY00vhKailnSiQUbM0sRU9-ly_FPJB-_cay2Dy5hrZJ1b8VE2R1AMQV7XhKz0TB2Bezf1aN2TKEcXqfvPCQ_gvw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d30nPsE9aOzazcF_KunVQO7N8WxpCcqAd6xlW5M5f7qY52wYseBSDaZ2UZId9MyizR6XJF_grHe0TP_eeNSIMWPwSGaWY50KODQ6b4we_qCNz_H3h-pq9vaBpjVpMr4jTSdSUhadum--MZ6SB0oKqWpQ=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fNMv7iVJfUoAGi3CBpijs6oN1lS2sJU0lfeqZ08LbUusdjk1KWGu2JWSNU4pN7foHarjsf4LBq0aLfWfLRYb2KiuAtx_tXzh01coM2qlicZ7N3uO5KXtrZSfI_ruD9Zt2UzBjhBY6TcCwr0NQw5PPhYw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dNiKlPYFEVYaFoU6hMupXEjs_UNAjjhSflTVjt24T2YG7YnEPPyFrdA0sOXZGZoOJSiZgyu-0Bo-H9qNjuBbqyi5NezcrVeICa-Gk-Y-9W0kyR0cSQDpl_6oLt0IDKZ-ff_TPYU7dfq4XLWdVytjwk4w=w1142-h833-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cBp8gFyvZHdM9cRknywRl-1bXGyYiIZ90NMS6k5TBtL9FhjVbY7x_fNjUszd785aryRvs9milfXHgM_OflFSuyiC9Y51PU_ngJywi2n5yifZEyHeftvtyJk_2WHd4kCYrZ82mHxX4XiTF9HO8kdUEBcw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dztqVh_OItXI8hcjMmg5fZXB-4eSVDsD-XbEJOZ2UHZ54hBjOei1E3m8wMPEoGlqb2id29hSxfwNBV7A_9nWzpKyxKir9gvQZ1Ke4_J-TEv9cSgz0gwzpsR3lEEeagtxxxbtId3sfEDHItrAncZmZKiw=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dDeUFBKih_YOvZUPhdjgtlj21G7dwDKlSWsfwtMIGb23uEmNldWDVoWlfWEKo63ixi5GqfPRpXAXjQSUO9SXRqs6-vQmqifLclt_z0gn9S9ZnJ8pmhYRfTMi95dtiAubODl_EFA3-FzO3AxpOvutr-HA=w1142-h1522-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fjW0XEfmW2DyzVQ4VCCMFUjfdGCpFWggzuTG071ohPhLEagEzLpyZ8BRURKjHsLcJMn5GRWweuRR0wyZzMvYTsP81Az-v0TXmvXiHiiAF2qlUuatDXSzpvf9iPksJQqcEDZ50CjN-VPq843gaJKr7saQ=w1920-h1440-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ekwu-P3VY_S0_1hK5J-kdfmp0wrN7clSPT-G2QjU6EKZSy3fCf0DAhzvrIx1KEg3VEt9dALWAzccCgUoHFTEiR496rvQ7eNS2mIwniIO6gpzvXKB25z9SlBiNKH5VwHoQxmAa2OmaOUkmIvNFwed_OwQ=w1922-h1082-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eNnbNqUcPVOcj7T89BAI0MySfznedETHOYkouABM3KqdJCYYznbPScZ_2GxXRIp7JSBPGSfsSqXC7gIu7c3PwOoERWGiZET0SF065Ag2ZQnLLQ8Rdu_xPfzqdWxNbJyn__xqHJqoiNyYMvgrYt9yOqIg=w1400-h1178-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cIlzcow0TaxIoSNLt8t-KlF4vTnzkHcxpAd5PY3G2ZO1fTRlCHs6mA1QIRfmvLrd_KEh6aAfrBwKnIYJ45atJjq-chqsdUFDTd-vGRFhPA5HemoO11mRlRgR6vCTg-tZtHlROplllre7DGo558OsoTxA=w1400-h1258-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cSrjdapjyC57uQPG55HZIc_KJxUokfg3YQzp0CX5D18325Cki7ho-O3jKdMCbKMdEym1LtUGrd72KnRLI40c-d3cFYiLzQE1m9NpMsLELWTS0x47Qs67rU3ugnXxufRO5grKF6s0YLFFhub4aVo3gBuw=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fgHsR4hH9u3VrwYE9FWHyJhZw4TsMHM5n9tbLKInhgwE4dX8_8woqOxqklNzkxmwPY6Qe55JyHP_7BA7BVBflzImjiwGuOfe5Dofwt1NUgn-DQTofoz41BRZeUrdnxC1mTKEUbFaN6znXnGRn31iH2QA=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3ebqdFM2ZmkDrmMigbqRe887FSRNiO3_vPqVRBmxWNaspmbTGfZuQh45FpeF6sGvmpfK_R3AkEfTiuoit_CugmX_l9CGELIhDD2qNAbc-I_goMzK-A-20n6gJRwVsyfQ0hAfsVqsXTRYdNnHM8yfOdfUg=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3coTHFB5d9fvCUVMGMT-ygib7lAk8LmoaCKKdXoNapFR_1ux8klLdfDT_XMcctS-HK8Ts_djId1kf1-0Ut6SKCrLlXCQ0CiBBCJ5b6SIVXvRAb7wAvHhelbeA2oL98AKE4H5uR5ayP3OipquGwFNhIN6g=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dgsXj5ZD0YgEzsv6DA3YvsBMak86F_h23dEnDnd-hEJWuY9KV5s7eAcUb0D2b2I7kRHYahe25l2w9QsB2JB6ZA9YrZeUcR4lhTRpzdOVhnomMCtmDEW8NT6NrJvn1r-psDcyq0o-8UcLkST4t54ueztg=w1400-h841-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f8F7UIcwsl1kqV9s8A-iZ62JiTHlM4hYJCsrvNeyVmTS_UlzKN97od8Ii-JRNAfYH5aH7xP5TopMTZdN-5YiNeWoI5q3_ptgXzreCB1EqaOlNi22_meBIrlSkRhCDb5zLE2IH2yeZlB6trQKVSyv8zYA=w1559-h744-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eITBPO8i_Eaq2_BvUbQNGY-rY5vbz9kVaNMCkotQXVIUkzjkjh6t0y1UI_gH04U9JrBvLNX8fSKCmBYx_5nMG9RV6mGCWg50y4g8XZoqqF4HyruWRhd9Mowml7yKFOmZl3d_PP49EmQtgbzJt2h-Qzvw=w2940-h374-no?authuser=2">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dnV6FOj-6J3wQ-FDwa2S46j11ngndzbvAaG03B6HA7oQrTP1xyyDigAyt4L-qgZWdgSAiG9JPg3DSEETU8rqnl7q5dTdUysgbXBYqh2ZMJHvKie7t4eFJWbbST28-cRH7DzQpkmhskx7zx2wI4tS8w7Q=w1350-h150-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f9w98Lp6bWxrsSeOPErWilxclYurqga7yfCDB3gdoR_J4CG_nYoUasEeGzfUdkH3JuFIvNQkfIz7pF6s-wXCh5KiucijT9sI9CjWe2aF4UpHQ5dwQiMsNvnD2V5f1cS4wMxoZV74RgnfGRlRdFTE2QfQ=w1098-h166-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eU2uwBaix5YszaenNWm8fXL3IJ0ayqe9qp8apx8-Nq-vJgUYvpbajziTM2EFmPxruDe5_oUEeWgdnxnHAaqResY3qLFF0RpN8IA_n3r-TCjneLaCexff3MWUz8_4u4Q7Hr46ZlNd_jXvvcWrX7XP71_A=w722-h282-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dKyHGO5w46f2XGJMjIE2hm8CLTOHEtA6ummhPc2JtSWVfW1zPZp0kfdg4psDTciLU5Jh8lgEUjJqd-RGGE3CjwdkHE_xqH4Yh215D-TEW2cvmkr3BsW3iL1c0zMODa_L4U2BY6U4uT1jSR71wWO5CTEA=w976-h156-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cRNgaEJnYozPr1Fu1JgGhNK1m9xvtJa_FMBBI1f_4VxpztvbMOG51HJseURsQ594Lm3nCVpCizBHk43n3zdaS0hyNqgUla1qMncCrOlegqsA6PUZDcfCZ4xdmNXZfNDm0PzrmznB-F2Pv_JHCykDF8gg=w1194-h210-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3d4VGASGTQBeW0k4Vl5RMAB4soLpPjR0DmM8GvLBhA6nTnohK7dkDxDEwBZ35QbYmV0vgqt3kE7yaJXG4NrB0oICf12ZkudAVgi1s_fvLG_OqofnS8cv8WULW7JfjEF81cDhwfgqUFLB748n2PzmDIDig=w408-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f4lntKBqX4j2wgHYDVmtHRmM3rsj5T69tGNW1_T_NK13JKp5-GZAseiMbDlkmWtIEELMCrr58GMREp2RM1s1gZ7_LyDep5lqzlom536LkFYaoy5cnaGliBOj4rBAi2OLQj2LjLgVOKhUJZ-YNfLrzwFQ=w852-h142-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dtMv8Io-btkq2UQwoqVM0uo_vYJC6QCr29XDqc4lQ8ayt1h2d4vT_XURAirpy34KHND13o5DmB6Lp-gCMrIfG6di0ygI6u7vjT995tPwFABlkSkb10yj2QVCCAYuEdfhDwFclx5BdMhSU3MT9-aaQVow=w1200-h202-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eoskj7AUogq4jmWfLb7-dI5iGJUWz8UV6L5eDFXrafIGL9w5ZaVIHs9-XN3KiLWMuTQ_HKFvIpc6Za5G5YYlSJaQNwxp_gzNWrG9uYEwiEXvI8jKywSlEVtFVn3uzSRQq8Hw7fRgDQ-amYaa1-nW7mGA=w1352-h212-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3c3GhlwuBEL-0uPRC9FJ-ImkNJxSXb1HDkRz571CZkFs3ZfoH2f2TV3_t4QVeTvWIVyKMo6VniY6dzp-VfpvOiFWCzOEeCB0n1JysgCnDgVMGRWX7Da6IQY9jbsKy0i_9yDxGgQi6jKjkAgGkN62ZIXTQ=w1074-h260-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dlhJ2763E6CXuF5pp3k00zJTFc_7OJgHVvjth0NQCHyrPvo5pmY37E_9M14U5iyuZdAKV_ehH9IY1lGBpj5cKq0wM17AiyKUUbjFeGy4IyK_Oi335QExW8xShQH8eTfpI3uJRnuH2g2Q3u4_0zBWMnHA=w1072-h204-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3feB2ngYRfVdXNaL3c94cuoPCGBleI_fkgIZxm-CgRI6ALNMgPcRshpeLH_ZGDJtO1NZG8axLMUO7h4W-2m6IXVBgsAn7imnLlN1w9EMLOe83frCffIpBtJN5IDcfqwdqrsmjvxk8zpebhTSIExlYgKaA=w1254-h152-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eLNtMOG3MF8YjmvFeuyU0E_1DFukmbz5JOT_ZUOH6GXoUnsjao1HKaWmlr7tjvXHeCo1G2DnO8iOBgqa1SvPgKgYbL2hsdrMTyhERwgLWbHrO2ShsIbjIbhY5asOEUyPYYh_CO62Me0zz4SRLOB822Jg=w618-h152-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3f2Q6KEQsP2PqS2DY-m8VwUYZAvw2gifnl2WZQgR-4ftknaxYFuLYMskW8AHy2Rejfk8iYdsP1ubbgILMXyl9_Q440wcP9YiqzNjsRQ7w_jop4QttbJsFZdZgSZg4HA1_zxLT8L54XkbgAjPqYFdxOMgw=w732-h102-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dF4ZjW2F4Us_lz5QG_fhn3FgK_vDcwYXzsH84ISaw24SAKvuMXX1Om0FLDBv0CjOPDctRE4vhWsq_TESBvtvOhw5xX37XjGLJ8aJfMfcOhTnMap2rS4zEenBIVFUJZRPVxIXx2uuwcpL7up-iua1iGCA=w1658-h102-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fPAS4KqqtzGeAU12yKAWD2BP9Zen-xVonh7-Gh6E5EE8jc8HenpqFzj3OUG58SVoA7N2tqY4__6RJoTRi4j05QyWYjoJ8NRj7yt5AThkItAJjPcGd6uGvFIWrnHmlc4Pk4JibmiSHF_A3_PpBedzAzjA=w1044-h280-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dZmUV2lxpqaVP8bgD6SCJAjA-vaPSY0RQaYfWCYqo0NlODpYV_1xfvpo_BKcVeVquShiT50JFTyzzjUTd56MBxHDgizOwff27--7doto15R4hZVqJRdqCg5iq5o9p9BGA9EoLtZTUzRWb0QdOO-3Whig=w710-h160-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dBcljw4liFBsgiYPQ9qeStIrWDoE22Xba3Zyd4446hYqcdDfCmTWijLiSWx-5bMkxdlZQ5M8H8nToPlxfjf79xR710ax3LazSzRJOEv_0xxvh5ApzpT-IY2R5peojEnIX1fVOpC2FQRCvsrUnUOk-W_Q=w710-h160-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3fv-rQ7tzspcmyeZ2XQUaRcRD9rrd0RyH-gxr7NOXB-jOBoIUKZRf8Zm9ww6m1veO0MO7Z5F4H4U6Ho4MOpnsiZlm-_kamXXv-Dk3MU8EYSz297cq8MZH56BqOIy_0xaVwBqssH7tsSmAHIcHg8iPr77w=w774-h224-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eTTAw26GSGEeuRePK-a-nHoYnqV-CnjY-sYCnF6QrevQ_Sbnm5J99Mn2tTK_Kkn23uaLSuc9v1K_o7gDKfNOkLxhmX5ilCqlF9zLluV-KtnjEN6q05faeaiVmLTA4MbmEXYPdfteBZezRladlBEhqcmg=w214-h164-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3evheWl4A6EdFxznfZBHZ2EZrpoCIfbblBndOR4rE69PPacvJNTtvPak2V5f9fqwFWhVdsFnjNKSu49PlvOakOKJMWqvdCBe2JfDetwMba9_gO1z_3zj20FuZwoHJT7ux4V_IS1cdPwFyqekyiGNykNaw=w364-h248-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3e2PdSbQRQ1cIqySO17As5bRqmoyyPF4pWMGWCPPB7YOs3tLsB7t7aV-MQZ3a1pCmJVsJ6h-losYKEbbedwOLjzhu1CIer8tE9pHU5phwm1dlldS3Xj6K-6ZzaCa8gX5wOKkvqtKmFHNrrrX9GZwZXjuw=w264-h248-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3dAIYjJ92lwi-2YKq_9IVVY-779K6GbYuQfgdjCGlSJAgWeaBVWJrzwMtQL2wk6G_o8vLbJuuyIT3BcHq0OTvlw08sMFaZMMytL10EbfhiiIwQyDRglE6XGJMXJlfYVjufFRRSWLIlmTI8pnIniMb71Ww=w3414-h2002-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eO_NrScVvF5M6te4kEX7VTplPkSEI-_0gkyRvJgKbeeANIH1XkUiS6nXi7ELtyGh0EDk4S6z0CR3WtHfsdEuGh4OQYaISqeEioE2dY6p0d0ENZAgD10YOsvnXs8desk4fYwGgPX7vv9Pa8Rq_P04qshw=w920-h472-no?authuser=0">
<meta property="og:image" content="https://lh3.googleusercontent.com/pw/ACtC-3cyStcyEOpQ3RC-ZwRm0sdp2S0QJmpG6vdYXhw1tIk3TqLLIGYxiS6zcaFguwpOxOfCbxNI5CP6JT10C90alEBwRuDEF5Fo8qTm54RRQ2k4jEZBVwqn_pM4NmB5aYf7YVCJx1B75F_EzGPAEv7pzsMMLw=w3158-h214-no?authuser=2">
<meta property="article:published_time" content="2019-08-01T12:32:19.000Z">
<meta property="article:modified_time" content="2021-08-23T07:30:05.885Z">
<meta property="article:author" content="Ray">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0">





    <link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
        
    
        
    
        
    
        
    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135063928-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135063928-1');
</script>


    


<meta name="generator" content="Hexo 6.2.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/zh-tw">
                
                    
                    不學會死
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/zh-tw/archives">歸檔</a>
            
            <a class="navbar-item "
               href="/zh-tw/categories">分類</a>
            
            <a class="navbar-item "
               href="/zh-tw/tags">標籤</a>
            
            <a class="navbar-item "
               href="/zh-tw/schedule">行程</a>
            
            <a class="navbar-item "
               href="/zh-tw/about">關於</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="目錄">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#前言">1&nbsp;&nbsp;<b># 前言</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#未開始先談移除">2&nbsp;&nbsp;<b># 未開始先談移除</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#使用者帳號及權限">3&nbsp;&nbsp;<b># 使用者帳號及權限</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#資料備份">4&nbsp;&nbsp;<b># 資料備份</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#資料還原">5&nbsp;&nbsp;<b># 資料還原</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#dump-file-還原">5.1&nbsp;&nbsp;# dump file 還原</a>
                    
                    
                    
                    <a class="navbar-item" href="#從-Binary-Log-還原">5.2&nbsp;&nbsp;# 從 Binary Log 還原</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#中文亂碼問題">6&nbsp;&nbsp;<b># 中文亂碼問題</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#先確認-locale-狀態：">6.1&nbsp;&nbsp;# 先確認 locale 狀態：</a>
                    
                    
                    
                    <a class="navbar-item" href="#locale-修改">6.2&nbsp;&nbsp;# locale 修改</a>
                    
                    
                    
                    <a class="navbar-item" href="#確認-mysql-設定檔位置並修改">6.2.1&nbsp;&nbsp;# 確認 mysql 設定檔位置並修改</a>
                    
                    
                    
                    <a class="navbar-item" href="#修改-database-locale">6.2.2&nbsp;&nbsp;# 修改 database locale</a>
                    
                    
                    
                    <a class="navbar-item" href="#修改-table-locale">6.2.3&nbsp;&nbsp;# 修改 table locale</a>
                    
                    
                    
                    <a class="navbar-item" href="#完成修改後-重啟-mysql">6.2.4&nbsp;&nbsp;# 完成修改後, 重啟 mysql</a>
                    
                    
                    
                    <a class="navbar-item" href="#別忘了-PHP-locale">6.2.5&nbsp;&nbsp;# 別忘了 PHP locale</a>
                    
                    
                    
                    <a class="navbar-item" href="#還是亂碼？">6.3&nbsp;&nbsp;# 還是亂碼？</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#匯入大量資料">7&nbsp;&nbsp;<b># 匯入大量資料</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#修改-my-cnf-或-my-ini-檔-永久性的放寬">7.1&nbsp;&nbsp;# 修改 my.cnf 或 my.ini 檔 (永久性的放寬)</a>
                    
                    
                    
                    <a class="navbar-item" href="#暫時性的放寬">7.2&nbsp;&nbsp;# 暫時性的放寬</a>
                    
                    
                    
                    <a class="navbar-item" href="#匯入">7.3&nbsp;&nbsp;# 匯入</a>
                    
                    
                    
                    <a class="navbar-item" href="#從-sql-檔匯入">7.3.1&nbsp;&nbsp;# 從 sql 檔匯入</a>
                    
                    
                    
                    <a class="navbar-item" href="#從-csv-匯入">7.3.2&nbsp;&nbsp;# 從 csv 匯入</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#大量匯出">8&nbsp;&nbsp;<b># 大量匯出</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#查單一資料庫-size">9&nbsp;&nbsp;<b># 查單一資料庫 size</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#where-子句操作符">10&nbsp;&nbsp;<b># where 子句操作符</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#EXTRACT-支援的時間格式">11&nbsp;&nbsp;<b># EXTRACT 支援的時間格式</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#DATE-FORMAT-TIME-FORMAT-時間格式碼">12&nbsp;&nbsp;<b># DATE_FORMAT, TIME_FORMAT 時間格式碼</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Index">13&nbsp;&nbsp;<b># Index</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#加入-Foreign-Key">13.1&nbsp;&nbsp;# 加入 Foreign Key</a>
                    
                    
                    
                    <a class="navbar-item" href="#移除-Foreign-Key">13.2&nbsp;&nbsp;# 移除 Foreign Key</a>
                    
                    
                    
                    <a class="navbar-item" href="#取得-constraint">13.2.1&nbsp;&nbsp;# 取得 constraint</a>
                    
                    
                    
                    <a class="navbar-item" href="#移除-constraint">13.2.2&nbsp;&nbsp;# 移除 constraint</a>
                    
                    
                    
                    <a class="navbar-item" href="#移除-index">13.2.3&nbsp;&nbsp;# 移除 index</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#取得-metadata">14&nbsp;&nbsp;<b># 取得 metadata</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Questions-and-Answers">15&nbsp;&nbsp;<b># Questions and Answers</b></a>
                    
                </div>
            </div>
            

            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/mysql/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-tw/mysql/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            MySQL 學習筆記
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-08-01T12:32:19.000Z" itemprop="datePublished">8月 1 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/%E8%B3%87%E6%96%99%E5%BA%AB/">資料庫</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 小时 讀完 (大概 57545 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="前言"><a href="#前言" class="headerlink" title="# 前言"></a># 前言</h2><p>如果可以過目不忘, 那可能就不用寫 Blog 了…</p>
<span id="more"></span>

<br>

<h2 id="未開始先談移除"><a href="#未開始先談移除" class="headerlink" title="# 未開始先談移除"></a># 未開始先談移除</h2><ol>
<li><p>打開 terminal</p>
</li>
<li><p>使用 mysqldump 備份你的資料庫</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">mysqldump -u你的使用者名 -p --all-databases &gt; /tmp/backup.sql</span><br></pre></td></tr></table></figure></li>
<li><p>尋找是否還有 MySQL process, 若有的話, 使用 <code>kill -9 processId</code> 砍掉</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ps -ax | grep mysql</span><br></pre></td></tr></table></figure></li>
<li><p>若使用 brew, 使用 brew 刪除</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">brew remove mysql</span><br><span class="line">brew cleanup</span><br></pre></td></tr></table></figure></li>
<li><p>移除以下檔案</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">sudo <span class="hljs-built_in">rm</span> /usr/local/mysql</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /usr/local/var/mysql</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /usr/local/mysql*</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /Library/StartupItems/MySQLCOM</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /Library/PreferencePanes/My*</span><br></pre></td></tr></table></figure></li>
<li><p>卸載之前的 MySQL 自動登入</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br></pre></td></tr></table></figure></li>
<li><p>移除之前的 MySQL 設定</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">vim /etc/hostconfig</span><br><span class="line"><span class="hljs-comment"># Remove the line MYSQLCOM=-YES-</span></span><br></pre></td></tr></table></figure></li>
<li><p>移除以下檔案</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-built_in">rm</span> -rf ~/Library/PreferencePanes/My*</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /Library/Receipts/mysql*</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /Library/Receipts/MySQL*</span><br><span class="line">sudo <span class="hljs-built_in">rm</span> -rf /private/var/db/receipts/*mysql*</span><br></pre></td></tr></table></figure></li>
<li><p>重啟電腦, 確保沒有任何程序在跑</p>
</li>
<li><p>執行 mysql, 應該不能執行</p>
</li>
</ol>
<br>

<h2 id="使用者帳號及權限"><a href="#使用者帳號及權限" class="headerlink" title="# 使用者帳號及權限"></a># 使用者帳號及權限</h2><h6 id="建立使用者"><a href="#建立使用者" class="headerlink" title="建立使用者"></a><strong>建立使用者</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;userName&#x27;@&#x27;userHost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;userPassword&#x27;;</span><br></pre></td></tr></table></figure>

<h6 id="更改使用者名稱"><a href="#更改使用者名稱" class="headerlink" title="更改使用者名稱"></a><strong>更改使用者名稱</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">RENAME USER &#x27;userName&#x27;@&#x27;hostName&#x27; TO &#x27;newUserName&#x27;@&#x27;newHostName&#x27;</span><br></pre></td></tr></table></figure>

<h6 id="更改使用者密碼"><a href="#更改使用者密碼" class="headerlink" title="更改使用者密碼"></a><strong>更改使用者密碼</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SET PASSWORD FOR &#x27;userName&#x27;@&#x27;hostName&#x27; = &#x27;newPassword&#x27;</span><br></pre></td></tr></table></figure>

<h6 id="顯示特定使用者權限"><a href="#顯示特定使用者權限" class="headerlink" title="顯示特定使用者權限"></a><strong>顯示特定使用者權限</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;userName&#x27;</span><br></pre></td></tr></table></figure>

<h6 id="賦予已建立的使用者權限"><a href="#賦予已建立的使用者權限" class="headerlink" title="賦予已建立的使用者權限"></a><strong>賦予已建立的使用者權限</strong></h6><ul>
<li><strong>SQL 敘述</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT ALL ON &#x27;databaseName&#x27;.&#x27;tableName&#x27; TO &#x27;userName&#x27;@&#x27;hostName&#x27;</span><br><span class="line">GRANT SELECT (columnName1, columnName2, ...) ON &#x27;databaseName&#x27;.&#x27;tableName&#x27; TO &#x27;userName&#x27;@&#x27;hostName&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>備註</strong>:<br>需注意, 在 MySQL 8, username 加上 hostName 視為一個完整的 GRANT 對象, 如果 hostName 不同, 即使 userName 相同, 對 GRANT 來說也是不同對象</li>
</ul>
<h6 id="顯示所有-user-以及-host"><a href="#顯示所有-user-以及-host" class="headerlink" title="顯示所有 user 以及 host"></a><strong>顯示所有 user 以及 host</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT User, Host</span><br><span class="line">FROM mysql.user</span><br><span class="line">WHERE User LIKE &#x27;userName&#x27;;</span><br></pre></td></tr></table></figure>

<h6 id="刪除使用者"><a href="#刪除使用者" class="headerlink" title="刪除使用者"></a><strong>刪除使用者</strong></h6><ul>
<li><strong>SQL 敘述</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">DROP USER &#x27;userName&#x27;@&#x27;hostName&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>備註</strong>:<br>需注意, userName 加上 hostName 視為一個完整 user 對象, 若有多個 host, 需下多次指令刪除</li>
</ul>
<h6 id="賦予權限"><a href="#賦予權限" class="headerlink" title="賦予權限"></a><strong>賦予權限</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT SELECT, INSERT, UPDATE, DELETE ON databaseName.tableName</span><br><span class="line">TO &#x27;userName&#x27;@&#x27;hostName&#x27;;</span><br></pre></td></tr></table></figure>

<h6 id="權限表"><a href="#權限表" class="headerlink" title="權限表"></a><strong>權限表</strong></h6><table>
<thead>
<tr>
<th>權限</th>
<th align="left">說明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL [PRIVILEGES]</td>
<td align="left">一次賦予所有基本權限。不需附加 GRANT 的各種選項。</td>
</tr>
<tr>
<td>ALTER (變換)</td>
<td align="left">允許使用 ALTER TABLE 敘述, 但授權時亦須同時賦予 CREATE 和 INSERT 等權限。 如需替資料表更名時, 還要搭配 DROP 權限。 此權限有一定的風險: 某人可能透過更名資料表來倒取使用權</td>
</tr>
<tr>
<td>ALTER ROUTINE</td>
<td align="left">允許使用者帳號變換或棄置 (DROP) 預儲常式 (STORED ROUTINES)。 這其中包括了 ALTER FUNCTION 和 ALTER PROCEDURES 兩道敘述。</td>
</tr>
<tr>
<td>CREATE</td>
<td align="left">允許執行 CREATE TABLE 敘述。 注意還需要有 INDEX 權限才能定義索引。</td>
</tr>
<tr>
<td>CREATE TEMPORARY TABLES</td>
<td align="left">允許使用 CREATE TEMPORARY TABLES 敘述</td>
</tr>
<tr>
<td>CREATE USER</td>
<td align="left">允許使用者帳號執行數種與管理使用帳號相關之敘述： 如 CREATE USER 、 RENAME USER 、 REVOKE ALL PRIVILEGES 、 以及 DROP USER 等敘述。</td>
</tr>
<tr>
<td>CREATE VIEW</td>
<td align="left">允許執行 CREATE VIEW 敘述</td>
</tr>
<tr>
<td>DELETE</td>
<td align="left">允許執行 DELETE 敘述</td>
</tr>
<tr>
<td>DROP</td>
<td align="left">允許使用者執行 DROP TABLE 和 TRUNCATE 兩道敘述</td>
</tr>
<tr>
<td>EVENT</td>
<td align="left">允許使用者帳號為事件排程工具定義事件。 包括 CREATE EVENT, ALTER EVENT 和 DROP EVENT 等敘述</td>
</tr>
<tr>
<td>EXECUTE</td>
<td align="left">允許以 EXECUTE 敘述執行預報程序 (STORED PROCEDURES)</td>
</tr>
<tr>
<td>FILE</td>
<td align="left">允許使用 SELECT … INTO FILE 和 LOAD DATA INFILE 等敘述以便將資料會出成檔案, 或是從檔案匯入。 此權限也暗藏安全風險。 應該限定僅可在 SECURE_FILE_PRIV 變數中指定的特定目錄下執行</td>
</tr>
<tr>
<td>INDEX</td>
<td align="left">授權使用 CREATE INDEX 和 DROP INDEX 等敘述</td>
</tr>
<tr>
<td>INSERT</td>
<td align="left">允許執行 INSERT 敘述。 要先擁有此一權限才能執行 ANALYZE TABLE, OPTIMIZE TABLE 和 REPAIR TABLE 等敘述</td>
</tr>
<tr>
<td>LOCK TABLES</td>
<td align="left">允許使用者對已有 SELECT 權限的資料表執行 LOCK TABLES 權限</td>
</tr>
<tr>
<td>PROCESS</td>
<td align="left">允許使用 SHOW PROCESSLIST 和 SHOW ENGINE 等敘述</td>
</tr>
<tr>
<td>RELOAD</td>
<td align="left">允許下達 FLUSH 敘述</td>
</tr>
<tr>
<td>REPLICATION CLIENT</td>
<td align="left">允許使用者查詢主副伺服器 (MASTER AND SLAVE) 的狀態資訊, 如 SHOW MASTER STATUS 和 SHOW SLAVE STATUS 以及 SHOW BINARY LOGS 等敘述</td>
</tr>
<tr>
<td>REPLICATION SLAVE</td>
<td align="left">這是複寫副伺服器 (REPLICATION SLAVE SERVER) 所必需的權限, 目的是要從主伺服器讀取二進位事件紀錄 (BINARY LOG EVENTS)</td>
</tr>
<tr>
<td>SELECT</td>
<td align="left">允許執行 SELECT 敘述</td>
</tr>
<tr>
<td>SHOW DATABASES</td>
<td align="left">允許對所有資料庫使用 SHOW DATABASES 敘述, 而且不限於使用者有權使用的資料庫</td>
</tr>
<tr>
<td>SHOW VIEW</td>
<td align="left">允許使用 SHOW CREATE VIEW 敘述</td>
</tr>
<tr>
<td>SHUTDOWN</td>
<td align="left">允許 MYSQLADMIN 工具程式搭配 SHUTDOWN 選項執行</td>
</tr>
<tr>
<td>SUPER</td>
<td align="left">授權執行 CHANGE MASTER TO, KILL, PURGE BINARY LOGS 及 SET GLOBAL 等敘述, 並且允許 MYSQLADMIN 工具程式搭配 DEBUG 選項執行</td>
</tr>
<tr>
<td>TRIGGER</td>
<td align="left">此權限授權使用者帳號得以建立或棄置觸發器 (TRIGGERS), 亦即可以使用 CREATE TRIGGER 和 DROP TRIGGER 等敘述</td>
</tr>
<tr>
<td>UPDATE</td>
<td align="left">允許執行 UPDATE 敘述</td>
</tr>
<tr>
<td>USAGE</td>
<td align="left">新建使用者時引用此關鍵字, 可達到完全不賦予權限, 或是在修訂現有使用者資料時不會動到既有權限的效果</td>
</tr>
</tbody></table>
<h6 id="建立賦予權限的帳號"><a href="#建立賦予權限的帳號" class="headerlink" title="建立賦予權限的帳號"></a><strong>建立賦予權限的帳號</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT specifiedPrivileges ON databaseName.tableName</span><br><span class="line">TO &#x27;userName&#x27;@&#x27;hostName&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;userPassword&#x27;</span><br><span class="line">WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<h6 id="收回已賦予的權限"><a href="#收回已賦予的權限" class="headerlink" title="收回已賦予的權限"></a><strong>收回已賦予的權限</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">REVOKE specifiedPrivileges</span><br><span class="line">ON databaseName.tableName</span><br><span class="line">FROM &#x27;userName&#x27;@&#x27;hostName&#x27;</span><br></pre></td></tr></table></figure>

<h6 id="建立-Role"><a href="#建立-Role" class="headerlink" title="建立 Role"></a><strong>建立 Role</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE ROLE &#x27;roleName&#x27;;</span><br></pre></td></tr></table></figure>
<p>然後可以賦予 role 權限</p>
<h6 id="賦予使用者-Role-權限"><a href="#賦予使用者-Role-權限" class="headerlink" title="賦予使用者 Role 權限"></a><strong>賦予使用者 Role 權限</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT &#x27;roleName&#x27; TO &#x27;userName&#x27;@&#x27;hostName&#x27;;</span><br></pre></td></tr></table></figure>

<h6 id="切換-Role"><a href="#切換-Role" class="headerlink" title="切換 Role"></a><strong>切換 Role</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## 切換</span><br><span class="line">SET ROLE &#x27;roleName&#x27;;</span><br><span class="line"></span><br><span class="line">## 執行該 role 才擁有的權限</span><br><span class="line">LOAD DATA INFILE</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">## 執行完畢後, 登出 Role</span><br><span class="line">SET ROLE NONE;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="資料備份"><a href="#資料備份" class="headerlink" title="# 資料備份"></a># 資料備份</h2><h6 id="備份所有資料庫"><a href="#備份所有資料庫" class="headerlink" title="備份所有資料庫"></a><strong>備份所有資料庫</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqldump --user=specifiedUserAndHostName \</span><br><span class="line">          --password --lock-all-tables </span><br><span class="line">          --all-databases &gt; /preferredLocationAndFileName.sql</span><br></pre></td></tr></table></figure>

<h6 id="備份指定資料庫"><a href="#備份指定資料庫" class="headerlink" title="備份指定資料庫"></a><strong>備份指定資料庫</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqldump --user=specifiedUserAndHostName --password --lock-tables \</span><br><span class="line">--verbose --databases specifiedDatabaseName1 specifiedDatabaseName2 specifiedDatabaseNameN &gt; specifiedBackupFileName.sql</span><br></pre></td></tr></table></figure>

<h6 id="備份參數參考"><a href="#備份參數參考" class="headerlink" title="備份參數參考"></a><strong>備份參數參考</strong></h6><p>使用以下選項, 可以縮小 dump 檔<br><strong>–skip-add-drop-table</strong>: 忽略 <code>會清除舊資料表的 DROP TABLE 敘述</code><br><strong>–skip-add-locks</strong>: 開始備份時不先鎖定資料表<br><strong>–skip-comments</strong>: 檔案裡不加註解<br><strong>–skip-disable-keys</strong>: 略過 <code>會處理資料表索引的指令</code><br><strong>–skip-set-charset</strong>: 略過 <code>指定使用字元集的 SET NAMES 敘述</code><br><strong>–compact</strong>: 使用上述所有選項</p>
<p><strong>–user</strong>: 要求 mysqlsump 使用 <code>admin_backup</code> 這個帳號與 MySQL Server 互動<br><strong>–password</strong>: 指定使用帳號的密碼<br><strong>–lock-all-tables</strong>: 在開始備份前, 把所有資料庫中的所有資料表鎖定<br><strong>–lock-tables</strong>: 在開始備份前, 先把該資料庫中所有資料表鎖定<br><strong>–all-databases</strong>: 指定匯出所有資料庫<br><strong>–extended-insert</strong>: 會把每個資料表所需的多筆 INSERT 敘述濃縮成一句, 可縮小備份檔以及增進回原效率<br><strong>–skip-extended-insert</strong>: 若 server 預設有 <code>--extended-insert</code> 效果, 但想看到一筆筆的 INSERT 敘述, 可以使用此選項<br><strong>–ignore-table</strong>: 略過指定 table, 通常會略過 mysql.user table, 該 table 會用特殊帳號備份<br><strong>–no-create-info</strong>: 不包含 create 敘述<br><strong>–no-data</strong>: 只備份架構, 不備份資料<br><strong>–verbose</strong>: 在備份過程中, 把重大步驟產生的訊息顯示出來<br><strong>–replace</strong>: 使用 replace 代替 insert</p>
<br>

<h2 id="資料還原"><a href="#資料還原" class="headerlink" title="# 資料還原"></a># 資料還原</h2><h3 id="dump-file-還原"><a href="#dump-file-還原" class="headerlink" title="# dump file 還原"></a># dump file 還原</h3><h6 id="從-dump-file-還原"><a href="#從-dump-file-還原" class="headerlink" title="從 dump file 還原"></a><strong>從 dump file 還原</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql --user=performingOperationUser --password  &lt; dumpFileName.sql</span><br></pre></td></tr></table></figure>

<h6 id="復原部分資料"><a href="#復原部分資料" class="headerlink" title="復原部分資料"></a><strong>復原部分資料</strong></h6><ol>
<li>修改 dump file, 只留下開頭, 結尾變數, 以及需要的 table 段落</li>
<li>修改 dump file 中的 <code>create database, use database</code>, 改成一個臨時的 database name, 匯出後在從該臨時 database 中取出資料, 完成後再刪掉該 temporary database</li>
<li>或是賦予一個臨時使用者該 table 的權限, 讓這個使用者去執行 restore</li>
</ol>
<h3 id="從-Binary-Log-還原"><a href="#從-Binary-Log-還原" class="headerlink" title="# 從 Binary Log 還原"></a># 從 Binary Log 還原</h3><p>如果很不幸的, 你想要還原備份後才新增的資料</p>
<h6 id="確認-Binary-Log-是否有啟用"><a href="#確認-Binary-Log-是否有啟用" class="headerlink" title="確認 Binary Log 是否有啟用"></a><strong>確認 Binary Log 是否有啟用</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW BINARY LOGS</span><br><span class="line"></span><br><span class="line"># 如果未啟用, 錯誤如下：</span><br><span class="line"># ERROR 1381 (HY000): You are not using binary logging</span><br></pre></td></tr></table></figure>

<h6 id="啟用-binary-log"><a href="#啟用-binary-log" class="headerlink" title="啟用 binary log"></a><strong>啟用 binary log</strong></h6><p>在 mysql.ini / mysql.cnf 檔案中:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># log-bin 表示啟動 binary log</span><br><span class="line">log-bin</span><br><span class="line"># 表示不 log mysql 這個 table, 以提高安全性</span><br><span class="line">binlog-ignore-db=mysql</span><br></pre></td></tr></table></figure>

<h6 id="顯示當前-log-點"><a href="#顯示當前-log-點" class="headerlink" title="顯示當前 log 點"></a><strong>顯示當前 log 點</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW MASTER STATUS;</span><br></pre></td></tr></table></figure>
<p><img src="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0"></p>
<p><strong>Binlog_Do_DB</strong>: 指定哪些資料庫才要記錄到 binary log<br><strong>Binlog_Ignore_DB</strong>: 指定哪些資料庫不要記錄到 binary log<br><strong>Executed_Gtid_Set</strong>: 已經執行的 transaction 編號</p>
<h6 id="取得-DATA-存在位置"><a href="#取得-DATA-存在位置" class="headerlink" title="取得 DATA 存在位置"></a><strong>取得 DATA 存在位置</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES WHERE Variable_Name LIKE &#x27;datadir&#x27;;</span><br></pre></td></tr></table></figure>
<p><img src="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0"></p>
<h6 id="確定-log-檔案確實在該目錄底下後-輸出文字檔"><a href="#確定-log-檔案確實在該目錄底下後-輸出文字檔" class="headerlink" title="確定 log 檔案確實在該目錄底下後, 輸出文字檔"></a><strong>確定 log 檔案確實在該目錄底下後, 輸出文字檔</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=databaseName \</span><br><span class="line">            /binaryLogAbsoluteLocation &gt; whateverNameYouLike.txt</span><br></pre></td></tr></table></figure>

<h6 id="找出問題點"><a href="#找出問題點" class="headerlink" title="找出問題點"></a><strong>找出問題點</strong></h6><p>手動找出問題點, 如下 example</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># at 1258707</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258778 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">SET TIMESTAMP=1410887424/*!*/;</span><br><span class="line">SET @@session.sql_mode=0/*!*/;</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1258778</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258900 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">use `rookery`/*!*/;</span><br><span class="line">SET TIMESTAMP=1410887424/*!*/;</span><br><span class="line"></span><br><span class="line">DELETE FROM birds_simple WHERE common_name LIKE &#x27;%Blue%&#x27;</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1258900</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258927 Xid = 45248</span><br><span class="line"></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"># at 1284668</span><br><span class="line">#140916 13:10:28 server id 1 end_log_pos 1284739 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">SET TIMESTAMP=1410887428/*!*/;</span><br><span class="line">SET @@session.sql_mode=0/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1284739</span><br><span class="line">#140916 13:10:28 server id 1 end_log_pos 1284862 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">SET TIMESTAMP=1410887428/*!*/;</span><br><span class="line">DELETE FROM birds_simple WHERE common_name LIKE &#x27;%Green%&#x27;</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1284862</span><br><span class="line">#140916 13:10:28 server id 1 end_log_pos 1284889 Xid = 45553</span><br><span class="line">COMMIT/*!*/;</span><br></pre></td></tr></table></figure>

<h6 id="復原備份到問題點前"><a href="#復原備份到問題點前" class="headerlink" title="復原備份到問題點前"></a><strong>復原備份到問題點前</strong></h6><p>可看到從 position point 1258707 開始了含有 DELETE 的 transaction, 現在我們要將資料復原, 並拿掉這個含有 DELETE 的 transaction<br>先復原到 position 1258707:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=databaseName--stop-position=&quot;1258707&quot; \</span><br><span class="line">             binaryLogAbsoluteLocation |</span><br><span class="line">             mysql --user=userName --password</span><br></pre></td></tr></table></figure>

<h6 id="從問題點後開始復原到最新的-log-point"><a href="#從問題點後開始復原到最新的-log-point" class="headerlink" title="從問題點後開始復原到最新的 log point"></a><strong>從問題點後開始復原到最新的 log point</strong></h6><p>可看到有問題的 transaction 的結尾落在 1284862, 並且有指出下一個起始點為 1284889, 因此可從 position 1284889 開始往後復原</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=rookery  --start-position=&quot;1284889&quot; --to-last-log \</span><br><span class="line">            binaryLogAbsoluteLocation |</span><br><span class="line">            mysql --user=userName --password</span><br></pre></td></tr></table></figure>

<p>至此就大功告成啦！</p>
<br>

<h2 id="中文亂碼問題"><a href="#中文亂碼問題" class="headerlink" title="# 中文亂碼問題"></a># 中文亂碼問題</h2><h3 id="先確認-locale-狀態："><a href="#先確認-locale-狀態：" class="headerlink" title="# 先確認 locale 狀態："></a># 先確認 locale 狀態：</h3><ol>
<li><p>確認 charset 狀態, 在 mysql 當中: ```bash<br>show variables like ‘char%’;</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">2. 確認 `database` locale 狀態：</span><br><span class="line">```bash</span><br><span class="line">SELECT default_character_set_name FROM information_schema.SCHEMATA </span><br><span class="line">WHERE schema_name = &quot;databaseName&quot;;</span><br></pre></td></tr></table></figure></li>
<li><p>確認 <code>table</code> locale 狀態：</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">SELECT CCSA.character_set_name FROM information_schema.`TABLES` T,</span><br><span class="line">       information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA</span><br><span class="line">WHERE CCSA.collation_name = T.table_collation</span><br><span class="line">  AND T.table_schema = <span class="hljs-string">&quot;databaseName&quot;</span></span><br><span class="line">  AND T.table_name = <span class="hljs-string">&quot;tableName&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>確認 <code>column</code> locale 狀態：</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">show full columns from tableName;</span><br></pre></td></tr></table></figure></li>
<li><p>確認 <code>collation</code></p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">show variables like <span class="hljs-string">&#x27;collation%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="locale-修改"><a href="#locale-修改" class="headerlink" title="# locale 修改"></a># locale 修改</h3><h4 id="確認-mysql-設定檔位置並修改"><a href="#確認-mysql-設定檔位置並修改" class="headerlink" title="# 確認 mysql 設定檔位置並修改"></a># 確認 <code>mysql</code> 設定檔位置並修改</h4><ul>
<li><p>取得 ‘my.cnf’ 位置, 通常，檔案會在 <code>/etc/mysql/my.cnf</code></p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">mysql --<span class="hljs-built_in">help</span> -verbose | grep <span class="hljs-string">&#x27;my.cnf&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>編輯檔案</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">vim /etc/mysql/my.cnf</span><br></pre></td></tr></table></figure></li>
<li><p>貼上以下設定</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">collation-server = utf8_unicode_ci</span><br><span class="line">init-connect=<span class="hljs-string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">character-set-server = utf8mb4</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="修改-database-locale"><a href="#修改-database-locale" class="headerlink" title="# 修改 database locale"></a># 修改 <code>database</code> locale</h4><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ALTER DATABASE database_name CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br></pre></td></tr></table></figure>

<h4 id="修改-table-locale"><a href="#修改-table-locale" class="headerlink" title="# 修改 table locale"></a># 修改 <code>table</code> locale</h4><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name CONVERT TO CHARACTER SET utf8;</span><br></pre></td></tr></table></figure>

<h4 id="完成修改後-重啟-mysql"><a href="#完成修改後-重啟-mysql" class="headerlink" title="# 完成修改後, 重啟 mysql"></a># 完成修改後, 重啟 mysql</h4><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure>

<h4 id="別忘了-PHP-locale"><a href="#別忘了-PHP-locale" class="headerlink" title="# 別忘了 PHP locale"></a># 別忘了 PHP locale</h4><p>如果有用使用 <code>PHP</code> 的話，記得也將 <code>PHP</code> 那邊的 locale 設為 <code>uft8</code>, 可參考<a href="https://tn710617.github.io/zh-tw/importDataFromCSVIntoMySQLDatabaseViaPHP/">文章</a></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqli_set_charset($dbc,&quot;utf8&quot;);</span><br></pre></td></tr></table></figure>


<h3 id="還是亂碼？"><a href="#還是亂碼？" class="headerlink" title="# 還是亂碼？"></a># 還是亂碼？</h3><p>理論上，上面的都做完了，應該就不會有亂碼了，如果問題尚未解決，可以試試下面的方法</p>
<ul>
<li><p>查看資料庫 locale 設定</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">show create database databaseName</span><br></pre></td></tr></table></figure></li>
<li><p>查看 table locale 設定</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">show create table tableName</span><br></pre></td></tr></table></figure></li>
<li><p>其餘設定</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-built_in">set</span> names uft8;</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h2 id="匯入大量資料"><a href="#匯入大量資料" class="headerlink" title="# 匯入大量資料"></a># 匯入大量資料</h2><h3 id="修改-my-cnf-或-my-ini-檔-永久性的放寬"><a href="#修改-my-cnf-或-my-ini-檔-永久性的放寬" class="headerlink" title="# 修改 my.cnf 或 my.ini 檔 (永久性的放寬)"></a># 修改 my.cnf 或 my.ini 檔 (永久性的放寬)</h3><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">max_allowed_packet=100M</span><br></pre></td></tr></table></figure>

<h3 id="暫時性的放寬"><a href="#暫時性的放寬" class="headerlink" title="# 暫時性的放寬"></a># 暫時性的放寬</h3><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set global net_buffer_length=1000000; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set global max_allowed_packet=1000000000;</span><br></pre></td></tr></table></figure>


<h3 id="匯入"><a href="#匯入" class="headerlink" title="# 匯入"></a># 匯入</h3><h4 id="從-sql-檔匯入"><a href="#從-sql-檔匯入" class="headerlink" title="# 從 sql 檔匯入"></a># 從 sql 檔匯入</h4><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">mysql --max_allowed_packet=100M -u root -p database &lt; dump.sql</span><br></pre></td></tr></table></figure>

<p>如果已有設定, <code>--max_allowed_packet</code> 可不加</p>
<h4 id="從-csv-匯入"><a href="#從-csv-匯入" class="headerlink" title="# 從 csv 匯入"></a># 從 csv 匯入</h4><h5 id="一般-csv-格式"><a href="#一般-csv-格式" class="headerlink" title="# 一般 csv 格式"></a># 一般 csv 格式</h5><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">LOAD DATA INFILE &#x27;/tmp/Clements-Checklist-6.9-final.csv&#x27;</span><br><span class="line">INTO TABLE rookery.clements_list_import</span><br><span class="line">FIELDS TERMINATED BY &#x27;,&#x27; OPTIONALLY ENCLOSED BY &#x27;&quot;&#x27;</span><br><span class="line">IGNORE 1 LINES;</span><br><span class="line">(id, change_type, @niente, @niente,</span><br><span class="line">scientific_name, english_name,</span><br><span class="line">@niente, bird_order, @family, @niente,</span><br><span class="line">@niente, @niente, @niente, @niente,</span><br><span class="line">@niente, @niente, @niente, @niente);</span><br><span class="line">SET family = SUBSTRING(@family, 1, LOCATE(&#x27; (&#x27;, @family) );</span><br></pre></td></tr></table></figure>

<p>從 csv 檔讀取資料並匯入 database.table<br><strong>FIELD TERMINATED BY</strong>: field 跟 field 之間由 <code>,</code> 區隔開來<br><strong>OPTIONALLY</strong>: 有則處理, 沒有則不執行<br><strong>ENCLOSED BY</strong>: 使用 <code>ENCLOSED BY &#39;&quot;&#39;</code>, 當 <code>&quot; (doube quote)</code> 有出現時, 會將兩個 <code>&quot; (double quote)</code> 之間的內容視為一個 column 的內容, 若沒出現則不使用, 為了應付某些 filed 的內容其實是 text, 會用 <code>&quot; (double quote)</code> 包住, 但內容有許多 <code>,(comma)</code><br><strong>IGNORE 1 LINES</strong>: 表示忽略第一行, 因為第一行是 field name, 我們並不會用到<br><strong>@niente</strong>: 因為 csv 檔中某些欄位的資料我們並不需要, 因此在建立 table 時只需要建立我們需要的 column, 在匯入時, 將沒用到的 fieldd 按照 csv 上的順序標示為 <code>@niente</code> (只要是變數就行, 名稱不重要), 這樣就不會將資料匯入啦<br><strong>@family, SET family</strong>: 可以在 LOAD DATA 的過程中, 針對 csv 上特定的 column 做處理, 匯入完成後就已經會是處理好的</p>
<h5 id="較特別的-csv-格式"><a href="#較特別的-csv-格式" class="headerlink" title="# 較特別的 csv 格式"></a># 較特別的 csv 格式</h5><p><strong>格式範例</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">[&quot;prospect name&quot;|&quot;prospect email&quot;|&quot;prospect country&quot;]</span><br><span class="line">[&quot;Mr. Bogdan Kecman&quot;|&quot;bodgan\@kecman-birds.com&quot;|&quot;Serbia&quot;]</span><br><span class="line">[&quot;Ms. Sveta Smirnova&quot;|&quot;bettasveta\@gmail.com&quot;|&quot;Russia&quot;]</span><br><span class="line">[&quot;Mr. Collin Charles&quot;|&quot;callincollin\@gmail.com&quot;|&quot;Malaysia&quot;]</span><br><span class="line">[&quot;Ms. Sveta A. Smirnova&quot;|&quot;bettasveta\@gmail.com&quot;|&quot;Russia&quot;]</span><br></pre></td></tr></table></figure>

<p><strong>sql example</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">LOAD DATA INFILE &#x27;/tmp/birdwatcher-prospects.csv&#x27;</span><br><span class="line">INTO TABLE birdwatchers.birdwatcher_prospects_import</span><br><span class="line">FIELDS TERMINATED BY &#x27;|&#x27; ENCLOSED BY &#x27;&quot;&#x27; ESCAPED BY &#x27;\\&#x27;</span><br><span class="line">LINES STARTING BY &#x27;[&#x27; TERMINATED BY &#x27;]\r\n&#x27;</span><br><span class="line">IGNORE 1 LINES</span><br><span class="line">(prospect_name, prospect_email, prospect_country);</span><br></pre></td></tr></table></figure>

<p>以下為 FIELDS 子句意思：<br><strong>TERMINATED BY</strong>: 表示 <code>|</code> 為 field 跟 field 之間的間隔<br><strong>ENCLOSED BY</strong>: 表示每一個 field 的內容都會由 <code>&quot;</code> 包住<br><strong>ESCAPE BY</strong>: 標示跳脫用字元, 不過預設就是 <code>\</code>, 因此這個可省略</p>
<p>LINES 子句：<br><strong>STRINGS BY</strong>: 表示 <code>[</code> 開頭算一行的開始<br><strong>TERMINATED BY</strong>: 表示 <code>]\r\n</code> 為一行的結束, 正常 Linux 只需 <code>\n</code> 即可, 但考量到 Windows 環境, 因此多加了 <code>\r</code></p>
<h5 id="使用-mysqlimport"><a href="#使用-mysqlimport" class="headerlink" title="使用 mysqlimport"></a>使用 mysqlimport</h5><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlimport –user=&#x27;marie_dyer&#x27; --password=&#x27;sevenangels&#x27; \</span><br><span class="line">  --replace --low-priority  --ignore-lines=&#x27;1&#x27; \</span><br><span class="line">  --fields-enclosed-by=&#x27;&quot;&#x27; --fields-terminated-by=&#x27;|&#x27; --fields-escaped-by=&#x27;\\&#x27; \</span><br><span class="line">  --lines-terminated-by=&#x27;]\r\n&#x27; \</span><br><span class="line">  --columns=&#x27;prospect_name, prospect_email, prospect_country&#x27; \</span><br><span class="line">    birdwatchers &#x27;/tmp/birdwatcher_prospects_import.csv&#x27;</span><br></pre></td></tr></table></figure>
<p>基本上語法跟 LOAD DATA 是一樣的, 差別在於檔名若有 <code>-</code> 要改成 <code>_</code>, 以免 MySQL 判定為刪減符號</p>
<p>以下為 FIELDS 子句意思：<br><strong>TERMINATED BY</strong>: 表示 <code>|</code> 為 field 跟 field 之間的間隔<br><strong>ENCLOSED BY</strong>: 表示每一個 field 的內容都會由 <code>&quot;</code> 包住<br><strong>ESCAPE BY</strong>: 標示跳脫用字元, 不過預設就是 <code>\</code>, 因此這個可省略</p>
<p>LINES 子句：<br><strong>STRINGS BY</strong>: 表示 <code>[</code> 開頭算一行的開始<br><strong>TERMINATED BY</strong>: 表示 <code>]\r\n</code> 為一行的結束, 正常 Linux 只需 <code>\n</code> 即可, 但考量到 Windows 環境, 因此多加了 <code>\r</code></p>
<br>

<h2 id="大量匯出"><a href="#大量匯出" class="headerlink" title="# 大量匯出"></a># 大量匯出</h2><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">( SELECT &#x27;scientific name&#x27;,&#x27;common name&#x27;,&#x27;family name&#x27; )</span><br><span class="line">UNION</span><br><span class="line">( SELECT birds.scientific_name,</span><br><span class="line">  IFNULL(common_name, &#x27;&#x27;),</span><br><span class="line">  bird_families.scientific_name</span><br><span class="line">  FROM rookery.birds</span><br><span class="line">  JOIN rookery.bird_families USING(family_id)</span><br><span class="line">  JOIN rookery.bird_orders USING(order_id)</span><br><span class="line">  WHERE bird_orders.scientific_name = &#x27;Charadriiformes&#x27;</span><br><span class="line">  ORDER BY common_name</span><br><span class="line">  INTO OUTFILE &#x27;/tmp/birds-list.csv&#x27;</span><br><span class="line">  FIELDS ENCLOSED BY &#x27;&quot;&#x27; TERMINATED BY &#x27;|&#x27; ESCAPED BY &#x27;\\&#x27;</span><br><span class="line">  LINES TERMINATED BY &#x27;\n&#x27;);</span><br></pre></td></tr></table></figure>

<p>使用 SELECT INTO OUTFILE 將資料匯出, 子句部分語法跟 LOAD DATA 完全一樣<br>需使用 IFNULL 將 null 轉為空字串, 因為 INTO OUTFILE 預設會將 null 轉為 n</p>
<p>以下為 FIELDS 子句意思：<br><strong>TERMINATED BY</strong>: 表示 <code>|</code> 為 field 跟 field 之間的間隔<br><strong>ENCLOSED BY</strong>: 表示每一個 field 的內容都會由 <code>&quot;</code> 包住<br><strong>ESCAPE BY</strong>: 標示跳脫用字元, 不過預設就是 <code>\</code>, 因此這個可省略</p>
<p>LINES 子句：<br><strong>STRINGS BY</strong>: 表示 <code>[</code> 開頭算一行的開始<br><strong>TERMINATED BY</strong>: 表示 <code>]\r\n</code> 為一行的結束, 正常 Linux 只需 <code>\n</code> 即可, 但考量到 Windows 環境, 因此多加了 <code>\r</code></p>
<p>匯出範例：</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">&quot;scientific name&quot;|&quot;common name&quot;|&quot;family name&quot;</span><br><span class="line">&quot;Charadrius vociferus&quot;|&quot;Killdeer&quot;|&quot;Charadriidae&quot;</span><br><span class="line">&quot;Charadrius montanus&quot;|&quot;Mountain Plover&quot;|&quot;Charadriidae&quot;</span><br><span class="line">&quot;Charadrius alexandrinus&quot;|&quot;Snowy Plover&quot;|&quot;Charadriidae&quot;</span><br><span class="line">&quot;Pluvialis squatarola&quot;|&quot;Black-bellied Plover&quot;|&quot;Charadriidae&quot;</span><br><span class="line">&quot;Pluvialis fulva&quot;|&quot;Pacific Golden Plover&quot;|&quot;Charadriidae&quot;</span><br><span class="line">&quot;Burhinus vermiculatus&quot;|&quot;Water Thick-knee&quot;|&quot;Burhinidae&quot;</span><br><span class="line">&quot;Burhinus oedicnemus&quot;|&quot;Eurasian Thick-knee&quot;|&quot;Burhinidae&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<br>

<h2 id="查單一資料庫-size"><a href="#查單一資料庫-size" class="headerlink" title="# 查單一資料庫 size"></a># 查單一資料庫 size</h2><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT table_schema &quot;databaseName&quot;, ROUND(SUM(data_length + index_length) / 1024 / 1024, 1) &quot;DB Size in MB&quot; FROM information_schema.tables where table_schema=&quot;databaseName&quot; GROUP BY table_schema;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="where-子句操作符"><a href="#where-子句操作符" class="headerlink" title="# where 子句操作符"></a># where 子句操作符</h2><p><img src="https://lh3.googleusercontent.com/HoKpRaqnp69GFRRySf7YLuvwORyD-no4-1LyhADdw6bUxr7R7GwNcxzrV0GWPE2clKg_S0T9iLGOwNaC4aLOIjOngCia2cELgeR7HBsQFwW9bfWfI89fMo1CM4ofiuKUm_tgi23ipVgB2In_fgWSh2eHGbHNsrnqYTB5gBqalITl7aXhRlbJqDVOkyleCnodSlDKuEo3sRHutDsafnvuw4KjE3h2goMYuIXNk1XxVUW9Xv5PxOQs_avtunxYNx7fHAWJ-3grxeQkExQrCIWRFknirZpXmNhJizPGMhUkbOpShQ0u3TLVNTOHrntDuooU1m8FaxmnNBUponu7m6I-E66f5HAU5RPYcg7ns3Wq84wFshLkwb19B8m8M1hSBrlqg8TOOmZUoONKiDDR9FDqCNZ_evjJ33bQOgfFF_R6cqp_Qj-ZusHzxEeDj_s56OYiCueV0HovIGlEIdICwxLsy4xfm57SoDA1ly1qGWMgNPjsDXicfv8D6lE8VzIr_wPGUk7Onuy-iNt13JKiPv47W2Nfl3FjnThCoxIRpVLE48dOhRacw-T6tD0GLfSx_GAsAuSYlsjAYAScUw45Gb7njPrJITZrb9bmrRYEyU-JbwIeTTuaF7z72IfsKd18VFxYr0nq50Wc8tT9CaUVdeJEnCvt1hrUjS4coP-yRj09L7SvBtjEdulYDa7kKst3yGpqcoB3NudVIC3OFOLEWoRgLzHtb8vGUH95LPn1hYriGffFhojUSbGAIwDC=w522-h800-no?authuser=0"></p>
<br>

<h2 id="EXTRACT-支援的時間格式"><a href="#EXTRACT-支援的時間格式" class="headerlink" title="# EXTRACT 支援的時間格式"></a># EXTRACT 支援的時間格式</h2><p><img src="https://lh3.googleusercontent.com/pw/ACtC-3cDOjbLekQ9V7XlmiZx-0WdkLFrixLUmqJexJrjH4sSgHqbah9RL1dlGo43plbONK2-BlrurueJStkN_0gMJDv9XZXPUii8KWAOqDEBXcreMHOGUMZiX09AXwZBs0p0tVBRzdTgfATycLshTKqnzvd4VA=w696-h1704-no?authuser=0"></p>
<br>

<h2 id="DATE-FORMAT-TIME-FORMAT-時間格式碼"><a href="#DATE-FORMAT-TIME-FORMAT-時間格式碼" class="headerlink" title="# DATE_FORMAT, TIME_FORMAT 時間格式碼"></a># DATE_FORMAT, TIME_FORMAT 時間格式碼</h2><p><img src="https://lh3.googleusercontent.com/pw/ACtC-3fRVByzBoNC2ZHa5xcOibwQ4dg92GqTXG5GfTA4jGHwkUSKd-8Ut45re0xSI_QqBPteoUB6qiTdKQzOo8EeH2Qz8SrF_mbO6609SVRaOubpuyb-IobR676pAgkC4YCTdpmVnb4ZhfAeonbBMH4p1Bj31A=w1112-h1600-no?authuser=0"></p>
<br>

<h2 id="Index"><a href="#Index" class="headerlink" title="# Index"></a># Index</h2><h3 id="加入-Foreign-Key"><a href="#加入-Foreign-Key" class="headerlink" title="# 加入 Foreign Key"></a># 加入 Foreign Key</h3><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE tableName</span><br><span class="line">ADD FOREIGN KEY (columnName) REFERENCES referencingTableName (columnName)</span><br></pre></td></tr></table></figure>

<h3 id="移除-Foreign-Key"><a href="#移除-Foreign-Key" class="headerlink" title="# 移除 Foreign Key"></a># 移除 Foreign Key</h3><h4 id="取得-constraint"><a href="#取得-constraint" class="headerlink" title="# 取得 constraint"></a># 取得 constraint</h4><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS</span><br><span class="line">WHERE TABLE_NAME=&#x27;tableName&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="移除-constraint"><a href="#移除-constraint" class="headerlink" title="# 移除 constraint"></a># 移除 constraint</h4><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name </span><br><span class="line">DROP CONSTRAINT constraint_name</span><br></pre></td></tr></table></figure>

<h4 id="移除-index"><a href="#移除-index" class="headerlink" title="# 移除 index"></a># 移除 index</h4><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name </span><br><span class="line">DROP INDEX index_name</span><br></pre></td></tr></table></figure>

<br>

<h2 id="取得-metadata"><a href="#取得-metadata" class="headerlink" title="# 取得 metadata"></a># 取得 metadata</h2><h6 id="取得-table-rows-大約估計值"><a href="#取得-table-rows-大約估計值" class="headerlink" title="取得 table rows 大約估計值"></a>取得 table rows 大約估計值</h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT table_rows FROM information_schema.tables WHERE table_name = &#x27;tableName&#x27;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Questions-and-Answers"><a href="#Questions-and-Answers" class="headerlink" title="# Questions and Answers"></a># Questions and Answers</h2><h6 id="以下的-MySQL-example-code-t2-上最後一筆資料的-id-是多少？"><a href="#以下的-MySQL-example-code-t2-上最後一筆資料的-id-是多少？" class="headerlink" title="以下的 MySQL example code, t2 上最後一筆資料的 id 是多少？"></a><strong>以下的 MySQL example code, t2 上最後一筆資料的 id 是多少？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">insert into t values(null, 1,1);</span><br><span class="line">insert into t values(null, 2,2);</span><br><span class="line">insert into t values(null, 3,3);</span><br><span class="line">insert into t values(null, 4,4);</span><br><span class="line">create table t2 like t;</span><br><span class="line">insert into t2(c,d) select c,d from t;</span><br><span class="line">insert into t2 values(null, 5,5);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>8, 因為 id 的申請是倍數增加的<br>第一次, 申請到 1 個 id<br>第二次, 申請到 2 個 id<br>第三次, 申請到 4 個 id, 至此, 已有 7 個 id, 但只需 insert 4 筆資料, 所以 5~7 沒用到<br>MySQL 不會去回滾已取得的 increment id, 所以最後一筆申請到的 id 會是 8</li>
</ul>
<h6 id="MySQL-中-對於批量插入數據的語句-像是-insert-select-申請-increment-id-的規則是？"><a href="#MySQL-中-對於批量插入數據的語句-像是-insert-select-申請-increment-id-的規則是？" class="headerlink" title="MySQL 中, 對於批量插入數據的語句, 像是 insert ... select, 申請 increment id 的規則是？"></a><strong>MySQL 中, 對於批量插入數據的語句, 像是 <code>insert ... select</code>, 申請 increment id 的規則是？</strong></h6><p>首次, 1 個 id<br>第二次, 2 個 id<br>第三次, 4 個 id<br>第四次, 8 個 id<br>以此類推, 因為在不知道有幾筆的情況下, 一筆筆申請的效率太低了, 如果需要 insert 一百萬筆的話</p>
<h6 id="MySQL-中-為了避免-insert-select-這樣的語句造成主從的-increment-id-不一致-以及不影響高併發的效能-建議-innodb-autoinc-lock-mode-以及-binlog-的格式做怎樣的設置？"><a href="#MySQL-中-為了避免-insert-select-這樣的語句造成主從的-increment-id-不一致-以及不影響高併發的效能-建議-innodb-autoinc-lock-mode-以及-binlog-的格式做怎樣的設置？" class="headerlink" title="MySQL 中, 為了避免 insert...select 這樣的語句造成主從的 increment id 不一致, 以及不影響高併發的效能, 建議 innodb_autoinc_lock_mode 以及 binlog 的格式做怎樣的設置？"></a><strong>MySQL 中, 為了避免 <code>insert...select</code> 這樣的語句造成主從的 increment id 不一致, 以及不影響高併發的效能, 建議 <code>innodb_autoinc_lock_mode</code> 以及 binlog 的格式做怎樣的設置？</strong></h6><p><code>innodb_autoinc_lock_mode</code> 設為 2, 即立即釋放, 不影響高併發效能<br>binlog 設為 row, 解決主從不一致的問題</p>
<h6 id="以下的-MySQL-example-image-中-若-session-B-的-insert-select-沒有-lock-那可以取得連續-id-嗎？"><a href="#以下的-MySQL-example-image-中-若-session-B-的-insert-select-沒有-lock-那可以取得連續-id-嗎？" class="headerlink" title="以下的 MySQL example image 中, 若 session B 的 insert...select 沒有 lock, 那可以取得連續 id 嗎？"></a><strong>以下的 MySQL example image 中, 若 session B 的 <code>insert...select</code> 沒有 lock, 那可以取得連續 id 嗎？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXrDyFIeiIWKwyXzvrKEyBflg4sIkhMhY6S3fTmB7LE104i6lRssSW-Nvhyz317ObEz-ZzbzGQFzTaiZQ4_cHFwBT4xVW-2nE4fwofbfUAdvYq0t52FLgpptb8pq8nFq9oLC9d4iCw6YeTKI5jmD6kkRQ=w933-h278-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>不可</li>
</ul>
<h6 id="MySQL-中-參數-‘innodb-autoinc-lock-mode’-為什麼在-5-7-的版本中-預設值是-1-insert-select-這種不確定要申請多少-id-的語句會在語句執行完畢後才釋放-increment-id-lock"><a href="#MySQL-中-參數-‘innodb-autoinc-lock-mode’-為什麼在-5-7-的版本中-預設值是-1-insert-select-這種不確定要申請多少-id-的語句會在語句執行完畢後才釋放-increment-id-lock" class="headerlink" title="MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 為什麼在 5.7 的版本中, 預設值是 1, insert ... select 這種不確定要申請多少 id 的語句會在語句執行完畢後才釋放 increment id lock?"></a><strong>MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 為什麼在 5.7 的版本中, 預設值是 1, <code>insert ... select</code> 這種不確定要申請多少 id 的語句會在語句執行完畢後才釋放 increment id lock?</strong></h6><p>若是不上鎖, 在 binlog 格式為 row 時不會有問題, 因為 row binlog 是實際去記錄每一個 row 的實際紀錄<br>使用 statement binlog 時, 如果不上鎖的話, 在併發時並無法保證 <code>insert ... select</code> 語句在 insert 時可以取得連續的 id, 但 statement binlog 執行時是沒有併發的問題, 因此可以取得連續 id, 這就造成主從不一致</p>
<h6 id="MySQL-中-參數-‘innodb-autoinc-lock-mode’-在-MySQL-8-的預設值是多少？"><a href="#MySQL-中-參數-‘innodb-autoinc-lock-mode’-在-MySQL-8-的預設值是多少？" class="headerlink" title="MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 在 MySQL 8 的預設值是多少？"></a><strong>MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 在 MySQL 8 的預設值是多少？</strong></h6><p>2</p>
<h6 id="MySQL-中-參數-‘innodb-autoinc-lock-mode’-根據設置的值不同-會有哪三種行為？"><a href="#MySQL-中-參數-‘innodb-autoinc-lock-mode’-根據設置的值不同-會有哪三種行為？" class="headerlink" title="MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 根據設置的值不同, 會有哪三種行為？"></a><strong>MySQL 中, 參數 ‘innodb_autoinc_lock_mode’ 根據設置的值不同, 會有哪三種行為？</strong></h6><p>(0) 所有的語句在申請 increment id 時都上鎖, 語句執行完畢才釋放<br>(1) 一般語句取得 id 後立即釋放, <code>insert ... select</code> 這種不確定要申請幾個 id 的語句, 要等到語句全部執行完畢才釋放<br>(2) 所有語句都在申請取得後立即釋放</p>
<h6 id="MySQL-中-為什麼不支援自增-id-回退？"><a href="#MySQL-中-為什麼不支援自增-id-回退？" class="headerlink" title="MySQL 中, 為什麼不支援自增 id 回退？"></a><strong>MySQL 中, 為什麼不支援自增 id 回退？</strong></h6><p>會影響效能<br>假設 transaction a 取得 id 2, transaction b 取得 id 3, a 提供失敗, b 提交成功, 如果支援回退的話, 這時 InnoDB 的當前自增 id 會修正為 2, 結果出現資料庫內有 id = 3 的資料, 而當前自增 id = 2, 之後的 transaction 如果申請到 id = 3, 就會發生衝突<br>為解決這個問題, 方法有 2<br>(1) id 沒出現在資料庫才給申請, 這相當於每一次都要表搜索, 效能不佳<br>(2) 自增鎖粒度加大, 一個事物完成並提交才給申請下一個 id, 這會影響併發能力</p>
<h6 id="以下的-MySQL-example-code-中-最後插入的-id-是多少？"><a href="#以下的-MySQL-example-code-中-最後插入的-id-是多少？" class="headerlink" title="以下的 MySQL example code 中, 最後插入的 id 是多少？"></a><strong>以下的 MySQL example code 中, 最後插入的 id 是多少？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">insert into t values(null,1,1);</span><br><span class="line">begin;</span><br><span class="line">insert into t values(null,2,2);</span><br><span class="line">rollback;</span><br><span class="line">insert into t values(null,2,2);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>3</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-為什麼-id-是-3-不是-2？"><a href="#以下的-MySQL-example-code-中-為什麼-id-是-3-不是-2？" class="headerlink" title="以下的 MySQL example code 中, 為什麼 id 是 3, 不是 2？"></a><strong>以下的 MySQL example code 中, 為什麼 id 是 3, 不是 2？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUiZvrou0Xk3TdXS6JDnIkh5U0fueQswANw6zJf-BoqpUgx1qnV3ZrceBwQgLRU-cdfz1kCEgOAfoJWI0q7HTcXEXV53b9UR-GtnNVgrbUyvpl9CYFi1FDUlDq1XaUxM-s34e8TVPZEBapuP529iYvStQ=w659-h641-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>InnoDB 發現用戶沒有指定自增 id 的值, 獲取當前的值並導入 insert query<br>將當前的值改成 3</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？"><a href="#以下的-MySQL-example-code-的意思是？" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">create temporary table temp_t(id int primary key, a int, b int, index (b))engine=memory;</span><br><span class="line">insert into temp_t select * from t2 where b&gt;=1 and b&lt;=2000;</span><br><span class="line">select * from t1 join temp_t on (t1.b=temp_t.b);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 temp table 優化 join 時, 用 memory engine table 來代替 InnoDB engine table, 速度會更快</li>
</ul>
<h6 id="以下的-MySQL-example-code-使用-memory-engien-改寫是否會更好？"><a href="#以下的-MySQL-example-code-使用-memory-engien-改寫是否會更好？" class="headerlink" title="以下的 MySQL example code, 使用 memory engien 改寫是否會更好？"></a><strong>以下的 MySQL example code, 使用 memory engien 改寫是否會更好？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">create temporary table temp_t(id int primary key, a int, b int, index(b))engine=innodb;</span><br><span class="line">insert into temp_t select * from t2 where b&gt;=1 and b&lt;=2000;</span><br><span class="line">select * from t1 join temp_t on (t1.b=temp_t.b);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>會, 因為 memory engine table 使用 hash index, 等值查詢更快<br>2000 筆紀錄不大, 可全部放在內存<br>memory engine table 不需寫 disk, 速度更快</li>
</ul>
<h6 id="MySQL-中-對比-memory-table-以及-InnoDB-table-為什麼說-InnoDB-更適合被使用？"><a href="#MySQL-中-對比-memory-table-以及-InnoDB-table-為什麼說-InnoDB-更適合被使用？" class="headerlink" title="MySQL 中, 對比 memory table 以及 InnoDB table, 為什麼說 InnoDB 更適合被使用？"></a><strong>MySQL 中, 對比 memory table 以及 InnoDB table, 為什麼說 InnoDB 更適合被使用？</strong></h6><ul>
<li>若資料量大, InnoDB 併發效果較好</li>
<li>若資料量小, InnoDB 的資料也是會緩存在 buffer pool 中的</li>
</ul>
<h6 id="MySQL-中-為什麼說正式環境不適合使用-memory-engine-table"><a href="#MySQL-中-為什麼說正式環境不適合使用-memory-engine-table" class="headerlink" title="MySQL 中, 為什麼說正式環境不適合使用 memory engine table?"></a><strong>MySQL 中, 為什麼說正式環境不適合使用 memory engine table?</strong></h6><ul>
<li>memory engine table 不支援行鎖, 併發效果不好</li>
<li>因為斷開或重啟後會清空資料, 會造成主從同步停止, 甚至清空主庫 memory table</li>
</ul>
<h6 id="MySQL-的-memory-table-支援行鎖嗎？"><a href="#MySQL-的-memory-table-支援行鎖嗎？" class="headerlink" title="MySQL 的 memory table 支援行鎖嗎？"></a><strong>MySQL 的 memory table 支援行鎖嗎？</strong></h6><p>不支援, 只支援表鎖</p>
<h6 id="以下的-MySQL-example-code-的意思是？-1"><a href="#以下的-MySQL-example-code-的意思是？-1" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXnqEFcoQ6dLf3lLLplOL-X8dJ_olxnGbqIAJ0l2ObFDC6sFTOHj7QxnTNNBs_imXs4xO8Xi1CbeSCYLgIk5x8hupJuayTSKJgGXUyHjg9WgP2KoYqqPqh4_XpewvMsLIrxkwvjVvhN7UHxsJo89ABXdg=w641-h540-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>加入 btree 到 memory, 不同 index 造成排列順序的不同</li>
</ul>
<h6 id="MySQL-中-如何使-memory-table-支援範圍搜尋嗎？"><a href="#MySQL-中-如何使-memory-table-支援範圍搜尋嗎？" class="headerlink" title="MySQL 中, 如何使 memory table 支援範圍搜尋嗎？"></a><strong>MySQL 中, 如何使 memory table 支援範圍搜尋嗎？</strong></h6><p>加上 btree index</p>
<h6 id="以下的-MySQL-example-code-的意思是？-2"><a href="#以下的-MySQL-example-code-的意思是？-2" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">alter table t1 add index a_btree_index using btree (id);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>在 memory table 加入 btree index, 使其支援範圍查找<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUJi_p3eAuraxJkdMm2MxVGtu9oUCePIdCui23bPxc1LkVQTc9eP9PsRdUMAgxgNtiQbnS-VbPZps5c42xeDCgsMvUklRx32rEC4AYRGTsqowyR0U1G9CfovqF1MWPylR84YBCgBI3eTAFoK1GrsXhrQw=w1142-h880-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-中-output-是？-為什麼？"><a href="#以下的-MySQL-example-code-中-output-是？-為什麼？" class="headerlink" title="以下的 MySQL example code 中, output 是？ 為什麼？"></a><strong>以下的 MySQL example code 中, output 是？ 為什麼？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t1 (</span><br><span class="line">	id int PRIMARY KEY,</span><br><span class="line">	c int) engine = Memory;</span><br><span class="line"></span><br><span class="line">INSERT INTO t1</span><br><span class="line">		values(2, 2), (4, 4), (3, 3), (1, 1), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9), (0, 0);</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	t1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delete from t1 where id=5;</span><br><span class="line">insert into t1 values(10,10);</span><br><span class="line">select * from t1;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>id=10 會替換原先 id=5 的位置</li>
</ul>
<h6 id="MySQL-中-Memory-table-中-每行數據的長度相同嗎？"><a href="#MySQL-中-Memory-table-中-每行數據的長度相同嗎？" class="headerlink" title="MySQL 中, Memory table 中, 每行數據的長度相同嗎？"></a><strong>MySQL 中, Memory table 中, 每行數據的長度相同嗎？</strong></h6><p>是的</p>
<h6 id="MySQL-中-Memory-table-支援-text-or-blob-column-嗎？"><a href="#MySQL-中-Memory-table-支援-text-or-blob-column-嗎？" class="headerlink" title="MySQL 中, Memory table 支援 text or blob column 嗎？"></a><strong>MySQL 中, Memory table 支援 text or blob column 嗎？</strong></h6><p>不支援</p>
<h6 id="MySQL-中-當數據位置方生變化時-Memory-table-需要修改所有索引-為什麼？"><a href="#MySQL-中-當數據位置方生變化時-Memory-table-需要修改所有索引-為什麼？" class="headerlink" title="MySQL 中, 當數據位置方生變化時, Memory table 需要修改所有索引, 為什麼？"></a><strong>MySQL 中, 當數據位置方生變化時, Memory table 需要修改所有索引, 為什麼？</strong></h6><p>因為 Memory table 屬於 Heap Organised Table, 每種索引的地位都相等, 皆紀錄資料存放的位置, 所以資料的 hash 變了, 所有的索引也需跟著改變</p>
<h6 id="MySQL-中-當數據位置方生變化時-InnoDB-table-只需要修改主鍵索引-為什麼？"><a href="#MySQL-中-當數據位置方生變化時-InnoDB-table-只需要修改主鍵索引-為什麼？" class="headerlink" title="MySQL 中, 當數據位置方生變化時, InnoDB table 只需要修改主鍵索引, 為什麼？"></a><strong>MySQL 中, 當數據位置方生變化時, InnoDB table 只需要修改主鍵索引, 為什麼？</strong></h6><p>因為 InnoDB 屬於 Index Organised Table, 主鍵與資料存在一起, 而其他二級索引只存主鍵 id</p>
<h6 id="MySQL-中-Memory-表在插入新數據的時候-只要有找到空洞就可以插入-為什麼？"><a href="#MySQL-中-Memory-表在插入新數據的時候-只要有找到空洞就可以插入-為什麼？" class="headerlink" title="MySQL 中, Memory 表在插入新數據的時候, 只要有找到空洞就可以插入, 為什麼？"></a><strong>MySQL 中, Memory 表在插入新數據的時候, 只要有找到空洞就可以插入, 為什麼？</strong></h6><p>因為 Memory table 是 Heap Organised Table, 是無序性的</p>
<h6 id="MySQL-中-InnoDB-表在插入新數據的時候-只能在特定的位置插入-為什麼？"><a href="#MySQL-中-InnoDB-表在插入新數據的時候-只能在特定的位置插入-為什麼？" class="headerlink" title="MySQL 中, InnoDB 表在插入新數據的時候, 只能在特定的位置插入, 為什麼？"></a><strong>MySQL 中, InnoDB 表在插入新數據的時候, 只能在特定的位置插入, 為什麼？</strong></h6><p>因為 InnoDB 是 Index Organised Table, 需要有序性的插入</p>
<h6 id="MySQL-中-何謂堆組織表-Heap-Organised-Table-？"><a href="#MySQL-中-何謂堆組織表-Heap-Organised-Table-？" class="headerlink" title="MySQL 中, 何謂堆組織表 (Heap Organised Table)？"></a><strong>MySQL 中, 何謂堆組織表 (Heap Organised Table)？</strong></h6><p>索引上保存數據位置</p>
<h6 id="MySQL-中-何謂索引組織表-Index-Organised-Table-？"><a href="#MySQL-中-何謂索引組織表-Index-Organised-Table-？" class="headerlink" title="MySQL 中, 何謂索引組織表 (Index Organised Table)？"></a><strong>MySQL 中, 何謂索引組織表 (Index Organised Table)？</strong></h6><p>數據存在主鍵索引上, 其他索引存主鍵 id</p>
<h6 id="以下的-MySQL-example-code-中-output-的排序是？-為什麼？"><a href="#以下的-MySQL-example-code-中-output-的排序是？-為什麼？" class="headerlink" title="以下的 MySQL example code 中, output 的排序是？ 為什麼？"></a><strong>以下的 MySQL example code 中, output 的排序是？ 為什麼？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t2 (</span><br><span class="line">	id int PRIMARY KEY,</span><br><span class="line">	c int) engine = innodb;</span><br><span class="line"></span><br><span class="line">INSERT INTO t2</span><br><span class="line">		values(3, 3), (2, 2), (1, 1), (4, 4), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9), (0, 0);</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	t2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>按照 id (primary key) 順序排列, MySQL innoDB engine 所有數據都在 primary key 索引上, 而 primary key 是有序儲存的<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXMWTcLKurlYV1ImxQ4FiDVunJzieKT97wpGU09u51NBwYbhkbehonfR7PRCjRxnwgzTp4MgO1qoYgZYYDgb_tLru4IYkv68g9dm3H3CUM3L3xBc9Qw26Wsib481coC8XvEE1LUAG4NDPw29B3ASDwPhg=w1610-h706-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-中-output-的排序是？-為什麼？-1"><a href="#以下的-MySQL-example-code-中-output-的排序是？-為什麼？-1" class="headerlink" title="以下的 MySQL example code 中, output 的排序是？ 為什麼？"></a><strong>以下的 MySQL example code 中, output 的排序是？ 為什麼？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t1 (</span><br><span class="line">	id int PRIMARY KEY,</span><br><span class="line">	c int) engine = Memory;</span><br><span class="line"></span><br><span class="line">INSERT INTO t1</span><br><span class="line">		values(2, 2), (4, 4), (3, 3), (1, 1), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9), (0, 0);</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	t1;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>按照 insert 順序排序, 因為 memory table 是按照輸入的順序排列的<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUWdsTQ6xqFGXvUX40nSnesH3I8uY4ti1cm4Ce5InKY4V-tCyyhN0zZTzThLgk7GIFm1Dwa6JQr-F7FR7FXn4HWLTqxjwQFIpB1jcYA5tyt466EyXVq7nl0l6L-fdxrJjRwL7fTZXXyhZXoIMoz38dJ8w=w2028-h1082-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-image-為什麼沒使用-using-temporary？"><a href="#以下的-MySQL-example-image-為什麼沒使用-using-temporary？" class="headerlink" title="以下的 MySQL example image, 為什麼沒使用 using temporary？"></a><strong>以下的 MySQL example image, 為什麼沒使用 using temporary？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXb3j5cloN_lxV2MXZCRQKvFxvsTlrBKmMEDDUWNCdSa_Su8_-wOEn-c6j7M-ufY3dVCynkxzeEpnmeJbzVAtOVshfimS89YRakrK7QKXdme40e7R-yE-Q4-dtaeUFcTZa5dYTFF9EzfrFHMhxYOuErTQ=w1393-h131-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>因為使用 <code>SQL_BIG_RESULT</code>, 優化器不會使用臨時表, 會使用排序演算法在 disk 文件中針對 id%100 的結果做排序, 像是 0000111122223333</li>
</ul>
<h6 id="MySQL-中-為什麼不能用-rename-修改臨時表的名稱？"><a href="#MySQL-中-為什麼不能用-rename-修改臨時表的名稱？" class="headerlink" title="MySQL 中, 為什麼不能用 rename 修改臨時表的名稱？"></a><strong>MySQL 中, 為什麼不能用 rename 修改臨時表的名稱？</strong></h6><p>執行 rename 時, 會依照 <code>庫名/表名.frm</code> 的規則去 disk 找文件, 但臨時表在 disk 上的 frm 文件是放在 tmpdir 目錄下的, 且文件名的規則是 <code>#sqlProcessId_treadId_序號.frm</code> , 因此會出現找不到文件名的錯誤</p>
<h6 id="MySQL-什麼時候會使用內部臨時表？"><a href="#MySQL-什麼時候會使用內部臨時表？" class="headerlink" title="MySQL 什麼時候會使用內部臨時表？"></a><strong>MySQL 什麼時候會使用內部臨時表？</strong></h6><p>(1) 如果語句執行過程可以一邊讀數據, 一邊直接得到結果, 那是不需要額外內存的, 反之, 就會需要額外的內存來保存中間結果<br>(2) <code>join_buffer</code> 是無序數組, <code>sort_buffer</code> 是有序數組, 臨時表是二維表結構<br>(3) 如果執行邏輯需要用到二維表結構, 就會優先考慮使用臨時表, 像是 union 需要用到 unique index constraint, group by 需要用到另一個 column 來 count</p>
<h6 id="以下的-MySQL-example-code-確切流程是？"><a href="#以下的-MySQL-example-code-確切流程是？" class="headerlink" title="以下的 MySQL example code, 確切流程是？"></a><strong>以下的 MySQL example code, 確切流程是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select SQL_BIG_RESULT id%100 as m, count(*) as c from t1 group by m;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>(1) 初始化 <code>sort_buffer</code>, 確定放入一個 int, 記為 m<br>(2) 掃描 t1 的 index a, 依序取出裡面的 id 值, 將 id%100 的值存入 <code>sort_buffer</code> 中, 使用 index a 而不是 index id 的原因是因為, id 屬於 clustered index, 而 a 屬於 secondary index, a index 就只有 a,id, 所以找 a index 的 cost 較小<br>(3) 掃描完成後, 對 <code>sort_buffer</code> 的 column m 排序, 如下圖<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVnE09IzBhjtlRE3Wl8uD_Ca5XdA__NIOxemXfRmO3wUivsnOaVwIYTTaXQjwurTzh1mjG_LGwnNpxpOBrrhQXUO64IuYWMiEaIfD8_LvdxyKQyxembKajeqrhAIwLQnZjsybTfKm8mu9XZWOO_K7eR0g=w1862-h300-no?authuser=0"><br>(4) 如果 <code>sort_buffer</code> 內存不夠用, 會使用 disk 臨時文件輔助排序<br>(5) 排序完成後, 得到一個有序數組, 自然可以經由排序知道不同的 m 值的分別數量總共有多少, 如上圖, 掃描到 1 時, 就知道總共有 x 個 0, 掃描到 2 時, 就知道總共有 y 個 1<br>(6) 整體流程如下<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLV_TTZU7u-ysZ2q53kMLohx4Mxvl3lCSWF9SCuZEMUPSt9D2xItNPM2x-AmMXn9CV8y4-XJoKGiuY6F7s3mek1s5LDx_8TKLn6MlsAVsHOjPpfLiax0efq2luX8SLQqUaD7HXK5-R4h2mdW1I3igf-oMg=w2274-h1062-no?authuser=0"><br>(7) explain 的結果如下<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVNXWgblvI4HEtgYAbYMSku7YBv9UOU6BJFbVJAQsuxv20kQMthFgbuCqhs9taM3v0hrPEocxSIs4eoWvdpR-AeLW5EuTzQO3qKuP20v8sVb2CEgTVSDzzfJfoSCAAmhYWDbGQVAbwpSkhEWwbwk7c1pw=w1930-h116-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-3"><a href="#以下的-MySQL-example-code-的意思是？-3" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select SQL_BIG_RESULT id%100 as m, count(*) as c from t1 group by m;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當已知該 query 會使用到內存臨時表, 且結果可能非常大, 內存臨時表的 size 不足以容納時, 可直接使用 <code>SQL_BIG_RESULT</code> 來指定使用 disk 臨時表<br>若不指定, 則 MySQL 會先使用內存臨時表, 當判斷 size 不足以容納時, 才轉成 disk 臨時表, 這樣 cost 反而較高</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-若要優化拿掉-using-temporary-以及-using-filesort-可以怎麼做？"><a href="#以下的-MySQL-example-image-中-若要優化拿掉-using-temporary-以及-using-filesort-可以怎麼做？" class="headerlink" title="以下的 MySQL example image 中, 若要優化拿掉 using temporary 以及 using filesort, 可以怎麼做？"></a><strong>以下的 MySQL example image 中, 若要優化拿掉 using temporary 以及 using filesort, 可以怎麼做？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXYACxpsHTbyruakNdCDNunmUKtmyR0HCY8lOW37h0xmizE4u3eR9f29yeXQUQ0eJMcTj5453r3ca9aW8Ixzw9357yWVMUcBtUd8UnygIQAQjylOX7tZplBukKczZ53AuraDwMcXSwosdN9J5MVEo7e3g=w1702-h143-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>using temporary, 因為 <code>id%10</code> 本身並沒有排序, 可針對這個條件建立一個 virtual column 並加上 index, 這樣就不需要使用 temporary<br>using filesort, mysql 8 之後的版本預設不會自動排序, 之前的版本若要取消排序可使用 <code>order by null</code></li>
</ul>
<h6 id="以下的-MySQL-example-code-中-該如何優化-group-by"><a href="#以下的-MySQL-example-code-中-該如何優化-group-by" class="headerlink" title="以下的 MySQL example code 中, 該如何優化 group by?"></a><strong>以下的 MySQL example code 中, 該如何優化 group by?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">create table t1(id int primary key, a int, b int, index(a));</span><br><span class="line">delimiter ;;</span><br><span class="line">create procedure idata()</span><br><span class="line">begin</span><br><span class="line">  declare i int;</span><br><span class="line"></span><br><span class="line">  set i=1;</span><br><span class="line">  while(i&lt;=1000)do</span><br><span class="line">    insert into t1 values(i, i, i);</span><br><span class="line">    set i=i+1;</span><br><span class="line">  end while;</span><br><span class="line">end;;</span><br><span class="line">delimiter ;</span><br><span class="line">call idata();</span><br><span class="line"></span><br><span class="line">select id%10 as m, count(*) as c from t1 group by m order by null;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>針對 group by 的 column 加入加入欄位以及索引, 若該欄位無特殊邏輯, 可單純針對欄位本身增加 index 即可<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">alter table t1 add column z int generated always as(id % 100), add index(z);</span><br><span class="line"></span><br><span class="line">select z, count(*) as c from t1 group by z;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="MySQL-當使用-group-by-時-8-以前的版本會自動根據-group-by-的欄位排序-若不需要排序可以怎麼做？"><a href="#MySQL-當使用-group-by-時-8-以前的版本會自動根據-group-by-的欄位排序-若不需要排序可以怎麼做？" class="headerlink" title="MySQL 當使用 group by 時, 8 以前的版本會自動根據 group by 的欄位排序, 若不需要排序可以怎麼做？"></a><strong>MySQL 當使用 group by 時, 8 以前的版本會自動根據 group by 的欄位排序, 若不需要排序可以怎麼做？</strong></h6><p>加上 <code>order by null</code></p>
<h6 id="以下的-MySQL-example-image-的意思是？"><a href="#以下的-MySQL-example-image-的意思是？" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXexbNmjdc4JBoyiO80-WSzehf-SpmjGLSozHn5IyM4NnRGmpqIiN7XPgu5ei8QwVZSrbvuq7gSU2oS6fxTSQcxoBbqnnVndBvITbTiXy0MV5UAooRN-i-ki2x7uKjdRgwSa2iUmzbPQoMffpUE3sm1mA=w1142-h880-no?authuser=0"></p>
</li>
<li><p><strong>Example</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select id%10 as m, count(*) as c from t1 group by m;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Answer</strong>:<br>(1) 創建臨時表, 有兩個 column, m &amp; c, m 為 primary key<br>(2) 掃描 t1 的 index a, 一次取得 id 並計算 <code>id%10</code> 的結果, 記為 x<br>(3) 若臨時表沒有 m = x 的 row, 則插入 new row<br>(4) 若臨時表已有 m = x 的 row, 則 c++<br>(5) 遍歷完成, 根據 column m 排序, 返回結果<br>實測 MySQL 8 不會自動 order by m</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-1"><a href="#以下的-MySQL-example-image-的意思是？-1" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXUPN1BloeYfyJk-e4uvecnah8DdcQ6JBguL7puoe9PIVz1paIN35KVmJ2e0MeVuS34q2bhTMbt7pB7sgTxuzEIJRLaiy1_4GhvEx7cnXNg_B036IacM23pBRGf21NWtKqeYyEeFph0XyJb-WtYGYf6bw=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 子查詢取得 1000, 並插入臨時表<br>(2) 子查詢取得 1000, 插入臨時表失敗, 因為已經存在<br>(3) 子查詢取得 999, 插入臨時表成功<br>返回結果</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-該選擇哪一個表為驅動表？"><a href="#以下的-MySQL-example-code-中-該選擇哪一個表為驅動表？" class="headerlink" title="以下的 MySQL example code 中, 該選擇哪一個表為驅動表？"></a><strong>以下的 MySQL example code 中, 該選擇哪一個表為驅動表？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>先經由 <code>where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z</code> 過濾條件選出資料最少的當作驅動表<br>若為 t1, 則 <code>t1-&gt;t2-&gt;t3</code>, 並在 join key 上加 index<br>若為 t3, 則 <code>t3-&gt;t2-&gt;t1</code>, 並在 join key 上加 index<br>若為 t2, 則需評估 t2 join t1 或 t2 join t3, 哪個資料少<br>最後給 c 加上 index</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-S-為-M-的備庫-為什麼在-S-上-同個線程可以建立同名的臨時表？"><a href="#以下的-MySQL-example-image-中-S-為-M-的備庫-為什麼在-S-上-同個線程可以建立同名的臨時表？" class="headerlink" title="以下的 MySQL example image 中, S 為 M 的備庫, 為什麼在 S 上, 同個線程可以建立同名的臨時表？"></a><strong>以下的 MySQL example image 中, S 為 M 的備庫, 為什麼在 S 上, 同個線程可以建立同名的臨時表？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVw8Ko2cNLRAd9C_fvUqmtcdKhhYb__cnLW1VwJVas7GP3FRiCgMJPQNQeAQcYDr1Y_Li6LUfO_Ck3dZP0k6mnHBKOj75TxU6JPYh4-Vr1WOrYX8bRGSFaV1So9iNRetJ6kOpLNQbp2eY9KqFif_VXmvw=w935-h293-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>MySQL 在紀錄 binlog 時, 會把主庫執行這個語句的 thread_id 寫到 binlog 中, 這樣, 在備庫的 thread 就能夠知道每個語句的主庫 thead_id, 且利用這個 thread_id 來構造臨時表的 table_def_key</li>
</ul>
<p>(1) session A 的臨時表 t1，在備庫的 table_def_key 就是：庫名 + t1 + “M 的 serverid” + “session A 的 thread_id”<br>(2) session B 的臨時表 t1，在備庫的 table_def_key 就是：庫名 + t1 + “M 的 serverid” + “session B 的 thread_id”</p>
<h6 id="MySQL-在紀錄-binlog-時-不論是-create-table-或是-alter-table-語句-都是原樣紀錄-甚至連空格都不變-但如果執行-drop-table-時-系統紀錄-binlog-會變成如下-example-為什麼？"><a href="#MySQL-在紀錄-binlog-時-不論是-create-table-或是-alter-table-語句-都是原樣紀錄-甚至連空格都不變-但如果執行-drop-table-時-系統紀錄-binlog-會變成如下-example-為什麼？" class="headerlink" title="MySQL 在紀錄 binlog 時, 不論是 create table 或是 alter table 語句, 都是原樣紀錄, 甚至連空格都不變, 但如果執行 drop table 時, 系統紀錄 binlog 會變成如下 example, 為什麼？"></a><strong>MySQL 在紀錄 binlog 時, 不論是 create table 或是 alter table 語句, 都是原樣紀錄, 甚至連空格都不變, 但如果執行 drop table 時, 系統紀錄 binlog 會變成如下 example, 為什麼？</strong></h6><ul>
<li><p><strong>Example</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">DROP TABLE `t_normal` /* generated by server */</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Answer</strong>:<br>因為如果在主庫上有建立臨時表, 而 binlog 格式為 row 的話, 會略過臨時表語句, 如果不這麼做, 那在備庫上因為並不存在該臨時表, 就會出錯造成同步停止</p>
</li>
</ul>
<h6 id="MySQL-中-當-binlog-格式為-row-時-既然-binlog-不紀錄臨時表語句-那備庫如何刪除？"><a href="#MySQL-中-當-binlog-格式為-row-時-既然-binlog-不紀錄臨時表語句-那備庫如何刪除？" class="headerlink" title="MySQL 中, 當 binlog 格式為 row 時, 既然 binlog 不紀錄臨時表語句, 那備庫如何刪除？"></a><strong>MySQL 中, 當 binlog 格式為 row 時, 既然 binlog 不紀錄臨時表語句, 那備庫如何刪除？</strong></h6><p>主庫會將 drop table temp_table 的語句給備庫執行</p>
<h6 id="MySQL-中-當-binlog-格式為-row-時-既然-binlog-不紀錄臨時表語句-那備庫如何建立臨時表？"><a href="#MySQL-中-當-binlog-格式為-row-時-既然-binlog-不紀錄臨時表語句-那備庫如何建立臨時表？" class="headerlink" title="MySQL 中, 當 binlog 格式為 row 時, 既然 binlog 不紀錄臨時表語句, 那備庫如何建立臨時表？"></a><strong>MySQL 中, 當 binlog 格式為 row 時, 既然 binlog 不紀錄臨時表語句, 那備庫如何建立臨時表？</strong></h6><p>主庫會將創建臨時表的語句給備庫執行</p>
<h6 id="MySQL-中-當-binlog-格式為-mixed-statement-時-會將臨時表語句記錄下來嗎？"><a href="#MySQL-中-當-binlog-格式為-mixed-statement-時-會將臨時表語句記錄下來嗎？" class="headerlink" title="MySQL 中, 當 binlog 格式為 mixed/statement 時, 會將臨時表語句記錄下來嗎？"></a><strong>MySQL 中, 當 binlog 格式為 mixed/statement 時, 會將臨時表語句記錄下來嗎？</strong></h6><p>會</p>
<h6 id="MySQL-中-當-binlog-格式為-row-時-會將臨時表語句記錄下來嗎？"><a href="#MySQL-中-當-binlog-格式為-row-時-會將臨時表語句記錄下來嗎？" class="headerlink" title="MySQL 中, 當 binlog 格式為 row 時, 會將臨時表語句記錄下來嗎？"></a><strong>MySQL 中, 當 binlog 格式為 row 時, 會將臨時表語句記錄下來嗎？</strong></h6><p>不會</p>
<h6 id="MySQL-中-同個-session-可以建立重複名稱的-temp-table-嗎？"><a href="#MySQL-中-同個-session-可以建立重複名稱的-temp-table-嗎？" class="headerlink" title="MySQL 中, 同個 session 可以建立重複名稱的 temp table 嗎？"></a><strong>MySQL 中, 同個 session 可以建立重複名稱的 temp table 嗎？</strong></h6><p>不可</p>
<h6 id="以下的-MySQL-example-image-的意思是？-2"><a href="#以下的-MySQL-example-image-的意思是？-2" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWKcETwjeqXU362GIAnvZ84Wtxnyb0FWGkuiBGIxEqc0AA5Vg8oZ5VF6wZWAMJ_YPYRKneA6UFRdeOADFaddrMxYMP3ui6O9yH6axKgD8n8BnbL4B8hSr4kXlI-CA3Dm8KZyW6sajwKc78XslWdFb4IUA=w930-h261-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>在不同 session 可建立同名的臨時表而不會衝突, 不同的 session 維護自己的臨時表空間</li>
</ul>
<h6 id="MySQL-中-臨時表文件的前綴是？"><a href="#MySQL-中-臨時表文件的前綴是？" class="headerlink" title="MySQL 中, 臨時表文件的前綴是？"></a><strong>MySQL 中, 臨時表文件的前綴是？</strong></h6><p><code>#sql&#123;process_id&#125;_&#123;thread_id&#125;_序列號</code></p>
<h6 id="MySQL-中-臨時表文件的後綴是？"><a href="#MySQL-中-臨時表文件的後綴是？" class="headerlink" title="MySQL 中, 臨時表文件的後綴是？"></a><strong>MySQL 中, 臨時表文件的後綴是？</strong></h6><p>frm</p>
<h6 id="以下的-MySQL-example-code-的意思是？-4"><a href="#以下的-MySQL-example-code-的意思是？-4" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select @@tmpdir</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示當前 session 的臨時文件目錄</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-3"><a href="#以下的-MySQL-example-image-的意思是？-3" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWoRfpD4hlG_WSjcHqD7EgS8oBbstfbGha_Z7eryGOdIIDAkWLL-BEHq977B8p1JoGpPZEKyzo32WTM_ulcDMOQX1Id1uSgjloin4EiHY-CvTHrtvw2dCNM9glI_fn6m_cgcdIv2brG0_SKX2Emfdu2Hg=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 建立 temp table<br>(2) 從分表取得資料<br>(3) 將資料 insert 到 temp table<br>(4) 從 temp table 做最後操作</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-4"><a href="#以下的-MySQL-example-image-的意思是？-4" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXqsALnJuGugpVSdoH08wMdr6vi9Z5ySd3kYRcuJP4L-CpaPs_wf0oAHTKer5ETHRoImZ9w_RqGDKzmkZkd8E9707yh-KtGBhQd3ibuSY4lTz19KaRuFm3M_l6jcEhzFSN8qcDAnPkjpFlPbfDUqslAkQ=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>將資料分成 1024 個分表</li>
</ul>
<h6 id="MySQL-中-當我使用臨時表-若連線異常斷開-或資料庫重啟-臨時表內的資料會自動釋放嗎？"><a href="#MySQL-中-當我使用臨時表-若連線異常斷開-或資料庫重啟-臨時表內的資料會自動釋放嗎？" class="headerlink" title="MySQL 中, 當我使用臨時表, 若連線異常斷開, 或資料庫重啟, 臨時表內的資料會自動釋放嗎？"></a><strong>MySQL 中, 當我使用臨時表, 若連線異常斷開, 或資料庫重啟, 臨時表內的資料會自動釋放嗎？</strong></h6><p>會</p>
<h6 id="MySQL-中-臨時表會在一個-session-結束時自動回收嗎？"><a href="#MySQL-中-臨時表會在一個-session-結束時自動回收嗎？" class="headerlink" title="MySQL 中, 臨時表會在一個 session 結束時自動回收嗎？"></a><strong>MySQL 中, 臨時表會在一個 session 結束時自動回收嗎？</strong></h6><p>會</p>
<h6 id="MySQL-中-臨時表可以與普通表重名嗎？"><a href="#MySQL-中-臨時表可以與普通表重名嗎？" class="headerlink" title="MySQL 中, 臨時表可以與普通表重名嗎？"></a><strong>MySQL 中, 臨時表可以與普通表重名嗎？</strong></h6><p>可以</p>
<h6 id="MySQL-中-當-temp-table-與一般-table-的命名相同-crud-時會取得哪一個？"><a href="#MySQL-中-當-temp-table-與一般-table-的命名相同-crud-時會取得哪一個？" class="headerlink" title="MySQL 中, 當 temp table 與一般 table 的命名相同, crud 時會取得哪一個？"></a><strong>MySQL 中, 當 temp table 與一般 table 的命名相同, crud 時會取得哪一個？</strong></h6><p>temp table</p>
<h6 id="MySQL-中-session-A-建立的-temp-table-可以跟-session-B-建立的-temp-table-重複命名嗎？"><a href="#MySQL-中-session-A-建立的-temp-table-可以跟-session-B-建立的-temp-table-重複命名嗎？" class="headerlink" title="MySQL 中, session A 建立的 temp table 可以跟 session B 建立的 temp table 重複命名嗎？"></a><strong>MySQL 中, session A 建立的 temp table 可以跟 session B 建立的 temp table 重複命名嗎？</strong></h6><p>可以</p>
<h6 id="MySQL-中-session-A-建立的-temp-table-可以被-session-B-存取嗎？"><a href="#MySQL-中-session-A-建立的-temp-table-可以被-session-B-存取嗎？" class="headerlink" title="MySQL 中, session A 建立的 temp table 可以被 session B 存取嗎？"></a><strong>MySQL 中, session A 建立的 temp table 可以被 session B 存取嗎？</strong></h6><p>不可</p>
<h6 id="MySQL-中-hash-join-的概念是"><a href="#MySQL-中-hash-join-的概念是" class="headerlink" title="MySQL 中, hash join 的概念是?"></a><strong>MySQL 中, hash join 的概念是?</strong></h6><p>當 MySQL 採用 BNJ 算法時, 被驅動表中的每一行都會去跟 block 中的每一行做判斷, 假設驅動表為 1000 行, 被驅動表有 1000000 行, 那總判斷次數就是十億次<br>hash join 的概念, 就是將 join_buffer 中維護的無序數組轉為 hash table, 所以被驅動表就不需要跟 block 中的每一行做比較, 總判斷次數降為 100 萬次</p>
<h6 id="MySQL-8-支援-hash-join-嗎？"><a href="#MySQL-8-支援-hash-join-嗎？" class="headerlink" title="MySQL 8 支援 hash join 嗎？"></a><strong>MySQL 8 支援 hash join 嗎？</strong></h6><p>支援</p>
<h6 id="以下的-MySQL-example-image-的意思是？-5"><a href="#以下的-MySQL-example-image-的意思是？-5" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVUxv1dfWXqow2M8tEr4CK72a58uxedKuRaAqV3-lxW9i6r2lOoSUNATBQc9XnR2FLokBy8HjwjSLbxRnyZCyBkQdh-PRvrHusMM6KYbvaw5j2r9X27fp0-sreSaTz8VYqOFn1td3IyiQDoBW66N6MsKw=w1776-h169-no?authuser=0"><br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUaa-GwRSVtCV_zjXE6aYCfb0ePADywjL8p5GHfLpv_Wc4BbillMxxrBF0wXNoOA9FT5S-I5XgE5M8ZOaeO9SKQUGOKtkIOT1uNVZdE1c8IozZ4UYyz_XHJj3Z2qlx7RNENDtszMlTXVpkS6D4h17b9-Q=w550-h130-no?authuser=0"><br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVvPTSGT5A0hl_fHMc37wILzubT0a_TqmVAhSVo_oAOC0neKmWystDJz5fcke49ZqVZI6RCGLB37LIIU1xdUWEybYmt91xru9QUA1Wj8ABUN7Aj3cDXVRAw7vI9E2eaaULM9x4CeTtEnIPSvFAAAWPvLg=w1130-h547-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>前兩張圖是 BNJ 算法, 須判斷 10 億次, 耗時 1 分多鐘<br>第三張圖, 利用建立臨時表的方式, 觸發 BKA 算法, 1 秒內完成</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-5"><a href="#以下的-MySQL-example-code-的意思是？-5" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">create temporary table temp_t(id int primary key, a int, b int, index(b))engine=innodb;</span><br><span class="line">insert into temp_t select * from t2 where b&gt;=1 and b&lt;=2000;</span><br><span class="line">select * from t1 join temp_t on (t1.b=temp_t.b);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>利用建立臨時表來觸發 BKA 算法</li>
</ul>
<h6 id="MySQL-中-BNJ-算法對系統影響主要有哪三個方面？"><a href="#MySQL-中-BNJ-算法對系統影響主要有哪三個方面？" class="headerlink" title="MySQL 中, BNJ 算法對系統影響主要有哪三個方面？"></a><strong>MySQL 中, BNJ 算法對系統影響主要有哪三個方面？</strong></h6><p>(1) 可能多次掃瞄被驅動表, 佔用 disk I/O 資源<br>(2) 判斷 join 條件需要執行 N*M 次判斷, 如果是大表就會佔用非常大量的 CPU 資源<br>(3) 可能導致 Buffer Pool 熱數據被淘汰, 影響內存命中率</p>
<h6 id="MySQL-中-如果一個使用-BNJ-算法的-join-query-多次掃描一個冷表-且這個-query-的執行時間大於-1-秒-且冷表的數據大於整個-buffer-pool-的-3-8-那會發生什麼事？"><a href="#MySQL-中-如果一個使用-BNJ-算法的-join-query-多次掃描一個冷表-且這個-query-的執行時間大於-1-秒-且冷表的數據大於整個-buffer-pool-的-3-8-那會發生什麼事？" class="headerlink" title="MySQL 中, 如果一個使用 BNJ 算法的 join query, 多次掃描一個冷表, 且這個 query 的執行時間大於 1 秒, 且冷表的數據大於整個 buffer pool 的 3/8, 那會發生什麼事？"></a><strong>MySQL 中, 如果一個使用 BNJ 算法的 join query, 多次掃描一個冷表, 且這個 query 的執行時間大於 1 秒, 且冷表的數據大於整個 buffer pool 的 3/8, 那會發生什麼事？</strong></h6><p>會不停的洗掉 old 區, 造成正常訪問的熱表一進到 old 區就被洗掉而沒有機會進入 young 區, 降低原本該有的 buffer pool hit rate</p>
<h6 id="MySQL-中-如果一個使用-BNJ-算法的-join-query-多次掃描一個冷表-且這個-query-的執行時間大於-1-秒-且冷表的數據小於整個-buffer-pool-的-3-8-那會發生什麼事？"><a href="#MySQL-中-如果一個使用-BNJ-算法的-join-query-多次掃描一個冷表-且這個-query-的執行時間大於-1-秒-且冷表的數據小於整個-buffer-pool-的-3-8-那會發生什麼事？" class="headerlink" title="MySQL 中, 如果一個使用 BNJ 算法的 join query, 多次掃描一個冷表, 且這個 query 的執行時間大於 1 秒, 且冷表的數據小於整個 buffer pool 的 3/8, 那會發生什麼事？"></a><strong>MySQL 中, 如果一個使用 BNJ 算法的 join query, 多次掃描一個冷表, 且這個 query 的執行時間大於 1 秒, 且冷表的數據小於整個 buffer pool 的 3/8, 那會發生什麼事？</strong></h6><p>會將冷表的數據移動到 young 區, 降低原本該有的 buffer pool hit rate</p>
<h6 id="以下的-MySQL-example-code-的意思是？-6"><a href="#以下的-MySQL-example-code-的意思是？-6" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set optimizer_switch=&#x27;mrr=on,mrr_cost_based=off,batched_key_access=on&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>開啟 MRR, 開啟 BKA, 穩定使用 BKA</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果-join-buffer-滿了會怎麼樣？"><a href="#以下的-MySQL-example-image-中-如果-join-buffer-滿了會怎麼樣？" class="headerlink" title="以下的 MySQL example image 中, 如果 join_buffer 滿了會怎麼樣？"></a><strong>以下的 MySQL example image 中, 如果 join_buffer 滿了會怎麼樣？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>滿了會繼續步驟 2-3, 完成後清空 buffer 並繼續 1-3</li>
</ul>
<p>基本步驟<br>(1) 先將 t1 需要查詢的 row 放到 join_buffer<br>(2) 取出索引 a 到 t2 取得對應的 row<br>(3) 組成 row 並回傳結果</p>
<h6 id="以下的-MySQL-example-image-的意思是？-6"><a href="#以下的-MySQL-example-image-的意思是？-6" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWJU8bwDBEhW6Qz7gc1OlSFQkAZ2y4-JkRjdROpz6Pga7aMBssYoBirw2598DeIgNs3-62M6uS8cogHUPihiLjYkU_4Npq6NSh2UQly1jULd8DHZ_iILDZYU_ZQKFsnRKGmsRxG4UVLmHdrQxDixUt0Dw=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 先將 t1 需要查詢的 row 放到 join_buffer<br>(2) 取出索引 a 到 t2 取得對應的 row<br>(3) 組成 row 並回傳結果</li>
</ul>
<h6 id="MySQL-中-BKA-算法的全寫是？"><a href="#MySQL-中-BKA-算法的全寫是？" class="headerlink" title="MySQL 中, BKA 算法的全寫是？"></a><strong>MySQL 中, BKA 算法的全寫是？</strong></h6><p>Batched Key Access</p>
<h6 id="以下的-MySQL-example-image-中-MRR-的意思是？"><a href="#以下的-MySQL-example-image-中-MRR-的意思是？" class="headerlink" title="以下的 MySQL example image 中, MRR 的意思是？"></a><strong>以下的 MySQL example image 中, MRR 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWTV4a7Z6oADUWFJy6B6quHX4jFOGL0-4uFno8ansbcMdc7zZr94GX4hDqcB3hrHi3E6BbrMuftPNgWIx843VSSaIcqZ5EaOate8vzvaT_dcqxrDL-KuMWp7cDx0ykHt5zYAcq58Avws7pLkTk_pxWhCA=w1583-h149-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>先將 id 排序過, 再用排序過的 id 到 id index 去取出資料</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-7"><a href="#以下的-MySQL-example-code-的意思是？-7" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set optimizer_switch=&quot;mrr_cost_based=off&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>優化器會判斷消耗以決定是否使用 MRR, 若設定成 off, 則會穩定使用 MRR 優化</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-萬一-read-rnd-buffer-滿了-會怎麼樣？"><a href="#以下的-MySQL-example-image-中-萬一-read-rnd-buffer-滿了-會怎麼樣？" class="headerlink" title="以下的 MySQL example image 中, 萬一 read_rnd_buffer 滿了, 會怎麼樣？"></a><strong>以下的 MySQL example image 中, 萬一 read_rnd_buffer 滿了, 會怎麼樣？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>若滿了, 會跳到 2-3, 2-3 執行完畢後, 清空 buffer, 重複 2-3</li>
</ul>
<p>基本步驟<br>(1) 從索引 a 取得 id, 並存入 read_rnd_buffer<br>(2) read_rnd_buffer 排序 id<br>(3) 依照排序後的 id 順序, 到索引 id 取出資料</p>
<h6 id="以下的-MySQL-example-image-的意思是？-7"><a href="#以下的-MySQL-example-image-的意思是？-7" class="headerlink" title="以下的 MySQL example image  的意思是？"></a><strong>以下的 MySQL example image  的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXQnrZ29E235Po66uzrirC_YG2wVnwJE03GrgjOBvtdKEcf0kQjoVGD5CNbxdEWpNMm2WYPITtTnUHvM5sUp_f17CW8VrgcKi7pLZryYMmKztMwrvi2uzJsgsag5jZUSXp3e7Qj_l1JhlamQpu3X_fblA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 從索引 a 取得 id, 並存入 read_rnd_buffer<br>(2) read_rnd_buffer 排序 id<br>(3) 依照排序後的 id 順序, 到索引 id 取出資料</li>
</ul>
<h6 id="AWS-RDS-預設參數無法更改-要如何更改？"><a href="#AWS-RDS-預設參數無法更改-要如何更改？" class="headerlink" title="AWS RDS 預設參數無法更改, 要如何更改？"></a><strong>AWS RDS 預設參數無法更改, 要如何更改？</strong></h6><p>因為預設的參數不給改, 所以要建立一個 parameter group 來自定義參數, 並套用到指定的 instance 上<br><a target="_blank" rel="noopener" href="https://aws.amazon.com/cn/blogs/china/mysql-rds-write-performance-parameter-optimization/">連結</a></p>
<h6 id="MySQL-中-MRR-的簡單概念是？"><a href="#MySQL-中-MRR-的簡單概念是？" class="headerlink" title="MySQL 中, MRR 的簡單概念是？"></a><strong>MySQL 中, MRR 的簡單概念是？</strong></h6><p>因為大部分的資料都是 auto id 順序寫入的, 所以將索引找到的 id 排序, 以達到順序讀取資料的優化</p>
<h6 id="以下的-MySQL-example-image-的意思是？-8"><a href="#以下的-MySQL-example-image-的意思是？-8" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXn1EnlaBEMWhOWolQERW1J7OARxUjcwSbrPw50dZzRHn1MLY77GkZnrIMMCBLTfvPqAVdrANClGAVlc5wSgavuLKPBl84bhY7suSlCiZ4g7m-lBsXAOYzg__bPbMHLCyUfzRjbLtP8Ort9TsLBXtINXw=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>根據索引 a 查找 id, 因為 id 順序沒有排過, 會變成隨機讀, 效能較差</li>
</ul>
<h6 id="MySQl-中-net-buffer-是每個-thread-一個-還是共享？"><a href="#MySQl-中-net-buffer-是每個-thread-一個-還是共享？" class="headerlink" title="MySQl 中, net_buffer 是每個 thread 一個, 還是共享？"></a><strong>MySQl 中, <code>net_buffer</code> 是每個 thread 一個, 還是共享？</strong></h6><p>每個 thread 一個</p>
<h6 id="MySQL-中-為什麼當大量出現-thread-state-為-sending-to-client-時-加大-net-buffer-length-是一個解決方法？-socket-send-buffer-比-net-buffer-length-還小-不是嗎？"><a href="#MySQL-中-為什麼當大量出現-thread-state-為-sending-to-client-時-加大-net-buffer-length-是一個解決方法？-socket-send-buffer-比-net-buffer-length-還小-不是嗎？" class="headerlink" title="MySQL 中, 為什麼當大量出現 thread state 為 sending to client 時, 加大 net_buffer_length 是一個解決方法？ socket_send_buffer 比 net_buffer_length 還小, 不是嗎？"></a><strong>MySQL 中, 為什麼當大量出現 thread state 為 <code>sending to client</code> 時, 加大 <code>net_buffer_length</code> 是一個解決方法？ <code>socket_send_buffer</code> 比 <code>net_buffer_length</code> 還小, 不是嗎？</strong></h6><p>因為只要 MySQL 將資料存到 <code>net_buffer_length</code> 之後, 儘管 <code>socket_send_buffer</code> 慢慢發, 但對於 MySQL 來說就是已經發出去了, 這樣就不會影響到語句的執行</p>
<h6 id="MySQL-中-如果一個-transaction-被-kill-之後持續處於-rollback-狀態-應該讓他執行完畢-或是重啟-mysql-process"><a href="#MySQL-中-如果一個-transaction-被-kill-之後持續處於-rollback-狀態-應該讓他執行完畢-或是重啟-mysql-process" class="headerlink" title="MySQL 中, 如果一個 transaction 被 kill 之後持續處於 rollback 狀態, 應該讓他執行完畢, 或是重啟 mysql process?"></a><strong>MySQL 中, 如果一個 transaction 被 kill 之後持續處於 rollback 狀態, 應該讓他執行完畢, 或是重啟 mysql process?</strong></h6><p>應讓它自行執行完畢, 因為 rollback 的邏輯是不可少的<br>可以切到備庫, 減少原主庫的壓力, 讓其自動完成</p>
<h6 id="以下的-MySQL-example-image-的意思是"><a href="#以下的-MySQL-example-image-的意思是" class="headerlink" title="以下的 MySQL example image 的意思是"></a><strong>以下的 MySQL example image 的意思是</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>MySQL 優化過的 LRU 算法, 分為 young, old 兩區, 決定哪些資料該留在內存中, 哪些該淘汰<br>young 區中的 page 被訪問時, 會移到 head<br>old 區中的 page 被訪問時, 會根據其存在於 old 區中的時間決定再來的位置<br>如果超過 1 秒, 則移到 young 區 head, 反之, 則停在 old 區<br>所以當熱資料被頻繁 query 時, 都會待在 young 區, 而冷資料被 query 時, 只會待在 old 區, 不影響熱資料的 young 區, 從而保證了 buffer pool hit rate</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-old-區的一個-page-被訪問-該-page-會跑到什麼位置？"><a href="#以下的-MySQL-example-image-中-old-區的一個-page-被訪問-該-page-會跑到什麼位置？" class="headerlink" title="以下的 MySQL example image 中, old 區的一個 page 被訪問, 該 page 會跑到什麼位置？"></a><strong>以下的 MySQL example image 中, old 區的一個 page 被訪問, 該 page 會跑到什麼位置？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>如果該 page 已存在超過 1 秒, 會移到 young 區的 head<br>如果該 page 存在不超過 1 秒, 仍待在 old 區</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-young-區的一個-page-被訪問-該-page-會跑到什麼位置？"><a href="#以下的-MySQL-example-image-中-young-區的一個-page-被訪問-該-page-會跑到什麼位置？" class="headerlink" title="以下的 MySQL example image 中, young 區的一個 page 被訪問, 該 page 會跑到什麼位置？"></a><strong>以下的 MySQL example image 中, young 區的一個 page 被訪問, 該 page 會跑到什麼位置？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLX9c_69S7H7EWMvCTmA9HnMmSDPJMv8KMq4Jp_4bqt7StGH4HPTw_xIiDYyed2_jSXWJSn14YhrVQrZMvAfmWpIhtdNYdbNv6fVogpGDg4WVnJ5BUPLBQxVWYjFElp0ylb4Qhy7_qwvgyqcTU776ovTFg=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>會跑到 head 的位置</li>
</ul>
<h6 id="以下的-MySQL-example-image-是-LRU-的基本模型-可能會有什麼問題？"><a href="#以下的-MySQL-example-image-是-LRU-的基本模型-可能會有什麼問題？" class="headerlink" title="以下的 MySQL example image 是 LRU 的基本模型, 可能會有什麼問題？"></a><strong>以下的 MySQL example image 是 LRU 的基本模型, 可能會有什麼問題？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLX42rISsnHKioBc6uBp42JC_RCBd7TUdN5vz2hfhh-7coZWVKq4IiHb1Qb6dkxADZPmHHPMAqLwXMH67Yg6x4CdFBwlKIQUO6pCK7c312GKuDRlFdMMaSlgIi95cAQCXKS9lfHkFi-yCnGu7L505U2GqQ=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>當讀到一個歷史大表格時(不常使用), 會將當前內存中常用的資料都淘汰掉, 這樣會造成 buffer pool hit rate 急遽降低</li>
</ul>
<h6 id="MySQL-中-內存管理算法-LRU-全寫是？"><a href="#MySQL-中-內存管理算法-LRU-全寫是？" class="headerlink" title="MySQL 中, 內存管理算法 LRU, 全寫是？"></a><strong>MySQL 中, 內存管理算法 LRU, 全寫是？</strong></h6><p>Least Recently Used, LRU</p>
<h6 id="MySQL-中-inno-buffer-pool-size-建議設為多少？"><a href="#MySQL-中-inno-buffer-pool-size-建議設為多少？" class="headerlink" title="MySQL 中, inno_buffer_pool_size 建議設為多少？"></a><strong>MySQL 中, <code>inno_buffer_pool_size</code> 建議設為多少？</strong></h6><p>物理內存的 60% ~ 80%</p>
<h6 id="MySQL-中-哪個指令可以看內存命中率？"><a href="#MySQL-中-哪個指令可以看內存命中率？" class="headerlink" title="MySQL 中, 哪個指令可以看內存命中率？"></a><strong>MySQL 中, 哪個指令可以看內存命中率？</strong></h6><p><code>show engine innodb status</code></p>
<h6 id="以下的-MySQL-example-image-中-為什麼處於-block-狀態-卻是顯示-sending-data？"><a href="#以下的-MySQL-example-image-中-為什麼處於-block-狀態-卻是顯示-sending-data？" class="headerlink" title="以下的 MySQL example image 中, 為什麼處於 block 狀態, 卻是顯示 sending data？"></a><strong>以下的 MySQL example image 中, 為什麼處於 block 狀態, 卻是顯示 <code>sending data</code>？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXHpmWItfdsI9YCyJdRXw3u_8oUgK1AHQa05ALCf2Rhdik4Ma6HPyQkSTbb6gKcOWMRfjWtdSg0AgadMlLt8BZQp9Z98lHyKA1pXnEO29RkyPTaKO-kehVEXyaImVNjMKRU5I2iP-3M4XWbxfDpG7pUbg=w1246-h278-no?authuser=0"><br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUPJwBl67g5XW4BDAp5dUkRyVAdZ5fW9-u9ckmVI71__wcKYGLa_mbIMiwibpFxr4kX7M87kqmfsouxdEiU4lRtGl7-1Inr-L70UHwZezWzni2la8aBBNFa6AdqUPFM88Ssc4WFRcrX9ZOVMJQGThD7Ng=w1224-h190-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>因為 MySQL 會在執行語句階段一開始就把狀態改成 <code>sending data</code>, 因此只要是還在執行階段, 都是顯示 <code>sending data</code>, 儘管鎖住了</li>
</ul>
<h6 id="MySQL-state-中-sending-to-client-跟-sending-data-的差異是？"><a href="#MySQL-state-中-sending-to-client-跟-sending-data-的差異是？" class="headerlink" title="MySQL state 中, sending to client 跟 sending data 的差異是？"></a><strong>MySQL state 中, <code>sending to client</code> 跟 <code>sending data</code> 的差異是？</strong></h6><p><code>sending data</code> 表示語句正在執行階段, 只要是在執行過程中, 儘管鎖住了也是顯示 <code>sending data</code><br><code>sending to client</code> 表示正在等待 client 接收資料</p>
<h6 id="MySQL-中-如果很多-thread-常常處於-“sending-to-client”-這個狀態-加大哪一個參數可能可以減少這個狀況？？"><a href="#MySQL-中-如果很多-thread-常常處於-“sending-to-client”-這個狀態-加大哪一個參數可能可以減少這個狀況？？" class="headerlink" title="MySQL 中, 如果很多 thread 常常處於 “sending to client” 這個狀態, 加大哪一個參數可能可以減少這個狀況？？"></a><strong>MySQL 中, 如果很多 thread 常常處於 “sending to client” 這個狀態, 加大哪一個參數可能可以減少這個狀況？？</strong></h6><p><code>net_buffer_length</code></p>
<h6 id="MySQL-中-如果很多-thread-常常處於-“sending-to-client”-這個狀態-那可能要優化哪一部分？"><a href="#MySQL-中-如果很多-thread-常常處於-“sending-to-client”-這個狀態-那可能要優化哪一部分？" class="headerlink" title="MySQL 中, 如果很多 thread 常常處於 “sending to client” 這個狀態, 那可能要優化哪一部分？"></a><strong>MySQL 中, 如果很多 thread 常常處於 “sending to client” 這個狀態, 那可能要優化哪一部分？</strong></h6><p>查詢結果</p>
<h6 id="MySQL-中-一般正常的線上業務來說-如果查詢的資料不是特別大-通常都建議使用-mysql-use-result-還是-mysql-store-result"><a href="#MySQL-中-一般正常的線上業務來說-如果查詢的資料不是特別大-通常都建議使用-mysql-use-result-還是-mysql-store-result" class="headerlink" title="MySQL 中, 一般正常的線上業務來說, 如果查詢的資料不是特別大, 通常都建議使用 mysql_use_result 還是 mysql_store_result?"></a><strong>MySQL 中, 一般正常的線上業務來說, 如果查詢的資料不是特別大, 通常都建議使用 <code>mysql_use_result</code> 還是 <code>mysql_store_result</code>?</strong></h6><p><code>mysql_store_result</code></p>
<h6 id="以下的-MySQL-example-image-中-如果一直出現-sending-to-client-有可能是甚麼原因？"><a href="#以下的-MySQL-example-image-中-如果一直出現-sending-to-client-有可能是甚麼原因？" class="headerlink" title="以下的 MySQL example image 中, 如果一直出現 sending to client, 有可能是甚麼原因？"></a><strong>以下的 MySQL example image 中, 如果一直出現 <code>sending to client</code>, 有可能是甚麼原因？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWgtstallS4PAJ3pDGxWcvTWfOBmTWJsEcFTy0T0jZ6yHLxVaD7piXBztbilFvhbEPzQArZB0O_K6dz6cO9eAnPQCvBfMbJeqG9ekZn4coOoWRSSK1tivZlGU89_E1En6BV2zvBWNMvG84zjaz5zuTXdg=w1024-h168-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>server 的網路棧滿了</li>
</ul>
<h6 id="MySQL-在回傳資料時-是邊讀邊發-那若-client-接收的慢-可能會造成什麼情況？"><a href="#MySQL-在回傳資料時-是邊讀邊發-那若-client-接收的慢-可能會造成什麼情況？" class="headerlink" title="MySQL 在回傳資料時, 是邊讀邊發, 那若 client 接收的慢, 可能會造成什麼情況？"></a><strong>MySQL 在回傳資料時, 是邊讀邊發, 那若 client 接收的慢, 可能會造成什麼情況？</strong></h6><p>server 因為結果發不出去, 造成 transaction 執行時間拉很長</p>
<h6 id="MySQL-在回傳資料時-是邊讀邊發-還是一次讀完再發？"><a href="#MySQL-在回傳資料時-是邊讀邊發-還是一次讀完再發？" class="headerlink" title="MySQL 在回傳資料時, 是邊讀邊發, 還是一次讀完再發？"></a><strong>MySQL 在回傳資料時, 是邊讀邊發, 還是一次讀完再發？</strong></h6><p>邊讀邊發</p>
<h6 id="MySQL-中-到哪去看-socket-send-buffer"><a href="#MySQL-中-到哪去看-socket-send-buffer" class="headerlink" title="MySQL 中, 到哪去看 socket_send_buffer?"></a><strong>MySQL 中, 到哪去看 <code>socket_send_buffer</code>?</strong></h6><p><code>/proc/sys/net/core/wmem_default</code></p>
<h6 id="MySQL-中-一個查詢最大會佔用-MySQL-多少內存？"><a href="#MySQL-中-一個查詢最大會佔用-MySQL-多少內存？" class="headerlink" title="MySQL 中, 一個查詢最大會佔用 MySQL 多少內存？"></a><strong>MySQL 中, 一個查詢最大會佔用 MySQL 多少內存？</strong></h6><p><code>net_buffer_length</code></p>
<h6 id="以下的-MySQL-example-image-的意思是？-9"><a href="#以下的-MySQL-example-image-的意思是？-9" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXVV0CwdSZ_m5cn4Io5FjHN0AwZcT9LABcQls6PpNvjVqo0iRJWpTJQoGqzhp-sElpy9wNoxtu3TUGomWnu4Oy9QZzdtBJaehIg1tkQOh_tfD8CggfcAZp27JCyrc_geh0Ie0q_85FOVpXsDTh7TgZRUA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>MySQL query 的結果會逐一的放到 <code>net_buffer</code>, 滿了之後經由 <code>socket_send_buffer</code> 送到 client 端</li>
</ul>
<h6 id="MySQL-中-query-result-set-會發送到-net-buffer-net-buffer-滿了之後調用網路接口發出去-那如果返回以下的訊息-代表的意思是？"><a href="#MySQL-中-query-result-set-會發送到-net-buffer-net-buffer-滿了之後調用網路接口發出去-那如果返回以下的訊息-代表的意思是？" class="headerlink" title="MySQL 中, query result set 會發送到 net_buffer, net_buffer 滿了之後調用網路接口發出去, 那如果返回以下的訊息, 代表的意思是？"></a><strong>MySQL 中, query result set 會發送到 <code>net_buffer</code>, <code>net_buffer</code> 滿了之後調用網路接口發出去, 那如果返回以下的訊息, 代表的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br>EAGAIN 或 WSAEWOULDBLOCK</li>
<li><strong>Answer</strong>:<br>代表本地網路 socket send buffer 已滿, 進入等待, 直到網路棧重新可寫, 再繼續發送</li>
</ul>
<h6 id="MySQL-中-query-result-set-會全部取得後才送到-client-端嗎？"><a href="#MySQL-中-query-result-set-會全部取得後才送到-client-端嗎？" class="headerlink" title="MySQL 中, query result set 會全部取得後才送到 client 端嗎？"></a><strong>MySQL 中, query result set 會全部取得後才送到 client 端嗎？</strong></h6><p>不會, 會發送到 <code>net_buffer</code>, <code>net_buffer</code> 滿了之後調用網路接口發出去</p>
<h6 id="MySQL-中-參數-net-buffer-length-的意思是？"><a href="#MySQL-中-參數-net-buffer-length-的意思是？" class="headerlink" title="MySQL 中, 參數 net_buffer_length 的意思是？"></a><strong>MySQL 中, 參數 <code>net_buffer_length</code> 的意思是？</strong></h6><p>定義 <code>net_buffer</code> 的大小</p>
<h6 id="MySQL-中-quick-flag-有什麼效果？"><a href="#MySQL-中-quick-flag-有什麼效果？" class="headerlink" title="MySQL 中, -quick flag 有什麼效果？"></a><strong>MySQL 中, <code>-quick</code> flag 有什麼效果？</strong></h6><p>(1) 跳過 table 自動補全功能<br>(2) 使用 <code>mysql_use_result</code><br>(3) 不會把執行命令記錄到本地的歷史文件</p>
<h6 id="MySQL-中-當使用-mysql-use-result-可能會造成-server-更快還更慢？"><a href="#MySQL-中-當使用-mysql-use-result-可能會造成-server-更快還更慢？" class="headerlink" title="MySQL 中, 當使用 mysql_use_result, 可能會造成 server 更快還更慢？"></a><strong>MySQL 中, 當使用 <code>mysql_use_result</code>, 可能會造成 server 更快還更慢？</strong></h6><p>更慢, 因為可能會導致服務端發送結果被阻塞</p>
<h6 id="MySQL-中-client-端發送請求後-接收服務端返回結果的方式有哪兩種？"><a href="#MySQL-中-client-端發送請求後-接收服務端返回結果的方式有哪兩種？" class="headerlink" title="MySQL 中, client  端發送請求後, 接收服務端返回結果的方式有哪兩種？"></a><strong>MySQL 中, client  端發送請求後, 接收服務端返回結果的方式有哪兩種？</strong></h6><p>(1) <code>mysql_store_result</code> client 端本地緩存<br>(2) <code>mysql_use_result</code> 不緩存, 讀一個處理一個</p>
<h6 id="MySQL-中-若因為-table-數量多-想要加快連接-mysql-client-介面連接速度-可以怎麼做？"><a href="#MySQL-中-若因為-table-數量多-想要加快連接-mysql-client-介面連接速度-可以怎麼做？" class="headerlink" title="MySQL 中, 若因為 table 數量多, 想要加快連接 mysql client 介面連接速度, 可以怎麼做？"></a><strong>MySQL 中, 若因為 table 數量多, 想要加快連接 mysql client 介面連接速度, 可以怎麼做？</strong></h6><p><code>-A</code> 關掉自動補全功能</p>
<h6 id="MySQL-中-當-table-數量一多時-使用-mysql-client-連接會卡很久-實際上是卡在哪？"><a href="#MySQL-中-當-table-數量一多時-使用-mysql-client-連接會卡很久-實際上是卡在哪？" class="headerlink" title="MySQL 中, 當 table 數量一多時, 使用 mysql client 連接會卡很久, 實際上是卡在哪？"></a><strong>MySQL 中, 當 table 數量一多時, 使用 mysql client 連接會卡很久, 實際上是卡在哪？</strong></h6><p>卡在建立 local hash table</p>
<h6 id="MySQL-中-為什麼當-table-數量一多時-使用-mysql-client-連接會卡很久？"><a href="#MySQL-中-為什麼當-table-數量一多時-使用-mysql-client-連接會卡很久？" class="headerlink" title="MySQL 中, 為什麼當 table 數量一多時, 使用 mysql client 連接會卡很久？"></a><strong>MySQL 中, 為什麼當 table 數量一多時, 使用 mysql client 連接會卡很久？</strong></h6><p>因為 MySQL client 會提供一個 local DB 以及 table 的自動補全功能, 因此需要<br>(1) 執行 show database<br>(2) 執行 show tables<br>(3) 將上面兩條命令的結果構建一個 local hash table</p>
<h6 id="MySQL-中-按下-Ctrl-C-是不是就可以直接終止-thread-呢？"><a href="#MySQL-中-按下-Ctrl-C-是不是就可以直接終止-thread-呢？" class="headerlink" title="MySQL 中, 按下 Ctrl+C 是不是就可以直接終止 thread 呢？"></a><strong>MySQL 中, 按下 Ctrl+C 是不是就可以直接終止 thread 呢？</strong></h6><p>不行, 只是會送一個 kill query, 但不代表可以終止掉該 thread</p>
<h6 id="MySQL-中-有哪些情況可能會造成終止邏輯耗時長-kill-會卡住"><a href="#MySQL-中-有哪些情況可能會造成終止邏輯耗時長-kill-會卡住" class="headerlink" title="MySQL 中, 有哪些情況可能會造成終止邏輯耗時長, kill 會卡住?"></a><strong>MySQL 中, 有哪些情況可能會造成終止邏輯耗時長, kill 會卡住?</strong></h6><p>(1) 超大事務執行期間被 kill, 回滾操作需要對事務執行期間生成的所有新數據版本作回操作<br>(2) 大查詢回滾, 如果查詢過程中生成了比較大的臨時文件, 加上此時文件系統壓力大, 刪除臨時文件可能需要等待 I/O 資源<br>(3) DDL 命令執行到最後階段被 kill, 需要刪除中間過程的臨時文件, 也可能受 I/O 資源影響耗時較久</p>
<h6 id="MySQL-中-有哪兩種情況-show-processlist-的結果會是-Command-killed"><a href="#MySQL-中-有哪兩種情況-show-processlist-的結果會是-Command-killed" class="headerlink" title="MySQL 中, 有哪兩種情況, show processlist 的結果會是 Command=killed?"></a><strong>MySQL 中, 有哪兩種情況, <code>show processlist</code> 的結果會是 <code>Command=killed</code>?</strong></h6><p>(1) thread 沒有執行到判斷狀態的邏輯<br>(2) 終止邏輯耗時較長</p>
<h6 id="以下的-MySQL-example-image-中-為什麼-session-E-有效果？-實際效果是？"><a href="#以下的-MySQL-example-image-中-為什麼-session-E-有效果？-實際效果是？" class="headerlink" title="以下的 MySQL example image 中, 為什麼 session E 有效果？ 實際效果是？"></a><strong>以下的 MySQL example image 中, 為什麼 session E 有效果？ 實際效果是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set global innodb_thread_concurrency=2;</span><br></pre></td></tr></table></figure>
<img src="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>kill C 只是將 connection 斷開, 實際上, query 仍在 server 執行</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-為什麼-session-D-沒有效果？"><a href="#以下的-MySQL-example-image-中-為什麼-session-D-沒有效果？" class="headerlink" title="以下的 MySQL example image 中, 為什麼 session D 沒有效果？"></a><strong>以下的 MySQL example image 中, 為什麼 session D 沒有效果？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set global innodb_thread_concurrency=2;</span><br></pre></td></tr></table></figure>
<img src="https://lh3.googleusercontent.com/pw/AM-JKLWeTFv33nqpf7J4qBC_VBH1bVAHAzZUyq0ayb7AlaLkVvv_o3lzxFN0qGG1eDPWRhtG2mGsm58tbaTrOh7q8igAGwKEHVowckb2F2XPyXHfiOBxpmotmSA-j3U6iShYchg2iTRjHDzOGll6ESVV2I5cdA=w936-h411-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>因為在 innodb_thread_concurrency 滿的情況下, thread 會每十毫秒判斷是否能進到 innodb 執行, 不行就 sleep, 在這個等待的循環中, 並沒有判斷線程狀態的邏輯, 因此不會進入終止邏輯階段</li>
</ul>
<h6 id="MySQL-中-一個語句執行-如何隨時判斷狀態？-例如收到-kill-指令"><a href="#MySQL-中-一個語句執行-如何隨時判斷狀態？-例如收到-kill-指令" class="headerlink" title="MySQL 中, 一個語句執行, 如何隨時判斷狀態？ 例如收到 kill 指令"></a><strong>MySQL 中, 一個語句執行, 如何隨時判斷狀態？ 例如收到 kill 指令</strong></h6><p>語句執行中會有許多埋點, 在埋點判斷狀態, 執行該有的邏輯</p>
<h6 id="MySQL-中-當執行-kill-query-時-MySQL-會做以下兩件事-為什麼要對-thread-發送信號？"><a href="#MySQL-中-當執行-kill-query-時-MySQL-會做以下兩件事-為什麼要對-thread-發送信號？" class="headerlink" title="MySQL 中, 當執行 kill query 時, MySQL 會做以下兩件事, 為什麼要對 thread 發送信號？"></a><strong>MySQL 中, 當執行 kill query 時, MySQL 會做以下兩件事, 為什麼要對 thread 發送信號？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0"><br>(1) 將 session 的運行狀態改成 THD::KILL_QUERY (將變量 killed 給值為 THD::KILL_QUERY))<br>(2) 給 session B 的執行線程發一個信號</li>
<li><strong>Answer</strong>:<br>因為 session B 處於 lock waiting 的狀態, 如果只是改狀態, session B 並不知道這個狀態變化, 會繼續等待, 發信號就是讓 session B 退出等待</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-10"><a href="#以下的-MySQL-example-image-的意思是？-10" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVVI8jZ67y8tJT27C_p_neeTwcYPtSIczOylSyiZlwUBXds63T5jxn11ERtEMqt4z6xgGybEQe28_J5-QGypoU3jJeBbBvY2_8Gn_fGLcVDQEzbI5cXSsnGWYktcblHmeJrjJYcyfzUYKKJyiV26rk8sA=w936-h339-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>使用 kill query 將 waiting for lock 的 query kill 掉</li>
</ul>
<h6 id="MySQL-中-有哪兩種-kill-語句？"><a href="#MySQL-中-有哪兩種-kill-語句？" class="headerlink" title="MySQL 中, 有哪兩種 kill 語句？"></a><strong>MySQL 中, 有哪兩種 kill 語句？</strong></h6><p>kill query thread_id, 終止該 thread 執行的語句<br>kill connection thread_id, 終止該 tread 的 connection</p>
<h6 id="MySQL-跟-Linux-中的-kill-實際上都是怎麼樣的行為？-是直接將-process-砍掉嗎？"><a href="#MySQL-跟-Linux-中的-kill-實際上都是怎麼樣的行為？-是直接將-process-砍掉嗎？" class="headerlink" title="MySQL 跟 Linux 中的 kill, 實際上都是怎麼樣的行為？ 是直接將 process 砍掉嗎？"></a><strong>MySQL 跟 Linux 中的 kill, 實際上都是怎麼樣的行為？ 是直接將 process 砍掉嗎？</strong></h6><p>不是<br>實際上是告訴 process, 可以開始執行停止執行的邏輯了</p>
<h6 id="MySQL-中-update-跟-performance-schema-都是使用輪詢取資料的方式-那為何說後者較準確？"><a href="#MySQL-中-update-跟-performance-schema-都是使用輪詢取資料的方式-那為何說後者較準確？" class="headerlink" title="MySQL 中, update 跟 performance_schema 都是使用輪詢取資料的方式, 那為何說後者較準確？"></a><strong>MySQL 中, update 跟 performance_schema 都是使用輪詢取資料的方式, 那為何說後者較準確？</strong></h6><p>後者是 MySQL 內部會自動統計資料, 所以取得得是隨著時間統計的資料<br>update 只是測試單一個時間點, 所以會有隨機性</p>
<h6 id="MySQL-中-innodb-thread-concurrency-設為多少最好"><a href="#MySQL-中-innodb-thread-concurrency-設為多少最好" class="headerlink" title="MySQL 中, innodb_thread_concurrency 設為多少最好?"></a><strong>MySQL 中, innodb_thread_concurrency 設為多少最好?</strong></h6><p>核心數的兩倍</p>
<h6 id="以下的-MySQL-example-code-的意思是？-8"><a href="#以下的-MySQL-example-code-的意思是？-8" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select event_name,MAX_TIMER_WAIT  FROM performance_schema.file_summary_by_event_name where event_name in (&#x27;wait/io/file/innodb/innodb_log_file&#x27;,&#x27;wait/io/file/sql/binlog&#x27;) and MAX_TIMER_WAIT&gt;200*1000000000;</span><br><span class="line"></span><br><span class="line">truncate table performance_schema.file_summary_by_event_name;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>先利用 MAX_TIMER_WAIT 作為指標, 取出超過 200 毫秒的紀錄, 取得資料後, 清空之前的紀錄, 接下來若是再出現異常, 就可累計</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-9"><a href="#以下的-MySQL-example-code-的意思是？-9" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">update setup_instruments set ENABLED=&#x27;YES&#x27;, Timed=&#x27;YES&#x27; where name like &#x27;%wait/io/file/innodb/innodb_log_file%&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>打開 redo log 的 performance_schema</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-11"><a href="#以下的-MySQL-example-image-的意思是？-11" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLUsxmY9vC7WS_-cOP0QyHDZSU00tB8EKRGmeRA191chp7uPLIYhTPIfBu7vHNOYr8_R-mYTo7BgXSE6BK3vjfGChJHc_2R4uPDaadvlG6cH_Fj449ru2hvk4QMFxFSdS9ocuE6CJDhc8UD39HO6CxrXQA=w1535-h641-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>performance_schema 針對 redo log 的各項統計<br>COUNT_STAR 代表 I/O 總數<br>接下來四項代表總和、最大、平均、最小<br>COUNT_READ 代表 read 總數<br>SUM_NUMBER_OF_BYTES_READ 代表 read 的總 byte<br>COUNT_WRITE 代表 write 總數<br>COUNT_MISC 是針對其他類型的統計, 在 redo log 中, 可理解為 fsync</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-10"><a href="#以下的-MySQL-example-code-的意思是？-10" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `health_check` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `t_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">/* 检测命令 */</span><br><span class="line">insert into mysql.health_check(id, t_modified) values (@@server_id, now()) on duplicate key update t_modified=now();</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>由於檢測資料庫, 若架構為雙 M, 則兩台資料庫可能會因為更新同一行而出現行衝突, 因此將 primary key 設為 server_id, 當資料庫收到自己的 server_id 時會自動忽略, 結果就是主庫偵測主庫的, 備庫偵測備庫的</li>
</ul>
<h6 id="以下的-MySQL-example-code-為什麼仍不足以判斷-MySQL-是否正常？"><a href="#以下的-MySQL-example-code-為什麼仍不足以判斷-MySQL-是否正常？" class="headerlink" title="以下的 MySQL example code, 為什麼仍不足以判斷 MySQL 是否正常？"></a><strong>以下的 MySQL example code, 為什麼仍不足以判斷 MySQL 是否正常？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from mysql.health_check;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>select 的確可以判斷併發查詢是否堵住了, 但無法判斷磁碟是否吃滿了</li>
</ul>
<h6 id="以下的-MySQL-example-code-會佔用併發查詢的總數嗎？"><a href="#以下的-MySQL-example-code-會佔用併發查詢的總數嗎？" class="headerlink" title="以下的 MySQL example code, 會佔用併發查詢的總數嗎？"></a><strong>以下的 MySQL example code, 會佔用併發查詢的總數嗎？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select sleep(100) from t</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>會哦</li>
</ul>
<h6 id="MySQL-中-進入鎖等待的-thread-會吃-CPU-嗎？"><a href="#MySQL-中-進入鎖等待的-thread-會吃-CPU-嗎？" class="headerlink" title="MySQL 中, 進入鎖等待的 thread, 會吃 CPU 嗎？"></a><strong>MySQL 中, 進入鎖等待的 thread, 會吃 CPU 嗎？</strong></h6><p>不會</p>
<h6 id="MySQL-中-鎖等待的-connection-會否佔用併發查詢的總數？"><a href="#MySQL-中-鎖等待的-connection-會否佔用併發查詢的總數？" class="headerlink" title="MySQL 中, 鎖等待的 connection, 會否佔用併發查詢的總數？"></a><strong>MySQL 中, 鎖等待的 connection, 會否佔用併發查詢的總數？</strong></h6><p>不會</p>
<h6 id="MySQL-中-併發連接以及併發查詢-哪一種是-CPU-殺手"><a href="#MySQL-中-併發連接以及併發查詢-哪一種是-CPU-殺手" class="headerlink" title="MySQL 中, 併發連接以及併發查詢, 哪一種是 CPU 殺手"></a><strong>MySQL 中, 併發連接以及併發查詢, 哪一種是 CPU 殺手</strong></h6><p>併發查詢</p>
<h6 id="MySQL-中-innodb-thread-concurrency-建議設為多少？"><a href="#MySQL-中-innodb-thread-concurrency-建議設為多少？" class="headerlink" title="MySQL 中, innodb_thread_concurrency 建議設為多少？"></a><strong>MySQL 中, innodb_thread_concurrency 建議設為多少？</strong></h6><p>64~128, 取決於 CPU 有幾核</p>
<h6 id="以下的-MySQL-example-code-amp-image-的意思是？"><a href="#以下的-MySQL-example-code-amp-image-的意思是？" class="headerlink" title="以下的 MySQL example code &amp; image 的意思是？"></a><strong>以下的 MySQL example code &amp; image 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set global innodb_thread_concurrency=3;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line"> insert into t values(1,1)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWjXl5DSgu-En42JXcs2VYqjLIBRTg6NYMrezZJp3IFK9jlq9kYGl5dYNC-Ke9dOD4K9-m0lp-9N9oKBvZyBurQ0hNavsYp6u6HPmWmuLBkcvE79z1Lyn0Yq-JjNr-Vp-pvgIVvj9vup9HCQchpijPzbA=w932-h290-no?authuser=0"></li>
<li><strong>Answer</strong>:<br><code>select 1;</code> 只能檢測出 MySQL process 還在, 但如果是併發查詢被佔滿了, 就無法偵測出</li>
</ul>
<h6 id="MySQL-join-中-建議小表當驅動表-如何定義小表？"><a href="#MySQL-join-中-建議小表當驅動表-如何定義小表？" class="headerlink" title="MySQL join 中, 建議小表當驅動表, 如何定義小表？"></a><strong>MySQL join 中, 建議小表當驅動表, 如何定義小表？</strong></h6><p>在 where 語句過濾過, 以及 select 欄位的多寡, 總結出行數較少且字段較少的, 稱為小表</p>
<h6 id="以下的-MySQL-example-code-中-假設-t1-有-100-行-t2-有-1000-行-哪句效能較優？"><a href="#以下的-MySQL-example-code-中-假設-t1-有-100-行-t2-有-1000-行-哪句效能較優？" class="headerlink" title="以下的 MySQL example code 中, 假設 t1 有 100 行, t2 有 1000 行, 哪句效能較優？"></a><strong>以下的 MySQL example code 中, 假設 t1 有 100 行, t2 有 1000 行, 哪句效能較優？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select t1.b,t2.* from  t1  straight_join t2 on (t1.b=t2.b) where t2.id&lt;=100;</span><br><span class="line">select t1.b,t2.* from  t2  straight_join t1 on (t1.b=t2.b) where t2.id&lt;=100;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>第一句<br>where 讓兩個表都等於 100 行, 但 t1 只取 b, t2 取所有字段, 因此 t2 資料較大<br>結論, 選佔用 join_buffer 少的</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-假設-t1-有-100-行-t2-有-1000-行-哪一句的效能較好？"><a href="#以下的-MySQL-example-code-中-假設-t1-有-100-行-t2-有-1000-行-哪一句的效能較好？" class="headerlink" title="以下的 MySQL example code 中, 假設 t1 有 100 行, t2 有 1000 行, 哪一句的效能較好？"></a><strong>以下的 MySQL example code 中, 假設 t1 有 100 行, t2 有 1000 行, 哪一句的效能較好？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from t1 straight_join t2 on (t1.b=t2.b) where t2.id&lt;=50;</span><br><span class="line">select * from t2 straight_join t1 on (t1.b=t2.b) where t2.id&lt;=50;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>第二句, 因為 where 條件, t2 只需 50 行, 所以 join_buffer 中只需丟入 50 行即可</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-12"><a href="#以下的-MySQL-example-image-的意思是？-12" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLX5O7IEg37z0sI7kdYUi2lNoL-z_eVJaxd2hXpkbAG6q5QvWkZSfmwrss3bYRs845L72qP5kjXXfHABle_g2NBs6h3KTz755UbjgUFOTAzcq0wcCcZR7SLRFIiYmuew7IxJvwzYLhhb76Eo-uBewNpapA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 根據 join_buffer 的大小, 取出對應數量 t1 放入 join_buffer<br>(2) t2 full table scan, 每一行 t2 都要跟 t1 88 行比對<br>(3) 符合的結果存到 result set<br>(4) 清空 join_buffer<br>(5) 塞入 t1 剩下的行數<br>(6) 重複步驟 2<br>(7) 重複步驟 3</li>
</ul>
<h6 id="MySQL-中-join-buffer-size-的用途是？"><a href="#MySQL-中-join-buffer-size-的用途是？" class="headerlink" title="MySQL 中, join_buffer_size 的用途是？"></a><strong>MySQL 中, join_buffer_size 的用途是？</strong></h6><p>定義 join_buffer 的大小, 會影響到 BNJ (Block Nested Join) 的速度</p>
<h6 id="以下的-MySQL-example-image-的意思是？-13"><a href="#以下的-MySQL-example-image-的意思是？-13" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVIkBE1DYH8PFGZ943Ef9MSupI_vqg8ofl-VlXWeKtDrmqDGmgvcZXJ2a-dsIQ3SVBLCryJn5OR5Z0ksnIA6e_uLau5SluieJn5o7wO8JKUSagw2xMj5p2lvXdfz2jae6bdkzaBEoZVkUeJa09Vnq-F-Q=w1763-h164-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>代表 join 無使用 index, 使用 BNJ 算法以及 join_buffer, 這種情況下不建議使用 join</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-說說-join-實際的執行順序？"><a href="#以下的-MySQL-example-code-中-說說-join-實際的執行順序？" class="headerlink" title="以下的 MySQL example code 中, 說說 join 實際的執行順序？"></a><strong>以下的 MySQL example code 中, 說說 join 實際的執行順序？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t2` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `a` int(11) DEFAULT NULL,</span><br><span class="line">  `b` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `a` (`a`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">drop procedure idata;</span><br><span class="line">delimiter ;;</span><br><span class="line">create procedure idata()</span><br><span class="line">begin</span><br><span class="line">  declare i int;</span><br><span class="line">  set i=1;</span><br><span class="line">  while(i&lt;=1000)do</span><br><span class="line">    insert into t2 values(i, i, i);</span><br><span class="line">    set i=i+1;</span><br><span class="line">  end while;</span><br><span class="line">end;;</span><br><span class="line">delimiter ;</span><br><span class="line">call idata();</span><br><span class="line"></span><br><span class="line">create table t1 like t2;</span><br><span class="line">insert into t1 (select * from t2 where id&lt;=100)</span><br><span class="line"></span><br><span class="line">select * from t1 straight_join t2 on (t1.b=t2.b);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>被驅動表上無可用的索引<br>(1) 由於是 <code>select * from t1</code>, 因此將整個 t1 讀入 join_buffer<br>(2) full scan t2, 並逐一取出, 與 join_buffer 中的每一行比對, 由於 join_buffer 中是無序數組, 因此 t2 中的每一行都要跟 join_buffer 做 100 次判斷, 總共判斷 100*1000 = 100000 次<br>(3) 取出表 t2 中滿足條件的行, 跟 t1 該行組成一行, 作為結果集的一部分<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLXOcvzNF5389SAhk5P0qo6qvBWtJaAjIOS8Pb7SPRvVWBeBqtTs58Bkg_pX8iVJWl0ip5_Cu-Lr65sHxSdrOcVlnK74z2fxbNeVPjECA8A2JLtrNt7rG9T_Xu9-EoS_T2Z6l96uL1GoFOj0mLm56xyFCQ=w1142-h880-no?authuser=0"></li>
</ul>
<h6 id="MySQL-中-使用-join-時-該選擇-record-多或少的當驅動表？"><a href="#MySQL-中-使用-join-時-該選擇-record-多或少的當驅動表？" class="headerlink" title="MySQL 中, 使用 join 時, 該選擇 record 多或少的當驅動表？"></a><strong>MySQL 中, 使用 join 時, 該選擇 record 多或少的當驅動表？</strong></h6><p>少的, 因為複雜度是 <code>N + N*2*logM</code><br>N 是驅動表行數, M 是被驅動表行數</p>
<h6 id="以下的-MySQL-example-code-中-假設-t1-共有-N-行-t2-共有-M-行-a-有索引-那總時間複雜度為多少？"><a href="#以下的-MySQL-example-code-中-假設-t1-共有-N-行-t2-共有-M-行-a-有索引-那總時間複雜度為多少？" class="headerlink" title="以下的 MySQL example code 中, 假設 t1 共有 N 行, t2 共有 M 行,  a 有索引, 那總時間複雜度為多少？"></a><strong>以下的 MySQL example code 中, 假設 t1 共有 N 行, t2 共有 M 行,  a 有索引, 那總時間複雜度為多少？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from t1 straight_join t2 on (t1.a=t2.a);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>N+N<em>2</em>logM<br>t1 行數, 每次在 t2 搜索的複雜度為 2*logM, 共搜索 N 次<br>t2 每次共會搜尋兩棵樹, a index 以及 id<br>每次樹搜索的時間複雜度為 logM</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-假設-t2-共有-M-行-a-有索引-那搜索-t2-單次的時間複雜度是多少？"><a href="#以下的-MySQL-example-code-中-假設-t2-共有-M-行-a-有索引-那搜索-t2-單次的時間複雜度是多少？" class="headerlink" title="以下的 MySQL example code 中, 假設 t2 共有 M 行,  a 有索引, 那搜索 t2 單次的時間複雜度是多少？"></a><strong>以下的 MySQL example code 中, 假設 t2 共有 M 行,  a 有索引, 那搜索 t2 單次的時間複雜度是多少？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from t1 straight_join t2 on (t1.a=t2.a);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>2*logM<br>共會搜尋兩棵樹, a index 以及 id<br>每次樹搜索的時間複雜度為 logM</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-若不使用-join-而使用-select-from-t1-在手動拼接-共掃幾行？-差異是？"><a href="#以下的-MySQL-example-code-中-若不使用-join-而使用-select-from-t1-在手動拼接-共掃幾行？-差異是？" class="headerlink" title="以下的 MySQL example code 中, 若不使用 join, 而使用 select * from t1 在手動拼接, 共掃幾行？ 差異是？"></a><strong>以下的 MySQL example code 中, 若不使用 join, 而使用 select * from t1 在手動拼接, 共掃幾行？ 差異是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t2` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `a` int(11) DEFAULT NULL,</span><br><span class="line">  `b` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `a` (`a`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">drop procedure idata;</span><br><span class="line">delimiter ;;</span><br><span class="line">create procedure idata()</span><br><span class="line">begin</span><br><span class="line">  declare i int;</span><br><span class="line">  set i=1;</span><br><span class="line">  while(i&lt;=1000)do</span><br><span class="line">    insert into t2 values(i, i, i);</span><br><span class="line">    set i=i+1;</span><br><span class="line">  end while;</span><br><span class="line">end;;</span><br><span class="line">delimiter ;</span><br><span class="line">call idata();</span><br><span class="line"></span><br><span class="line">create table t1 like t2;</span><br><span class="line">insert into t1 (select * from t2 where id&lt;=100)</span><br><span class="line"></span><br><span class="line">select * from t1 straight_join t2 on (t1.a=t2.a);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>一樣共掃 200 行, 差異在於會有 101 次 query, 使用 join 只有 1 次</li>
</ul>
<h6 id="以下的-MySQL-example-image-分別各掃兩個-table-幾行？"><a href="#以下的-MySQL-example-image-分別各掃兩個-table-幾行？" class="headerlink" title="以下的 MySQL example image, 分別各掃兩個 table 幾行？"></a><strong>以下的 MySQL example image, 分別各掃兩個 table 幾行？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>(1) 對驅動表 t1 全表掃, 100 行<br>(2) 取 a 字段到 t2 找, 樹搜索共 100 行<br>(3) 共 200 行</li>
</ul>
<h6 id="以下的-MySQL-example-image-是算哪種算法？"><a href="#以下的-MySQL-example-image-是算哪種算法？" class="headerlink" title="以下的 MySQL example image, 是算哪種算法？"></a><strong>以下的 MySQL example image, 是算哪種算法？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>NLJ (Index Nested-Loop Join)</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-說說-join-實際的執行順序？-1"><a href="#以下的-MySQL-example-code-中-說說-join-實際的執行順序？-1" class="headerlink" title="以下的 MySQL example code 中, 說說 join 實際的執行順序？"></a><strong>以下的 MySQL example code 中, 說說 join 實際的執行順序？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t2` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `a` int(11) DEFAULT NULL,</span><br><span class="line">  `b` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `a` (`a`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">drop procedure idata;</span><br><span class="line">delimiter ;;</span><br><span class="line">create procedure idata()</span><br><span class="line">begin</span><br><span class="line">  declare i int;</span><br><span class="line">  set i=1;</span><br><span class="line">  while(i&lt;=1000)do</span><br><span class="line">    insert into t2 values(i, i, i);</span><br><span class="line">    set i=i+1;</span><br><span class="line">  end while;</span><br><span class="line">end;;</span><br><span class="line">delimiter ;</span><br><span class="line">call idata();</span><br><span class="line"></span><br><span class="line">create table t1 like t2;</span><br><span class="line">insert into t1 (select * from t2 where id&lt;=100)</span><br><span class="line"></span><br><span class="line">select * from t1 straight_join t2 on (t1.a=t2.a);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>(1) 從表 t1 中讀入一行數據 R<br>(2) 從數據 R 中, 取出 a 字段, 到表 t2 中去找<br>(3) 取出表 t2 中滿足條件的行, 跟 R 組成一行, 作為結果集的一部分<br>(4) 重複 1~3, 直到表 t1 循環結束<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVIl0e0aSVNzknIC3S9BsbB3RCCHkwzWYW1EtiPAotJCCMmGBwHHa_PEAnd6_xiSnI3gx7cz5cxf8A6by7F785X2BfvcrZ8EVZdYc4Qf88B0YEvDgD5oYqUoCEOssWsaZ8IKW5TMceszy1nyU6NyEJUQA=w1142-h880-no?authuser=0"></li>
</ul>
<h6 id="MySQL-中-以下三種-dead-lock-log-代表的意思是？"><a href="#MySQL-中-以下三種-dead-lock-log-代表的意思是？" class="headerlink" title="MySQL 中, 以下三種 dead lock log 代表的意思是？"></a><strong>MySQL 中, 以下三種 dead lock log 代表的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">locks gap before rec</span><br><span class="line">lock_mode X locks rec but not gap</span><br><span class="line">lock_mode X waiting</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>(1) 第一種代表 gap lock<br>(2) 第二種代表 row lock<br>(3) 第三種代表 next-key lock</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-為什麼會-block"><a href="#以下的-MySQL-example-image-中-為什麼會-block" class="headerlink" title="以下的 MySQL example image 中, 為什麼會 block?"></a><strong>以下的 MySQL example image 中, 為什麼會 block?</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLWaF6kCW1Mf-oVaa8LNdmgi5NTIuTw7Ahu87maWTI5PCnhGEVwLfWScHUOWsAL4LwiR2deZEBG-NnDkZkg8YDJu4Ni9q4qf1Wl35SNhRu1S2oqI32RKzvWjv0U3BhouH5kRmiLeNduYKlw8Q4R9mGu-Gg=w1252-h500-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>原先鎖的範圍為 (5~最大值], 更新之後, 變成 (1, 最大值], 所以 5 鎖住了<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLVH7J0E977PErI-lbE5psSSqfM-GSYPon4GnsuDRrttz4sYjRc93ixUvdIN97hzQAALTuEw27KYkVCUsYgE-VdA26aGD6qxyJnhMPXy_1OG_YT2CnntgByeoPh_yR7ua2RVSBBgi_p5nXgCnfZnj0d4qg=w1142-h856-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-image-中-為什麼會-block-1"><a href="#以下的-MySQL-example-image-中-為什麼會-block-1" class="headerlink" title="以下的 MySQL example image 中, 為什麼會 block?"></a><strong>以下的 MySQL example image 中, 為什麼會 block?</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/AM-JKLV_nO41_bXjkGHmjT9V0UzugmugbVvdIB-f7e7pQ8mro6RlRFq6YYXMukVLcQjjYEuK87C98fQO5VR-Ovt4FDeCHXTCiKttCFYu6P-1-3MymK1RAguKYnWEvik7GN3ELBuiwuyiH2gjfRhIDzsaxWQ_hg=w1246-h402-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>因為 id=10 被刪除後, next-key lock 變為 (5,15], 原本是 (10,15]</li>
</ul>
<h6 id="MySQL-中-為了避免死鎖-在對同一個資源-query-時-要按照怎樣的順序訪問？"><a href="#MySQL-中-為了避免死鎖-在對同一個資源-query-時-要按照怎樣的順序訪問？" class="headerlink" title="MySQL 中, 為了避免死鎖, 在對同一個資源 query 時, 要按照怎樣的順序訪問？"></a><strong>MySQL 中, 為了避免死鎖, 在對同一個資源 query 時, 要按照怎樣的順序訪問？</strong></h6><p>相同的順序</p>
<h6 id="以下的-MySQL-example-image-事務-2-的意思是？"><a href="#以下的-MySQL-example-image-事務-2-的意思是？" class="headerlink" title="以下的 MySQL example image, 事務 2 的意思是？"></a><strong>以下的 MySQL example image, 事務 2 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br><code>HOLDS THE LOCK(S)</code> 用來顯示這個事務持有哪些鎖；<br><code>index c of table test.t</code> 表示鎖是在表t 的索引c 上；<br><code>hex 0000000a 和hex 00000014</code> 表示這個事務持有c=10 和c=20 這兩個記錄鎖；<br><code>WAITING FOR THIS LOCK TO BE GRANTED</code>，表示在等(c=5,id=5) 這個記錄鎖。<br><code>lock in share mode</code> 的這條語句，持有c=5 的記錄鎖，在等c=10 的鎖；<br><code>for update</code> 這個語句，持有c=20 和c=10 的記錄鎖，在等c=5 的記錄鎖。</li>
</ul>
<h6 id="以下的-MySQL-example-image-事務-1-的意思是？"><a href="#以下的-MySQL-example-image-事務-1-的意思是？" class="headerlink" title="以下的 MySQL example image, 事務 1 的意思是？"></a><strong>以下的 MySQL example image, 事務 1 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br><code>WAITING FOR THIS LOCK TO BE GRANTED</code>, 表示這個事務在等待的鎖的信息<br><code>index c of table test.t</code>, 說明在等的是表 t 的索引 c 上面的鎖<br><code>lock mode S waiting</code>, 表示這個語句要自己加一個讀鎖, 當前狀態等待中<br><code>Record lock</code>, 說明這是一個紀錄鎖<br><code>n_fields 2</code>, 表示這個紀錄是兩列, 也就是 column c 以及 primary key id<br><code>0: len 4; hex 0000000a; asc ;;</code>, 是第一個 column, 也就是 c, 值為十六進制 a, 即 10 是第一个字段，也就是 c。值是十六进制 a，也就是 10<br><code>1: len 4; hex 0000000a; asc ;;</code>, 是第二個 column, 也就是 primary key id, 值也是 10, 這兩行裡面的 asc 表示的是, 接下來要打印出值裡面的 ‘可打印字符’, 但 10 不是可打印字符, 因此就顯示空格<br>以上信息顯示出在等 (c=10,id=10) 這一行鎖, 但既然出現死鎖了, 表示這個事務也佔有別的鎖, 但沒有顯示出來</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-asc-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-asc-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, asc ;; 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>asc ;;</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>要打印出值的 ‘可打印字符’, 但 10 不是可打印字符, 因此顯示空格</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-1-len-4-hex-0000000a-asc-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-1-len-4-hex-0000000a-asc-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, 1: len 4; hex 0000000a; asc ;; 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>1: len 4; hex 0000000a; asc ;;</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>第二個字段, 也就是 primary key id, 值是 16 進制 A, 也就是 10</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-0-len-4-hex-0000000a-asc-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-0-len-4-hex-0000000a-asc-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, 0: len 4; hex 0000000a; asc ;; 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>0: len 4; hex 0000000a; asc ;;</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>第一個字段, 也就是 c, 值是 16 進制 A, 也就是 10</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-n-fields-2-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-n-fields-2-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, n_fields 2 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>n_fields 2</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>表示這個紀錄是兩列, column c 以及 primary key id</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-Record-lock-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-Record-lock-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, Record lock 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>Record lock</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>說明這是一個紀錄鎖</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-lock-mode-S-waiting-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-lock-mode-S-waiting-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, lock mode S waiting 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>lock mode S waiting</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>表示這個事務想要自己加一個讀鎖, 狀態為等待中</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-2-中-hex-0000000a-和-hex-00000014-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-2-中-hex-0000000a-和-hex-00000014-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 2 中, hex 0000000a 和 hex 00000014 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 2 中, <code>hex 0000000a 和 hex 00000014</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>表示這個事務持有 c=10, c=20 這兩個紀錄鎖</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-index-c-of-table-test-t-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-index-c-of-table-test-t-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, index c of table `test`.`t` 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>index c of table `test`.`t`</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>表示在等的是表 t 的索引 c 上的鎖</li>
</ul>
<h6 id="以下的-MySQL-example-image-transaction-1-中-WAITING-FOR-THIS-LOCK-TO-BE-GRANTED-代表的意思是？"><a href="#以下的-MySQL-example-image-transaction-1-中-WAITING-FOR-THIS-LOCK-TO-BE-GRANTED-代表的意思是？" class="headerlink" title="以下的 MySQL example image, transaction 1 中, WAITING FOR THIS LOCK TO BE GRANTED 代表的意思是？"></a><strong>以下的 MySQL example image, transaction 1 中, <code>WAITING FOR THIS LOCK TO BE GRANTED</code> 代表的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f6kvT6unO-YJ8VhqxEeFDjDgib8_q9J8rzAGC-UvDSPP_AazT_wIq_1zyB1lRz4w8PEVJ1yvfY6SkWKN5qUZWcFpdGTlXcFasvpoPvGLD2TDy3bhYU3qs4y6cyHNb-2b7hf0wxU9YfXCzVXNocXx2MNw=w1288-h825-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>表示這個事務在等待的鎖的信息</li>
</ul>
<h6 id="MySQL-中-當條件為範圍查詢時-為什麼會出現等值查詢？"><a href="#MySQL-中-當條件為範圍查詢時-為什麼會出現等值查詢？" class="headerlink" title="MySQL 中, 當條件為範圍查詢時, 為什麼會出現等值查詢？"></a><strong>MySQL 中, 當條件為範圍查詢時, 為什麼會出現等值查詢？</strong></h6><p>在第一次樹搜索定位時會使用等值查詢</p>
<h6 id="以下的-MySQL-example-code-中-加了哪些鎖-順序為何？"><a href="#以下的-MySQL-example-code-中-加了哪些鎖-順序為何？" class="headerlink" title="以下的 MySQL example code 中, 加了哪些鎖, 順序為何？"></a><strong>以下的 MySQL example code 中, 加了哪些鎖, 順序為何？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">begin;</span><br><span class="line">select * from t where id&gt;9 and id&lt;12 order by id desc for update;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>由於 desc, 會先 tree search 找 id=12 的值, 沒找到, 只找到 <code>(10,15)</code> key-lock, 這邊會先往右遍歷, 因為 15 != 12, 索引等值查詢不相等時會退化為 gap lock<br>向左遍歷, 舊版 MySQL 會掃到第一個不符合條件的值為止, 即 id=5, 所以鎖了 <code>(0,5]</code>, <code>(5,10]</code><br>總共鎖了 <code>(0,5]</code>, <code>(5,10]</code>, <code>(10,15)</code> </li>
</ul>
<h6 id="根據阿里巴巴-MySQL-規約-撈取資料時-可以使用-嗎？"><a href="#根據阿里巴巴-MySQL-規約-撈取資料時-可以使用-嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 撈取資料時, 可以使用 * 嗎？"></a><strong>根據阿里巴巴 MySQL 規約, 撈取資料時, 可以使用 <code>*</code> 嗎？</strong></h6><p>不可, 需指名 column</p>
<h6 id="根據阿里巴巴-MySQL-規約-不在代碼中使用-truncate-來代替-delete-儘管-truncate-速度快-原因為何？"><a href="#根據阿里巴巴-MySQL-規約-不在代碼中使用-truncate-來代替-delete-儘管-truncate-速度快-原因為何？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 不在代碼中使用 truncate 來代替 delete, 儘管 truncate 速度快, 原因為何？"></a><strong>根據阿里巴巴 MySQL 規約, 不在代碼中使用 truncate 來代替 delete, 儘管 truncate 速度快, 原因為何？</strong></h6><p>truncate 無事務, 且無法觸發 trigger</p>
<h6 id="根據阿里巴巴-MySQL-規約-如果有全球化需求-且有表情符號需求-資料庫儲存使用什麼編碼？"><a href="#根據阿里巴巴-MySQL-規約-如果有全球化需求-且有表情符號需求-資料庫儲存使用什麼編碼？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 如果有全球化需求, 且有表情符號需求, 資料庫儲存使用什麼編碼？"></a><strong>根據阿里巴巴 MySQL 規約, 如果有全球化需求, 且有表情符號需求, 資料庫儲存使用什麼編碼？</strong></h6><p>utf8mb4</p>
<h6 id="根據阿里巴巴-MySQL-規約-如果有全球化需求-資料庫儲存使用什麼編碼？"><a href="#根據阿里巴巴-MySQL-規約-如果有全球化需求-資料庫儲存使用什麼編碼？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 如果有全球化需求, 資料庫儲存使用什麼編碼？"></a><strong>根據阿里巴巴 MySQL 規約, 如果有全球化需求, 資料庫儲存使用什麼編碼？</strong></h6><p>utf8</p>
<h6 id="根據阿里巴巴-MySQL-規約-須盡量避免-in-若非得使用-限制多少數量"><a href="#根據阿里巴巴-MySQL-規約-須盡量避免-in-若非得使用-限制多少數量" class="headerlink" title="根據阿里巴巴 MySQL 規約, 須盡量避免 in, 若非得使用, 限制多少數量 ?"></a><strong>根據阿里巴巴 MySQL 規約, 須盡量避免 in, 若非得使用, 限制多少數量 ?</strong></h6><p>1000 以內</p>
<h6 id="根據阿里巴巴-MySQL-規約-是否須盡量避免-in"><a href="#根據阿里巴巴-MySQL-規約-是否須盡量避免-in" class="headerlink" title="根據阿里巴巴 MySQL 規約, 是否須盡量避免 in ?"></a><strong>根據阿里巴巴 MySQL 規約, 是否須盡量避免 in ?</strong></h6><p>是的</p>
<h6 id="根據阿里巴巴-MySQL-規約-要刪除-data-前-要先經過哪道程序？"><a href="#根據阿里巴巴-MySQL-規約-要刪除-data-前-要先經過哪道程序？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 要刪除 data 前, 要先經過哪道程序？"></a><strong>根據阿里巴巴 MySQL 規約, 要刪除 data 前, 要先經過哪道程序？</strong></h6><p>要先 select, 確認無誤避免誤刪</p>
<h6 id="根據阿里巴巴-MySQL-規約-不可使用-process-原因為何？"><a href="#根據阿里巴巴-MySQL-規約-不可使用-process-原因為何？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 不可使用 process, 原因為何？"></a><strong>根據阿里巴巴 MySQL 規約, 不可使用 process, 原因為何？</strong></h6><p>難以調適、拓展, 更無移植性</p>
<h6 id="根據阿里巴巴-MySQL-規約-需使用-IFNULL-來判斷是否-NULL-為什麼？"><a href="#根據阿里巴巴-MySQL-規約-需使用-IFNULL-來判斷是否-NULL-為什麼？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 需使用 IFNULL() 來判斷是否 NULL, 為什麼？"></a><strong>根據阿里巴巴 MySQL 規約, 需使用 IFNULL() 來判斷是否 NULL, 為什麼？</strong></h6><p>因為</p>
<ul>
<li><code>NULL&lt;&gt;NULL</code> 的返回结果是 NULL，而不是 false。</li>
<li><code>NULL=NULL</code> 的返回结果是 NULL，而不是 true。</li>
<li><code>NULL&lt;&gt;1</code> 的返回结果是 NULL，而不是 true。</li>
</ul>
<h6 id="MySQL-中-如果一個大事務執行了-10-分鐘-從庫會只堵這個事務-還是所有的事務？"><a href="#MySQL-中-如果一個大事務執行了-10-分鐘-從庫會只堵這個事務-還是所有的事務？" class="headerlink" title="MySQL 中, 如果一個大事務執行了 10 分鐘, 從庫會只堵這個事務, 還是所有的事務？"></a><strong>MySQL 中, 如果一個大事務執行了 10 分鐘, 從庫會只堵這個事務, 還是所有的事務？</strong></h6><p>看是否有並行複製, 預設是串行, 就是全堵</p>
<h6 id="MySQL-中-一般主從延遲超過多少就不好？"><a href="#MySQL-中-一般主從延遲超過多少就不好？" class="headerlink" title="MySQL 中, 一般主從延遲超過多少就不好？"></a><strong>MySQL 中, 一般主從延遲超過多少就不好？</strong></h6><p>大於 1</p>
<h6 id="MySQL-當主從連接時會取得-unix-timestamp-取得時間差-若連接完成後再去改從庫系統時間-會否造成-seconds-behind-master-不準？"><a href="#MySQL-當主從連接時會取得-unix-timestamp-取得時間差-若連接完成後再去改從庫系統時間-會否造成-seconds-behind-master-不準？" class="headerlink" title="MySQL 當主從連接時會取得 unix_timestamp 取得時間差, 若連接完成後再去改從庫系統時間, 會否造成 seconds_behind_master 不準？"></a><strong>MySQL 當主從連接時會取得 unix_timestamp 取得時間差, 若連接完成後再去改從庫系統時間, 會否造成 seconds_behind_master 不準？</strong></h6><p>會的, 主庫只在建立連接時取得時間差</p>
<h6 id="根據阿里巴巴-MySQL-規約-可以使用-foreign-key-嗎？"><a href="#根據阿里巴巴-MySQL-規約-可以使用-foreign-key-嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 可以使用 foreign key 嗎？"></a><strong>根據阿里巴巴 MySQL 規約, 可以使用 foreign key 嗎？</strong></h6><p>只可在應用層實施, 高併發或分布式資料庫時會造成嚴重阻塞</p>
<h6 id="以下的-MySQL-example-code-的意思是？-11"><a href="#以下的-MySQL-example-code-的意思是？-11" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT IF (ISNULL (SUM (g)),0,SUM (g)) FROM table;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>因為 sum(col) 如果 col 全為 null, 則 result 為 null, 因此為了避免 NPE (Null Pointing Exception) issue, 使用 IFNULL 判斷, 若 NULL 則給 default 0</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-如果-col-全為-null-那結果會是？"><a href="#以下的-MySQL-example-code-中-如果-col-全為-null-那結果會是？" class="headerlink" title="以下的 MySQL example code 中, 如果 col 全為 null, 那結果會是？"></a><strong>以下的 MySQL example code 中, 如果 col 全為 null, 那結果會是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select sum(col) from table;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>NULL</li>
</ul>
<h6 id="以下的-MySQL-example-code-假設-column1-全為-null-column2-全不為-null-則結果為？"><a href="#以下的-MySQL-example-code-假設-column1-全為-null-column2-全不為-null-則結果為？" class="headerlink" title="以下的 MySQL example code, 假設 column1 全為 null, column2 全不為 null, 則結果為？"></a><strong>以下的 MySQL example code, 假設 column1 全為 null, column2 全不為 null, 則結果為？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select count (column1, column2) from table;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>0</li>
</ul>
<h6 id="根據阿里巴巴-MySQL-規約-在建立索引方面有哪三種誤解？"><a href="#根據阿里巴巴-MySQL-規約-在建立索引方面有哪三種誤解？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 在建立索引方面有哪三種誤解？"></a><strong>根據阿里巴巴 MySQL 規約, 在建立索引方面有哪三種誤解？</strong></h6><ol>
<li>一個查詢就需要一個 index</li>
<li>index 會嚴重消耗空間, 拖慢更新以及新增速度</li>
<li>唯一索引一律需要在應用層先查後插入解決</li>
</ol>
<h6 id="根據阿里巴巴-MySQL-規約-建立-compund-index-時-通常區分度高的為左邊-有什麼例外情況？"><a href="#根據阿里巴巴-MySQL-規約-建立-compund-index-時-通常區分度高的為左邊-有什麼例外情況？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 建立 compund index 時, 通常區分度高的為左邊, 有什麼例外情況？"></a><strong>根據阿里巴巴 MySQL 規約, 建立 compund index 時, 通常區分度高的為左邊, 有什麼例外情況？</strong></h6><p>非等值以及等值混合判斷時, 即使非等值的 index 區分度較高, 也需置於右邊</p>
<h6 id="根據阿里巴巴-MySQL-規約-建立-compund-index-時-怎樣的-index-置於右邊？"><a href="#根據阿里巴巴-MySQL-規約-建立-compund-index-時-怎樣的-index-置於右邊？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 建立 compund index 時, 怎樣的 index 置於右邊？"></a><strong>根據阿里巴巴 MySQL 規約, 建立 compund index 時, 怎樣的 index 置於右邊？</strong></h6><p>區分度高的</p>
<h6 id="根據阿里巴巴-MySQL-規約-SQL-性能優化又分為哪三個等級？"><a href="#根據阿里巴巴-MySQL-規約-SQL-性能優化又分為哪三個等級？" class="headerlink" title="根據阿里巴巴 MySQL 規約, SQL 性能優化又分為哪三個等級？"></a><strong>根據阿里巴巴 MySQL 規約, SQL 性能優化又分為哪三個等級？</strong></h6><ol>
<li>const: 單一匹配, 如 id 或 unique index</li>
<li>ref: normal index</li>
<li>range: range index serach</li>
</ol>
<h6 id="以下的-MySQL-example-code-的意思是？-12"><a href="#以下的-MySQL-example-code-的意思是？-12" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT a.* FROM table_a as a, (select id from table_a where xxx LIMIT 100000,20) as b where a.id=b.id</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當資料庫資料筆數到達一定程度時, limit 會造成效能低下, 因為 MySQL 是先取得 100000 + 20 行, 在丟棄 100000 行<br>因此可以利用 subquery 取得目標 id, 再從該 id 取得所有資料</li>
</ul>
<h6 id="根據阿里巴巴-MySQL-規約-可以使用左模糊或全模糊搜尋嗎？"><a href="#根據阿里巴巴-MySQL-規約-可以使用左模糊或全模糊搜尋嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 可以使用左模糊或全模糊搜尋嗎？"></a><strong>根據阿里巴巴 MySQL 規約, 可以使用左模糊或全模糊搜尋嗎？</strong></h6><p>不可, 若有必要請使用搜尋引擎</p>
<h6 id="根據阿里巴巴-MySQL-規約-在-varchar-上建立-index-務必使用哪種類型-index"><a href="#根據阿里巴巴-MySQL-規約-在-varchar-上建立-index-務必使用哪種類型-index" class="headerlink" title="根據阿里巴巴 MySQL 規約, 在 varchar 上建立 index, 務必使用哪種類型 index?"></a><strong>根據阿里巴巴 MySQL 規約, 在 varchar 上建立 index, 務必使用哪種類型 index?</strong></h6><p>prefix</p>
<h6 id="根據阿里巴巴-MySQL-規約-超過幾個-table-不可使用-join"><a href="#根據阿里巴巴-MySQL-規約-超過幾個-table-不可使用-join" class="headerlink" title="根據阿里巴巴 MySQL 規約, 超過幾個 table 不可使用 join?"></a><strong>根據阿里巴巴 MySQL 規約, 超過幾個 table 不可使用 join?</strong></h6><p>三個</p>
<h6 id="以下的-MySQL-example-code-的意思是？-13"><a href="#以下的-MySQL-example-code-的意思是？-13" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">stop slave；</span><br><span class="line">CHANGE MASTER TO IGNORE_SERVER_IDS=(server_id_of_B);</span><br><span class="line">start slave;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>先暫時性的 ignore 指定的 server_id, 等到循環複製的情況解除後, 再加回來</li>
</ul>
<h6 id="MySQL-中-為什麼執行-set-global-server-id-x-後會造成循環複製？"><a href="#MySQL-中-為什麼執行-set-global-server-id-x-後會造成循環複製？" class="headerlink" title="MySQL 中, 為什麼執行 set global server_id=x 後會造成循環複製？"></a><strong>MySQL 中, 為什麼執行 <code>set global server_id=x</code> 後會造成循環複製？</strong></h6><p>因為 server_id 變了, 收到 relay log 之後發現跟目前的 server_id 不同, 就會造成循環複製了</p>
<h6 id="以下的-MySQL-example-image-的意思是？-14"><a href="#以下的-MySQL-example-image-的意思是？-14" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cSO26QFo7Tckclv8ruQaoKlzXZ-TbR9DjrVrf_jrf7pwsWo9uAy76tpIYhd3dLF-xSzrqfDrE8pGGbHLemJyiNGtVHGivHKWGbIwcdM09Erw6wuBmfa-ctj2KJUH9mDG2ys9VbX1FIS6rDK2q_BUMhng=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>可用性優先策略, binlog format 為 row<br>假設在主備切換的途中, 有兩條 insert 語句, insert c=4 以及 insert c=5</li>
</ul>
<ol>
<li>主庫 A 執行完 insert 語句, 插入 c=4</li>
<li>由於採用可用性優先策略, 不將主庫改為 readonly, 所以 insert 完畢, 即 (4,4)</li>
<li>切換為備庫 B, 此時 insert c=5, 主庫 A 改為 readonly, 備庫 B 改為可寫, 並且收到來自主庫 A 的 relay log (4,4)</li>
<li>備庫 B insert c=5 執行完畢, 即 (4,5), 主庫 A 收到來自於備庫 B 的 relay log (4,5)</li>
<li>由於 binlog format 為 row, 所以兩邊同時報錯 duplicate key error</li>
</ol>
<h6 id="以下的-MySQL-example-image-的意思是？-15"><a href="#以下的-MySQL-example-image-的意思是？-15" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f7AaGmn0oIEvVAWCNtvVoxEYLIr4Jf0StvoypC7dcZBzSCHUl4uY6HH5eU5FLany9W3xVNZUi__Qcxc6Pu1u3sg5frF7z3qs-4LcFtWVWUNfumsZYTQHy1nEGqqm5mhSNE-64T4cV9h1iyC9YQc7DW5g=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>可用性優先策略, binlog format 為 mixed<br>假設在主備切換的途中, 有兩條 insert 語句, insert c=4 以及 insert c=5</li>
</ul>
<ol>
<li>主庫 A 執行完 insert 語句, 插入 c=4</li>
<li>由於採用可用性優先策略, 不將主庫改為 readonly, 所以 insert 完畢, 即 (4,4)</li>
<li>切換為備庫 B, 此時 insert c=5, 主庫 A 改為 readonly, 備庫 B 改為可寫, 並且收到來自主庫 A 的 relay log (4,4)</li>
<li>備庫 B insert c=5 執行完畢, 即 (4,5), 主庫 A 收到來自於備庫 B 的 relay log (4,5)</li>
<li>由於 binlog format 為 statement, 所以兩邊都寫入資料</li>
</ol>
<p>最終導致主備資料不一致的現象</p>
<h6 id="以下的-MySQL-example-image-的意思是？-16"><a href="#以下的-MySQL-example-image-的意思是？-16" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cyC-ZwUSpO8LOQNHtHFS1TgQxqH3VkSmQfiJbjquT2aab119zyQDGnT_Sj3v91gOy1nhBm1ZptXdFtJcgj3_mn3QUvXzlQujHO6WhwXqRSzeulVwMDNUXoV8AlHhKrmo8_kusnOTbYj-uqHzeESHMrBA=w1142-h880-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>可靠性優先策略</li>
</ul>
<ol>
<li>判斷 SBM (seconds_behind_master) 是否在 5 秒內, 若大於 5 秒則重複判斷</li>
<li>若在 5 秒內, 將主庫 A 改為 readonly</li>
<li>判斷備庫 B 的 SBM, 直到等於 0</li>
<li>將備庫設為可讀寫</li>
<li>將業務請求導向備庫 B</li>
</ol>
<h6 id="MySQL-中-為什麼大事務會造成主備延遲？"><a href="#MySQL-中-為什麼大事務會造成主備延遲？" class="headerlink" title="MySQL 中, 為什麼大事務會造成主備延遲？"></a><strong>MySQL 中, 為什麼大事務會造成主備延遲？</strong></h6><p>若一個主庫上的語句花費 10 分鐘執行, 那這個事務很有可能就會造成至少 10 分鐘的主備延遲</p>
<h6 id="MySQL-中-若主備延遲的原因是因為備庫又被拿來提供-read-壓力太大-通常解法是？"><a href="#MySQL-中-若主備延遲的原因是因為備庫又被拿來提供-read-壓力太大-通常解法是？" class="headerlink" title="MySQL 中, 若主備延遲的原因是因為備庫又被拿來提供 read, 壓力太大, 通常解法是？"></a><strong>MySQL 中, 若主備延遲的原因是因為備庫又被拿來提供 read, 壓力太大, 通常解法是？</strong></h6><p>採用一主多從方式, 用多個從庫去分散壓力</p>
<h6 id="MySQL-中-主備延遲有哪兩種可能？"><a href="#MySQL-中-主備延遲有哪兩種可能？" class="headerlink" title="MySQL 中, 主備延遲有哪兩種可能？"></a><strong>MySQL 中, 主備延遲有哪兩種可能？</strong></h6><ol>
<li>備庫機器規格較差</li>
<li>備庫又被用來提供 read, 反而造成壓力太大</li>
<li>大事務, 或大表 DDL</li>
<li>備庫的並行複製能力</li>
</ol>
<h6 id="MySQL-中-以下的三個時間點中-主備延遲的主要原因-可能是哪兩個時間點造成的？"><a href="#MySQL-中-以下的三個時間點中-主備延遲的主要原因-可能是哪兩個時間點造成的？" class="headerlink" title="MySQL 中, 以下的三個時間點中, 主備延遲的主要原因, 可能是哪兩個時間點造成的？"></a><strong>MySQL 中, 以下的三個時間點中, 主備延遲的主要原因, 可能是哪兩個時間點造成的？</strong></h6><ul>
<li><strong>時間點</strong>:</li>
</ul>
<ol>
<li>主庫 A 執行完成一個事務, 寫入 binlog, 這個時刻記為 T1</li>
<li>之後傳給備庫, 備庫 B 接收完這個 binlog 的時刻記為 T2</li>
<li>備庫 B 執行完成這個事務, 這個時刻記為 T3</li>
</ol>
<ul>
<li><strong>Answer</strong>:<br>T3 - T2, 即備庫消耗 relay log 的速度</li>
</ul>
<h6 id="MySQL-中-以下的三個時間點中-哪兩個時間點在網路正常的情況下是非常短的？"><a href="#MySQL-中-以下的三個時間點中-哪兩個時間點在網路正常的情況下是非常短的？" class="headerlink" title="MySQL 中, 以下的三個時間點中, 哪兩個時間點在網路正常的情況下是非常短的？"></a><strong>MySQL 中, 以下的三個時間點中, 哪兩個時間點在網路正常的情況下是非常短的？</strong></h6><ul>
<li><strong>時間點</strong>:</li>
</ul>
<ol>
<li>主庫 A 執行完成一個事務, 寫入 binlog, 這個時刻記為 T1</li>
<li>之後傳給備庫, 備庫 B 接收完這個 binlog 的時刻記為 T2</li>
<li>備庫 B 執行完成這個事務, 這個時刻記為 T3</li>
</ol>
<ul>
<li><strong>Answer</strong>:<br>T2 - T1</li>
</ul>
<h6 id="MySQL-中-若主備庫的系統時區不一致-會否影響到-seconds-behind-master-的準確度？"><a href="#MySQL-中-若主備庫的系統時區不一致-會否影響到-seconds-behind-master-的準確度？" class="headerlink" title="MySQL 中, 若主備庫的系統時區不一致, 會否影響到 seconds_behind_master 的準確度？"></a><strong>MySQL 中, 若主備庫的系統時區不一致, 會否影響到 seconds_behind_master 的準確度？</strong></h6><p>不會, 備庫連接到主庫時, 會執行 <code>SELECT UNIX_TIMESTAMP()</code> 取得當前主庫的系統時間, 若發現這個時間與備庫上的系統時間不一致, 在計算 seconds_behind_master 時會扣掉這個差值</p>
<h6 id="MySQL-中-seconds-behind-master-的精度到？"><a href="#MySQL-中-seconds-behind-master-的精度到？" class="headerlink" title="MySQL 中, seconds_behind_master 的精度到？"></a><strong>MySQL 中, seconds_behind_master 的精度到？</strong></h6><p>秒</p>
<h6 id="MySQL-中-seconds-behind-master-的計算方法是？"><a href="#MySQL-中-seconds-behind-master-的計算方法是？" class="headerlink" title="MySQL 中, seconds_behind_master 的計算方法是？"></a><strong>MySQL 中, seconds_behind_master 的計算方法是？</strong></h6><ol>
<li>每個事務的 binlog 裡有都有一個時間 column, 用於記錄主庫上寫入的時間</li>
<li>主庫取出事務的時間 column, 計算與當前系統的差值</li>
</ol>
<h6 id="MySQL-中-要取得-seconds-behind-master-可以在備庫上使用哪個指令？"><a href="#MySQL-中-要取得-seconds-behind-master-可以在備庫上使用哪個指令？" class="headerlink" title="MySQL 中, 要取得 seconds_behind_master, 可以在備庫上使用哪個指令？"></a><strong>MySQL 中, 要取得 seconds_behind_master, 可以在備庫上使用哪個指令？</strong></h6><p>show slave status</p>
<h6 id="MySQL-中-以下的三個時間點中-所謂的主備延遲-代表的是哪段時間點？"><a href="#MySQL-中-以下的三個時間點中-所謂的主備延遲-代表的是哪段時間點？" class="headerlink" title="MySQL 中, 以下的三個時間點中, 所謂的主備延遲, 代表的是哪段時間點？"></a><strong>MySQL 中, 以下的三個時間點中, 所謂的主備延遲, 代表的是哪段時間點？</strong></h6><ul>
<li><strong>時間點</strong>:</li>
</ul>
<ol>
<li>主庫 A 執行完成一個事務, 寫入 binlog, 這個時刻記為 T1</li>
<li>之後傳給備庫, 備庫 B 接收完這個 binlog 的時刻記為 T2</li>
<li>備庫 B 執行完成這個事務, 這個時刻記為 T3</li>
</ol>
<ul>
<li><strong>Answer</strong>:<br>同一個事務在<code>備庫執行完成的時間</code> 和 <code>主庫執行完成的時間</code> 的 <code>差值</code><br>T3 - T1</li>
</ul>
<h6 id="根據阿里巴巴-MySQL-規約-業務上具有唯一特性的欄位-即使是組合欄位-也必須建立-unique-index-對嗎？"><a href="#根據阿里巴巴-MySQL-規約-業務上具有唯一特性的欄位-即使是組合欄位-也必須建立-unique-index-對嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 業務上具有唯一特性的欄位, 即使是組合欄位, 也必須建立 unique index, 對嗎？"></a><strong>根據阿里巴巴 MySQL 規約, 業務上具有唯一特性的欄位, 即使是組合欄位, 也必須建立 unique index, 對嗎？</strong></h6><p>對的</p>
<h6 id="根據阿里巴巴-MySQL-規約-建議-table-大小超過多少才分庫分表？"><a href="#根據阿里巴巴-MySQL-規約-建議-table-大小超過多少才分庫分表？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 建議 table 大小超過多少才分庫分表？"></a><strong>根據阿里巴巴 MySQL 規約, 建議 table 大小超過多少才分庫分表？</strong></h6><p>2GB</p>
<h6 id="根據阿里巴巴-MySQL-規約-建議-table-超過幾行才分庫分表？"><a href="#根據阿里巴巴-MySQL-規約-建議-table-超過幾行才分庫分表？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 建議 table 超過幾行才分庫分表？"></a><strong>根據阿里巴巴 MySQL 規約, 建議 table 超過幾行才分庫分表？</strong></h6><p>500 萬行</p>
<h6 id="根據阿里巴巴-MySQL-規約-容許-column-redundency-嗎？-原則是什麼？"><a href="#根據阿里巴巴-MySQL-規約-容許-column-redundency-嗎？-原則是什麼？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 容許 column redundency 嗎？ 原則是什麼？"></a><strong>根據阿里巴巴 MySQL 規約, 容許 column redundency 嗎？ 原則是什麼？</strong></h6><p>容許適當以提高性能</p>
<ol>
<li>不是頻繁修改 column</li>
<li>不是超長 column varchar, 不是 text<br>例如商品總類目, 長度短且基本不會變更, 可冗余以減少關聯</li>
</ol>
<h6 id="根據阿里巴巴-MySQL-規約-若修正了-column-name-或-column-type-建議一併修改什麼？"><a href="#根據阿里巴巴-MySQL-規約-若修正了-column-name-或-column-type-建議一併修改什麼？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 若修正了 column name 或 column type, 建議一併修改什麼？"></a><strong>根據阿里巴巴 MySQL 規約, 若修正了 column name 或 column type, 建議一併修改什麼？</strong></h6><p>comment</p>
<h6 id="根據阿里巴巴-MySQL-規約-database-命名盡量與什麼一致？"><a href="#根據阿里巴巴-MySQL-規約-database-命名盡量與什麼一致？" class="headerlink" title="根據阿里巴巴 MySQL 規約, database  命名盡量與什麼一致？"></a><strong>根據阿里巴巴 MySQL 規約, database  命名盡量與什麼一致？</strong></h6><p>Application</p>
<h6 id="根據阿里巴巴-MySQL-規約-table-命名原則推薦格式為？"><a href="#根據阿里巴巴-MySQL-規約-table-命名原則推薦格式為？" class="headerlink" title="根據阿里巴巴 MySQL 規約, table 命名原則推薦格式為？"></a><strong>根據阿里巴巴 MySQL 規約, table 命名原則推薦格式為？</strong></h6><p>業務名稱_表的作用, 如 tiger_task</p>
<h6 id="根據阿里巴巴-MySQL-規約-table-有哪三個必備-column"><a href="#根據阿里巴巴-MySQL-規約-table-有哪三個必備-column" class="headerlink" title="根據阿里巴巴 MySQL 規約, table 有哪三個必備 column?"></a><strong>根據阿里巴巴 MySQL 規約, table 有哪三個必備 column?</strong></h6><p>id - primary key, created_at - datetime, updated_at - datetime</p>
<h6 id="根據阿里巴巴-MySQL-規約-若-column-character-大於-5000-是否需要獨立一張表格？"><a href="#根據阿里巴巴-MySQL-規約-若-column-character-大於-5000-是否需要獨立一張表格？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 若 column character 大於 5000, 是否需要獨立一張表格？"></a><strong>根據阿里巴巴 MySQL 規約, 若 column character 大於 5000, 是否需要獨立一張表格？</strong></h6><p>是</p>
<h6 id="根據阿里巴巴-MySQL-規約-character-大於多少使用-text-否則就使用-varchar"><a href="#根據阿里巴巴-MySQL-規約-character-大於多少使用-text-否則就使用-varchar" class="headerlink" title="根據阿里巴巴 MySQL 規約, character 大於多少使用 text? 否則就使用 varchar?"></a><strong>根據阿里巴巴 MySQL 規約, character 大於多少使用 text? 否則就使用 varchar?</strong></h6><p>5000</p>
<h6 id="根據阿里巴巴-MySQL-規約-如果欄位的-character-長度固定-使用哪個-column-type"><a href="#根據阿里巴巴-MySQL-規約-如果欄位的-character-長度固定-使用哪個-column-type" class="headerlink" title="根據阿里巴巴 MySQL 規約, 如果欄位的 character 長度固定, 使用哪個 column type?"></a><strong>根據阿里巴巴 MySQL 規約, 如果欄位的 character 長度固定, 使用哪個 column type?</strong></h6><p>char</p>
<h6 id="根據阿里巴巴-MySQL-規約-小數類型一律使用哪個-column-type"><a href="#根據阿里巴巴-MySQL-規約-小數類型一律使用哪個-column-type" class="headerlink" title="根據阿里巴巴 MySQL 規約, 小數類型一律使用哪個 column type?"></a><strong>根據阿里巴巴 MySQL 規約, 小數類型一律使用哪個 column type?</strong></h6><p>decimal, 為保持精度</p>
<h6 id="根據阿里巴巴-MySQL-規約-一般-index-的命名開頭為？"><a href="#根據阿里巴巴-MySQL-規約-一般-index-的命名開頭為？" class="headerlink" title="根據阿里巴巴 MySQL 規約, 一般 index 的命名開頭為？"></a><strong>根據阿里巴巴 MySQL 規約, 一般 index 的命名開頭為？</strong></h6><p>idx_xxx, 即 index 簡稱</p>
<h6 id="根據阿里巴巴-MySQL-規約-unique-key-index-的命名開頭為？"><a href="#根據阿里巴巴-MySQL-規約-unique-key-index-的命名開頭為？" class="headerlink" title="根據阿里巴巴 MySQL 規約, unique key index 的命名開頭為？"></a><strong>根據阿里巴巴 MySQL 規約, unique key index 的命名開頭為？</strong></h6><p>uk_xxx, 即 unique key 簡稱</p>
<h6 id="根據阿里巴巴-MySQL-規約-table-命名可以保留字嗎？"><a href="#根據阿里巴巴-MySQL-規約-table-命名可以保留字嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, table 命名可以保留字嗎？"></a><strong>根據阿里巴巴 MySQL 規約, table 命名可以保留字嗎？</strong></h6><p>不行, 可 google reserved word 查詢 MySQL 保留字</p>
<h6 id="根據阿里巴巴-MySQL-規約-table-命名可以使用複數嗎？"><a href="#根據阿里巴巴-MySQL-規約-table-命名可以使用複數嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, table 命名可以使用複數嗎？"></a><strong>根據阿里巴巴 MySQL 規約, table 命名可以使用複數嗎？</strong></h6><p>不行</p>
<h6 id="根據阿里巴巴-MySQL-規約-column-命名在兩個-之間-可以只出現數字嗎？"><a href="#根據阿里巴巴-MySQL-規約-column-命名在兩個-之間-可以只出現數字嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, column 命名在兩個 _ 之間, 可以只出現數字嗎？"></a><strong>根據阿里巴巴 MySQL 規約, column 命名在兩個 <code>_</code> 之間, 可以只出現數字嗎？</strong></h6><p>不行</p>
<h6 id="根據阿里巴巴-MySQL-規約-column-命名可以用數字開頭嗎？"><a href="#根據阿里巴巴-MySQL-規約-column-命名可以用數字開頭嗎？" class="headerlink" title="根據阿里巴巴 MySQL 規約, column 命名可以用數字開頭嗎？"></a><strong>根據阿里巴巴 MySQL 規約, column 命名可以用數字開頭嗎？</strong></h6><p>不行</p>
<h6 id="根據阿里巴巴-MySQL-規約-boolean-的-column-type-為？"><a href="#根據阿里巴巴-MySQL-規約-boolean-的-column-type-為？" class="headerlink" title="根據阿里巴巴 MySQL 規約, boolean 的 column type 為？"></a><strong>根據阿里巴巴 MySQL 規約, boolean 的 column type 為？</strong></h6><p>unsigned tinyint</p>
<h6 id="根據阿里巴巴-MySQL-規約-boolean-的欄位命名規則為？"><a href="#根據阿里巴巴-MySQL-規約-boolean-的欄位命名規則為？" class="headerlink" title="根據阿里巴巴 MySQL 規約, boolean 的欄位命名規則為？"></a><strong>根據阿里巴巴 MySQL 規約, boolean 的欄位命名規則為？</strong></h6><p>is_xxx</p>
<h6 id="MySQL-中-生產環境的-binlog-格式強烈建議為哪一種？"><a href="#MySQL-中-生產環境的-binlog-格式強烈建議為哪一種？" class="headerlink" title="MySQL 中, 生產環境的 binlog 格式強烈建議為哪一種？"></a><strong>MySQL 中, 生產環境的 binlog 格式強烈建議為哪一種？</strong></h6><p>row</p>
<h6 id="MySQL-中-假設一個-table-中並沒有-primary-key-然後-insert-了一筆-record-A-record-A-和之前的某一筆-record-B-一模一樣-然後使用-binlog-恢復到還沒-insert-之前-會否刪掉早前那筆一模一樣-record"><a href="#MySQL-中-假設一個-table-中並沒有-primary-key-然後-insert-了一筆-record-A-record-A-和之前的某一筆-record-B-一模一樣-然後使用-binlog-恢復到還沒-insert-之前-會否刪掉早前那筆一模一樣-record" class="headerlink" title="MySQL 中, 假設一個 table 中並沒有 primary key, 然後 insert 了一筆 record A, record A 和之前的某一筆 record B 一模一樣, 然後使用 binlog 恢復到還沒 insert 之前, 會否刪掉早前那筆一模一樣 record"></a><strong>MySQL 中, 假設一個 table 中並沒有 primary key, 然後 insert 了一筆 record A, record A 和之前的某一筆 record B 一模一樣, 然後使用 binlog 恢復到還沒 insert 之前, 會否刪掉早前那筆一模一樣 record</strong></h6><p>有可能刪到 record B, 因為當 table 沒有 primary key, binlog 中就不會紀錄 primary key</p>
<h6 id="MySQL-中-假設禮拜日的-23-做了備份-禮拜二-20-要恢復數據-該使用哪個參數讓-binlog-停在禮拜日的-23"><a href="#MySQL-中-假設禮拜日的-23-做了備份-禮拜二-20-要恢復數據-該使用哪個參數讓-binlog-停在禮拜日的-23" class="headerlink" title="MySQL 中, 假設禮拜日的 23 做了備份, 禮拜二 20 要恢復數據, 該使用哪個參數讓 binlog 停在禮拜日的 23?"></a><strong>MySQL 中, 假設禮拜日的 23 做了備份, 禮拜二 20 要恢復數據, 該使用哪個參數讓 binlog 停在禮拜日的 23?</strong></h6><p>可使用 –stop-datetime flag</p>
<h6 id="MySQL-中-若一個事務的-binlog-寫入後-超過了-max-binlog-size-那會怎麼樣？"><a href="#MySQL-中-若一個事務的-binlog-寫入後-超過了-max-binlog-size-那會怎麼樣？" class="headerlink" title="MySQL 中, 若一個事務的 binlog 寫入後, 超過了 max_binlog_size, 那會怎麼樣？"></a><strong>MySQL 中, 若一個事務的 binlog 寫入後, 超過了 max_binlog_size, 那會怎麼樣？</strong></h6><p>會 rotate, 生成一個新的 binlog file, 但會寫完在 rotate, 不會斷掉</p>
<h6 id="MySQL-中-master-從本地讀取-binlog-並傳給-slave-是讀-page-cache-還是-disk"><a href="#MySQL-中-master-從本地讀取-binlog-並傳給-slave-是讀-page-cache-還是-disk" class="headerlink" title="MySQL 中, master 從本地讀取 binlog 並傳給 slave, 是讀 page cache, 還是 disk?"></a><strong>MySQL 中, master 從本地讀取 binlog 並傳給 slave, 是讀 page cache, 還是 disk?</strong></h6><p>這是 OS 做的事, 若有 page cache 則讀 page cache, 否則則是 disk</p>
<h6 id="MySQL-中-一般生產環境的-非雙-1-的設置是？"><a href="#MySQL-中-一般生產環境的-非雙-1-的設置是？" class="headerlink" title="MySQL 中, 一般生產環境的 非雙 1 的設置是？"></a><strong>MySQL 中, 一般生產環境的 <code>非雙 1</code> 的設置是？</strong></h6><p>innodb_flush_logs_at_trx_commit=2<br>sync_binlog=1000</p>
<h6 id="MySQL-中-在哪些情景可能會將-binlog-redo-log-設為-非雙-1"><a href="#MySQL-中-在哪些情景可能會將-binlog-redo-log-設為-非雙-1" class="headerlink" title="MySQL 中, 在哪些情景可能會將 binlog, redo log 設為 非雙 1 ?"></a><strong>MySQL 中, 在哪些情景可能會將 binlog, redo log 設為 <code>非雙 1</code> ?</strong></h6><ol>
<li>有預知的業務高峰期</li>
<li>備庫延遲, 要讓備庫趕上主庫</li>
<li>用備份恢復主庫的副本時</li>
<li>批量導入數據時</li>
</ol>
<h6 id="MySQL-雙-master-架構中-如何解決循環複製？"><a href="#MySQL-雙-master-架構中-如何解決循環複製？" class="headerlink" title="MySQL 雙 master 架構中, 如何解決循環複製？"></a><strong>MySQL 雙 master 架構中, 如何解決循環複製？</strong></h6><ol>
<li>規定兩個資料庫 server_id 必須不同</li>
<li>備庫在接到 binlog 並重放後, 生成的 binlog 中, server_id 需與來源的 server_id 相同</li>
<li>每個資料庫在收到 master 發來的 binlog, 先判斷 server_id 是否跟自己的一樣, 若是則丟棄</li>
</ol>
<h6 id="MySQL-雙-master-架構中-何謂循環複製？"><a href="#MySQL-雙-master-架構中-何謂循環複製？" class="headerlink" title="MySQL 雙 master 架構中, 何謂循環複製？"></a><strong>MySQL 雙 master 架構中, 何謂循環複製？</strong></h6><p>master A 的 binlog 在 master B 的 relay log 中執行完畢後, 在 B 又產生新的 binlog, 又傳回 A, 而 A 又執行了一次, 一直往返</p>
<h6 id="MySQL-中-log-slave-updates-設為-on-表示？"><a href="#MySQL-中-log-slave-updates-設為-on-表示？" class="headerlink" title="MySQL 中, log_slave_updates 設為 on, 表示？"></a><strong>MySQL 中, log_slave_updates 設為 on, 表示？</strong></h6><p>表示 relay log 執行後, 也會產生 binlog</p>
<h6 id="以下的-MySQL-example-image-的意思是？-17"><a href="#以下的-MySQL-example-image-的意思是？-17" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f3t18ugP1YOjiUarqL1URaFzrwLa5HXNQZim1SMYhiF4oRAoAqgQVjnq9r56IDVa24OGpYdQTLJ9S6eJ51OFbOPmTzpHXCxLhUFLH9_wJHEG7Bj-F9KHGNbtsD4HUtQC_FV_WBmp-YsQ0IeXoFGtC5tw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>雙 master 配置, 彼此皆為對方的 slave, 也為 master, 因此在切換時就不用特別設置誰為 master 誰為 slave</li>
</ul>
<h6 id="MySQL-中-標準的使用-binlog-恢復數據的做法是？"><a href="#MySQL-中-標準的使用-binlog-恢復數據的做法是？" class="headerlink" title="MySQL 中, 標準的使用 binlog 恢復數據的做法是？"></a><strong>MySQL 中, 標準的使用 binlog 恢復數據的做法是？</strong></h6><p>使用 mysqlbinlog 工具解析出來, 把解析結果整個丟給 MySQL 執行, 只複製某段 query 可能會有上下文的關係<br><code>mysqlbinlog master.000001  --start-position=2738 --stop-position=2973 | mysql -h127.0.0.1 -P13000 -u$user -p$pwd;</code></p>
<h6 id="MySQL-中-假如一個-query-刪除十萬筆資料-若使用的-binlog-格式為-row-儲存的方式是？"><a href="#MySQL-中-假如一個-query-刪除十萬筆資料-若使用的-binlog-格式為-row-儲存的方式是？" class="headerlink" title="MySQL 中, 假如一個 query 刪除十萬筆資料, 若使用的 binlog 格式為 row, 儲存的方式是？"></a><strong>MySQL 中, 假如一個 query 刪除十萬筆資料, 若使用的 binlog 格式為 row, 儲存的方式是？</strong></h6><p>會儲存十萬筆到 binlog, 紀錄明確 each row 的確實 deleted query</p>
<h6 id="MySQL-中-假如一個-query-刪除十萬筆資料-若使用的-binlog-格式為-statement-儲存的方式是？"><a href="#MySQL-中-假如一個-query-刪除十萬筆資料-若使用的-binlog-格式為-statement-儲存的方式是？" class="headerlink" title="MySQL 中, 假如一個 query 刪除十萬筆資料, 若使用的 binlog 格式為 statement, 儲存的方式是？"></a><strong>MySQL 中, 假如一個 query 刪除十萬筆資料, 若使用的 binlog 格式為 statement, 儲存的方式是？</strong></h6><p>單純儲存該 MySQL query, 頂多十幾個 bytes</p>
<h6 id="MySQL-中-binlog-mixed-格式被發明的出發點是？"><a href="#MySQL-中-binlog-mixed-格式被發明的出發點是？" class="headerlink" title="MySQL 中, binlog mixed 格式被發明的出發點是？"></a><strong>MySQL 中, binlog mixed 格式被發明的出發點是？</strong></h6><p>節省 row 格式造成的空間消耗</p>
<h6 id="MySQL-中-binlog-mixed-格式的特色是？"><a href="#MySQL-中-binlog-mixed-格式的特色是？" class="headerlink" title="MySQL 中, binlog mixed 格式的特色是？"></a><strong>MySQL 中, binlog mixed 格式的特色是？</strong></h6><p>會自己判斷該 query 是否會造成主從不一致, 若會則使用 row 格式, 不會則使用 statement</p>
<h6 id="以下的-MySQL-example-image-的意思是？-18"><a href="#以下的-MySQL-example-image-的意思是？-18" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3duP8mZlftFYGFVlrZFaCOe8Z9IVX3hH0jeb0pRQn_jvOXFLJ8wIsX1cdpKPXkS7qk_ciG2TcLaRdT6F_W2unAoacxebyTxea9_qpAQfkcKJUkx5EthGX53cO_i13GFc4ItsCCTdHY7-epaeun_EJZOug=w1920-h664-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>server id 1: 表示該 transaction 是在 server_id=1 的資料庫上執行的<br>每個 event 都有 CRC32: 因為 binlog_checksum 設為 CRC32<br>Table_map: 代表操作的 table<br>指令使用了 -vv, 因此解析了所有內容, 例如 @1=4, @2=4<br>binlog_row_image 預設配置為 FULL, 因此 Delete_event 中包含了該 row 所有 column 的值, 如果設為 MINIMAL, 則只會紀錄必要訊息, 如 id<br>最後的 Xid event, 表示該 transaction 被正確提交了</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-14"><a href="#以下的-MySQL-example-code-的意思是？-14" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog -vv data/master.000001 --start-position=8900;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 mysqlbinlog, 從指定的 binlog file 中, 指定 position, 取出接下來的資料</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-19"><a href="#以下的-MySQL-example-image-的意思是？-19" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3e0wrGipULEORbddHpKZR1nbi-MUTlLs2q1B96FV9dVkZkrb7EVp5mazu1bCW7eBni8qlHDoi_4ysSLU-razOg2TT2eRAlLKkB_et-jPAzl2zaxshlYvpa2rP8OV5aq01alnwcxu2iU1yzaRPFj2rkUUw=w1920-h533-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>binlog row 格式</li>
</ul>
<h6 id="以下的-MySQL-example-中-為什麼使用-statement-格式的-binlog-可能會有問題？"><a href="#以下的-MySQL-example-中-為什麼使用-statement-格式的-binlog-可能會有問題？" class="headerlink" title="以下的 MySQL example 中, 為什麼使用 statement 格式的 binlog 可能會有問題？"></a><strong>以下的 MySQL example 中, 為什麼使用 statement 格式的 binlog 可能會有問題？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">	`id` int(11) NOT NULL,</span><br><span class="line">	`a` int(11) DEFAULT NULL,</span><br><span class="line">	`t_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">	PRIMARY KEY (`id`),</span><br><span class="line">	KEY `a` (`a`),</span><br><span class="line">	KEY `t_modified` (`t_modified`)) ENGINE = InnoDB;</span><br><span class="line"></span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(1, 1, &#x27;2018-11-13&#x27;);</span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(2, 2, &#x27;2018-11-12&#x27;);</span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(3, 3, &#x27;2018-11-11&#x27;);</span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(4, 4, &#x27;2018-11-10&#x27;);</span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(5, 5, &#x27;2018-11-09&#x27;);</span><br><span class="line"></span><br><span class="line">delete from t /*comment*/ where a&gt;=4 and t_modified&lt;=&#x27;2018-11-10&#x27; limit 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>因為在 slave 再次執行 binlog 時, 不確定會使用 a 或是 t_modified 哪一個索引, 可能會造成 master 與 slave 資料不一致</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-20"><a href="#以下的-MySQL-example-image-的意思是？-20" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dGcBYsTleclC6uBJtC2FTVjvp3cMf9FYYPtOhCLnOKq5qdQeWmdSD0rk-vTVUo1S_FdjTC58S500yKq6XMe5W-4nd0WtNUBsbgqXGVYimuDV2ebHgzPiO5Uh3jHXQiNJg8Xk2r7JDL2oeQAc5FmJUfIQ=w1882-h213-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>binlog statement 格式</li>
</ul>
<h6 id="MySQL-中-binlog-又分為哪三種格式？"><a href="#MySQL-中-binlog-又分為哪三種格式？" class="headerlink" title="MySQL 中, binlog 又分為哪三種格式？"></a><strong>MySQL 中, binlog 又分為哪三種格式？</strong></h6><p>statement, row, mixed</p>
<h6 id="以下的-MySQL-example-image-的意思是？-21"><a href="#以下的-MySQL-example-image-的意思是？-21" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fgfqlee27BAbVTvP-eHrrWGpmNP80hlz-gkG70XVTSsjE1kWaXwTiyvez1jatj5y9IU2emaF96O5-n-YGfhUDHv1Rlsxe4Gm2i2QzIEdGHrbiXcc0zLDnuDDzRi5GR7v2S0oTVDYq0R_XeNVn8F1K4YA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<ol>
<li>在備庫上使用 change master, 指定 master 的 ip, port, account, password, 以及要從哪個位置請求 binlog, 包含文件名以及 log 偏移量</li>
<li>在備庫使用 start slave, 會啟動兩個 process, io_thread 以及 sql_thread, io_thread 會與 master 建立連接</li>
<li>master 校驗完身份後, 開始按照 slave 指定的位置, 從本地讀取 binlog, 發給 slave</li>
<li>slave 拿到 binlog 後, 寫到 relay log, 稱為中轉日誌</li>
<li>sql_thread 讀取 relay log, 解析並執行</li>
</ol>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-將備庫設為-readonly-那我還怎麼同步呢？"><a href="#以下的-MySQL-example-image-中-將備庫設為-readonly-那我還怎麼同步呢？" class="headerlink" title="以下的 MySQL example image 中, 將備庫設為 readonly, 那我還怎麼同步呢？"></a><strong>以下的 MySQL example image 中, 將備庫設為 readonly, 那我還怎麼同步呢？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>同步的 session 需擁有 super 權限</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-會將備庫設為-readonly-主要有哪三種考量？"><a href="#以下的-MySQL-example-image-中-會將備庫設為-readonly-主要有哪三種考量？" class="headerlink" title="以下的 MySQL example image 中, 會將備庫設為 readonly, 主要有哪三種考量？"></a><strong>以下的 MySQL example image 中, 會將備庫設為 readonly, 主要有哪三種考量？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<ol>
<li>當在備庫上使用一些 query 時, 可防止誤寫</li>
<li>如果切換邏輯沒寫好, 會造成雙寫</li>
<li>可用 readonly 來判斷 node 的角色</li>
</ol>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-22"><a href="#以下的-MySQL-example-image-的意思是？-22" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cAR7979-j6zFgAsTAkOY25CxYCNJtY754yPWs5H-aGI3gitw3gVsYVZl4we0VKOkfiMeSZ8IzJM2pPoc1BPNceDFpw7W5x-Yxf2JVGZPyeXKbgVr0aNfYmnZd0pOHtU2Na1fmqfhh0h4N0lIpMGL7Y7g=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>兩個資料庫, 互為備庫, 當為備庫時為 readonly</li>
</ul>
<h6 id="MySQL-中-binlog-cache-size-跟-max-binlog-cache-size-的差別是？"><a href="#MySQL-中-binlog-cache-size-跟-max-binlog-cache-size-的差別是？" class="headerlink" title="MySQL 中, binlog_cache_size 跟 max_binlog_cache_size 的差別是？"></a><strong>MySQL 中, binlog_cache_size 跟 max_binlog_cache_size 的差別是？</strong></h6><p>前者超出了會存到 disk 上, 後者會噴錯</p>
<h6 id="MySQL-中-為什麼說-redo-log-可以共用一個-relog-log-buffer-但-binlog-卻要每個線程獨立-不可中斷？"><a href="#MySQL-中-為什麼說-redo-log-可以共用一個-relog-log-buffer-但-binlog-卻要每個線程獨立-不可中斷？" class="headerlink" title="MySQL 中, 為什麼說 redo log 可以共用一個 relog log buffer, 但 binlog 卻要每個線程獨立, 不可中斷？"></a><strong>MySQL 中, 為什麼說 redo log 可以共用一個 relog log buffer, 但 binlog 卻要每個線程獨立, 不可中斷？</strong></h6><p>一個 binlog 都相當於一個事務, 要是中斷了或分散了, 就相當於把一個事務分開執行, 這樣就無法保證其原子性<br>redo log 是以 page 為單位, 一個事務可能會更動多個 page, 多個事務也可能只更動一個 page, 所以較無原子性問題</p>
<h6 id="MySQL-中-如果-sync-binlog-N-binlog-group-commit-sync-no-delay-count-M-binlog-group-commit-sync-delay-很大值-這種情況下-何時會-fsync"><a href="#MySQL-中-如果-sync-binlog-N-binlog-group-commit-sync-no-delay-count-M-binlog-group-commit-sync-delay-很大值-這種情況下-何時會-fsync" class="headerlink" title="MySQL 中, 如果 sync_binlog = N, binlog_group_commit_sync_no_delay_count = M, binlog_group_commit_sync_delay = 很大值, 這種情況下, 何時會 fsync?"></a><strong>MySQL 中, 如果 sync_binlog = N, binlog_group_commit_sync_no_delay_count = M, binlog_group_commit_sync_delay = 很大值, 這種情況下, 何時會 fsync?</strong></h6><p>會先滿足 sync_binlog 條件, 接下來才會去判斷要使用 no_delay_count 還是 sync_delay, 如果 no_delay_count &gt; sync_binlog, 則會滿足 no_delay_count 才會 fsync</p>
<h6 id="MySQL-中-事務未提交前-redo-log-及-binlog-會寫到哪裡？"><a href="#MySQL-中-事務未提交前-redo-log-及-binlog-會寫到哪裡？" class="headerlink" title="MySQL 中, 事務未提交前, redo log 及 binlog 會寫到哪裡？"></a><strong>MySQL 中, 事務未提交前, redo log 及 binlog 會寫到哪裡？</strong></h6><p>redo log buffer 以及 binlog cache</p>
<h6 id="MySQL-中-要走到-redo-log-prepare-會先經過-transaction-commit-嗎？"><a href="#MySQL-中-要走到-redo-log-prepare-會先經過-transaction-commit-嗎？" class="headerlink" title="MySQL 中, 要走到 redo log prepare, 會先經過 transaction commit 嗎？"></a><strong>MySQL 中, 要走到 redo log prepare, 會先經過 transaction commit 嗎？</strong></h6><p>會, 二階段協議(非 lock 的二階段提交) 是在 transaction commit 後才開始</p>
<h6 id="MySQL-中-事務執行期間-如果發生-crash-導致-redo-log-丟了-這樣會不會造成主備不一致？"><a href="#MySQL-中-事務執行期間-如果發生-crash-導致-redo-log-丟了-這樣會不會造成主備不一致？" class="headerlink" title="MySQL 中, 事務執行期間, 如果發生 crash, 導致 redo log 丟了, 這樣會不會造成主備不一致？"></a><strong>MySQL 中, 事務執行期間, 如果發生 crash, 導致 redo log 丟了, 這樣會不會造成主備不一致？</strong></h6><p>不會, 因為 crash 之後 redo log 和 binlog 都沒了, 從業務上來看, 這個數據也沒有提交, 因此數據一致</p>
<h6 id="MySQL-中-為什麼-binlog-cache-是每個線程自己維護-而-redo-log-buffer-是全局共用？"><a href="#MySQL-中-為什麼-binlog-cache-是每個線程自己維護-而-redo-log-buffer-是全局共用？" class="headerlink" title="MySQL 中, 為什麼 binlog cache 是每個線程自己維護, 而 redo log buffer 是全局共用？"></a><strong>MySQL 中, 為什麼 binlog cache 是每個線程自己維護, 而 redo log buffer 是全局共用？</strong></h6><p>因為 binlog 是不可以被打斷的, 一個事務的 binlog 必須連續寫, 整個事務完成後, 在一起寫到文件內<br>redo log 則沒有這個要求, 中間有生成的 log 可以寫到 redo log buffer 中, redo log buffer 中的內容還能搭便車, 隨其他事務一起被寫到 disk 中</p>
<h6 id="MySQL-中-執行一個-update-語句-在執行-hexdump-查看-ibd-文件內容-為何沒看到數據有改變？"><a href="#MySQL-中-執行一個-update-語句-在執行-hexdump-查看-ibd-文件內容-為何沒看到數據有改變？" class="headerlink" title="MySQL 中, 執行一個 update 語句, 在執行 hexdump 查看 ibd 文件內容, 為何沒看到數據有改變？"></a><strong>MySQL 中, 執行一個 update 語句, 在執行 hexdump 查看 ibd 文件內容, 為何沒看到數據有改變？</strong></h6><p>可能因為 WAL 機制, update 語句執行完畢後, InnoDB 只保證寫完了 redo log, page cache, 還沒 sync 到 disk</p>
<h6 id="MySQL-中-如果遇到性能上的瓶頸-通常有哪三種方法可以提升性能？"><a href="#MySQL-中-如果遇到性能上的瓶頸-通常有哪三種方法可以提升性能？" class="headerlink" title="MySQL 中, 如果遇到性能上的瓶頸, 通常有哪三種方法可以提升性能？"></a><strong>MySQL 中, 如果遇到性能上的瓶頸, 通常有哪三種方法可以提升性能？</strong></h6><ol>
<li>調高 binlog_group_commit_sync_no_delay_count, binlog_group_commit_sync_delay 參數, 會增加 response time, 但無數據丟失風險</li>
<li>將 sync_binlog 設置大於 1, 常見的為 100~1000, 主機掉電會丟 binlog</li>
<li>將 innodb_flush_log_at_trx_commit 設為 2, 風險是主機掉電時會丟數據</li>
</ol>
<h6 id="MySQL-中-‘binlog-group-commit-sync-no-delay-count’-以及-‘binlog-group-commit-sync-delay’-的關係是？"><a href="#MySQL-中-‘binlog-group-commit-sync-no-delay-count’-以及-‘binlog-group-commit-sync-delay’-的關係是？" class="headerlink" title="MySQL 中, ‘binlog_group_commit_sync_no_delay_count’ 以及 ‘binlog_group_commit_sync_delay’ 的關係是？"></a><strong>MySQL 中, ‘binlog_group_commit_sync_no_delay_count’ 以及 ‘binlog_group_commit_sync_delay’ 的關係是？</strong></h6><p>or, 只要其中一個滿足就調用 fsync, 所以如果 delay 設為 0, count 也就失效了</p>
<h6 id="MySQL-中-‘binlog-group-commit-sync-no-delay-count’-的意思是？"><a href="#MySQL-中-‘binlog-group-commit-sync-no-delay-count’-的意思是？" class="headerlink" title="MySQL 中, ‘binlog_group_commit_sync_no_delay_count’ 的意思是？"></a><strong>MySQL 中, ‘binlog_group_commit_sync_no_delay_count’ 的意思是？</strong></h6><p>累積多少次 write 的次數才調用 fsync</p>
<h6 id="MySQL-中-‘binlog-group-commit-sync-delay’-的意思是？"><a href="#MySQL-中-‘binlog-group-commit-sync-delay’-的意思是？" class="headerlink" title="MySQL 中, ‘binlog_group_commit_sync_delay’ 的意思是？"></a><strong>MySQL 中, ‘binlog_group_commit_sync_delay’ 的意思是？</strong></h6><p>延遲多少微秒才調用 fsync</p>
<h6 id="以下的-MySQL-example-image-的意思是？-23"><a href="#以下的-MySQL-example-image-的意思是？-23" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eebs18pb8v6Rb02A8Fw2pW76tz2WGlrTUeoGevqlT8vmzvrG2dpMdVolAA1VE8ZOD1l-Z8JYPCcByIJNufSJG_uRNQhx8_5ACIaIBEw2545qqy4qKobmARDz9N3mTYux1nrD_85nfAdyBdKbINtY3Uyw=w1142-h1522-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>將 fsync 的時間延後, 以更加優化 group 提交, 減少 IOPS 消耗</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-為什麼-trx1-會帶著-length-160-到-fsync"><a href="#以下的-MySQL-example-image-中-為什麼-trx1-會帶著-length-160-到-fsync" class="headerlink" title="以下的 MySQL example image 中, 為什麼 trx1 會帶著 length 160 到 fsync?"></a><strong>以下的 MySQL example image 中, 為什麼 trx1 會帶著 length 160 到 fsync?</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dmDihT9j-YsC5zaBjEHDir8wOLVptthTIb0-Bhifjr2daFNgMqfgjcNVTQMqsUjtIQ3RBsJzKFiYfaDOGkbzAa8-OdAyJzGkEzveu-ziin_h0HSOVzr_MxfOluzbmsCx3lNj6uRt4On2O7o4Shf6vqmA=w1030-h1956-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>trx1 是第一個到 redo log 的 trx, 因此被選為該 group 的 leader, 當 fsync 的時間到了, 會 fsync redo log 中的所有 trx, 又名為 group commit</p>
</li>
</ul>
<h6 id="何謂-MySQL-的-‘雙-1’-配置？"><a href="#何謂-MySQL-的-‘雙-1’-配置？" class="headerlink" title="何謂 MySQL 的 ‘雙 1’ 配置？"></a><strong>何謂 MySQL 的 ‘雙 1’ 配置？</strong></h6><p>sync_binlog 以及 innodb_flush_log_at_trx_commit 都設為 1, 一個事務提交前, 會有兩次的刷盤</p>
<h6 id="MySQL-中-在二階段提交時-redo-log-會在-prepare-時持久化-還是-commit-時？"><a href="#MySQL-中-在二階段提交時-redo-log-會在-prepare-時持久化-還是-commit-時？" class="headerlink" title="MySQL 中, 在二階段提交時, redo log 會在 prepare 時持久化, 還是 commit 時？"></a><strong>MySQL 中, 在二階段提交時, redo log 會在 prepare 時持久化, 還是 commit 時？</strong></h6><p>會在 prepare 時持久化, commit 時只寫到 disk</p>
<h6 id="MySQL-中-有哪三種情況-會讓一個沒有提交的事務的-redo-log-寫入磁盤中？"><a href="#MySQL-中-有哪三種情況-會讓一個沒有提交的事務的-redo-log-寫入磁盤中？" class="headerlink" title="MySQL 中, 有哪三種情況, 會讓一個沒有提交的事務的 redo log 寫入磁盤中？"></a><strong>MySQL 中, 有哪三種情況, 會讓一個沒有提交的事務的 redo log 寫入磁盤中？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>後台 process 固定每秒輪詢一次, 會呼叫 write 將 redo log buffer 寫到 page cache, 在調用 fsync 將 page cache 寫入 disk<br>當 redo log buffer 即將達到 innodb_log_buffer_size 的一半, 後台 process 會主動寫盤, 但由於事務並沒有提交, 只會調用 write, 不會調用 fsync<br>並行的事務提交時, 順帶將其他未提交的 redo log buffer 持久化, 假設事務 A 執行到一半, 已寫了一些 redo log 到 buffer 當中, 這時有另外一個事務 B 提交, 且 innodb_flush_log_at_trx_commit=1, 這時會將 redo log buffer 中的的 log 全部持久化到 disk</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-2-行為是？"><a href="#以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-2-行為是？" class="headerlink" title="以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=2, 行為是？"></a><strong>以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=2, 行為是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次事務提交都只是把 redo log 寫到 page cache</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-1-行為是？"><a href="#以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-1-行為是？" class="headerlink" title="以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=1, 行為是？"></a><strong>以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=1, 行為是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次事務提交都把 redo log 持久化到 disk</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-0-行為是？"><a href="#以下的-MySQL-example-image-中-當-innodb-flush-log-at-trx-commit-0-行為是？" class="headerlink" title="以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=0, 行為是？"></a><strong>以下的 MySQL example image 中, 當 innodb_flush_log_at_trx_commit=0, 行為是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次事務提交都只是把 redo log 留在 redo log buffer 中</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-每個區塊的寫入速度比較是？"><a href="#以下的-MySQL-example-image-中-每個區塊的寫入速度比較是？" class="headerlink" title="以下的 MySQL example image 中, 每個區塊的寫入速度比較是？"></a><strong>以下的 MySQL example image 中, 每個區塊的寫入速度比較是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>紅色跟黃色都屬於內存, 速度差不多, 綠色屬於 disk, 速度慢多了</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-每個區塊分別代表的意思是？"><a href="#以下的-MySQL-example-image-中-每個區塊分別代表的意思是？" class="headerlink" title="以下的 MySQL example image 中, 每個區塊分別代表的意思是？"></a><strong>以下的 MySQL example image 中, 每個區塊分別代表的意思是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgVa_kDmfGzYm5SXufEHSYnNoC2PrH75nhQatfihty95V8i_wf5wQR1MmJCyqRpo1siPrt6OSn3b23ShTI77FrfJfwFcXlXKK3EtvyOJOdUqhoZIr-GvSwyIZgcDNmGbGJmj_YAJTIp-ykZk6VhqvOFg=w1142-h639-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>紅色屬於 MySQL process 中的內存, 黃色為 page cache, 還不算持久化, 綠色才算持久化</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果有-I-O-瓶頸-一般會將-sync-binlog-設為多少？"><a href="#以下的-MySQL-example-image-中-如果有-I-O-瓶頸-一般會將-sync-binlog-設為多少？" class="headerlink" title="以下的 MySQL example image 中, 如果有 I/O 瓶頸, 一般會將 sync_binlog 設為多少？"></a><strong>以下的 MySQL example image 中, 如果有 I/O 瓶頸, 一般會將 sync_binlog 設為多少？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>100~1000</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果服務容錯率非常低的話-那-sync-binlog-會設為多少？"><a href="#以下的-MySQL-example-image-中-如果服務容錯率非常低的話-那-sync-binlog-會設為多少？" class="headerlink" title="以下的 MySQL example image 中, 如果服務容錯率非常低的話, 那 sync_binlog 會設為多少？"></a><strong>以下的 MySQL example image 中, 如果服務容錯率非常低的話, 那 sync_binlog 會設為多少？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>1, 每次都 fsync</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果我的-sync-binlog-N-N-gt-1-那行為會是？"><a href="#以下的-MySQL-example-image-中-如果我的-sync-binlog-N-N-gt-1-那行為會是？" class="headerlink" title="以下的 MySQL example image 中, 如果我的 sync_binlog=N(N&gt;1), 那行為會是？"></a><strong>以下的 MySQL example image 中, 如果我的 sync_binlog=N(N&gt;1), 那行為會是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次都 write, 但累積 N 個 transaction 後才 fsync</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果我的-sync-binlog-1-那行為會是？"><a href="#以下的-MySQL-example-image-中-如果我的-sync-binlog-1-那行為會是？" class="headerlink" title="以下的 MySQL example image 中, 如果我的 sync_binlog=1, 那行為會是？"></a><strong>以下的 MySQL example image 中, 如果我的 sync_binlog=1, 那行為會是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次事務都 fsync</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果我的-sync-binlog-0-那行為會是？"><a href="#以下的-MySQL-example-image-中-如果我的-sync-binlog-0-那行為會是？" class="headerlink" title="以下的 MySQL example image 中, 如果我的 sync_binlog=0, 那行為會是？"></a><strong>以下的 MySQL example image 中, 如果我的 sync_binlog=0, 那行為會是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>每次事務都只 write, 不 fsync</p>
</li>
</ul>
<h6 id="MySQL-中-binlog-cache-size-的用途是？"><a href="#MySQL-中-binlog-cache-size-的用途是？" class="headerlink" title="MySQL 中, binlog_cache_size 的用途是？"></a><strong>MySQL 中, binlog_cache_size 的用途是？</strong></h6><p>控制單個線程內, binlog cache 的大小, 若超出規定值, 則暫存到 disk 上</p>
<h6 id="以下的-MySQL-example-image-的意思是？-24"><a href="#以下的-MySQL-example-image-的意思是？-24" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cVhSD4PIPJmKWfSZCsbkuTZJBi6dSPWViOA8QNcdW3FdXJEL2iQOUep71r5rK_rGz4ckuz5_cGx3-yixLn8OXO1ykSJUuHN_Kwf1qjtoav453IIaoV3oWPyEW3zeXiA05oJr_BzpoK13vQ0tMbAKasPA=w1142-h748-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>transaction 執行過程中, 會先把 log 寫到 binlog cache, 提交時, 再把 binlog 寫到 binlog 文件中<br>系統給 binlog cache 分配了一塊內存, 每個線程一個, binlog_cache_size 用於控制單個線程內, binlog cache 所佔的大小, 如果超過了, 將會暫存到 disk<br>transaction 提交時, 會將 binlog cache 完整寫入到 binlog 文件, 並清空 binlog cache</p>
</li>
</ul>
<h6 id="以下的-MySQL-步驟的意思是？"><a href="#以下的-MySQL-步驟的意思是？" class="headerlink" title="以下的 MySQL 步驟的意思是？"></a><strong>以下的 MySQL 步驟的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br>上線前, 在測試環境, 把 slow log 打開, 把 long_query_time 設為 0<br>在測試表中插入模擬線上的資料, 逐一觀察 slow log 中每類 query 的輸出, 留意 rows_examined 是否與預期一致</li>
<li><strong>Answer</strong>:<br>在上線前檢查, 預先發現問題</li>
</ul>
<h6 id="MySQL-中-哪個工具可以幫忙檢查所有-slow-log-中所有-query-的返回結果？"><a href="#MySQL-中-哪個工具可以幫忙檢查所有-slow-log-中所有-query-的返回結果？" class="headerlink" title="MySQL 中, 哪個工具可以幫忙檢查所有 slow log 中所有 query 的返回結果？"></a><strong>MySQL 中, 哪個工具可以幫忙檢查所有 slow log 中所有 query 的返回結果？</strong></h6><p><a target="_blank" rel="noopener" href="https://www.percona.com/doc/percona-toolkit/3.0/pt-query-digest.html">pt-query-digest</a></p>
<h6 id="以下的-MySQL-example-code-的意思是？-15"><a href="#以下的-MySQL-example-code-的意思是？-15" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><p><strong>Example</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">insert into query_rewrite.rewrite_rules(pattern, replacement, pattern_database) values (&quot;select * from t where id + 1 = ?&quot;, &quot;select * from t where id = ? - 1&quot;, &quot;db1&quot;);call query_rewrite.flush_rewrite_rules();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3e7g3-trWDYn-VbXpyorSseXoofde9xTy2v1T8976bzq5MAnlI5BQel78sjFH5aC48KvbkXZ3asw0CYINwCwmeILXO7ts1jwmSYRWY-5YLDTESzDh99l476woQsInStD8C9k1yjt-pMCor_ymTCzYUVAA=w1734-h385-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong>:<br>當 sql 語句寫錯了, 但無法從程式端修改時, 可直接從 DB 端修改, 但須謹慎評估, 可能造成誤傷</p>
</li>
</ul>
<h6 id="MySQL-中-以下的步驟的意思是？"><a href="#MySQL-中-以下的步驟的意思是？" class="headerlink" title="MySQL 中, 以下的步驟的意思是？"></a><strong>MySQL 中, 以下的步驟的意思是？</strong></h6><ul>
<li><p><strong>Example</strong><br>在備庫上執行 set sql_log_bin=off, 執行 alter table 加上索引<br>主從切換<br>在主庫上執行 set sql_log_bin=off, 執行 alter table 加上索引</p>
</li>
<li><p><strong>Answer</strong><br>當索引沒設計好時, 直接在備庫上執行 DDL</p>
</li>
</ul>
<h6 id="MySQL-中-通常造成慢查詢大體上會是哪三種原因？"><a href="#MySQL-中-通常造成慢查詢大體上會是哪三種原因？" class="headerlink" title="MySQL 中, 通常造成慢查詢大體上會是哪三種原因？"></a><strong>MySQL 中, 通常造成慢查詢大體上會是哪三種原因？</strong></h6><ul>
<li>索引沒設計好</li>
<li>SQL 語句沒寫好</li>
<li>MySQL 選錯索引</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-16"><a href="#以下的-MySQL-example-code-的意思是？-16" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-grant-tables</span><br><span class="line">skip-networking</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>當忘了 root 密碼, 或者暫時性地減低 connection 的 cost, 可以先把驗證部分拿掉, 並中斷 networking, 這樣外部就無法直接連接資料庫<br>然後在 restart mysql</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-25"><a href="#以下的-MySQL-example-image-的意思是？-25" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c2dyTkIpSWbNBBJakWr_Pu4u1AOdhl2kufY-i_k7laqVaLg9lsGGv3GOa4Ghc9xRmzL5nmAZNXwJm9IGukXz2u7PdIzx95y3vASdKPfASxJ0fCX1m6xsxlkRkIZ2_TiY5F9E4A6obx-VlMVfFDMEq35Q=w755-h682-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>當不確定有哪些 connection 是處於 transaction 中時, 可使用 <code>select * from information_schema.innodb_trx</code></p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果非得-kill-掉一個-session-該-kill-哪一個？"><a href="#以下的-MySQL-example-image-中-如果非得-kill-掉一個-session-該-kill-哪一個？" class="headerlink" title="以下的 MySQL example image 中, 如果非得 kill 掉一個 session, 該 kill 哪一個？"></a><strong>以下的 MySQL example image 中, 如果非得 kill 掉一個 session, 該 kill 哪一個？</strong></h6><ul>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cWpndpLGpdel-0feiKGWaYBlJS864wq9elkDf9xvIXoxlAGnQAOGzih5FVwzUkzbKbhzd2tv3xYISsHrOFK7vYa33iUNSJKU-HGtdlugGHcJpbGmb-1F7OrQBLv3WplWs59Rk9HECSf7HJNI__TP36aA=w1246-h234-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>session B, 因為不會造成什麼有損傷害<br>若 kill session A, 那會造成 rollback</p>
</li>
</ul>
<h6 id="MySQL-中-為什麼說每一次連接的成本都很大？"><a href="#MySQL-中-為什麼說每一次連接的成本都很大？" class="headerlink" title="MySQL 中, 為什麼說每一次連接的成本都很大？"></a><strong>MySQL 中, 為什麼說每一次連接的成本都很大？</strong></h6><p>要經過 TCP 三次握手, 以及權限驗證等等的程序</p>
<h6 id="MySQL-中-insert-…-select-會加鎖嗎？"><a href="#MySQL-中-insert-…-select-會加鎖嗎？" class="headerlink" title="MySQL 中, insert … select 會加鎖嗎？"></a><strong>MySQL 中, insert … select 會加鎖嗎？</strong></h6><p>為了一致性, 會加 read lock</p>
<h6 id="MySQL-中-RC-Isolation-level-下-若要避免-binlog-與資料庫不一致-需怎麼做？"><a href="#MySQL-中-RC-Isolation-level-下-若要避免-binlog-與資料庫不一致-需怎麼做？" class="headerlink" title="MySQL 中, RC Isolation level 下, 若要避免 binlog 與資料庫不一致, 需怎麼做？"></a><strong>MySQL 中, RC Isolation level 下, 若要避免 binlog 與資料庫不一致, 需怎麼做？</strong></h6><p>將 binlog 設置為 row 格式</p>
<h6 id="以下的-MySQL-example-image-中-默認是會上鎖的-說說不上鎖造成的結果"><a href="#以下的-MySQL-example-image-中-默認是會上鎖的-說說不上鎖造成的結果" class="headerlink" title="以下的 MySQL example image 中, 默認是會上鎖的, 說說不上鎖造成的結果"></a><strong>以下的 MySQL example image 中, 默認是會上鎖的, 說說不上鎖造成的結果</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">	`id` int(11) NOT NULL,</span><br><span class="line">	`c` int(11) DEFAULT NULL,</span><br><span class="line">	`d` int(11) DEFAULT NULL,</span><br><span class="line">	PRIMARY KEY (`id`),</span><br><span class="line">	KEY `c` (`c`)) ENGINE = InnoDB;</span><br><span class="line"></span><br><span class="line">INSERT INTO t</span><br><span class="line">		values(0, 0, 0), (5, 5, 5), (10, 10, 10), (15, 15, 15), (20, 20, 20), (25, 25, 25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3edOeouRpQrg0APydxGtWrLzPtXzno60KJRvavAwT-_ip8OKxA74cMrumeLK78LpgjkUgiyHe_LH2taeEw_M6zwjARl6EwSn-p9hjI3WbQavPY-5_ueqdFL8-Ozh7_XDnz8EmWIKBk_oQBZoBc6fmnSTw=w935-h496-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>session A 已表示要鎖住所有 d=5 的 row 了, session B 還透過 update 讓 d=5 多了 1 row<br>session C 則是透過 insert 直接插入新的一個 d=5 的 row</p>
</li>
</ul>
<h6 id="MySQL-中-RR-Isolation-中-索引等值查詢-向右遍歷且最後一個值不滿足等值條件時-會怎麼做？"><a href="#MySQL-中-RR-Isolation-中-索引等值查詢-向右遍歷且最後一個值不滿足等值條件時-會怎麼做？" class="headerlink" title="MySQL 中, RR Isolation 中, 索引等值查詢, 向右遍歷且最後一個值不滿足等值條件時, 會怎麼做？"></a><strong>MySQL 中, RR Isolation 中, 索引等值查詢, 向右遍歷且最後一個值不滿足等值條件時, 會怎麼做？</strong></h6><p>next-key lock 退化為 gap lock</p>
<h6 id="MySQL-中-RR-Isolation-中-索引等值查詢-當給唯一索引加鎖時-規則是？"><a href="#MySQL-中-RR-Isolation-中-索引等值查詢-當給唯一索引加鎖時-規則是？" class="headerlink" title="MySQL 中, RR Isolation 中, 索引等值查詢, 當給唯一索引加鎖時, 規則是？"></a><strong>MySQL 中, RR Isolation 中, 索引等值查詢, 當給唯一索引加鎖時, 規則是？</strong></h6><p>next-key lock 退化為 row lock</p>
<h6 id="MySQL-中-RR-Isolation-中-基本的加鎖單位是？"><a href="#MySQL-中-RR-Isolation-中-基本的加鎖單位是？" class="headerlink" title="MySQL 中, RR Isolation 中, 基本的加鎖單位是？"></a><strong>MySQL 中, RR Isolation 中, 基本的加鎖單位是？</strong></h6><p>next-key lock, 先加 gap lock, 再加 row lock</p>
<h6 id="MySQL-中-無索引的-update-會逐行加鎖-還是全部加鎖？"><a href="#MySQL-中-無索引的-update-會逐行加鎖-還是全部加鎖？" class="headerlink" title="MySQL 中, 無索引的 update 會逐行加鎖, 還是全部加鎖？"></a><strong>MySQL 中, 無索引的 update 會逐行加鎖, 還是全部加鎖？</strong></h6><p>逐行</p>
<h6 id="MySQL-中-如果-Isolation-level-為-RC-semi-consistent-read-優化對-delete-有效嗎？"><a href="#MySQL-中-如果-Isolation-level-為-RC-semi-consistent-read-優化對-delete-有效嗎？" class="headerlink" title="MySQL 中, 如果 Isolation level 為 RC, semi-consistent read 優化對 delete 有效嗎？"></a><strong>MySQL 中, 如果 Isolation level 為 RC, semi-consistent read 優化對 delete 有效嗎？</strong></h6><p>無效, 只對 update 有效</p>
<h6 id="MySQL-中-如果-Isolation-level-為-RC-何謂-semi-consistent-read-優化？"><a href="#MySQL-中-如果-Isolation-level-為-RC-何謂-semi-consistent-read-優化？" class="headerlink" title="MySQL 中, 如果 Isolation level 為 RC, 何謂 semi-consistent read 優化？"></a><strong>MySQL 中, 如果 Isolation level 為 RC, 何謂 semi-consistent read 優化？</strong></h6><p>如果 update 碰到一個被上鎖的行, 會讀入最新的版本, 如果滿足查詢條件則等待鎖, 不滿足則直接跳過</p>
<h6 id="MySQL-中-如果-Isolation-level-為-RC-在-transaction-中-會待-commit-才釋放-lock-還是語句執行完畢就釋放？"><a href="#MySQL-中-如果-Isolation-level-為-RC-在-transaction-中-會待-commit-才釋放-lock-還是語句執行完畢就釋放？" class="headerlink" title="MySQL 中, 如果 Isolation level 為 RC, 在 transaction 中, 會待 commit 才釋放 lock, 還是語句執行完畢就釋放？"></a><strong>MySQL 中, 如果 Isolation level 為 RC, 在 transaction 中, 會待 commit 才釋放 lock, 還是語句執行完畢就釋放？</strong></h6><p>語句執行完畢就釋放</p>
<h6 id="MySQL-中-如果-Isolation-level-為-RC-那-next-key-lock-如何判別範圍？"><a href="#MySQL-中-如果-Isolation-level-為-RC-那-next-key-lock-如何判別範圍？" class="headerlink" title="MySQL 中, 如果 Isolation level 為 RC, 那 next-key lock 如何判別範圍？"></a><strong>MySQL 中, 如果 Isolation level 為 RC, 那 next-key lock 如何判別範圍？</strong></h6><p>拿掉 gap lock, 只剩行鎖</p>
<h6 id="以下的-MySQL-example-image-中-說明-dead-lock-是如何產生的"><a href="#以下的-MySQL-example-image-中-說明-dead-lock-是如何產生的" class="headerlink" title="以下的 MySQL example image 中, 說明 dead lock 是如何產生的"></a><strong>以下的 MySQL example image 中, 說明 dead lock 是如何產生的</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c7To1y-Gv_C8DHS5hxv2ybC6G_E2X2V9Qt4l3lFybqNZHpfgZjo9AB3XgA5lVNqQdTqn0STNrYWUYDCRbjhFXXpHwiykAox1z6rvFTa136JoVWhcrLTL1Zf5gZKaHP2_HIBbCKuawLUgCdk5LMUTcaGg=w1106-h650-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據加鎖原則, session A 加入 next-key lock <code>(5,10]</code><br>因為 c 為非唯一索引, 因此繼續向後遍歷, 取得不符合的下一個值, 即 15, 根據優化原則, 索引向右遍歷取得不符合條件的值時, 退化為 gap lock, 因此最終加鎖範圍為 <code>(5,15)</code><br>這時 session B 也要加上 next-key lock, 先加 gap lock <code>(5,10)</code>, gap lock 彼此是不衝突的, 而在要加上行鎖時鎖住了<br>然後 session A 此時要 insert (8,8,8), 卻被 session B 的 gap lock 鎖住了, 因此判斷為 dead lock, sessoin B 斷開</p>
</li>
</ul>
<h6 id="MySQL-中-在-RR-層級-刪除時盡量使用-limit-原因是？"><a href="#MySQL-中-在-RR-層級-刪除時盡量使用-limit-原因是？" class="headerlink" title="MySQL 中, 在 RR 層級, 刪除時盡量使用 limit, 原因是？"></a><strong>MySQL 中, 在 RR 層級, 刪除時盡量使用 limit, 原因是？</strong></h6><p>避免多餘的 gap lock 以及 row lock</p>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked-為何-okay"><a href="#以下的-MySQL-example-image-中-說明為何-blocked-為何-okay" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked, 為何 okay?"></a><strong>以下的 MySQL example image 中, 說明為何 blocked, 為何 okay?</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br><span class="line"></span><br><span class="line">insert into t values(30,10,30);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eckqyzsolfIylpcdUGJzkB8WAuESlS7ODm6COB2U6mtO3rJZpHvt_2rsTG-uYrs-Z4TkJTy9ypssGuYKExKOYYdUSX5lBcT6MDeGT-EOcNhqy3umgIqOJH6ZI5v37F4RM5HHIMIDKCfnjXJfy6un5rrQ=w954-h318-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據加鎖原則, c=10, 取得 next-key lock <code>(5,10]</code>, 因為 c 為非唯一索引, 因此繼續往後掃, 但因 limit 2, 所以只掃了兩行, 為 (c=10,id=10), 以及 (c=10,id=30)<br>因此, 整個鎖為 <code>(5,10]</code>, 而 10 的範圍為 <code>(c=10,id=10), (c=10,id=30)</code>, 所以 session B okay<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eHVehy3sVTiOIcET9Iy-ffFaeXV3-TvpYxZxr9LBUZXKnjw_1534bM1ud5VGCYGCXsFDpdWeI6MgA9EEKCf0cMWKloeG3wMzLe2P5SqVhJSXTEMbraRct5NQU_A0eIhYtH5bcP6zD783V8o61heVx1EQ=w1142-h856-no?authuser=0"></p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-1"><a href="#以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-1" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked, 為何 okay?"></a><strong>以下的 MySQL example image 中, 說明為何 blocked, 為何 okay?</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br><span class="line"></span><br><span class="line">insert into t values(30,10,30);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ckdHvphYtuNvBxziXZO3dOyPgc5ajMLTANJm3sepL_yCNR73EpSkuFw9eH_uG3UuDsViPGlAPmOsrn0CBsNP5vx7Grgac5ok0Uwy4lWgfOtZOED4NzpH4PvrOP4s90AEX_MpgbC5l9xjgPni8INbe2Sg=w1248-h556-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>c=10, 因此會取得 <code>(5,10]</code> next-key lock, 因為 c 不是唯一索引, 會往後掃到第一個不符合條件的 row, 所以會掃到 c=15<br>在等值查詢下, 當不符合條件時, 會退化為 gap lock <code>(10,15)</code>, 因此鎖住 <code>(5,15)</code>, 以及相對應的 id</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-c-索引是如何排列的？"><a href="#以下的-MySQL-example-image-中-c-索引是如何排列的？" class="headerlink" title="以下的 MySQL example image 中, c 索引是如何排列的？"></a><strong>以下的 MySQL example image 中, c 索引是如何排列的？</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br><span class="line"></span><br><span class="line">insert into t values(30,10,30);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Answer</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dKmJzViH8UkDQTfTQjD7FItWtMNaq8BoszVnUO4ndwJhL9LDoAkH5vd-pDMAWvDZQq6BXaYrQcbmBK2K-VhnvO4yl0IC3P5xlpoDQXscZMrsJWdbty_7RPwXM-ZjUgDEdclef06d7l_UwuT4BCEKsb2g=w1142-h856-no?authuser=0"></p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked"><a href="#以下的-MySQL-example-image-中-說明為何-blocked" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked"></a><strong>以下的 MySQL example image 中, 說明為何 blocked</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>session A 是一個範圍查詢, 理論上會取得 next-key lock <code>(10,15]</code>, 且因為 id 為唯一索引, 因此判斷到 id=15 就不會再尋找下一個了<br>但 MySQL (新版本已經修復) 會掃到第一個不符合條件的 record, 即 id=20, 所以實際取得的鎖為 <code>(10,15], (15,20]</code>, 因此鎖住了 session B, C<br>這算 bug</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked-1"><a href="#以下的-MySQL-example-image-中-說明為何-blocked-1" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked"></a><strong>以下的 MySQL example image 中, 說明為何 blocked</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c78Ohxq5Qu1MEbPcnrM3hHnTGTo4LOX7XMli_5nXb-sAwkmSiw93wGKPGdZQla-6QBZ3hMjvQTo1PUt-dXmnzWPGBDq0RyznXK9bskTgpTWqQA2Isy0uCL8Wc-PldHm2dQSdm_hR6a5uNBMcZ6iXmmAA=w1250-h590-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>session A 是一個範圍查詢, 理論上會取得 next-key lock <code>(10,15]</code>, 且因為 id 為唯一索引, 因此判斷到 id=15 就不會再尋找下一個了<br>但 MySQL (新版本已經修復) 會掃到第一個不符合條件的 record, 即 id=20, 所以實際取得的鎖為 <code>(10,15], (15,20]</code>, 因此鎖住了 session B, C</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-2"><a href="#以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-2" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked, 為何 okay"></a><strong>以下的 MySQL example image 中, 說明為何 blocked, 為何 okay</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c-XbyvNaTqFTSfgemxw6k9nUgwmAWuVWFDU1Bmvl4bv9L4QClJgOZ-L9hVYuaAybOmBThFITRcer-IDvAsrFJA0FDChIl4x8_7jBPl5nYrf6ZqOBy-DHjmYZmV-106C_JEaDr96aEwHSzxL2rqf2AOLw=w1246-h550-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據非唯一索引等值查詢原則, c=10, 會附加 next-key lock <code>(5,10]</code><br>範圍查詢會繼續往後查找, 找到 c=15, 所以鎖了 next-key lock <code>(10,15]</code>, 因此 c=15 被鎖住了<br>定位 c=10 時, 是等值查詢, 而向右掃到 c=15 時, 是範圍查詢</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-3"><a href="#以下的-MySQL-example-image-中-說明為何-blocked-為何-okay-3" class="headerlink" title="以下的 MySQL example image 中, 說明為何 blocked, 為何 okay"></a><strong>以下的 MySQL example image 中, 說明為何 blocked, 為何 okay</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cZqrdbv2sTNYQQW38errG1i0rNvQZ-biBHtErpsX5dzXtLDkB9CA4SHAxGQJS1lw03kjMnqpgHG4dZ2wNd5CB5tEVC-JDlBGdg3JwG_wGBpW-srpvv2AI1fIRqXL-Cqp-OIVbYWjsg0vQnvRLvNnpweQ=w1244-h718-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據唯一索引等值查詢的優化原則, <code>(5,10]</code> 的 next-key lock 退化為行鎖, 只鎖 id=10<br>範圍查詢會繼續往後查找, 找到 id=15, 所以鎖了 next-key lock <code>(10,15]</code>, 因此 id=15 被鎖住了<br>定位 id=10 時, 是等值查詢, 而向右掃到 id=15 時, 是範圍查詢</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果我要保持-share-lock-並且讓-session-B-也-blocked-該怎麼做？"><a href="#以下的-MySQL-example-image-中-如果我要保持-share-lock-並且讓-session-B-也-blocked-該怎麼做？" class="headerlink" title="以下的 MySQL example image 中, 如果我要保持 share lock, 並且讓 session B 也 blocked, 該怎麼做？"></a><strong>以下的 MySQL example image 中, 如果我要保持 share lock, 並且讓 session B 也 blocked, 該怎麼做？</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>只要讓 covering index 不成立就可以了</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-如果我把-share-lock-換成-exclusive-lock-結果會變成？-為什麼？"><a href="#以下的-MySQL-example-image-中-如果我把-share-lock-換成-exclusive-lock-結果會變成？-為什麼？" class="headerlink" title="以下的 MySQL example image 中, 如果我把 share lock 換成 exclusive lock, 結果會變成？ 為什麼？"></a><strong>以下的 MySQL example image 中, 如果我把 share lock 換成 exclusive lock, 結果會變成？ 為什麼？</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>結果會變成兩個都 blocked<br>要是 for update, MySQL 會將 primary key 上符合條件的 row 加鎖<br>根據加鎖原則, 單位為 next-key lock, 因此加鎖範圍為 <code>(0,5]</code><br>當索引為非唯一索引時, 會繼續向後遍歷, 直到找到第一個不符合的值, 第一個不符合的值為 c=10, 因此會掃過的地方都會加鎖, 因此加一個 next-key lock <code>(5,10]</code><br>根據優化原則, 索引上的等值查詢, 最後一個不滿足等值條件的 next-key lock 會退化為 gap lock, 因此 <code>(5,10]</code> 退化為 <code>(5,10)</code><br>根據加鎖原則, 只有訪問到的才會加鎖, 此 query 使用了 covering index, 因此只鎖 covering index 的部分, 沒鎖主鍵, 所以 session B okay</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為什麼-session-B-為何-blocked-而-session-C-為何-okay"><a href="#以下的-MySQL-example-image-中-說明為什麼-session-B-為何-blocked-而-session-C-為何-okay" class="headerlink" title="以下的 MySQL example image 中, 說明為什麼 session B 為何 blocked, 而 session C 為何 okay"></a><strong>以下的 MySQL example image 中, 說明為什麼 session B 為何 blocked, 而 session C 為何 okay</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cJ9W1ypucZqKOmkg2H0aTCKWdB4dzyjcB0erNMrlcKfbhy4wNHs-LtG-a-gy7lZfsmEFEP2WmPgAc-CSYcJDwvGld4P36qMClfwisj2NAulOKIgvxB8TAAoegZNU49W9PXzWOjOBWko5qtqgnOeBncag=w1244-h462-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據加鎖原則, 單位為 next-key lock, 因此加鎖範圍為 <code>(0,5]</code><br>當索引為非唯一索引時, 會繼續向後遍歷, 直到找到第一個不符合的值, 第一個不符合的值為 c=10, 因此會掃過的地方都會加鎖, 因此加一個 next-key lock <code>(5,10]</code><br>根據優化原則, 索引上的等值查詢, 最後一個不滿足等值條件的 next-key lock 會退化為 gap lock, 因此 <code>(5,10]</code> 退化為 <code>(5,10)</code><br>根據加鎖原則, 只有訪問到的才會加鎖, 此 query 使用了 covering index, 因此只鎖 covering index 的部分, 沒鎖主鍵, 所以 session B okay</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-說明為什麼-session-B-為何-blocked-而-session-C-為何-okay-1"><a href="#以下的-MySQL-example-image-中-說明為什麼-session-B-為何-blocked-而-session-C-為何-okay-1" class="headerlink" title="以下的 MySQL example image 中, 說明為什麼 session B 為何 blocked, 而 session C 為何 okay"></a><strong>以下的 MySQL example image 中, 說明為什麼 session B 為何 blocked, 而 session C 為何 okay</strong></h6><ul>
<li><p><strong>Table Schema</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) DEFAULT NULL,</span><br><span class="line">  `d` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `c` (`c`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">insert into t values(0,0,0),(5,5,5),</span><br><span class="line">(10,10,10),(15,15,15),(20,20,20),(25,25,25);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3e_bInAdCWt-qXCuzf0AgwEDPjkHQvNbk1uGN2YNBizGPOBV8uHHG9yhVF7niqPMbRaT2B5ELCK_sWhn3Qp69Y2qZky9tWvAKwj4Qec9KKVRdDVx3DUlPBr3UdC5P6_PTmacTZTDSM13_RDQPiol0CcXA=w936-h313-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>根據加鎖原則, 加鎖單位為 next-key lock, session A 的加鎖範圍為 <code>(5,10]</code><br>根據優化原則, 這是一個等值查詢, 而 (id=7), 而 id=10 不滿足查詢條件, next-key lock 退化成 gap lock, 因此最終加鎖範圍為 (5,10)</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-26"><a href="#以下的-MySQL-example-image-的意思是？-26" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dz9YwaHAYbIyVtgpuxreP1ntNpDvDxBJXYwHZpc50MADXEoaeW2KBQCcUbIggz0Rtlh2EaXQsCvyCNeUwSt96hYmNuBVGRJqWGNM5-O2K-pj3ocWHpR93z5rK4eycqGWuS84a8zkGEwfpmrNrkPDSwaQ=w1142-h550-no?authuser=0"></li>
<li><strong>Answer</strong><br>除了鎖上紀錄之外, 還加上了 gap lock, 以防止新插入</li>
</ul>
<h6 id="MySQL-中-幻讀專指-update-後的數據還是新插入的行？"><a href="#MySQL-中-幻讀專指-update-後的數據還是新插入的行？" class="headerlink" title="MySQL 中, 幻讀專指 update 後的數據還是新插入的行？"></a><strong>MySQL 中, 幻讀專指 update 後的數據還是新插入的行？</strong></h6><p>新插入的行</p>
<h6 id="以下的-MySQL-example-code-假設-b-在-table-中的值都是-‘1234567890’-那結果會是？-會跑很久嗎？-為什麼？"><a href="#以下的-MySQL-example-code-假設-b-在-table-中的值都是-‘1234567890’-那結果會是？-會跑很久嗎？-為什麼？" class="headerlink" title="以下的 MySQL example code, 假設 b 在 table 中的值都是 ‘1234567890’, 那結果會是？ 會跑很久嗎？ 為什麼？"></a><strong>以下的 MySQL example code, 假設 b 在 table 中的值都是 ‘1234567890’, 那結果會是？ 會跑很久嗎？ 為什麼？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `table_a` ( `id` int(11) NOT NULL, `b` varchar(10) DEFAULT NULL, PRIMARY KEY (`id`), KEY `b` (`b`)) ENGINE=InnoDB;</span><br><span class="line">select * from table_a where b=&#x27;1234567890abcd&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>結果為空<br>會<br>engine 在執行時, 因為 varchar(10) 的關係, 會將帶入的 b 截斷為 10 character, 即 ‘1234567890’, 而在引擎中, 符合該條件的有十萬筆, 因此會有十萬次回表, 而每一次取得結果返回 server 層時, server 會再做一次判斷, 結果不吻合, 因此返回空</li>
</ul>
<h6 id="以下的-MySQL-example-images-的意思是？"><a href="#以下的-MySQL-example-images-的意思是？" class="headerlink" title="以下的 MySQL example images 的意思是？"></a><strong>以下的 MySQL example images 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dAR6AbAza5i9xMCTuqwvgmsj8pc-dlaIOB_mlAnbc7hTzgrx4OHMWXKTnaKkchd7p4KRahAtUp9FsU57loYKzpmdG_9GifW5yml8fOLDdjLK26z7TPjJj-giVM3lEADdNVfE3nz4Sb_lvvh2xhuywCuA=w595-h353-no?authuser=0"></li>
</ul>
<p><img src="https://lh3.googleusercontent.com/pw/ACtC-3c7GX0KbqPB9OVuzff4NETxLU_nzcmObkyF5l-e1sRhyUAabjqGPf0WLKWS-6mLqCwbX_Nek2TaN9SwwPvVHrNTET6Ho39cuj9YUlRYGHuvZd6U1kUKzN1Jk9JBjBM1EN4ZzHF-x36G974owdhv2V1LpA=w936-h322-no?authuser=0"></p>
<p><img src="https://lh3.googleusercontent.com/pw/ACtC-3cCtL2A63LTARWu-hEyQG3LJ0fsBZZgKyEZAtQvSKc0u_0PLr-XbPqHFVofgxRrnnXSuVlaNbM_5n7ultrqY3_iU7-Hpe2Ckx0IB-AdDEv4uG79ae8OcK4q337ULzmtL5ktwqOD_3oFOMxF0I8g3enabA=w1142-h856-no?authuser=0"></p>
<ul>
<li><strong>Answer</strong><br>session A 的第一個 select 語句耗時較久, 因為該 row 其實已被 update 100 萬次, 代表有 100 萬個版本, 而該 session 的 transaction 版本是在 100 萬次 update 之前, 因此會經由 undo log 返回一百萬個 update 之前的結果, 因此耗時較久<br>第二個 select 使用當前 read, 即取得最新的版本, 所以不須經過 undo log 回朔, 因此較快</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-27"><a href="#以下的-MySQL-example-image-的意思是？-27" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fmxHm4oqxdObXYVp67f0FSPYuF1pqkOelOLe5EITcdQO9Iz0rs3AJYlNpXPYWA1snKzXpqK5HDjsA8EmozMDe1HUzuxRp8m-cfDszpic1dC7YstWJfx_KOVDQiYTP7qXg-sQYczWlT8fwhAtxA5x6Qcw=w1224-h212-no?authuser=0"></li>
<li><strong>Answer</strong><br>id 4 佔了 MDL read lock<br>id 5 flush table 需要取得 MDL write lock, 但 id 4 的 read lock 要先釋放<br>id 6 以及後面的 process 都會被 id 5 卡住</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-17"><a href="#以下的-MySQL-example-code-的意思是？-17" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select blocking_pid from sys.schema_table_lock_waits;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>找出 blocking pid</li>
</ul>
<h6 id="MySQL-中-performance-schema-是什麼意思？"><a href="#MySQL-中-performance-schema-是什麼意思？" class="headerlink" title="MySQL 中, performance_schema 是什麼意思？"></a><strong>MySQL 中, performance_schema 是什麼意思？</strong></h6><p>開啟後, 搭配 sys 可以快速找到 blocking_pid, 但會損失 10% 性能</p>
<h6 id="以下的-MySQL-example-image-的意思是？-28"><a href="#以下的-MySQL-example-image-的意思是？-28" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3d6XrB6349vQgQoK_La5csGbI4nstaZ-Ezxt5Nk1eg8d-PQTVRgQoUroWeJ77r6LGfhIdysvJsfc31UGQn2PG-Uv39eTD9b1sfvvmmf6LZT6UeGTZnpkGvpUlCYozdLC1A-oIl8v8COj0QsLYlzf2MBbQ=w1312-h213-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br><code>select * from t where id=1</code> 被 MDL block 住了</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-如果-d-tradeid-的-character-set-是-utf8-而-l-tradeid-是-utf8mb4-那會使用所以樹搜索嗎？-為什麼？-可以怎麼修改？"><a href="#以下的-MySQL-example-code-中-如果-d-tradeid-的-character-set-是-utf8-而-l-tradeid-是-utf8mb4-那會使用所以樹搜索嗎？-為什麼？-可以怎麼修改？" class="headerlink" title="以下的 MySQL example code 中, 如果 d.tradeid 的 character set 是 utf8, 而 l.tradeid 是 utf8mb4, 那會使用所以樹搜索嗎？ 為什麼？ 可以怎麼修改？"></a><strong>以下的 MySQL example code 中, 如果 d.tradeid 的 character set 是 utf8, 而 l.tradeid 是 utf8mb4, 那會使用所以樹搜索嗎？ 為什麼？ 可以怎麼修改？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select l.operator from tradelog l , trade_detail d where d.tradeid=l.tradeid and d.id=4;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>不會<br>因為 utf8mb4 為 utf8 的 superset, 因此會變成 CAST(d.tradeid as utf8mb4)=l.tradeid, 進而破壞索引的有序性<br>將 where 條件對調就行了</li>
</ul>
<h6 id="以下的-MySQL-example-code-假設-id-的-column-type-為-int-是否可以使用索引樹搜索？"><a href="#以下的-MySQL-example-code-假設-id-的-column-type-為-int-是否可以使用索引樹搜索？" class="headerlink" title="以下的 MySQL example code, 假設 id 的 column type 為 int, 是否可以使用索引樹搜索？"></a><strong>以下的 MySQL example code, 假設 id 的 column type 為 int, 是否可以使用索引樹搜索？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from tradelog where id=&quot;83126&quot;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>可以, 因為會變成 <code>select * from tradelog where id = CAST(83126 as int)</code>, 不影響 id 有序性</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-29"><a href="#以下的-MySQL-example-image-的意思是？-29" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dJNJu3eLqn7iyxvd8yAjlY4hmvlFBYe-ZDu8v-NiYYXxOl4bLCNMeWTBEkZyzjuFbgkyy_qC-ppjVUweTC-DpHj8qiY2RN3rPHWUd3h3dZkqn7Z-oOiOcG0CTqbfTXKqS_K1o5Zmod-cChLgP9FX6Y6A=w289-h142-no?authuser=0"></li>
<li><strong>Answer</strong><br>MySQL 將 string 轉為 int</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-18"><a href="#以下的-MySQL-example-code-的意思是？-18" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select &quot;10&quot; &gt; 9;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>可以得到 MySQL 對於 string 與 int 的轉換規則, 若是 1 代表將 string 轉為 int, 若是 0 代表將 int 轉為 string</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-索引沒有作用-可能是什麼原因？"><a href="#以下的-MySQL-example-code-中-索引沒有作用-可能是什麼原因？" class="headerlink" title="以下的 MySQL example code 中, 索引沒有作用, 可能是什麼原因？"></a><strong>以下的 MySQL example code 中, 索引沒有作用, 可能是什麼原因？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from tradelog where tradeid=110717;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>可能是 tradeid 的 column type 不是 int, 然後會將 string 轉為 int, 變成 <code>select * from tradelog where  CAST(tradid AS signed int) = 110717;</code>, 當 tradeid 使用了 function, 便失去樹搜索的功能</li>
</ul>
<h6 id="以下的-MySQL-example-code-會使用索引快速定位嗎？-為什麼？-該怎麼修改？"><a href="#以下的-MySQL-example-code-會使用索引快速定位嗎？-為什麼？-該怎麼修改？" class="headerlink" title="以下的 MySQL example code, 會使用索引快速定位嗎？ 為什麼？ 該怎麼修改？"></a><strong>以下的 MySQL example code, 會使用索引快速定位嗎？ 為什麼？ 該怎麼修改？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from tradelog where id + 1 = 10000</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>不會, 因為優化器偷懶 XD<br>id = 10000 - 1</li>
</ul>
<h6 id="MySQL-中-為什麼對索引使用-function-會讓索引失效？"><a href="#MySQL-中-為什麼對索引使用-function-會讓索引失效？" class="headerlink" title="MySQL 中, 為什麼對索引使用 function, 會讓索引失效？"></a><strong>MySQL 中, 為什麼對索引使用 function, 會讓索引失效？</strong></h6><p>因為 function 可能會破壞索引的有序性, 就算最後有使用索引, 也可能只是使用 full index scan, 而不不是使用樹搜索快速定位</p>
<h6 id="以下的-MySQL-image-的意思是？"><a href="#以下的-MySQL-image-的意思是？" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dFP2FZprix8YnJeCal1TE_k9vGDq0RXu00-sXPsEGcJapezAG7_7-Lh22EVpB8GpbyJ2ESRwom3gUetuoqonrgxESXZCMNSH0fJ4XofEhr4CAzK0wYeNp2ZawwEP8Kl7AJbXz0kpM6zLFUBM5vxhJHNw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>對索引使用函數可能會破壞索引的有序性, 優化器會因此放棄走樹搜索功能</li>
</ul>
<h6 id="以下的-MySQL-example-code-掃描的總行數是？"><a href="#以下的-MySQL-example-code-掃描的總行數是？" class="headerlink" title="以下的 MySQL example code 掃描的總行數是？"></a><strong>以下的 MySQL example code 掃描的總行數是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select count(*) into @C from t;</span><br><span class="line">set @Y1 = floor(@C * rand());</span><br><span class="line">set @Y2 = floor(@C * rand());</span><br><span class="line">set @Y3 = floor(@C * rand());</span><br><span class="line">id1 = select * from t limit @Y1，1；</span><br><span class="line">id2= select * from t where id &gt; id1 limit @Y2-@Y1，1；</span><br><span class="line">select * from t where id &gt; id2 limit @Y3 - @Y2，1；</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>C + (Y1 + 1) + (Y2 - Y1 + 1) + (Y3 - Y2 + 1)</li>
</ul>
<h6 id="以下的-MySQL-example-code-掃描的總行數是？-1"><a href="#以下的-MySQL-example-code-掃描的總行數是？-1" class="headerlink" title="以下的 MySQL example code 掃描的總行數是？"></a><strong>以下的 MySQL example code 掃描的總行數是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select count(*) into @C from t;</span><br><span class="line">set @Y1 = floor(@C * rand());</span><br><span class="line">set @Y2 = floor(@C * rand());</span><br><span class="line">set @Y3 = floor(@C * rand());</span><br><span class="line">select * from t limit @Y1，1； //在应用代码里面取Y1、Y2、Y3值，拼出SQL后执行</span><br><span class="line">select * from t limit @Y2，1；</span><br><span class="line">select * from t limit @Y3，1；</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>C + (Y1 + 1) + (Y2 + 1) + (Y3 + 1)</li>
</ul>
<h6 id="所以-如果遇到需求是每次打開-APP-提供給使用者隨機幾個單字的話-那較佳的實踐是？"><a href="#所以-如果遇到需求是每次打開-APP-提供給使用者隨機幾個單字的話-那較佳的實踐是？" class="headerlink" title="所以, 如果遇到需求是每次打開 APP 提供給使用者隨機幾個單字的話, 那較佳的實踐是？"></a><strong>所以, 如果遇到需求是每次打開 APP 提供給使用者隨機幾個單字的話, 那較佳的實踐是？</strong></h6><p>使用 redis 儲存整個單字庫, 如果數據量不大的話</p>
<h6 id="以下的-MySQL-example-code-的意思是？-19"><a href="#以下的-MySQL-example-code-的意思是？-19" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select count(*) into @C from t;</span><br><span class="line">set @Y = floor(@C * rand());</span><br><span class="line">set @sql = concat(&quot;select * from t limit &quot;, @Y, &quot;,1&quot;);</span><br><span class="line">prepare stmt from @sql;</span><br><span class="line">execute stmt;</span><br><span class="line">DEALLOCATE prepare stmt;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>取得所有 row 的數量<br>row number * rand(), rand() 即 0~1 的小數, 配上 floor, 所以假如 row number 是 10, 可能的數就會介於 0~9<br>即 offset 0~9 limit 1, 由於 limit 後面的函數無法直接接 variable, 所以使用 concat()<br>DEALLOCATE prepare 為釋放當次 prepare 資源</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-20"><a href="#以下的-MySQL-example-code-的意思是？-20" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select max(id),min(id) into @M,@N from t ;</span><br><span class="line">set @X= floor((@M-@N+1)*rand() + @N);</span><br><span class="line">select * from t where id &gt;= @X limit 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>取得最大 id, 最小 id<br>@M-@N+1 代表總共有幾個 row (如果中間有空洞, 這並不準確), <code>* rand()</code> 代表 <code>* 0 ~ 1</code> 的小數, 最後 <code>+ @N</code> 使值不會小於 @N 或 @M<br>最後, 取得 id &gt;= @X 的第一個數字<br>缺點就是, 如果之間有空洞, 那就不滿足嚴格的隨機</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-30"><a href="#以下的-MySQL-example-image-的意思是？-30" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eQVQ-2nKccx_-X_bDKSgK4B88ZOPlHTuqGamo3oMqCPZw1QSEWb9j8QMwd2YnT8jPsSU6nk2hJT9H_0mdQMuvwzom_Oc0IqfJty0bPApUbidIJGZ8-gQ9eCS3g_sqI_j-PlXGfXY_fWoFqA2GRtkMIbA=w1502-h2002-no?authuser=0"></li>
<li><strong>Answer</strong><br>使用 <code>對列優先演算法 (filesort_priority_queue_optimization)</code> 來排序, 先組成一個 stack (limit 3), 再依序跟其他的 row 比較, 最終取得 R 值最小的 3 個 row (滿足 limit 3)</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-使用的是哪一種排序演算法？"><a href="#以下的-MySQL-example-image-中-使用的是哪一種排序演算法？" class="headerlink" title="以下的 MySQL example image 中, 使用的是哪一種排序演算法？"></a><strong>以下的 MySQL example image 中, 使用的是哪一種排序演算法？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fwb828g3KZqAlXBl72boE1KCRFgEc4lOr1b_OrZL4rqiW_XsDSV2NewvgloKrnbKJ35lL8uS85_03ym_tnDG6Dym2YmRb7r-xKsoGEiBA-1j4yb1NpL8CXlN9Dl9M0KMJr8OsJVw2trCW8qEAmIedLSA=w646-h369-no?authuser=0"></li>
<li><strong>Answer</strong><br>優先隊列演算法 (filesort_priority_queue_optimization)</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-21"><a href="#以下的-MySQL-example-code-的意思是？-21" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">show global variables like &#x27;sort_buffer_size&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>取得 current sort_buffer_size 的值</li>
</ul>
<h6 id="MySQL-InnoDB-中-internal-tmp-disk-storage-engine-的意思是？"><a href="#MySQL-InnoDB-中-internal-tmp-disk-storage-engine-的意思是？" class="headerlink" title="MySQL InnoDB 中, internal_tmp_disk_storage_engine 的意思是？"></a><strong>MySQL InnoDB 中, internal_tmp_disk_storage_engine 的意思是？</strong></h6><p>定義 disk 臨時表該使用哪個 engine</p>
<h6 id="MySQL-InnoDB-中-disk-臨時表使用的默認-engine-是？"><a href="#MySQL-InnoDB-中-disk-臨時表使用的默認-engine-是？" class="headerlink" title="MySQL InnoDB 中, disk 臨時表使用的默認 engine 是？"></a><strong>MySQL InnoDB 中, disk 臨時表使用的默認 engine 是？</strong></h6><p>InnoDB</p>
<h6 id="MySQL-InnoDB-中-tmp-table-size-的意思是？"><a href="#MySQL-InnoDB-中-tmp-table-size-的意思是？" class="headerlink" title="MySQL InnoDB 中, tmp_table_size 的意思是？"></a><strong>MySQL InnoDB 中, tmp_table_size 的意思是？</strong></h6><p>當超過這個值, 內存臨時表會轉為 disk 臨時表</p>
<h6 id="MySQL-InnoDB-中-如果-primary-key-存在-那-row-id-是？"><a href="#MySQL-InnoDB-中-如果-primary-key-存在-那-row-id-是？" class="headerlink" title="MySQL InnoDB 中, 如果 primary key 存在, 那 row_id 是？"></a><strong>MySQL InnoDB 中, 如果 primary key 存在, 那 row_id 是？</strong></h6><p>primary key</p>
<h6 id="MySQL-InnoDB-中-如果把-primary-key-刪了-那還會有-primary-key-嗎？"><a href="#MySQL-InnoDB-中-如果把-primary-key-刪了-那還會有-primary-key-嗎？" class="headerlink" title="MySQL InnoDB 中, 如果把 primary key 刪了, 那還會有 primary key 嗎？"></a><strong>MySQL InnoDB 中, 如果把 primary key 刪了, 那還會有 primary key 嗎？</strong></h6><p>會自動生成長度為 6 bytes 的 row_id 當作 primary key</p>
<h6 id="以下的-MySQL-example-image-中-如果我的-sql-query-是-select-word-from-words-order-by-rand-limit-3-且資料庫中有-10000-筆資料-那照這個圖的流程-共會讀取幾筆資料？"><a href="#以下的-MySQL-example-image-中-如果我的-sql-query-是-select-word-from-words-order-by-rand-limit-3-且資料庫中有-10000-筆資料-那照這個圖的流程-共會讀取幾筆資料？" class="headerlink" title="以下的 MySQL example image 中, 如果我的 sql query 是 select word from words order by rand() limit 3;, 且資料庫中有 10000 筆資料, 那照這個圖的流程, 共會讀取幾筆資料？"></a><strong>以下的 MySQL example image 中, 如果我的 sql query 是 <code>select word from words order by rand() limit 3;</code>, 且資料庫中有 10000 筆資料, 那照這個圖的流程, 共會讀取幾筆資料？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>20003 筆<br>從主表讀入臨時表, 10000 筆, 從臨時表讀入 buffer sort, 10000 筆, 從 buffer sort 取得在臨時表的 3 筆資料</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-簡述一下各個流程"><a href="#以下的-MySQL-example-image-中-簡述一下各個流程" class="headerlink" title="以下的 MySQL example image 中, 簡述一下各個流程"></a><strong>以下的 MySQL example image 中, 簡述一下各個流程</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c0Olp7PZyT8Qw84WJH59I0g35N_Zs93YotwoH9LBQkJA-0Dp36_jwi-7KoUWaS_HoYumUDGT2Ms50xiITICFLJSvIGPbAloFII8XXVP1o-sH2vbJ5goFKa_Vyfu36GXN23W4i9kDzvjc7oIpOoPZYETQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>(1) 在 memory 中建立一個臨時表, 表中有兩個欄位, r 為 double, w 為 varchar<br>(2) 從 words table 按 primary key 順序取出 word, 對每一個 word 使用 rand(), 記為 r, 1 &gt; r &gt; 0<br>(3) 初始化 sort_buffer, 欄位為 r (rand) 以及 position (row_id), 將臨時表中的資料存到 sort buffer 中<br>(4) sort buffer 中進行排序<br>(5) 根據排序後 sort buffer 的前三筆的位置資訊 (row_id), 從臨時表中取出相對應的三筆資料</li>
</ul>
<h6 id="MySQL-InnoDB-中-為了節省-disk-I-O-在排序時會選擇哪種排序法？"><a href="#MySQL-InnoDB-中-為了節省-disk-I-O-在排序時會選擇哪種排序法？" class="headerlink" title="MySQL InnoDB 中, 為了節省 disk I/O, 在排序時會選擇哪種排序法？"></a><strong>MySQL InnoDB 中, 為了節省 disk I/O, 在排序時會選擇哪種排序法？</strong></h6><p>row_id</p>
<h6 id="以下的-MySQL-example-image-中-Extra-column-中的意思是？"><a href="#以下的-MySQL-example-image-中-Extra-column-中的意思是？" class="headerlink" title="以下的 MySQL example image 中, Extra column 中的意思是？"></a><strong>以下的 MySQL example image 中, Extra column 中的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cRZuSIR--SqaA1Jmk790QvArTf-pPuQEDVhnPDja5wqHLKgYIuvoJpJEIB1cIjz_l2QX43sEIuau1dg_BdbzJOqdvaHA2_Irlq_G_kKBtc2XvgcKN9tcdjDxM0zs8rFdFONU2aW6rSa96GQTCXdREXtg=w1553-h142-no?authuser=0"></li>
<li><strong>Answer</strong><br>Using temporary 代表需要使用臨時表<br>Using filesort 代表有排序需求, 所以會在臨時表上排序</li>
</ul>
<h6 id="MySQL-中-當-binlog-format-row-且-binlog-row-image-FULL-代表什麼？"><a href="#MySQL-中-當-binlog-format-row-且-binlog-row-image-FULL-代表什麼？" class="headerlink" title="MySQL 中, 當 binlog_format=row 且 binlog_row_image=FULL, 代表什麼？"></a><strong>MySQL 中, 當 binlog_format=row 且 binlog_row_image=FULL, 代表什麼？</strong></h6><p>代表 binlog 需要記錄所有的字段, 所以在 read 的時候會 read 全部的資料, 會影響在 transaction 中, 當前讀的行為, 原本不會去讀的會變成全讀, 所以也不就不會做不必要的 update, 也就不會產生新的可見 version</p>
<h6 id="以下的-MySQL-example-image-中-為什麼結果是-1-3"><a href="#以下的-MySQL-example-image-中-為什麼結果是-1-3" class="headerlink" title="以下的 MySQL example image 中, 為什麼結果是 (1,3)"></a><strong>以下的 MySQL example image 中, 為什麼結果是 (1,3)</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dMgwAyApcUMnrXbDVyERl6T-UKA2D2NwJO9bqPEC5bHj5KW_GkqC3Xvw_DR69YzAql3udSjgRccGNs43_2ikhz_qSpNNze9nfZM7Sj4Mg7Ishxo2Cd_eAaX7yGaJ5N4g76AG8XoF7cEDfcotp26-JntQ=w938-h423-no?authuser=0"></li>
<li><strong>Answer</strong><br>因為 update 中沒有足夠的訊息來判斷該 row 不需要再被更新了, 因此實際上 session A 還是更新了一次, 並在該 transaction 中加入了該 transaction 對該 row update 而生成的一個新的 version, 因此結果為 (1,3)</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-為什麼結果是-1-2"><a href="#以下的-MySQL-example-image-中-為什麼結果是-1-2" class="headerlink" title="以下的 MySQL example image 中, 為什麼結果是 (1,2)"></a><strong>以下的 MySQL example image 中, 為什麼結果是 (1,2)</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eVu2LJOYhiglA0GMBVFHROfy_h_uuEmiyIo51vg6FkK43gerREUf-UW6U3uktSU2dnuauuMFp2VhlXKuDOWggqYUmzTh544d31TO98Sqajs5o4-HbG5Vt2odOMJTsitJrgAQRi-_5AR8g2WqJzqtTdiQ=w964-h447-no?authuser=0"></li>
<li><strong>Answer</strong><br>因為 update 的 where 中, 有 a = 3, 觸發當前讀, 進而發現該 row 的值已經是 3, 判斷不需要更新, 因為沒有在 transaction 中產生新的 view, 所在 session A 的 transaction 中, (1,3) 是不可見的</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-using-index-的意思是？"><a href="#以下的-MySQL-example-image-中-using-index-的意思是？" class="headerlink" title="以下的 MySQL example image 中, using index 的意思是？"></a><strong>以下的 MySQL example image 中, using index 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dlWDXu2kUHYR5xX7tqVonAN2sF34FGnPcGV4TBWB8wERuDo9PpxwIDj29-kDGyJ4fmstQ2nAiLO0KyYs9utS4Eol-JL8uu5BgGGIzLzuyuCvxAN4vCd7hn-Rs7XoDLNzOMMVNv8SfBH3BNblO0-TdfcA=w1586-h125-no?authuser=0"></li>
<li><strong>Answer</strong><br>表示有使用覆蓋索引</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-31"><a href="#以下的-MySQL-example-image-的意思是？-31" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dvFWlQud1Rci55YPu6kTIgSTLTpyNRTldzVAj99aRCwH0Kaxs_9Flo4oWa95emmjGb4EwRf_bqcIzB-KI-9_Em6pDA8iASHhe2j-6hOQJ44W0938UX5olwDmqFC5TRvdmNuoPsLYEA323_N6MXFO8Zmg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>使用聯合索引, 並且符合覆蓋索引, 從 index 中取得 city 之後, 不需到原表取值, 也不需進去 sort_buffer 排序, 直接返回結果集</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-32"><a href="#以下的-MySQL-example-image-的意思是？-32" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cLn0wcLCUevbOmThBluBWgaQmpOQNogGhpf67oyNmS9AvoAlnMD9EXGZiMfhq6VRmJoxZu7vmtvOFXWiRRZf1rZYKU9RSat2QmZ-vFRtoOx1HxGaXjgLXu-Docl12pJtwvE5J38muWyaVvtpyDzEQHEg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>因為使用了 compound index, 原本需要排序的 name 在 index 中已經是有序的了, 因此取得 city 後, 直接返回原表取得需要的資料, 然後就不需進去 sort_buffer 排序, 而是直接返回結果集</li>
</ul>
<h6 id="MySQL-中-為什麼-row-id-排序比全字段排序掃描的行數多？"><a href="#MySQL-中-為什麼-row-id-排序比全字段排序掃描的行數多？" class="headerlink" title="MySQL 中, 為什麼 row_id 排序比全字段排序掃描的行數多？"></a><strong>MySQL 中, 為什麼 row_id 排序比全字段排序掃描的行數多？</strong></h6><p>因為最後還要到原表去取需求的資料, 而不是排序完直接返回</p>
<h6 id="以下的-MySQL-example-image-的意思是？-33"><a href="#以下的-MySQL-example-image-的意思是？-33" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ck_926eQdrihqnNHzVWFn_SWBS0_1PKqrx32WDH0L2A49wQf4OicPX1GfWwncmvIJFW9vdJsFD4bY2UrhW08f-bGjiLKQX_fI5r-FAcm1Tu6WtEl-lz6WkR4SsfQ3e85b58b9S95cmb8UUPcyzJAeupw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>使用 row_id 排序<br>初始化 sort_buffer, 確定要放入字段為 id, name<br>從 index city 取得 id, 並到 table 經由 id 取得 id, name, 再放到 sort_buffer<br>從 index 取下一筆紀錄, 直到將所有符合條件的 id, name 都放到 sort_buffer<br>在 sort_buffer 中排序<br>按照順序到 table 使用 id 取得全部需求字段, return<br>最後一個步驟不需額外耗費內存儲存結果, 而是直接返回</li>
</ul>
<h6 id="MySQL-中-何謂-row-id-排序？"><a href="#MySQL-中-何謂-row-id-排序？" class="headerlink" title="MySQL 中, 何謂 row_id 排序？"></a><strong>MySQL 中, 何謂 row_id 排序？</strong></h6><p>只將必要的字段放到 sort_buffer, 即 primary key 以及要排序的 column</p>
<h6 id="MySQL-中-何謂全字段排序？"><a href="#MySQL-中-何謂全字段排序？" class="headerlink" title="MySQL 中, 何謂全字段排序？"></a><strong>MySQL 中, 何謂全字段排序？</strong></h6><p>將要 return 的資料全部丟到 sort_buffer 中排序</p>
<h6 id="MySQL-中-max-length-for-sort-data-variable-的用途是？"><a href="#MySQL-中-max-length-for-sort-data-variable-的用途是？" class="headerlink" title="MySQL 中, max_length_for_sort_data variable 的用途是？"></a><strong>MySQL 中, max_length_for_sort_data variable 的用途是？</strong></h6><p>定義 sort data 的最大長度, 若是單行超過這個長度, 會採用另外一種算法</p>
<h6 id="以下的-MySQL-example-image-中-packed-additional-fields-的意思是？"><a href="#以下的-MySQL-example-image-中-packed-additional-fields-的意思是？" class="headerlink" title="以下的 MySQL example image 中, packed_additional_fields 的意思是？"></a><strong>以下的 MySQL example image 中, packed_additional_fields 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0"></li>
<li><strong>Answer</strong><br>排序過程對字符串做緊湊處理, 即使字段定義是 varchar(16), 排序過程還是按照實際長度分配空間</li>
</ul>
<h6 id="以下的-MySQL-example-image-中-examined-rows-的意思是？"><a href="#以下的-MySQL-example-image-中-examined-rows-的意思是？" class="headerlink" title="以下的 MySQL example image 中, examined_rows 的意思是？"></a><strong>以下的 MySQL example image 中, examined_rows 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0"></li>
<li><strong>Answer</strong><br>排序的行數</li>
</ul>
<h6 id="MySQL-中-若使用外部文件來排序-通常會使用哪個演算法？"><a href="#MySQL-中-若使用外部文件來排序-通常會使用哪個演算法？" class="headerlink" title="MySQL 中, 若使用外部文件來排序, 通常會使用哪個演算法？"></a><strong>MySQL 中, 若使用外部文件來排序, 通常會使用哪個演算法？</strong></h6><p>歸併演算法</p>
<h6 id="以下的-MySQL-example-image-中-number-of-tmp-files-的意思是？"><a href="#以下的-MySQL-example-image-中-number-of-tmp-files-的意思是？" class="headerlink" title="以下的 MySQL example image 中, number of tmp files 的意思是？"></a><strong>以下的 MySQL example image 中, number of tmp files 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cgP0i4uWAxPriIUfQ0lcQBr0R6Nq6IBjTFe7hm3tF3MK5nO9WpukqUKDRj5GVn_jdz2fNoqGbtqyKYX3CqyMpzH6ksrnd6fZA2sJEnnZwJ6grE8sHW4KNUfJsDMixSl6bCVJR-myHZMDOM4dExMAgQDg=w713-h183-no?authuser=0"></li>
<li><strong>Answer</strong><br>共使用了幾個外部 disk 文件來幫助排序</li>
</ul>
<h6 id="MySQL-中-如果-sort-buffer-size-小於要-sort-的資料量的話-會發生什麼事？"><a href="#MySQL-中-如果-sort-buffer-size-小於要-sort-的資料量的話-會發生什麼事？" class="headerlink" title="MySQL 中, 如果 sort_buffer_size 小於要 sort 的資料量的話, 會發生什麼事？"></a><strong>MySQL 中, 如果 sort_buffer_size 小於要 sort 的資料量的話, 會發生什麼事？</strong></h6><p>會使用外部 disk 臨時文件來 sort</p>
<h6 id="MySQL-中-什麼是-sort-buffer-size"><a href="#MySQL-中-什麼是-sort-buffer-size" class="headerlink" title="MySQL 中, 什麼是 sort_buffer_size?"></a><strong>MySQL 中, 什麼是 sort_buffer_size?</strong></h6><p>sort_buffer 的 size </p>
<h6 id="以下的-MySQL-example-code-的意思是？-22"><a href="#以下的-MySQL-example-code-的意思是？-22" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SET optimizer_trace=&#x27;enabled=on&#x27;; </span><br><span class="line"></span><br><span class="line">select VARIABLE_VALUE into @a from  performance_schema.session_status where variable_name = &#x27;Innodb_rows_read&#x27;;</span><br><span class="line"></span><br><span class="line">select city, name,age from t where city=&#x27;杭州&#x27; order by name limit 1000; </span><br><span class="line"></span><br><span class="line">SELECT * FROM `information_schema`.`OPTIMIZER_TRACE`\G</span><br><span class="line"></span><br><span class="line">select VARIABLE_VALUE into @b from performance_schema.session_status where variable_name = &#x27;Innodb_rows_read&#x27;;</span><br><span class="line"></span><br><span class="line">select @b-@a;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>暫時的打開 optimizer_trace<br>記下初始 read row<br>執行 query<br>取得 optimizer_trace<br>記下 query 後的 read row<br>取得總共 read row</li>
</ul>
<h6 id="MySQL-中-會給每個-session-分配一塊內存用以排序-稱為？"><a href="#MySQL-中-會給每個-session-分配一塊內存用以排序-稱為？" class="headerlink" title="MySQL 中, 會給每個 session 分配一塊內存用以排序, 稱為？"></a><strong>MySQL 中, 會給每個 session 分配一塊內存用以排序, 稱為？</strong></h6><p>sort_buffer</p>
<h6 id="以下的-MySQL-example-image-的意思是？-34"><a href="#以下的-MySQL-example-image-的意思是？-34" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cHYzqgRqJ8ZaYbS2kTw8gtDXclRN7E-0di_BJtYoMTgMEvvjF7egbVWOUU53YGsth5wZhxBe_osFuAqzWdexXZBH85ESGudUcHnyMdVObiKMuBPAAacC0XsADJCiHO-29Ev0OelGmtiIADH5Bi1-jdQg=w1142-h856-no?authuser=0"></p>
</li>
<li><p><strong>Example</strong></p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select city,name,age from t where city=&#x27;杭州&#x27; order by name limit 1000  ;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Answer</strong><br>從 index 中取得符合 where condition 的 primary key<br>回表取得 city, name, age<br>將值到放 sort buffer 中, 排序<br>返回結果</p>
</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-23"><a href="#以下的-MySQL-example-code-的意思是？-23" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">begin; /*启动事务*/</span><br><span class="line">insert into `like`(user_id, liker_id, relation_ship) values(A, B, 1) on duplicate key update relation_ship=relation_ship | 1;</span><br><span class="line">select relation_ship from `like` where user_id=A and liker_id=B;</span><br><span class="line">/*代码中判断返回的 relation_ship，</span><br><span class="line">  如果是1，事务结束，执行 commit</span><br><span class="line">  如果是3，则执行下面这两个语句：</span><br><span class="line">  */</span><br><span class="line">insert ignore into friend(friend_1_id, friend_2_id) values(A,B);</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; begin;</span><br><span class="line">insert into `like`(user_id, liker_id, relation_ship) values(B, A, 2) on duplicate key update relation_ship=relation_ship | 2;</span><br><span class="line">select relation_ship from `like` where user_id=B and liker_id=A;</span><br><span class="line">/*代码中判断返回的 relation_ship，</span><br><span class="line">  如果是2，事务结束，执行 commit</span><br><span class="line">  如果是3，则执行下面这两个语句：</span><br><span class="line">*/</span><br><span class="line">insert ignore into friend(friend_1_id, friend_2_id) values(B,A);</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>用 single row 來實現 status 1, 2, 3<br><code>|</code> 為 <code>按位或</code>, 會將數字轉為二進制再運算, 比如說 1|2 = 3, 因為 01 (1), 10 (2), 所以會變成 11, 即 3, 而 2|2 還是 2, 因為 10, 10, 會等於 10, 而 1|1 還是 1, 因為 01, 01, 會等於 01, 因為還是 1<br>最後的 ignore, 當 insert 重複資料時, 會 ignore, 以免 error 讓 transaction rollback</li>
</ul>
<h6 id="MySQL-中-如果出現-crash-的情況-如果恢復數據頁的內存？"><a href="#MySQL-中-如果出現-crash-的情況-如果恢復數據頁的內存？" class="headerlink" title="MySQL 中, 如果出現 crash 的情況, 如果恢復數據頁的內存？"></a><strong>MySQL 中, 如果出現 crash 的情況, 如果恢復數據頁的內存？</strong></h6><p>若判斷數據頁有丟失更新的可能, 會先將數據頁的資料讀到內存, 在使用 redo log 去更新內存到 crash 前的內容</p>
<h6 id="MySQL-中-如果是正常運行的實例-刷髒頁時-會使用到-redo-log-嗎？"><a href="#MySQL-中-如果是正常運行的實例-刷髒頁時-會使用到-redo-log-嗎？" class="headerlink" title="MySQL 中, 如果是正常運行的實例, 刷髒頁時, 會使用到 redo log 嗎？"></a><strong>MySQL 中, 如果是正常運行的實例, 刷髒頁時, 會使用到 redo log 嗎？</strong></h6><p>不會, 會把內存刷到 disk</p>
<h6 id="MySQL-中-redo-log-建議設置多大？"><a href="#MySQL-中-redo-log-建議設置多大？" class="headerlink" title="MySQL 中, redo log 建議設置多大？"></a><strong>MySQL 中, redo log 建議設置多大？</strong></h6><p>如果 disk 有幾個 TB 大小, 建議 4 個文件, 每個 1 GB</p>
<h6 id="以下的-MySQL-image-中-如果只使用-binlog-而不使用-redolog-當-crash-了-會出現什麼情形"><a href="#以下的-MySQL-image-中-如果只使用-binlog-而不使用-redolog-當-crash-了-會出現什麼情形" class="headerlink" title="以下的 MySQL image 中, 如果只使用 binlog 而不使用 redolog, 當 crash 了, 會出現什麼情形?"></a><strong>以下的 MySQL image 中, 如果只使用 binlog 而不使用 redolog, 當 crash 了, 會出現什麼情形?</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c5Tpy-aRjLb2xaKmSZCizuJixrecHy6K6SIjtC1uahlFWwH9CZj8KHuKzSy_yWtkdDhuw_5dcMRJNnwA2uQpIzHt0sZ-4nEWmBFldOG06XjzQejVUAua5yq-BZDg2jGUuyycO7h_xqiHTqD67vAyCTqA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>transaction 2 因為尚未提交, crash 後會藉由 binlog2 來復原, 但因為 MySQL 是使用 WAL 方式, 所以 transaction 1 有可能因為內存上的數據頁丟失而一起丟失, 但因為 binlog 顯示已提交, 所以並不會重新執行一次 binlog1, 因此 transaction 1 數據可能丟失</li>
</ul>
<h6 id="MySQL-中-redo-log-和-binlog-是如何關聯的？"><a href="#MySQL-中-redo-log-和-binlog-是如何關聯的？" class="headerlink" title="MySQL 中, redo log 和 binlog 是如何關聯的？"></a><strong>MySQL 中, redo log 和 binlog 是如何關聯的？</strong></h6><p>會有共同的 XID</p>
<h6 id="MySQL-中-bin-checksum-的用途是？"><a href="#MySQL-中-bin-checksum-的用途是？" class="headerlink" title="MySQL 中, bin-checksum 的用途是？"></a><strong>MySQL 中, bin-checksum 的用途是？</strong></h6><p>校驗 binlog 的完整性</p>
<h6 id="MySQL-中-當發生-crash-MySQL-如何判斷-binlog-是否完整？"><a href="#MySQL-中-當發生-crash-MySQL-如何判斷-binlog-是否完整？" class="headerlink" title="MySQL 中, 當發生 crash, MySQL 如何判斷 binlog 是否完整？"></a><strong>MySQL 中, 當發生 crash, MySQL 如何判斷 binlog 是否完整？</strong></h6><p>statement 格式的 binlog, 最後會有 commit;<br>row 格式的, 最後會有一個 XID event</p>
<h6 id="以下的-MySQL-example-中-比較各種-count-的效能以及行為？"><a href="#以下的-MySQL-example-中-比較各種-count-的效能以及行為？" class="headerlink" title="以下的 MySQL example 中, 比較各種 count() 的效能以及行為？"></a><strong>以下的 MySQL example 中, 比較各種 count() 的效能以及行為？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">count(*)</span><br><span class="line">count(1)</span><br><span class="line">count(id)</span><br><span class="line">count(columnName)</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>count(*) 會 scan 整張表, 但不取值, server 層會對於每一行的回傳累加 1, 屬於 MySQL 特別優化的選項, 優先選擇<br>count(1) 會 scan 整張表, 但不取值, server 層會對於每一行的回傳累加 1<br>count(id) 會 scan 整張表, 取 id, server 層會對於每一行的回傳累加 1<br>count(columnName) 會 scan 整張表, 如果是 not null, 會取出每一行, 判斷不為 null, 累加, 若為 nullable, 則取出每一行, 並且判斷不為 null 才累加, 效率最差</li>
</ul>
<h6 id="MySQL-中-count-跟-count-columnName-差異是？"><a href="#MySQL-中-count-跟-count-columnName-差異是？" class="headerlink" title="MySQL 中, count(*) 跟 count(columnName) 差異是？"></a><strong>MySQL 中, count(*) 跟 count(columnName) 差異是？</strong></h6><p><code>count(*)</code> 會回傳總行數, 而 count(columnName) 會回傳該 column 不為 null 的 count</p>
<h6 id="MySQL-中-如果我要統計一個表上總共有幾列-但該表上的-row-數量很多-有什麼好解法？"><a href="#MySQL-中-如果我要統計一個表上總共有幾列-但該表上的-row-數量很多-有什麼好解法？" class="headerlink" title="MySQL 中, 如果我要統計一個表上總共有幾列, 但該表上的 row 數量很多, 有什麼好解法？"></a><strong>MySQL 中, 如果我要統計一個表上總共有幾列, 但該表上的 row 數量很多, 有什麼好解法？</strong></h6><p>可以獨立建立另外一張表, 每當該表上面有新增, 就在這張表上 + 1, 跑 transaction, 並且如果高併發的話, 可以分成多行, 在取多行的加總, 以減少 dead lock detection 的產生</p>
<h6 id="MySQL-中-show-table-status-取得的-row-準確嗎？"><a href="#MySQL-中-show-table-status-取得的-row-準確嗎？" class="headerlink" title="MySQL 中, show table status 取得的 row 準確嗎？"></a><strong>MySQL 中, show table status 取得的 row 準確嗎？</strong></h6><p>不準, 誤差可能高達 40~50%</p>
<h6 id="MySQL-中-若要使用-count-使用哪個語句會有優化過？-如何優化？"><a href="#MySQL-中-若要使用-count-使用哪個語句會有優化過？-如何優化？" class="headerlink" title="MySQL 中, 若要使用 count(), 使用哪個語句會有優化過？ 如何優化？"></a><strong>MySQL 中, 若要使用 count(), 使用哪個語句會有優化過？ 如何優化？</strong></h6><p>count(*), 會掃描最小的索引樹</p>
<h6 id="MySQL-中-如果機器規格很高-但-redo-log-設得很小-那會發生什麼事？"><a href="#MySQL-中-如果機器規格很高-但-redo-log-設得很小-那會發生什麼事？" class="headerlink" title="MySQL 中, 如果機器規格很高, 但 redo log 設得很小, 那會發生什麼事？"></a><strong>MySQL 中, 如果機器規格很高, 但 redo log 設得很小, 那會發生什麼事？</strong></h6><p>因為 redo log 很快就被寫滿, 會被迫一直進入停止 update, 推進 checkpoint, 要 flush page 的狀態, 造成 disk 壓力明明不大, 但性能卻週期性的下降</p>
<h6 id="MySQL-中-重建表有哪兩種推薦的方式？"><a href="#MySQL-中-重建表有哪兩種推薦的方式？" class="headerlink" title="MySQL 中, 重建表有哪兩種推薦的方式？"></a><strong>MySQL 中, 重建表有哪兩種推薦的方式？</strong></h6><p>alter table t engine = InnoDB<br>gh-ost</p>
<h6 id="以下的-MySQL-example-code-的意思是？-24"><a href="#以下的-MySQL-example-code-的意思是？-24" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">optimize table t</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>recreate table and analyze it</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-25"><a href="#以下的-MySQL-example-code-的意思是？-25" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">alter table t engine = InnoDB</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>會重建一個表, 實際上是 <code>alter table t engine=innodb,ALGORITHM=copy;</code></li>
</ul>
<h6 id="MySQL-中-inplace-跟-online-是否同意思？"><a href="#MySQL-中-inplace-跟-online-是否同意思？" class="headerlink" title="MySQL 中, inplace 跟 online 是否同意思？"></a><strong>MySQL 中, inplace 跟 online 是否同意思？</strong></h6><p>不同, 可以有 online 效果的肯定是 inplace algorithm, 但 inplace algorithm 不見得可以 online, 比如 full-text index, spatial index</p>
<h6 id="MySQL-中-如果我有一個-1TB-的-table-disk-空間為-1-2TB-那我能不能做一個-DDL-呢？"><a href="#MySQL-中-如果我有一個-1TB-的-table-disk-空間為-1-2TB-那我能不能做一個-DDL-呢？" class="headerlink" title="MySQL 中, 如果我有一個 1TB 的 table, disk 空間為 1.2TB, 那我能不能做一個 DDL 呢？"></a><strong>MySQL 中, 如果我有一個 1TB 的 table, disk 空間為 1.2TB, 那我能不能做一個 DDL 呢？</strong></h6><p>不行, 因為 tmp_file 也會佔空間</p>
<h6 id="MySQL-中-inplace-的意思是？"><a href="#MySQL-中-inplace-的意思是？" class="headerlink" title="MySQL 中, inplace 的意思是？"></a><strong>MySQL 中, inplace 的意思是？</strong></h6><p>整個 DDL 過程都是在 innoDB 內部完成的, 速度較快, 就像是原地操作</p>
<h6 id="MySQL-中-若要比較保險的重建表-可以使用哪個工具？"><a href="#MySQL-中-若要比較保險的重建表-可以使用哪個工具？" class="headerlink" title="MySQL 中, 若要比較保險的重建表, 可以使用哪個工具？"></a><strong>MySQL 中, 若要比較保險的重建表, 可以使用哪個工具？</strong></h6><p>gh-ost</p>
<h6 id="以下的-MySQL-image-中-在-alter-語句啟動後-MDL-Write-lock-會立即降級為-MDL-Read-lock-那為什麼不乾脆解鎖呢？"><a href="#以下的-MySQL-image-中-在-alter-語句啟動後-MDL-Write-lock-會立即降級為-MDL-Read-lock-那為什麼不乾脆解鎖呢？" class="headerlink" title="以下的 MySQL image 中, 在 alter 語句啟動後, MDL Write lock 會立即降級為 MDL Read lock, 那為什麼不乾脆解鎖呢？"></a><strong>以下的 MySQL image 中, 在 alter 語句啟動後, MDL Write lock 會立即降級為 MDL Read lock, 那為什麼不乾脆解鎖呢？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>要避免在 alter 過程中, 有其他 DDL 插入</li>
</ul>
<h6 id="以下的-MySQL-image-中-Online-DDL-是如何實現的？"><a href="#以下的-MySQL-image-中-Online-DDL-是如何實現的？" class="headerlink" title="以下的 MySQL image 中, Online DDL 是如何實現的？"></a><strong>以下的 MySQL image 中, Online DDL 是如何實現的？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>在 alter 語句啟動時需先拿到 MDL Write lock, 拿到後就會立即降級為 MDL Read lock, 所以不影響 DML 的操作</li>
</ul>
<h6 id="以下的-MySQL-image-的意思是？-1"><a href="#以下的-MySQL-image-的意思是？-1" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dPeyC_iANlGzcsNFTdmuGhqDX3mHJeJuoFYC8U2O9J7QiaAk6q0ZUkAdJUrWTaYUByLe43DtsKVGmUvE6DVry85-2BsH-ovuxl9zZyV9QDB0pX10Nxcz0rbyCAF_eRl8qG_5E08LjcVSypdcw8bXvJtA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong></li>
</ul>
<ol>
<li>state 1 代表舊表, 佈滿空洞</li>
<li>state 2 會建立一個 tmp file, 當執行 alter 語句時會需要 MDL Write lock, 拿到後在複製資料之前會降級為 MDL Read lock, 以實現 online DDL, 然後開始將資料從舊表複製到 tmp file, 於此同時進來的 query, 會被記在 row log 當中</li>
<li>state 3 資料複製完畢後, 會將 row log 中的資料一併複製到 tmp file</li>
<li>state 4 將 tmp file 取代舊表</li>
</ol>
<h6 id="MySQL-中-如何才能釋放刪除資料後的空洞？"><a href="#MySQL-中-如何才能釋放刪除資料後的空洞？" class="headerlink" title="MySQL 中, 如何才能釋放刪除資料後的空洞？"></a><strong>MySQL 中, 如何才能釋放刪除資料後的空洞？</strong></h6><p>重建表</p>
<h6 id="以下的-MySQL-image-的意思是？-2"><a href="#以下的-MySQL-image-的意思是？-2" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dfvkeXl_7l9RKn1O3NxVenhOusaVroFfF2ocRcfKQ2O5nmcHqXhd5mkuPp0FUkKScmNcaT8q8H_XeQ0hdDBbLijoq6GmxX9Nrbczij-XeeD91yh3QdboPoAdVzsPp4etfG75IYMXpk5zVnvmvVM_ibyg=w1142-h1522-no?authuser=0"></li>
<li><strong>Answer</strong><br>當數據頁原本是滿的, 從中插入, 會申請一個新的數據頁, 並分裂成兩個數據頁, 產生空洞</li>
</ul>
<h6 id="MySQL-中-如果使用-delete-把所有的資料都刪了-資料檔案的大小會縮小嗎？"><a href="#MySQL-中-如果使用-delete-把所有的資料都刪了-資料檔案的大小會縮小嗎？" class="headerlink" title="MySQL 中, 如果使用 delete 把所有的資料都刪了, 資料檔案的大小會縮小嗎？"></a><strong>MySQL 中, 如果使用 delete 把所有的資料都刪了, 資料檔案的大小會縮小嗎？</strong></h6><p>不會, 只會變得可復用而已</p>
<h6 id="以下的-MySQL-example-code-的意思是？-26"><a href="#以下的-MySQL-example-code-的意思是？-26" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SET @wsum := 0;</span><br><span class="line">SELECT</span><br><span class="line">	t1.*</span><br><span class="line">FROM (</span><br><span class="line">	SELECT</span><br><span class="line">		m.*,</span><br><span class="line">		(@wsum := @wsum + m.weight) AS cumulative_weight</span><br><span class="line">	FROM</span><br><span class="line">		test1 m</span><br><span class="line">	ORDER BY</span><br><span class="line">		m.turn ASC) t1</span><br><span class="line">WHERE</span><br><span class="line">	t1.cumulative_weight &lt;= 1000</span><br><span class="line">ORDER BY</span><br><span class="line">	turn DESC</span><br><span class="line">LIMIT 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>設一個變數, 讓變數在 table 中累加某個值, 進而可取得 <code>累加到某個點</code> 的所有 row</li>
</ul>
<h6 id="以下的-MySQL-image-中-如果刪掉-R4-然後插入一個-id-800-的-row-可以復用原本這一行的空間嗎？"><a href="#以下的-MySQL-image-中-如果刪掉-R4-然後插入一個-id-800-的-row-可以復用原本這一行的空間嗎？" class="headerlink" title="以下的 MySQL image 中, 如果刪掉 R4, 然後插入一個 id = 800 的 row, 可以復用原本這一行的空間嗎？"></a><strong>以下的 MySQL image 中, 如果刪掉 R4, 然後插入一個 id = 800 的 row, 可以復用原本這一行的空間嗎？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>不行</li>
</ul>
<h6 id="以下的-MySQL-image-中-如果刪掉-R4-然後插入一個-id-400-的-row-可以復用原本這一行的空間嗎？"><a href="#以下的-MySQL-image-中-如果刪掉-R4-然後插入一個-id-400-的-row-可以復用原本這一行的空間嗎？" class="headerlink" title="以下的 MySQL image 中, 如果刪掉 R4, 然後插入一個 id = 400 的 row, 可以復用原本這一行的空間嗎？"></a><strong>以下的 MySQL image 中, 如果刪掉 R4, 然後插入一個 id = 400 的 row, 可以復用原本這一行的空間嗎？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>可以</li>
</ul>
<h6 id="以下的-MySQL-image-中-如果刪掉-R4-那硬碟文件會縮小嗎"><a href="#以下的-MySQL-image-中-如果刪掉-R4-那硬碟文件會縮小嗎" class="headerlink" title="以下的 MySQL image 中, 如果刪掉 R4, 那硬碟文件會縮小嗎?"></a><strong>以下的 MySQL image 中, 如果刪掉 R4, 那硬碟文件會縮小嗎?</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cPvyfx20QvGH-lZIY7PJxL4QWBWvUxEvOr1J5lciBc7zSexeKgyv8lTQggdE6XyNEzaMo7ebIzvFDohWwWhc-BiX5FrZreV2sDmQstORHAPD5SH466PfBZAfbP8J8IqCe1uix-OxOwtqem9SHLzjiK0A=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>不會, 只會標記為可復用</li>
</ul>
<h6 id="MySQL-中-innodb-file-per-table-參數建議設置為？"><a href="#MySQL-中-innodb-file-per-table-參數建議設置為？" class="headerlink" title="MySQL 中, innodb_file_per_table 參數建議設置為？"></a><strong>MySQL 中, innodb_file_per_table 參數建議設置為？</strong></h6><p>on, 這樣當 drop table 就可以刪掉空間, 反之因為是儲存在共享空間, 刪掉空間也不會回收</p>
<h6 id="以下的-MySQL-example-code-的意思是？-27"><a href="#以下的-MySQL-example-code-的意思是？-27" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">innodb_file_per_table</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>決定表數據要儲存在共享空間, 還是單獨 .idb 結尾的檔案</li>
</ul>
<h6 id="MySQL-中-當-checkpoint-推進時-如何判斷要-flush-的-page-是乾淨的還是髒的？"><a href="#MySQL-中-當-checkpoint-推進時-如何判斷要-flush-的-page-是乾淨的還是髒的？" class="headerlink" title="MySQL 中, 當 checkpoint 推進時, 如何判斷要 flush 的 page 是乾淨的還是髒的？"></a><strong>MySQL 中, 當 checkpoint 推進時, 如何判斷要 flush 的 page 是乾淨的還是髒的？</strong></h6><p>當 flush 時, 會取得最舊的 LSN, 對比內存中的 page, 要是該 LSN 不存在於內存, 代表刷過了, 即可跳過</p>
<h6 id="MySQL-中-當-checkpoint-推進時-如何選擇要-flush-的-page"><a href="#MySQL-中-當-checkpoint-推進時-如何選擇要-flush-的-page" class="headerlink" title="MySQL 中, 當 checkpoint 推進時, 如何選擇要 flush 的 page?"></a><strong>MySQL 中, 當 checkpoint 推進時, 如何選擇要 flush 的 page?</strong></h6><p>每個 buffer pool instance 都會有一個 flush list, 每次寫 redo log 都會有一個 LSN, 會 flush LSN 最小的 page, 代表最老的 page</p>
<h6 id="MySQL-中-不建議讓髒頁比例到達幾"><a href="#MySQL-中-不建議讓髒頁比例到達幾" class="headerlink" title="MySQL 中, 不建議讓髒頁比例到達幾%?"></a><strong>MySQL 中, 不建議讓髒頁比例到達幾%?</strong></h6><p>75 %</p>
<h6 id="MySQL-中-什麼時候會推進-redo-log-的-checkpoint"><a href="#MySQL-中-什麼時候會推進-redo-log-的-checkpoint" class="headerlink" title="MySQL 中, 什麼時候會推進 redo log 的 checkpoint?"></a><strong>MySQL 中, 什麼時候會推進 redo log 的 checkpoint?</strong></h6><p>當 redo log 快寫滿時</p>
<h6 id="MySQL-中-當因為內存不足必須要-flush-dirty-page-時-會推進-redo-log-的-checkpoint-嗎？"><a href="#MySQL-中-當因為內存不足必須要-flush-dirty-page-時-會推進-redo-log-的-checkpoint-嗎？" class="headerlink" title="MySQL 中, 當因為內存不足必須要 flush dirty page 時, 會推進 redo log 的 checkpoint 嗎？"></a><strong>MySQL 中, 當因為內存不足必須要 flush dirty page 時, 會推進 redo log 的 checkpoint 嗎？</strong></h6><p>不會</p>
<h6 id="MySQL-中-flush-purge-merge-分別代表的意思是？"><a href="#MySQL-中-flush-purge-merge-分別代表的意思是？" class="headerlink" title="MySQL 中, flush, purge, merge, 分別代表的意思是？"></a><strong>MySQL 中, flush, purge, merge, 分別代表的意思是？</strong></h6><ul>
<li>flush: 刷髒頁</li>
<li>purge: 清 undo log</li>
<li>merge: sync change buffer</li>
</ul>
<h6 id="MySQL-中-什麼是-LSN"><a href="#MySQL-中-什麼是-LSN" class="headerlink" title="MySQL 中, 什麼是 LSN?"></a><strong>MySQL 中, 什麼是 LSN?</strong></h6><p>log sequence number</p>
<h6 id="MySQL-中-redo-log-寫滿-必須得-flush-dirty-page-這種情況是正常的嗎？"><a href="#MySQL-中-redo-log-寫滿-必須得-flush-dirty-page-這種情況是正常的嗎？" class="headerlink" title="MySQL 中, redo log 寫滿, 必須得 flush dirty page, 這種情況是正常的嗎？"></a><strong>MySQL 中, redo log 寫滿, 必須得 flush dirty page, 這種情況是正常的嗎？</strong></h6><p>不正常, 應該盡量避免, 因為出現這種情況時, 整個系統都無法再接受更新</p>
<h6 id="MySQL-redo-log-中-當內存不夠用時-需要淘汰資料庫的-page-那如果-page-is-dirty-是什麼原因一定要-flush-redo-log-而不能直接釋放-page-當下次讀該-page-的時候-再從-redo-log-去拿正確資料？"><a href="#MySQL-redo-log-中-當內存不夠用時-需要淘汰資料庫的-page-那如果-page-is-dirty-是什麼原因一定要-flush-redo-log-而不能直接釋放-page-當下次讀該-page-的時候-再從-redo-log-去拿正確資料？" class="headerlink" title="MySQL redo log 中, 當內存不夠用時, 需要淘汰資料庫的 page, 那如果 page is dirty, 是什麼原因一定要 flush redo log, 而不能直接釋放 page, 當下次讀該 page 的時候, 再從 redo log 去拿正確資料？"></a><strong>MySQL redo log 中, 當內存不夠用時, 需要淘汰資料庫的 page, 那如果 page is dirty, 是什麼原因一定要 flush redo log, 而不能直接釋放 page, 當下次讀該 page 的時候, 再從 redo log 去拿正確資料？</strong></h6><p>效能考量, 每次釋放 page 時都 flush 可以確保 page 有兩種狀態</p>
<ul>
<li>如果內存中存在該 page, 那該 page 的資料一定是最新的</li>
<li>如果內存中不存在該 page, 該 disk 上的資料一定是最新的</li>
</ul>
<h6 id="MySQL-中的-innodb-flush-neighbors-建議怎麼設？"><a href="#MySQL-中的-innodb-flush-neighbors-建議怎麼設？" class="headerlink" title="MySQL 中的 innodb_flush_neighbors 建議怎麼設？"></a><strong>MySQL 中的 <code>innodb_flush_neighbors</code> 建議怎麼設？</strong></h6><p>如果是傳統 disk, 設為 1, 若是 SSD, 設為 0</p>
<h6 id="MySQL-中的-innodb-flush-neighbors-的意思？"><a href="#MySQL-中的-innodb-flush-neighbors-的意思？" class="headerlink" title="MySQL 中的 innodb_flush_neighbors 的意思？"></a><strong>MySQL 中的 <code>innodb_flush_neighbors</code> 的意思？</strong></h6><p>當 flush dirty page 時, 若相鄰的 page 也是 dirty page, 就一起 flush, 會一直連坐下去, 直到相鄰的 page 非 dirty</p>
<h6 id="MySQL-中的-innodb-io-capacity-建議設為？"><a href="#MySQL-中的-innodb-io-capacity-建議設為？" class="headerlink" title="MySQL 中的 innodb_io_capacity 建議設為？"></a><strong>MySQL 中的 <code>innodb_io_capacity</code> 建議設為？</strong></h6><p>機器的 IOPS</p>
<h6 id="以下的-fil-command-的意思是？"><a href="#以下的-fil-command-的意思是？" class="headerlink" title="以下的 fil command 的意思是？"></a><strong>以下的 fil command 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">fio -filename=$filename -direct=1 -iodepth 1 -thread -rw=randrw -ioengine=psync -bs=16k -size=500M -numjobs=10 -runtime=10 -group_reporting -name=mytest </span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>取得機器 IOPS 數值</li>
</ul>
<h6 id="什麼是-IOPS"><a href="#什麼是-IOPS" class="headerlink" title="什麼是 IOPS?"></a><strong>什麼是 IOPS?</strong></h6><p>Input/Output Operations Per Second</p>
<h6 id="MySQL-中-當要讀入一個-page-但-buffer-pool-已經滿了-會怎麼做？"><a href="#MySQL-中-當要讀入一個-page-但-buffer-pool-已經滿了-會怎麼做？" class="headerlink" title="MySQL 中, 當要讀入一個 page, 但 buffer pool 已經滿了, 會怎麼做？"></a><strong>MySQL 中, 當要讀入一個 page, 但 buffer pool 已經滿了, 會怎麼做？</strong></h6><p>會將最久沒有使用的 page 淘汰, 若是乾淨的則直接釋放, 若是髒的則 flush 後釋放</p>
<h6 id="MySQL-中-buffer-pool-中的內存頁-通常有哪三種狀態？"><a href="#MySQL-中-buffer-pool-中的內存頁-通常有哪三種狀態？" class="headerlink" title="MySQL 中, buffer pool 中的內存頁, 通常有哪三種狀態？"></a><strong>MySQL 中, buffer pool 中的內存頁, 通常有哪三種狀態？</strong></h6><ul>
<li>還未使用</li>
<li>已使用, 是乾淨的</li>
<li>已使用, 是髒的</li>
</ul>
<h6 id="MySQL-中-通常有哪四種情況會需要-flush-dirty-pape"><a href="#MySQL-中-通常有哪四種情況會需要-flush-dirty-pape" class="headerlink" title="MySQL 中, 通常有哪四種情況會需要 flush dirty pape?"></a><strong>MySQL 中, 通常有哪四種情況會需要 flush dirty pape?</strong></h6><ul>
<li>redo log 寫滿了</li>
<li>內存用光了</li>
<li>空閒時</li>
<li>關機時</li>
</ul>
<h6 id="MySQL-中-通常什麼情況會造成-MySQL-頓一下-query-速度忽然變得極慢？"><a href="#MySQL-中-通常什麼情況會造成-MySQL-頓一下-query-速度忽然變得極慢？" class="headerlink" title="MySQL 中, 通常什麼情況會造成 MySQL 頓一下, query 速度忽然變得極慢？"></a><strong>MySQL 中, 通常什麼情況會造成 MySQL 頓一下, query 速度忽然變得極慢？</strong></h6><p>flush dirty page</p>
<h6 id="以下的-MySQL-image-中-為什麼會選錯索引？"><a href="#以下的-MySQL-image-中-為什麼會選錯索引？" class="headerlink" title="以下的 MySQL image 中, 為什麼會選錯索引？"></a><strong>以下的 MySQL image 中, 為什麼會選錯索引？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dH_pD7q6HmrG2sg8GNL_SpWCCOkjZ-hImqZS16M3F8mGGH7Kgv4hOS1wlMJ341cIn12pdH5tKzNTtfPos7Z2IMWTzCD_YG6zOkM27ZzWdQzoO5LqztgWQ-SysY5zMtsH9QAq6fitwC1Tv2nYgO2VJ98A=w1100-h404-no?authuser=0"></li>
<li><strong>Answer</strong><br>因為 session A 還沒有提交前, session B 是無法刪除資料的, 就算刪除了, undo log 也會留著, 索引會有兩份, 一份是 session B delete 語法提交前, 一份是提交後</li>
</ul>
<h6 id="MySQL-中-若使用倒序或-crc-hash-來儲存-有何共通點？"><a href="#MySQL-中-若使用倒序或-crc-hash-來儲存-有何共通點？" class="headerlink" title="MySQL 中, 若使用倒序或 crc hash 來儲存, 有何共通點？"></a><strong>MySQL 中, 若使用倒序或 crc hash 來儲存, 有何共通點？</strong></h6><p>都不支援 range scan</p>
<h6 id="MySQL-中-若使用倒序或-crc-hash-來儲存-在查詢效率差異為何？"><a href="#MySQL-中-若使用倒序或-crc-hash-來儲存-在查詢效率差異為何？" class="headerlink" title="MySQL 中, 若使用倒序或 crc hash 來儲存, 在查詢效率差異為何？"></a><strong>MySQL 中, 若使用倒序或 crc hash 來儲存, 在查詢效率差異為何？</strong></h6><p>hash 雖說還是可能會重複, 但機率並不高, 反觀 prefix index 重複機率較高, 因此效率上 hash 勝出</p>
<h6 id="MySQL-中-若使用倒序或-crc-hash-來儲存-在-CPU-cost-上差異為何？"><a href="#MySQL-中-若使用倒序或-crc-hash-來儲存-在-CPU-cost-上差異為何？" class="headerlink" title="MySQL 中, 若使用倒序或 crc hash 來儲存, 在 CPU cost 上差異為何？"></a><strong>MySQL 中, 若使用倒序或 crc hash 來儲存, 在 CPU cost 上差異為何？</strong></h6><p>reverse cost 會小一些</p>
<h6 id="MySQL-中-若使用倒序或-crc-hash-來儲存-在儲存空間上差異為何？"><a href="#MySQL-中-若使用倒序或-crc-hash-來儲存-在儲存空間上差異為何？" class="headerlink" title="MySQL 中, 若使用倒序或 crc hash 來儲存, 在儲存空間上差異為何？"></a><strong>MySQL 中, 若使用倒序或 crc hash 來儲存, 在儲存空間上差異為何？</strong></h6><p>倒序不需額外儲存空間, 但考量到前綴的字數需要一定數量來區分, 所以差異並不大</p>
<h6 id="以下的-MySQL-example-code-的意思是？-28"><a href="#以下的-MySQL-example-code-的意思是？-28" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">alter table t add id_card_crc int unsigned, add index(id_card_crc);</span><br><span class="line"></span><br><span class="line">select field_list from t where id_card_crc=crc32(&#x27;input_id_card_string&#x27;) and id_card=&#x27;input_id_card_string&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>額外建立一個 column, 在 insert 時使用 crc32 hash id_card, 並存到這個 column, 這樣在 select 時就可以利用這個 column 上的 index 來 query id_card, 但因為 crc32() 可能會有重複的 hashed string, 因此要再比對 id_card 是否一致</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-29"><a href="#以下的-MySQL-example-code-的意思是？-29" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select field_list from t where id_card = reverse(&#x27;input_id_card_string&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>身分證很有可能前面好幾個字母都是相同的, 可以採用倒序儲存, 並配合 prefix index</li>
</ul>
<h6 id="MySQL-中-prefix-index-是否支援-covered-index"><a href="#MySQL-中-prefix-index-是否支援-covered-index" class="headerlink" title="MySQL 中, prefix index 是否支援 covered index?"></a><strong>MySQL 中, prefix index 是否支援 covered index?</strong></h6><p>不支援</p>
<h6 id="以下的-MySQL-example-code-的用意是？"><a href="#以下的-MySQL-example-code-的用意是？" class="headerlink" title="以下的 MySQL example code 的用意是？"></a><strong>以下的 MySQL example code 的用意是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql&gt; select count(distinct email) as L from SUser;</span><br><span class="line"></span><br><span class="line">mysql&gt; select </span><br><span class="line">  count(distinct left(email,4)）as L4,</span><br><span class="line">  count(distinct left(email,5)）as L5,</span><br><span class="line">  count(distinct left(email,6)）as L6,</span><br><span class="line">  count(distinct left(email,7)）as L7,</span><br><span class="line">from SUser;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>判斷不同字數的 prefix index 與實際上的不同值數量差距多少, 以決定最佳的 prefix index 長度</li>
</ul>
<h6 id="MySQL-中-有哪幾種方法可以修正-MySQL-選錯索引？"><a href="#MySQL-中-有哪幾種方法可以修正-MySQL-選錯索引？" class="headerlink" title="MySQL 中, 有哪幾種方法可以修正 MySQL 選錯索引？"></a><strong>MySQL 中, 有哪幾種方法可以修正 MySQL 選錯索引？</strong></h6><ul>
<li>使用 force index 語法</li>
<li>修改語句</li>
<li>使用 analyze 重新計算索引</li>
<li>刪除不必要索引</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-30"><a href="#以下的-MySQL-example-code-的意思是？-30" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">analyze table t</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>重新統計索引</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-31"><a href="#以下的-MySQL-example-code-的意思是？-31" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">innodb_stats_persistent</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>決定是否將索引統計存在 disk 或 memory<br>on 的話, N = 20, M = 10<br>off 的話, N = 8, M = 16<br>當變更行數超過 1/M 時, 會觸發重新索引統計</li>
</ul>
<h6 id="MySQL-中-基數-Cardinality-如何求得？"><a href="#MySQL-中-基數-Cardinality-如何求得？" class="headerlink" title="MySQL 中, 基數 (Cardinality) 如何求得？"></a><strong>MySQL 中, 基數 (Cardinality) 如何求得？</strong></h6><p>取 n 個 page, 分別計算每個 page 中的不同值數量, 再將所有 page 的不值相加, 再除以 n, 最後乘以總 page 數量</p>
<h6 id="MySQL-中-何謂基數-Cardinality-？"><a href="#MySQL-中-何謂基數-Cardinality-？" class="headerlink" title="MySQL 中, 何謂基數 (Cardinality)？"></a><strong>MySQL 中, 何謂基數 (Cardinality)？</strong></h6><p>索引中值不同的數量, 數量越高, 基數越大, 索引的效果也越好, 若是數量很低, 代表索引中幾乎每個值都一樣, 那基數就低, 效果就不好  </p>
<h6 id="MySQL-中-insert-時-可以使用-change-buffer-嗎？"><a href="#MySQL-中-insert-時-可以使用-change-buffer-嗎？" class="headerlink" title="MySQL 中, insert 時, 可以使用 change buffer 嗎？"></a><strong>MySQL 中, insert 時, 可以使用 change buffer 嗎？</strong></h6><p>primary key 不行, 但 secondary index 可以</p>
<h6 id="MySQL-中-idb-檔案是？"><a href="#MySQL-中-idb-檔案是？" class="headerlink" title="MySQL 中, .idb 檔案是？"></a><strong>MySQL 中, <code>.idb</code> 檔案是？</strong></h6><p>對應表數據空間的對應檔案</p>
<h6 id="MySQL-中-ibdata1-檔案是？"><a href="#MySQL-中-ibdata1-檔案是？" class="headerlink" title="MySQL 中, ibdata1 檔案是？"></a><strong>MySQL 中, <code>ibdata1</code> 檔案是？</strong></h6><p>系統表空間的對應檔案</p>
<h6 id="MySQL-中-redo-log-與-change-buffer-主要節省的效益分別是？"><a href="#MySQL-中-redo-log-與-change-buffer-主要節省的效益分別是？" class="headerlink" title="MySQL 中, redo log 與 change buffer 主要節省的效益分別是？"></a><strong>MySQL 中, redo log 與 change buffer 主要節省的效益分別是？</strong></h6><p>redo log: 將隨機寫 disk I/O, 節省為順序 I/O<br>change buffer: 隨機讀 disk I/O 消耗</p>
<h6 id="以下的-MySQL-image-的意思是？-3"><a href="#以下的-MySQL-image-的意思是？-3" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f5MDcuzuOcB34ZCH6k-MThV56ck3z8OhZNEsQWOPXzewbx_Pul5TccXmIt5UVET1PrxNpY8ewoiO1-EpGk8wPgDIth-ZorWwMxn9KO2D8ipzsIV8ROrVrY3OWloXCGYOGEpp7EtToeDZ15PnYElzNT6g=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>當讀 page 1 時, 直接從內存返回<br>當讀 page 2 時, 從 disk 將 page 2 讀入內存, 並 merge change buffer 的紀錄, 返回</li>
</ul>
<h6 id="以下的-MySQL-image-的意思是？-4"><a href="#以下的-MySQL-image-的意思是？-4" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eD82GqeZe63k4gFbdSaup__AFNwY2TyHVOVWBx5nG4rcwpNTQPUXH5Sh7dYjwIvaduCpiZG_AL-XGbyzCmlPI0X9Ii0n6_u30S2pne2_BMLhysiTyvqmmH7biQn0hsb9TEL_eI_SVQuM2gHZ9izsvjtg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>update 的資料處於內存中, 直接 update 內存<br>update 的資料所在 page2 不處於內存中, 直接在內存中的 change buffer 寫下紀錄<br>兩上面兩個 update 寫入 redo log</li>
</ul>
<h6 id="MySQL-中-如果有一個情境-所有的-update-結束後都會伴隨著-select-那建議關掉哪個設定？-為什麼？"><a href="#MySQL-中-如果有一個情境-所有的-update-結束後都會伴隨著-select-那建議關掉哪個設定？-為什麼？" class="headerlink" title="MySQL 中, 如果有一個情境, 所有的 update 結束後都會伴隨著 select, 那建議關掉哪個設定？ 為什麼？"></a><strong>MySQL 中, 如果有一個情境, 所有的 update 結束後都會伴隨著 select, 那建議關掉哪個設定？ 為什麼？</strong></h6><p>change buffer<br>因為 change buffer 會在每次 select 時都去 merge 原 page, 產生 I/O cost, 若能在 select 與 select 之間寫入動作越多次的話才能真正發揮 change buffer 效果, 若是每次 update 結束就 select 就相當於每次都 merge, 如此一來便失去 change buffer 的意義</p>
<h6 id="MySQL-中-什麼樣的情境對-change-buffer-來說是成效最大的？"><a href="#MySQL-中-什麼樣的情境對-change-buffer-來說是成效最大的？" class="headerlink" title="MySQL 中, 什麼樣的情境對 change buffer 來說是成效最大的？"></a><strong>MySQL 中, 什麼樣的情境對 change buffer 來說是成效最大的？</strong></h6><p>寫多讀少</p>
<h6 id="MySQL-中-為什麼唯一索引在寫入時的-cost-比一般索引大？"><a href="#MySQL-中-為什麼唯一索引在寫入時的-cost-比一般索引大？" class="headerlink" title="MySQL 中, 為什麼唯一索引在寫入時的 cost 比一般索引大？"></a><strong>MySQL 中, 為什麼唯一索引在寫入時的 cost 比一般索引大？</strong></h6><p>一般索引可以使用 change buffer, 唯一索引需要將 page 讀入內存, 這個動作需要訪問隨機 I/O, 因此成本很高</p>
<h6 id="以下的-MySQL-image-中-如果要插入-4-400-如果該-page-不在內存中-一般索引與唯一索引分別的操作是"><a href="#以下的-MySQL-image-中-如果要插入-4-400-如果該-page-不在內存中-一般索引與唯一索引分別的操作是" class="headerlink" title="以下的 MySQL image 中, 如果要插入 (4,400), 如果該 page 不在內存中, 一般索引與唯一索引分別的操作是?"></a><strong>以下的 MySQL image 中, 如果要插入 (4,400), 如果該 page 不在內存中, 一般索引與唯一索引分別的操作是?</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>一般： 將更新紀錄在 change buffer, 結束<br>唯一： 將 page 讀入內存, 找到 3-5, 判斷有無衝突, 插入, 結束</li>
</ul>
<h6 id="以下的-MySQL-image-中-如果要插入-4-400-如果該-page-已經在內存中-一般索引與唯一索引分別的操作是"><a href="#以下的-MySQL-image-中-如果要插入-4-400-如果該-page-已經在內存中-一般索引與唯一索引分別的操作是" class="headerlink" title="以下的 MySQL image 中, 如果要插入 (4,400), 如果該 page 已經在內存中, 一般索引與唯一索引分別的操作是?"></a><strong>以下的 MySQL image 中, 如果要插入 (4,400), 如果該 page 已經在內存中, 一般索引與唯一索引分別的操作是?</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>一般： 找到 3-5 之間的位置, 插入, 結束<br>唯一： 找到 3-5 之間的位置, 判斷有無重複, 插入, 結束</li>
</ul>
<h6 id="MySQL-中-當-innodb-change-buffer-max-size-設為-50-時-意思是？"><a href="#MySQL-中-當-innodb-change-buffer-max-size-設為-50-時-意思是？" class="headerlink" title="MySQL 中, 當 innodb_change_buffer_max_size 設為 50 時, 意思是？"></a><strong>MySQL 中, 當 <code>innodb_change_buffer_max_size</code> 設為 50 時, 意思是？</strong></h6><p>change buffer 的大小最多只能佔用 buffer pool 的 50%</p>
<h6 id="以下的-MySQL-example-code-的意思是？-32"><a href="#以下的-MySQL-example-code-的意思是？-32" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">innodb_change_buffer_max_size</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>設定 change buffer 的 size</li>
</ul>
<h6 id="MySQL-中-唯一索引可以使用-change-buffer-嗎？-為什麼？"><a href="#MySQL-中-唯一索引可以使用-change-buffer-嗎？-為什麼？" class="headerlink" title="MySQL 中, 唯一索引可以使用 change buffer 嗎？ 為什麼？"></a><strong>MySQL 中, 唯一索引可以使用 change buffer 嗎？ 為什麼？</strong></h6><p>不行, 因為寫入前都要確定該筆資料不存在於資料庫已達到 unique, 所以每次都會將該 page 讀入內存</p>
<h6 id="MySQL-中-change-buffer-何時會觸發-merge"><a href="#MySQL-中-change-buffer-何時會觸發-merge" class="headerlink" title="MySQL 中, change buffer 何時會觸發 merge?"></a><strong>MySQL 中, change buffer 何時會觸發 merge?</strong></h6><p>訪問該 page<br>定時 merge<br>database shutdown</p>
<h6 id="MySQL-中-change-buffer-與原-page-sync-的過程稱為？"><a href="#MySQL-中-change-buffer-與原-page-sync-的過程稱為？" class="headerlink" title="MySQL 中, change buffer 與原 page sync 的過程稱為？"></a><strong>MySQL 中, change buffer 與原 page sync 的過程稱為？</strong></h6><p>merge</p>
<h6 id="MySQL-中-當-update-時-如果該-page-不處於內存當中-會如何？"><a href="#MySQL-中-當-update-時-如果該-page-不處於內存當中-會如何？" class="headerlink" title="MySQL 中, 當 update 時, 如果該 page 不處於內存當中, 會如何？"></a><strong>MySQL 中, 當 update 時, 如果該 page 不處於內存當中, 會如何？</strong></h6><p>寫入 change buffer, 並在下次查詢時, 將該筆資料所在的 page 讀入內存, 並執行 change buffer 中與該筆資料有關的相關操作</p>
<h6 id="MySQL-中-當-update-時-如果該-page-已經處於內存當中-會如何？"><a href="#MySQL-中-當-update-時-如果該-page-已經處於內存當中-會如何？" class="headerlink" title="MySQL 中, 當 update 時, 如果該 page 已經處於內存當中, 會如何？"></a><strong>MySQL 中, 當 update 時, 如果該 page 已經處於內存當中, 會如何？</strong></h6><p>直接更新</p>
<h6 id="MySQL-中-change-buffer-會被持久化嗎？"><a href="#MySQL-中-change-buffer-會被持久化嗎？" class="headerlink" title="MySQL 中, change buffer 會被持久化嗎？"></a><strong>MySQL 中, change buffer 會被持久化嗎？</strong></h6><p>會</p>
<h6 id="MySQL-中-如果說我的語法是-select-id-from-T-where-k-5-那一般索引與唯一索引的查詢差異在於？"><a href="#MySQL-中-如果說我的語法是-select-id-from-T-where-k-5-那一般索引與唯一索引的查詢差異在於？" class="headerlink" title="MySQL 中, 如果說我的語法是 select id from T where k=5, 那一般索引與唯一索引的查詢差異在於？"></a><strong>MySQL 中, 如果說我的語法是 <code>select id from T where k=5</code>, 那一般索引與唯一索引的查詢差異在於？</strong></h6><p>一般索引查到第一筆 k=5 的資料後, 會繼續往下查找, 直到查到 k != 5 才會停下<br>唯一索引查到第一筆 k=5 的資料後就會停下</p>
<h6 id="MySQL-中-如果一個-column-已在-APP-層設置-unique-邏輯-一般索引與唯一索引-哪個效能較好？-為什麼？"><a href="#MySQL-中-如果一個-column-已在-APP-層設置-unique-邏輯-一般索引與唯一索引-哪個效能較好？-為什麼？" class="headerlink" title="MySQL 中, 如果一個 column 已在 APP 層設置 unique 邏輯, 一般索引與唯一索引, 哪個效能較好？ 為什麼？"></a><strong>MySQL 中, 如果一個 column 已在 APP 層設置 unique 邏輯, 一般索引與唯一索引, 哪個效能較好？ 為什麼？</strong></h6><p>一般索引<br>當讀資料時, 是將整個 page 讀入內存, 而當已經找到第一筆資料時, 代表該筆資料所處的 page 已經被讀入內存了, 這時多讀一次 (一般索引) 的 cost 幾乎微乎其微<br>當 update 時, 一般索引可以使用 change buffer, 但唯一索引不行, 所以唯一索引會多了 I/O cost, 主要效能差異在這</p>
<h6 id="MySQL-中-如果一個-column-已在-APP-層設置-unique-邏輯-那-index-該選擇一般索引還是唯一索引？"><a href="#MySQL-中-如果一個-column-已在-APP-層設置-unique-邏輯-那-index-該選擇一般索引還是唯一索引？" class="headerlink" title="MySQL 中, 如果一個 column 已在 APP 層設置 unique 邏輯, 那 index 該選擇一般索引還是唯一索引？"></a><strong>MySQL 中, 如果一個 column 已在 APP 層設置 unique 邏輯, 那 index 該選擇一般索引還是唯一索引？</strong></h6><p>一般索引</p>
<h6 id="以下的-MySQL-example-code-的意思是？-33"><a href="#以下的-MySQL-example-code-的意思是？-33" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">update t set num=num-200 where num &gt;= 200;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>為避免 race condition, 加了 where num = 200, 因為 transaction 中, update 會使用當前讀 (current read), 因此會判斷 num = 200, 若不是, 代表庫存不足, 直接報錯</li>
</ul>
<h6 id="以下的-MySQL-image-中-若為-RC-Isolation-transaction-A-B-的-select-結果分別是多少-為什麼？"><a href="#以下的-MySQL-image-中-若為-RC-Isolation-transaction-A-B-的-select-結果分別是多少-為什麼？" class="headerlink" title="以下的 MySQL image 中, 若為 RC Isolation, transaction A, B 的 select 結果分別是多少, 為什麼？"></a><strong>以下的 MySQL image 中, 若為 RC Isolation, transaction A, B 的 select 結果分別是多少, 為什麼？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f7pdHUMOZ0ipSV7x_mabnyHdyOnn0NJiP9DxoROBt2SDKe5ysk_sHgRv-5oJh9g2dUGVLdqKwF4ScXYsFKdfNibpEu1qtK-RbO3DV5-Mp7X-kBO2-2JfjRTvhtoWXhD3OaYENE8Fj0bLsG-MuRGwldMQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>A: 2, 因為 trx B 尚未提交, 但 trx C 已提交, 所以 C 為可見, B 為不可見<br>B: 3, 為當前版本, 且 trx C 已提交, 可見</li>
</ul>
<h6 id="MySQL-中-start-transaction-with-consistent-snapshot-在-RC-Isolation-中-有意義嗎？"><a href="#MySQL-中-start-transaction-with-consistent-snapshot-在-RC-Isolation-中-有意義嗎？" class="headerlink" title="MySQL 中, start transaction with consistent snapshot 在 RC Isolation 中, 有意義嗎？"></a><strong>MySQL 中, start transaction with consistent snapshot 在 RC Isolation 中, 有意義嗎？</strong></h6><p>沒意義, 等同 start transaction, 因為 RC 是每個語句都會產生新的 view</p>
<h6 id="MySQL-中-RR-Isolation-與-RC-Isolation-的主要區別是？"><a href="#MySQL-中-RR-Isolation-與-RC-Isolation-的主要區別是？" class="headerlink" title="MySQL 中, RR Isolation 與 RC Isolation 的主要區別是？"></a><strong>MySQL 中, RR Isolation 與 RC Isolation 的主要區別是？</strong></h6><p>RR: 在 transaction 中使用同一個 view<br>RC: 每個語句都會產生一個新的 view</p>
<h6 id="MySQL-中-在-transaction-中如何使-select-使用當前讀-current-read"><a href="#MySQL-中-在-transaction-中如何使-select-使用當前讀-current-read" class="headerlink" title="MySQL 中, 在 transaction 中如何使 select 使用當前讀 (current read)?"></a><strong>MySQL 中, 在 transaction 中如何使 select 使用當前讀 (current read)?</strong></h6><p>加鎖, share mode 或 exclusive mode 都可</p>
<h6 id="MySQL-中-當我在-transaction-中使用-atomic-update-為什麼不是-based-on-view-中的版本-而是最新版本？"><a href="#MySQL-中-當我在-transaction-中使用-atomic-update-為什麼不是-based-on-view-中的版本-而是最新版本？" class="headerlink" title="MySQL 中, 當我在 transaction 中使用 atomic update, 為什麼不是 based on view 中的版本, 而是最新版本？"></a><strong>MySQL 中, 當我在 transaction 中使用 atomic update, 為什麼不是 based on view 中的版本, 而是最新版本？</strong></h6><p>因為 update 使用的是當前讀 (current read)</p>
<h6 id="MySQL-中-何謂當前讀-current-read-？"><a href="#MySQL-中-何謂當前讀-current-read-？" class="headerlink" title="MySQL 中, 何謂當前讀 (current read)？"></a><strong>MySQL 中, 何謂當前讀 (current read)？</strong></h6><p>不讀 trx view 中的資料, 而是最新版本的資料</p>
<h6 id="MySQL-RR-中-若-trx-A-於-trx-B-創建-view-之前提交-那可見或不可見？"><a href="#MySQL-RR-中-若-trx-A-於-trx-B-創建-view-之前提交-那可見或不可見？" class="headerlink" title="MySQL RR 中, 若 trx A 於 trx B 創建 view 之前提交, 那可見或不可見？"></a><strong>MySQL RR 中, 若 trx A 於 trx B 創建 view 之前提交, 那可見或不可見？</strong></h6><p>可見</p>
<h6 id="MySQL-RR-中-若-trx-A-於-trx-B-創建-view-之後才提交-那可見或不可見？"><a href="#MySQL-RR-中-若-trx-A-於-trx-B-創建-view-之後才提交-那可見或不可見？" class="headerlink" title="MySQL RR 中, 若 trx A 於 trx B 創建 view 之後才提交, 那可見或不可見？"></a><strong>MySQL RR 中, 若 trx A 於 trx B 創建 view 之後才提交, 那可見或不可見？</strong></h6><p>不可見</p>
<h6 id="MySQL-RR-中-若-trx-版本未提交-那可見或不可見？"><a href="#MySQL-RR-中-若-trx-版本未提交-那可見或不可見？" class="headerlink" title="MySQL RR 中, 若 trx 版本未提交, 那可見或不可見？"></a><strong>MySQL RR 中, 若 trx 版本未提交, 那可見或不可見？</strong></h6><p>不可見</p>
<h6 id="以下的-MySQL-example-image-中-transaction-A-的結果是？-為什麼？"><a href="#以下的-MySQL-example-image-中-transaction-A-的結果是？-為什麼？" class="headerlink" title="以下的 MySQL example image 中, transaction A 的結果是？ 為什麼？"></a><strong>以下的 MySQL example image 中, transaction A 的結果是？ 為什麼？</strong></h6><ul>
<li><strong>Description</strong>:</li>
</ul>
<ol>
<li>系統內只有一個活躍 trx_id 99</li>
<li>transaction A, B, C 的版本分別是 100, 101, 102</li>
<li>三個 transaction 開始前, (1,1) 這一行的 rwo trx_id 為 90</li>
</ol>
<ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fet0e9Sg-H0Et-kFdSd4dmQP9f4GUEp14iGpTP4w1J-HSNUv810FSy9KIl4Ulv5Gqi2hF9mkZL45Z79CIFdhnGcWcO_iqNdPDcvu81TBDFpgCpIw9cud3vDWk9P1J9jE_Ghxoyj9kIfYKetvgXipQPdQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>為 1<br>row (1,1) 的版本為 90, 小於 <code>[99,100]</code> 的低水位, 表示已提交, 可見<br>row (1,2) 的版本為 102, 大於 <code>[99,100]</code> 的高水位, 表示 transaction A 創建之後才建立的 trx, 不可見<br>row (1,3) 的版本為 101, 大於等於 <code>[99,100]</code> 的高水位, 表示 transaction A 創建之後才建立的 trx, 不可見</li>
</ul>
<h6 id="以下的-MySQL-example-picture-中-未開始的事務如何定義？"><a href="#以下的-MySQL-example-picture-中-未開始的事務如何定義？" class="headerlink" title="以下的 MySQL example picture 中, 未開始的事務如何定義？"></a><strong>以下的 MySQL example picture 中, 未開始的事務如何定義？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>當前系統已產生的最大 trx_id + 1 以上的 trx_id 都視為未開始</li>
</ul>
<h6 id="以下的-MySQL-example-picture-中-已提交的事務如何定義？"><a href="#以下的-MySQL-example-picture-中-已提交的事務如何定義？" class="headerlink" title="以下的 MySQL example picture 中, 已提交的事務如何定義？"></a><strong>以下的 MySQL example picture 中, 已提交的事務如何定義？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>由當前事務更新, 或許 trx_id <code>不存在於未提交事務集合, 並且低於高水位</code>, 代表已提交</li>
</ul>
<h6 id="以下的-MySQL-example-picture-中-未提交事務集合的內容是？"><a href="#以下的-MySQL-example-picture-中-未提交事務集合的內容是？" class="headerlink" title="以下的 MySQL example picture 中, 未提交事務集合的內容是？"></a><strong>以下的 MySQL example picture 中, 未提交事務集合的內容是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>所有當前活躍的 trx_id array</li>
</ul>
<h6 id="以下的-MySQL-example-picture-中-高水位的意思是？"><a href="#以下的-MySQL-example-picture-中-高水位的意思是？" class="headerlink" title="以下的 MySQL example picture 中, 高水位的意思是？"></a><strong>以下的 MySQL example picture 中, 高水位的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>系統已產生的 trx_id 中, 最大的那一個 + 1</li>
</ul>
<h6 id="以下的-MySQL-example-picture-中-低水位的意思是？"><a href="#以下的-MySQL-example-picture-中-低水位的意思是？" class="headerlink" title="以下的 MySQL example picture 中, 低水位的意思是？"></a><strong>以下的 MySQL example picture 中, 低水位的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9ZfpPPyp_pz-smL-05CEKqgYao0MYqDTkLRHUeGVWb64SEm05caPociy6tlAU1IrpwMY9IFeWbQqpSFpljOVeQujA6nt7cqYdmQ2CPRnqof-BrdCVCwIQtCWIFrKtoZGiJoxbPAyr6791qqpC9TY0xA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>未提交的 trx_id array 中, trx_id 較小的那一個</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-35"><a href="#以下的-MySQL-example-image-的意思是？-35" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cMGmLJ5HwqwFJgOomC-FJhJax22fIhUeUpBCI1qNRIzFKZgFYpQ15vcUEOURMN5Iv50b_HuyD-fPwHDHNC6GN0Nn6tPkdOHxSzvqdErQJdLBadSEhdklj3c5XTi5yDdEWb3NEEAuzpeKkgrhqZOaZ5OQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>MySQL MVCC 的多版本<br>新的 transaction 需要跟 MySQL 的 transaction 系統申請一個自增 id<br>每個 row 依據被不同的 transaction update 過, 會有不同的版本, 並持有以下的值<br>被 update 後的值<br>update 的 transaction id<br>版本之間的綠色箭頭稱為 undo log, 代表邏輯的回朔上個版本, 非物理性</li>
</ul>
<h6 id="以下的-MySQL-example-schema-and-image-中-k-在-transaction-A-以及-B-分別值是多少？"><a href="#以下的-MySQL-example-schema-and-image-中-k-在-transaction-A-以及-B-分別值是多少？" class="headerlink" title="以下的 MySQL example schema and image 中, k 在 transaction A 以及 B 分別值是多少？"></a><strong>以下的 MySQL example schema and image 中, k 在 transaction A 以及 B 分別值是多少？</strong></h6><ul>
<li><strong>Schema</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `t` (</span><br><span class="line">  `id` int(11) NOT NULL,</span><br><span class="line">  `k` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line">insert into t(id, k) values(1,1),(2,2);</span><br></pre></td></tr></table></figure></li>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dzFwpZNY5_MSkghxMHvmVoHEPYkNNJhTg7e9eV2iMNd5n5FhrI3BdgTv6GWJeIUCpjP68xEgoet2xoljwjTeWBwiYWJAC0gjjrZOAV2FAJuAyEBFvio0lse-H1T_OpJuYuZB94MzcTObMo0Nl7TsXNfw=w1092-h612-no?authuser=0"></li>
<li><strong>Answer</strong><br>transaction B 中, k = 3<br>transaction A 中, k = 1<br>因為 MySQL 的 RR 只對 read 有效, 對 update 無效</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-34"><a href="#以下的-MySQL-example-code-的意思是？-34" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">start transaction with consistent snapshot</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>當執行 transaction begin 時, 並不會立即開始 transaction, 第一句操作 DB 的語法才是 transaction 的開始處, 若要指定開始處, 可使用 example code 語法</li>
</ul>
<h6 id="MySQL-中-RR-跟-RC-Isolation-的行鎖差異是？"><a href="#MySQL-中-RR-跟-RC-Isolation-的行鎖差異是？" class="headerlink" title="MySQL 中, RR 跟 RC Isolation 的行鎖差異是？"></a><strong>MySQL 中, RR 跟 RC Isolation 的行鎖差異是？</strong></h6><p>RC 是逐行掃描逐行鎖, 若條件不對會立即釋放<br>RR 是逐行掃描逐行鎖, 會等到最終提交 transaction 時才全部釋放</p>
<h6 id="以下的-MySQL-example-code-中-如果-name-沒加索引-會鎖住哪些-row"><a href="#以下的-MySQL-example-code-中-如果-name-沒加索引-會鎖住哪些-row" class="headerlink" title="以下的 MySQL example code 中, 如果 name 沒加索引, 會鎖住哪些 row?"></a><strong>以下的 MySQL example code 中, 如果 name 沒加索引, 會鎖住哪些 row?</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">update t set t.name=&#x27;abc&#x27; where t.name=&#x27;cde&#x27; limit 1</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>會先查詢再更新, <code>select * from t where name = &quot;abc&quot; limit 1 for update</code><br>會從開始掃描那一行開始鎖, 直到找到 name=’cde’, 掃過的行都會鎖住</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-如果-name-沒加索引-會鎖住哪些-row-1"><a href="#以下的-MySQL-example-code-中-如果-name-沒加索引-會鎖住哪些-row-1" class="headerlink" title="以下的 MySQL example code 中, 如果 name 沒加索引, 會鎖住哪些 row?"></a><strong>以下的 MySQL example code 中, 如果 name 沒加索引, 會鎖住哪些 row?</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">update t set t.name=&#x27;abc&#x27; where t.name=&#x27;cde&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>會鎖住全表</li>
</ul>
<h6 id="MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-4-傳來的-會發生什麼事？"><a href="#MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-4-傳來的-會發生什麼事？" class="headerlink" title="MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 4 傳來的, 會發生什麼事？"></a><strong>MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 4 傳來的, 會發生什麼事？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line">Q2:START TRANSACTION  WITH CONSISTENT SNAPSHOT；</span><br><span class="line">/* other tables */</span><br><span class="line">Q3:SAVEPOINT sp;</span><br><span class="line">/* 时刻 1 */</span><br><span class="line">Q4:show create table `t1`;</span><br><span class="line">/* 时刻 2 */</span><br><span class="line">Q5:SELECT * FROM `t1`;</span><br><span class="line">/* 时刻 3 */</span><br><span class="line">Q6:ROLLBACK TO SAVEPOINT sp;</span><br><span class="line">/* 时刻 4 */</span><br><span class="line">/* other tables */</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>此時 read MDL 已經釋放, 沒有影響, 備份為修改前的表結構</li>
</ul>
<h6 id="MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-2-到時刻-3-之間傳來的-會發生什麼事？"><a href="#MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-2-到時刻-3-之間傳來的-會發生什麼事？" class="headerlink" title="MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 2 到時刻 3 之間傳來的, 會發生什麼事？"></a><strong>MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 2 到時刻 3 之間傳來的, 會發生什麼事？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line">Q2:START TRANSACTION  WITH CONSISTENT SNAPSHOT；</span><br><span class="line">/* other tables */</span><br><span class="line">Q3:SAVEPOINT sp;</span><br><span class="line">/* 时刻 1 */</span><br><span class="line">Q4:show create table `t1`;</span><br><span class="line">/* 时刻 2 */</span><br><span class="line">Q5:SELECT * FROM `t1`;</span><br><span class="line">/* 时刻 3 */</span><br><span class="line">Q6:ROLLBACK TO SAVEPOINT sp;</span><br><span class="line">/* 时刻 4 */</span><br><span class="line">/* other tables */</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>此時因為 Q5 query 已經拿到 read MDL, 所以 DDL 會被 block, 直到 Q6 釋放 read MDL 之後才會執行, 會造成主從延遲<br>備份的會是修改前的表結構</li>
</ul>
<h6 id="MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-2-傳來的-會發生什麼事？"><a href="#MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-2-傳來的-會發生什麼事？" class="headerlink" title="MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 2 傳來的, 會發生什麼事？"></a><strong>MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 2 傳來的, 會發生什麼事？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line">Q2:START TRANSACTION  WITH CONSISTENT SNAPSHOT；</span><br><span class="line">/* other tables */</span><br><span class="line">Q3:SAVEPOINT sp;</span><br><span class="line">/* 时刻 1 */</span><br><span class="line">Q4:show create table `t1`;</span><br><span class="line">/* 时刻 2 */</span><br><span class="line">Q5:SELECT * FROM `t1`;</span><br><span class="line">/* 时刻 3 */</span><br><span class="line">Q6:ROLLBACK TO SAVEPOINT sp;</span><br><span class="line">/* 时刻 4 */</span><br><span class="line">/* other tables */</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>會在 Q5 取得資料時, 報錯 Table definition has changed, please retry transaction, 終止 mysqldump</li>
</ul>
<h6 id="MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-1-傳來的-會發生什麼事？"><a href="#MySQL-中-當我使用-mysqldump-–single-transaction-時-如果這時從-master-傳來一個-DDL-的-binlog-如下-example-假如是時刻-1-傳來的-會發生什麼事？" class="headerlink" title="MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 1 傳來的, 會發生什麼事？"></a><strong>MySQL 中, 當我使用 mysqldump –single-transaction 時, 如果這時從 master 傳來一個 DDL 的 binlog, 如下 example, 假如是時刻 1 傳來的, 會發生什麼事？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;</span><br><span class="line">Q2:START TRANSACTION  WITH CONSISTENT SNAPSHOT；</span><br><span class="line">/* other tables */</span><br><span class="line">Q3:SAVEPOINT sp;</span><br><span class="line">/* 时刻 1 */</span><br><span class="line">Q4:show create table `t1`;</span><br><span class="line">/* 时刻 2 */</span><br><span class="line">Q5:SELECT * FROM `t1`;</span><br><span class="line">/* 时刻 3 */</span><br><span class="line">Q6:ROLLBACK TO SAVEPOINT sp;</span><br><span class="line">/* 时刻 4 */</span><br><span class="line">/* other tables */</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>mysqldump 尚未取得表結構, 所以沒有影響, 備份後會是 DDL 修改後的表結構</li>
</ul>
<h6 id="MySQL-中-將電影院的餘額分成-10-行-10-行的加總等於電影院的餘額-為什麼要這樣設計？"><a href="#MySQL-中-將電影院的餘額分成-10-行-10-行的加總等於電影院的餘額-為什麼要這樣設計？" class="headerlink" title="MySQL 中, 將電影院的餘額分成 10 行, 10 行的加總等於電影院的餘額, 為什麼要這樣設計？"></a><strong>MySQL 中, 將電影院的餘額分成 10 行, 10 行的加總等於電影院的餘額, 為什麼要這樣設計？</strong></h6><p>適用於高併發場景, 當高併發會去更新同一行時, 會造成大量死鎖以致於吃光效能, 所以分成多行來更新, 降低死鎖發生機率</p>
<h6 id="MySQL-中-在高併發下-若是關閉死鎖監測-會出現什麼問題？"><a href="#MySQL-中-在高併發下-若是關閉死鎖監測-會出現什麼問題？" class="headerlink" title="MySQL 中, 在高併發下, 若是關閉死鎖監測, 會出現什麼問題？"></a><strong>MySQL 中, 在高併發下, 若是關閉死鎖監測, 會出現什麼問題？</strong></h6><p>因為關閉了 dead lock detection, 當鎖住時不會自動 rollback, 所以會出現大量的超時</p>
<h6 id="MySQL-中-偵測死鎖的代價是多少？"><a href="#MySQL-中-偵測死鎖的代價是多少？" class="headerlink" title="MySQL 中, 偵測死鎖的代價是多少？"></a><strong>MySQL 中, 偵測死鎖的代價是多少？</strong></h6><p>O(n的二次方), CPU 使用率極高</p>
<h6 id="MySQL-中-為什麼不可把-innodb-lock-wait-timeout-參數設定成-1s-來避免死鎖？"><a href="#MySQL-中-為什麼不可把-innodb-lock-wait-timeout-參數設定成-1s-來避免死鎖？" class="headerlink" title="MySQL 中, 為什麼不可把 innodb_lock_wait_timeout 參數設定成 1s 來避免死鎖？"></a><strong>MySQL 中, 為什麼不可把 innodb_lock_wait_timeout 參數設定成 1s 來避免死鎖？</strong></h6><p>因為很多時候不見得是死鎖, 可能只是單純的鎖等待, 這樣會造成很多誤傷</p>
<h6 id="MySQL-中-innodb-deadlock-detect-是什麼設置？"><a href="#MySQL-中-innodb-deadlock-detect-是什麼設置？" class="headerlink" title="MySQL 中, innodb_deadlock_detect 是什麼設置？"></a><strong>MySQL 中, innodb_deadlock_detect 是什麼設置？</strong></h6><p>當遇到 dead lock 時, transaction row 數量比較少的那一個會主動釋放 lock</p>
<h6 id="MySQL-中-innodb-lock-wait-timeout-是什麼設置？"><a href="#MySQL-中-innodb-lock-wait-timeout-是什麼設置？" class="headerlink" title="MySQL 中, innodb_lock_wait_timeout 是什麼設置？"></a><strong>MySQL 中, innodb_lock_wait_timeout 是什麼設置？</strong></h6><p>當遇到 lock 衝突時, 要等待多久</p>
<h6 id="MySQL-中-根據二階段鎖的行為-以下三個動作-哪一個該放最後-為什麼？"><a href="#MySQL-中-根據二階段鎖的行為-以下三個動作-哪一個該放最後-為什麼？" class="headerlink" title="MySQL 中, 根據二階段鎖的行為, 以下三個動作, 哪一個該放最後, 為什麼？"></a><strong>MySQL 中, 根據二階段鎖的行為, 以下三個動作, 哪一個該放最後, 為什麼？</strong></h6><ul>
<li><p><strong>Example</strong><br>從顧客 A 帳戶餘額扣錢<br>在影院 B 的帳戶餘額加錢<br>紀錄交易日誌</p>
</li>
<li><p><strong>Answer</strong><br>在影院 B 的帳戶餘額加錢要放最後, 因為可能會有多個 session 來更新這筆紀錄, 因此最可能發生衝突, 放在越後面, 佔用鎖的時間越短</p>
</li>
</ul>
<h6 id="MySQL-中-如果要鎖多行-要把可能造成最大影響的鎖往後放還是往前放？"><a href="#MySQL-中-如果要鎖多行-要把可能造成最大影響的鎖往後放還是往前放？" class="headerlink" title="MySQL 中, 如果要鎖多行, 要把可能造成最大影響的鎖往後放還是往前放？"></a><strong>MySQL 中, 如果要鎖多行, 要把可能造成最大影響的鎖往後放還是往前放？</strong></h6><p>往後放</p>
<h6 id="以下的-MySQL-image-的的意思是？"><a href="#以下的-MySQL-image-的的意思是？" class="headerlink" title="以下的 MySQL image 的的意思是？"></a><strong>以下的 MySQL image 的的意思是？</strong></h6><ul>
<li><p><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cW6e8Oe7SR7IrjEv80v0x8trzLZi_1BkpcnqQHFCuZukd6RYz-kMqXB7eN6AVKqFDaY00vhKailnSiQUbM0sRU9-ly_FPJB-_cay2Dy5hrZJ1b8VE2R1AMQV7XhKz0TB2Bezf1aN2TKEcXqfvPCQ_gvw=w1142-h856-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>transaction B 會被 block, 直到 transaction A 結束後釋放鎖</p>
</li>
</ul>
<h6 id="MySQL-行鎖中-何謂二階段鎖協議？"><a href="#MySQL-行鎖中-何謂二階段鎖協議？" class="headerlink" title="MySQL 行鎖中, 何謂二階段鎖協議？"></a><strong>MySQL 行鎖中, 何謂二階段鎖協議？</strong></h6><p>在 transaction 中, 有需要時加鎖, 但會等到 transaction 結束時才釋放</p>
<h6 id="以下的-MySQL-example-code-的意思是？-35"><a href="#以下的-MySQL-example-code-的意思是？-35" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE tbl_name NOWAIT add column ...</span><br><span class="line">ALTER TABLE tbl_name WAIT N add column ... </span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>使用 DDL 時, 指定若是拿不到鎖就不等待, 或是等待指定的時間就放棄, 以防止鎖死</li>
</ul>
<h6 id="MySQL-中-什麼是-FTWRL"><a href="#MySQL-中-什麼是-FTWRL" class="headerlink" title="MySQL 中, 什麼是 FTWRL?"></a><strong>MySQL 中, 什麼是 FTWRL?</strong></h6><p>flush table with read lock</p>
<h6 id="以下的-MySQL-image-的意思是？-5"><a href="#以下的-MySQL-image-的意思是？-5" class="headerlink" title="以下的 MySQL image 的意思是？"></a><strong>以下的 MySQL image 的意思是？</strong></h6><ul>
<li><strong>Image</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3d30nPsE9aOzazcF_KunVQO7N8WxpCcqAd6xlW5M5f7qY52wYseBSDaZ2UZId9MyizR6XJF_grHe0TP_eeNSIMWPwSGaWY50KODQ6b4we_qCNz_H3h-pq9vaBpjVpMr4jTSdSUhadum--MZ6SB0oKqWpQ=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>session A 為 DML, MySQL 自動施加 MDL read<br>session B 為 DML, MySQL 自動施加 MDL read, 讀讀共享<br>session C 為 DDL, 嘗試取得 MDL write, 但 MDL read write 互斥, 因此 block, 需等 MDL read 釋放<br>session D 為 DML, 需先拿到 MDL read, 因為 MDL write priority 高於 MDL read, 因此這排在 session C MDL write 之後, 需等待 MDL write 取得並釋放</li>
</ul>
<p>至此, 之後的 session 都將被 block, 直到 session A, B MDL read 釋放, 接著是 session C 執行, 之後才會解除 block</p>
<h6 id="MySQL-中-read-MDL-會影響-write-MDL-嗎？"><a href="#MySQL-中-read-MDL-會影響-write-MDL-嗎？" class="headerlink" title="MySQL 中, read MDL 會影響 write MDL 嗎？"></a><strong>MySQL 中, read MDL 會影響 write MDL 嗎？</strong></h6><p>會, 讀寫互斥</p>
<h6 id="MySQL-中-write-MDL-會影響-write-MDL-嗎？"><a href="#MySQL-中-write-MDL-會影響-write-MDL-嗎？" class="headerlink" title="MySQL 中, write MDL 會影響 write MDL 嗎？"></a><strong>MySQL 中, write MDL 會影響 write MDL 嗎？</strong></h6><p>會, 寫寫互斥</p>
<h6 id="MySQL-中-read-MDL-會影響-DDL-嗎？"><a href="#MySQL-中-read-MDL-會影響-DDL-嗎？" class="headerlink" title="MySQL 中, read MDL 會影響 DDL 嗎？"></a><strong>MySQL 中, read MDL 會影響 DDL 嗎？</strong></h6><p>會, 當 read MDL 存在時, 無法進行 DDL</p>
<h6 id="MySQL-中-write-MDL-會影響-DDL-嗎？"><a href="#MySQL-中-write-MDL-會影響-DDL-嗎？" class="headerlink" title="MySQL 中, write MDL 會影響 DDL 嗎？"></a><strong>MySQL 中, write MDL 會影響 DDL 嗎？</strong></h6><p>會, 只有拿到 MDL 的 connection 可以操作 DDL</p>
<h6 id="MySQL-中-read-MDL-會影響-read-MDL-嗎？"><a href="#MySQL-中-read-MDL-會影響-read-MDL-嗎？" class="headerlink" title="MySQL 中, read MDL 會影響 read MDL 嗎？"></a><strong>MySQL 中, read MDL 會影響 read MDL 嗎？</strong></h6><p>不會, 讀讀共享</p>
<h6 id="MySQL-中-read-MDL-會影響-DML-嗎？"><a href="#MySQL-中-read-MDL-會影響-DML-嗎？" class="headerlink" title="MySQL 中, read MDL 會影響 DML 嗎？"></a><strong>MySQL 中, read MDL 會影響 DML 嗎？</strong></h6><p>不會</p>
<h6 id="MySQL-中-MDL-read-write-什麼時候會被使用？"><a href="#MySQL-中-MDL-read-write-什麼時候會被使用？" class="headerlink" title="MySQL 中, MDL read, write 什麼時候會被使用？"></a><strong>MySQL 中, MDL read, write 什麼時候會被使用？</strong></h6><ul>
<li>read, 任何 DML 時會被加上</li>
<li>write, DDL 時會被加上</li>
</ul>
<h6 id="MySQL-中-假如-connection-A-執行-lock-tables-t1-read-t2-write-那-connection-A-對-t1-t2-的權限分別為何？"><a href="#MySQL-中-假如-connection-A-執行-lock-tables-t1-read-t2-write-那-connection-A-對-t1-t2-的權限分別為何？" class="headerlink" title="MySQL 中, 假如 connection A 執行 lock tables t1 read, t2 write, 那 connection A 對 t1, t2 的權限分別為何？"></a><strong>MySQL 中, 假如 connection A 執行 lock tables t1 read, t2 write, 那 connection A 對 t1, t2 的權限分別為何？</strong></h6><p>t1, 可讀<br>t2, 可讀可寫</p>
<h6 id="MySQL-中-假如-connection-A-執行-lock-tables-t1-read-t2-write-那-connection-B-對-t1-t2-的權限分別為何？"><a href="#MySQL-中-假如-connection-A-執行-lock-tables-t1-read-t2-write-那-connection-B-對-t1-t2-的權限分別為何？" class="headerlink" title="MySQL 中, 假如 connection A 執行 lock tables t1 read, t2 write, 那 connection B 對 t1, t2 的權限分別為何？"></a><strong>MySQL 中, 假如 connection A 執行 lock tables t1 read, t2 write, 那 connection B 對 t1, t2 的權限分別為何？</strong></h6><p>t1, 可讀不可寫<br>t2, 不可讀不可寫</p>
<h6 id="MySQL-中-什麼是-MDL？"><a href="#MySQL-中-什麼是-MDL？" class="headerlink" title="MySQL 中, 什麼是 MDL？"></a><strong>MySQL 中, 什麼是 MDL？</strong></h6><p>meta data lock, 元數據鎖</p>
<h6 id="MySQL-中-表級鎖又分為哪兩種？"><a href="#MySQL-中-表級鎖又分為哪兩種？" class="headerlink" title="MySQL 中, 表級鎖又分為哪兩種？"></a><strong>MySQL 中, 表級鎖又分為哪兩種？</strong></h6><p>表鎖, 元數據鎖</p>
<h6 id="MySQL-中-當進行全局備份時-為何建議使用-FTWRL-而不使用-set-global-readonly-true"><a href="#MySQL-中-當進行全局備份時-為何建議使用-FTWRL-而不使用-set-global-readonly-true" class="headerlink" title="MySQL 中, 當進行全局備份時, 為何建議使用 FTWRL 而不使用 set global readonly=true?"></a><strong>MySQL 中, 當進行全局備份時, 為何建議使用 FTWRL 而不使用 <code>set global readonly=true</code>?</strong></h6><ol>
<li>readonly variable 的值會被用來在很多地方進行判斷, 例如判斷主從庫, 影響重大</li>
<li>當使用 FTWRL, 如果 client side 斷開連線時, 會自動釋放 lock, 但 readonly 不會, 會一直鎖住</li>
</ol>
<h6 id="既然可以使用-mysqldump-–single-transaction-來備份-那為什麼還會有-FTWRL-需求？"><a href="#既然可以使用-mysqldump-–single-transaction-來備份-那為什麼還會有-FTWRL-需求？" class="headerlink" title="既然可以使用 mysqldump –single-transaction 來備份, 那為什麼還會有 FTWRL 需求？"></a><strong>既然可以使用 mysqldump –single-transaction 來備份, 那為什麼還會有 FTWRL 需求？</strong></h6><p>因為當有些 table 不支援 transaction 時, 就只能使用 FTWRL 來備份了</p>
<h6 id="使用-mysqldump-備份時-更新功能會受到影響嗎？"><a href="#使用-mysqldump-備份時-更新功能會受到影響嗎？" class="headerlink" title="使用 mysqldump 備份時, 更新功能會受到影響嗎？"></a><strong>使用 mysqldump 備份時, 更新功能會受到影響嗎？</strong></h6><p>不會, 但前提是務必要加上 <code>--single-transaction</code> 參數</p>
<h6 id="使用-mysqldump-備份時-可加上哪個參數-確保-view-一致？"><a href="#使用-mysqldump-備份時-可加上哪個參數-確保-view-一致？" class="headerlink" title="使用 mysqldump 備份時, 可加上哪個參數, 確保 view 一致？"></a><strong>使用 mysqldump 備份時, 可加上哪個參數, 確保 view 一致？</strong></h6><p><code>--single-transaction</code></p>
<h6 id="以下的-MySQL-example-image-的意思是？-36"><a href="#以下的-MySQL-example-image-的意思是？-36" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fNMv7iVJfUoAGi3CBpijs6oN1lS2sJU0lfeqZ08LbUusdjk1KWGu2JWSNU4pN7foHarjsf4LBq0aLfWfLRYb2KiuAtx_tXzh01coM2qlicZ7N3uO5KXtrZSfI_ruD9Zt2UzBjhBY6TcCwr0NQw5PPhYw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>備份時未上鎖, 先備份 user account, 完成後, user 買了一個課程, user course 資料庫更新, 然後在備份 user course, 備份的結果變成, user 錢沒扣, 但卻多了一個課程</li>
</ul>
<h6 id="MySQL-中-當在從庫上-FTWRK-時-會產生什麼狀況？"><a href="#MySQL-中-當在從庫上-FTWRK-時-會產生什麼狀況？" class="headerlink" title="MySQL 中, 當在從庫上 FTWRK 時, 會產生什麼狀況？"></a><strong>MySQL 中, 當在從庫上 FTWRK 時, 會產生什麼狀況？</strong></h6><p>從庫無法執行同步過來的 binlog, 會造成主從延遲, 在讀寫分離的場景會受影響</p>
<h6 id="MySQL-中-當在主庫上-FTWRK-時-會產生什麼狀況？"><a href="#MySQL-中-當在主庫上-FTWRK-時-會產生什麼狀況？" class="headerlink" title="MySQL 中, 當在主庫上 FTWRK 時, 會產生什麼狀況？"></a><strong>MySQL 中, 當在主庫上 FTWRK 時, 會產生什麼狀況？</strong></h6><p>備份期間無法更新, 會造成業務停擺</p>
<h6 id="以下的-MySQL-example-code-通常會用在什麼情境？"><a href="#以下的-MySQL-example-code-通常會用在什麼情境？" class="headerlink" title="以下的 MySQL example code, 通常會用在什麼情境？"></a><strong>以下的 MySQL example code, 通常會用在什麼情境？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Flush tables with read lock</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>做全庫邏輯備份</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-36"><a href="#以下的-MySQL-example-code-的意思是？-36" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">Flush tables with read lock</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>讓整個資料庫處於只讀狀態 (上讀鎖)</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-哪個-index-可以省略？"><a href="#以下的-MySQL-example-code-中-哪個-index-可以省略？" class="headerlink" title="以下的 MySQL example code 中, 哪個 index 可以省略？"></a><strong>以下的 MySQL example code 中, 哪個 index 可以省略？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># Schema</span><br><span class="line">CREATE TABLE `geek` (</span><br><span class="line">  `a` int(11) NOT NULL,</span><br><span class="line">  `b` int(11) NOT NULL,</span><br><span class="line">  `c` int(11) NOT NULL,</span><br><span class="line">  `d` int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`a`,`b`),</span><br><span class="line">  KEY `c` (`c`),</span><br><span class="line">  KEY `ca` (`c`,`a`),</span><br><span class="line">  KEY `cb` (`c`,`b`)</span><br><span class="line">) ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line"># 需求</span><br><span class="line">select * from geek where c=N order by a limit 1;</span><br><span class="line">select * from geek where c=N order by b limit 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>ca 可拿掉<br>index c = 聯合索引 (c,a,b)<br>index cb = 聯合索引 (c,b,a)<br>index ca = 聯合索引 (c,a,b) 跟 index c 重複了</li>
</ul>
<h6 id="MySQL-中-每一個單獨的-index-其實都跟哪一個-key-構成聯合索引？"><a href="#MySQL-中-每一個單獨的-index-其實都跟哪一個-key-構成聯合索引？" class="headerlink" title="MySQL 中, 每一個單獨的 index, 其實都跟哪一個 key 構成聯合索引？"></a><strong>MySQL 中, 每一個單獨的 index, 其實都跟哪一個 key 構成聯合索引？</strong></h6><p>primary key</p>
<h6 id="MySQL-中-如果一支-index-API-有多個查詢條件-並且每個查詢條件都可能不帶-不帶即不查-但表的資料量又非常大-那該怎麼辦？"><a href="#MySQL-中-如果一支-index-API-有多個查詢條件-並且每個查詢條件都可能不帶-不帶即不查-但表的資料量又非常大-那該怎麼辦？" class="headerlink" title="MySQL 中, 如果一支 index API, 有多個查詢條件, 並且每個查詢條件都可能不帶 (不帶即不查), 但表的資料量又非常大, 那該怎麼辦？"></a><strong>MySQL 中, 如果一支 index API, 有多個查詢條件, 並且每個查詢條件都可能不帶 (不帶即不查), 但表的資料量又非常大, 那該怎麼辦？</strong></h6><p>可評估業務需求用得最多的 query 來建立 2 個聯合索引, 剩下低頻的建立單獨的索引, 前端分別呼叫這兩個索引後, 在前端取交集</p>
<h6 id="MySQL-中-如果一張-table-中有-a-與-b-兩個單獨的索引-假設-query-為-where-a-xx-and-b-yy-那優化氣會先選擇哪個索引-還是兩個都走"><a href="#MySQL-中-如果一張-table-中有-a-與-b-兩個單獨的索引-假設-query-為-where-a-xx-and-b-yy-那優化氣會先選擇哪個索引-還是兩個都走" class="headerlink" title="MySQL 中, 如果一張 table 中有 a 與 b 兩個單獨的索引, 假設 query 為 `where a = xx and b = yy, 那優化氣會先選擇哪個索引, 還是兩個都走?"></a><strong>MySQL 中, 如果一張 table 中有 a 與 b 兩個單獨的索引, 假設 query 為 `where a = xx and b = yy, 那優化氣會先選擇哪個索引, 還是兩個都走?</strong></h6><ol>
<li>只選 a, 然後用 b 過濾</li>
<li>只選 b, 然後用 a 過濾</li>
<li>選 a 和 b, 然後兩個單獨跑出來的結果取交集</li>
</ol>
<h6 id="MySQL-中-觸發覆蓋索引的條件是"><a href="#MySQL-中-觸發覆蓋索引的條件是" class="headerlink" title="MySQL 中, 觸發覆蓋索引的條件是?"></a><strong>MySQL 中, 觸發覆蓋索引的條件是?</strong></h6><p>當查詢的條件與返回的字段都能被一個非主鍵索引所覆蓋, 則觸發覆蓋索引</p>
<h6 id="MySQL-中-什麼是-ICP"><a href="#MySQL-中-什麼是-ICP" class="headerlink" title="MySQL 中, 什麼是 ICP?"></a><strong>MySQL 中, 什麼是 ICP?</strong></h6><p>Index Condition Pushdown</p>
<h6 id="以下的-MySQL-example-code-的意思是？-37"><a href="#以下的-MySQL-example-code-的意思是？-37" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">alter table T engine=InnoDB</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>觸發 MYSQL 重建該表, 進行碎片化整理</li>
</ul>
<h6 id="以下的-MySQL-example-code-與-images-的意思是？"><a href="#以下的-MySQL-example-code-與-images-的意思是？" class="headerlink" title="以下的 MySQL example code, 與 images 的意思是？"></a><strong>以下的 MySQL example code, 與 images 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from tuser where name like &#x27;张%&#x27; and age=10 and ismale=1;</span><br></pre></td></tr></table></figure></li>
<li><strong>image1</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dNiKlPYFEVYaFoU6hMupXEjs_UNAjjhSflTVjt24T2YG7YnEPPyFrdA0sOXZGZoOJSiZgyu-0Bo-H9qNjuBbqyi5NezcrVeICa-Gk-Y-9W0kyR0cSQDpl_6oLt0IDKZ-ff_TPYU7dfq4XLWdVytjwk4w=w1142-h833-no?authuser=0"></li>
<li><strong>image2</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cBp8gFyvZHdM9cRknywRl-1bXGyYiIZ90NMS6k5TBtL9FhjVbY7x_fNjUszd785aryRvs9milfXHgM_OflFSuyiC9Y51PU_ngJywi2n5yifZEyHeftvtyJk_2WHd4kCYrZ82mHxX4XiTF9HO8kdUEBcw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>圖 1 為無索引下推 (index condition pushdown), 圖 2 為索引下推<br>索引下推中, 當索引中存在 query condition 的資料時, 會在索引 B+ 樹中直接比對, 若條件不符就不必再回表繼續比對了, 若條件相符, 而索引中又不存在 condition query 資料, 那才需要回表繼續比對<br>無索引下推, 不管索引中是否存在 query condition 需要的資料, 都會回表比對</li>
</ul>
<h6 id="MySQL-中-如果-a-跟-b-欄位都有各自的查詢需求-那聯合索引該使用-a-b-b-還是-b-a-a"><a href="#MySQL-中-如果-a-跟-b-欄位都有各自的查詢需求-那聯合索引該使用-a-b-b-還是-b-a-a" class="headerlink" title="MySQL 中, 如果 a 跟 b 欄位都有各自的查詢需求, 那聯合索引該使用 (a,b), b, 還是 (b,a) a?"></a><strong>MySQL 中, 如果 a 跟 b 欄位都有各自的查詢需求, 那聯合索引該使用 <code>(a,b), b</code>, 還是 <code>(b,a) a</code>?</strong></h6><p>可以從空間角度來看, 看 a 跟 b 哪個大, 如果 b 大, 則選 <code>(b,a), a</code>, 因為這樣 b 只需出現一次, 反之則為 <code>(a,b), b</code></p>
<h6 id="MySQL-中-在建立聯合索引時-如何安排索引的順序？"><a href="#MySQL-中-在建立聯合索引時-如何安排索引的順序？" class="headerlink" title="MySQL 中, 在建立聯合索引時, 如何安排索引的順序？"></a><strong>MySQL 中, 在建立聯合索引時, 如何安排索引的順序？</strong></h6><p>如果可以通過調整索引的順序而減少索引的數量, 那這個順序優先考慮</p>
<h6 id="MySQL-中-何謂最左前綴原則？"><a href="#MySQL-中-何謂最左前綴原則？" class="headerlink" title="MySQL 中, 何謂最左前綴原則？"></a><strong>MySQL 中, 何謂最左前綴原則？</strong></h6><p>當有一個聯合索引 (compound index), 假設為 (name, age), 那當 query 的 condition, name 為第一項是, 就可以使用這一個聯合索引, 因為索引中, 最左的索引是 name</p>
<h6 id="MySQL-中-何謂覆蓋索引-covered-index-？"><a href="#MySQL-中-何謂覆蓋索引-covered-index-？" class="headerlink" title="MySQL 中, 何謂覆蓋索引 (covered index)？"></a><strong>MySQL 中, 何謂覆蓋索引 (covered index)？</strong></h6><p>當索引上已經含有 query 所要 select 的資訊, 那就不需回表, 直接 return</p>
<h6 id="MySQL-中-innodb-log-file-size-的意思是？"><a href="#MySQL-中-innodb-log-file-size-的意思是？" class="headerlink" title="MySQL 中, innodb_log_file_size 的意思是？"></a><strong>MySQL 中, innodb_log_file_size 的意思是？</strong></h6><p>redo log 的 circular file size, 若一個區塊寫滿就會 flush 到 disk 中, 所以設越大自然越久才需要寫回 disk, 若在 write loading 非常高的情境, 可設為 500M, 預設是 128M</p>
<h6 id="MySQL-中-當使用-innodb-flush-log-at-timeout-來加快-write-負荷很重的-DB-時-利與弊？"><a href="#MySQL-中-當使用-innodb-flush-log-at-timeout-來加快-write-負荷很重的-DB-時-利與弊？" class="headerlink" title="MySQL 中, 當使用 innodb_flush_log_at_timeout 來加快 write 負荷很重的 DB 時, 利與弊？"></a><strong>MySQL 中, 當使用 <code>innodb_flush_log_at_timeout</code> 來加快 write 負荷很重的 DB 時, 利與弊？</strong></h6><p>代表多久將 redo log 寫到 disk 中, 設得越長, write 的速度越快, 但一旦 server 掛點, 遺失的資料也越多</p>
<h6 id="MySQL-中-當使用-innodb-flush-log-at-trx-commit-來加快-write-負荷很重的-DB-時-利與弊？"><a href="#MySQL-中-當使用-innodb-flush-log-at-trx-commit-來加快-write-負荷很重的-DB-時-利與弊？" class="headerlink" title="MySQL 中, 當使用 innodb_flush_log_at_trx_commit 來加快 write 負荷很重的 DB 時, 利與弊？"></a><strong>MySQL 中, 當使用 <code>innodb_flush_log_at_trx_commit</code> 來加快 write 負荷很重的 DB 時, 利與弊？</strong></h6><p>預設是 1, 若設為 2 可大幅降低 insert 的時間, 但若 server 掛點, 因為資料寫入 disk 的頻率變低了, 所以也會遺失比較多的資料</p>
<h6 id="MySQL-中-當一個-table-中有-text-欄位-且該欄位資料龐大-建議怎麼做？"><a href="#MySQL-中-當一個-table-中有-text-欄位-且該欄位資料龐大-建議怎麼做？" class="headerlink" title="MySQL 中, 當一個 table 中有 text 欄位, 且該欄位資料龐大, 建議怎麼做？"></a><strong>MySQL 中, 當一個 table 中有 text 欄位, 且該欄位資料龐大, 建議怎麼做？</strong></h6><p>移到一個獨立的 table, 避免 full table scan 時掃到</p>
<h6 id="下面的-image-中-如果-SQL-query-是-select-ID-from-T-where-k-between-3-and-5-那會回表嗎？-為什麼？"><a href="#下面的-image-中-如果-SQL-query-是-select-ID-from-T-where-k-between-3-and-5-那會回表嗎？-為什麼？" class="headerlink" title="下面的 image 中, 如果 SQL query 是 select ID from T where k between 3 and 5, 那會回表嗎？ 為什麼？"></a><strong>下面的 image 中, 如果 SQL query 是 <code>select ID from T where k between 3 and 5</code>, 那會回表嗎？ 為什麼？</strong></h6><ul>
<li><strong>Image</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dG7LgjIm-bGvnh6ZZJ3nBryESikQAgD7xqwudv4fj5i5NpmnphRWUJ0qktc-TUEyne6ZAPYedTxMf8BDpLTe00Aj0qJdQvN02XA8dFzIRKvEb1pGNKCeAGOC9Ds-8tltBvUKIygmKGFC1FO7I26y2iYA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>不會, 因為在 k index 這個 B+ 樹上, 已含有 ID, 所以直接給就行, 不需回表, 又稱為覆蓋索引</li>
</ul>
<h6 id="MySQL-中-當我在-transaction-中使用-DDL-會發生什麼事？"><a href="#MySQL-中-當我在-transaction-中使用-DDL-會發生什麼事？" class="headerlink" title="MySQL 中, 當我在 transaction 中使用 DDL, 會發生什麼事？"></a><strong>MySQL 中, 當我在 transaction 中使用 DDL, 會發生什麼事？</strong></h6><p>會自動 commit</p>
<h6 id="以下的-MySQL-example-image-中-如果我的語法是-select-from-T-where-k-between-3-and-5-那共會搜尋-index-幾次-回表幾次？"><a href="#以下的-MySQL-example-image-中-如果我的語法是-select-from-T-where-k-between-3-and-5-那共會搜尋-index-幾次-回表幾次？" class="headerlink" title="以下的 MySQL example image 中, 如果我的語法是 select * from T where k between 3 and 5, 那共會搜尋 index 幾次, 回表幾次？"></a><strong>以下的 MySQL example image 中, 如果我的語法是 <code>select * from T where k between 3 and 5</code>, 那共會搜尋 index 幾次, 回表幾次？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>搜尋索引三次, 回表兩次<br>找 k=3, 取得 id=300, 回表取 R3<br>找 k=5, 取得 id=500, 回表取 R4<br>找 k=6, 不符合條件, 循環終止</li>
</ul>
<h6 id="MySQL-中-在-page-內如何定位行？？"><a href="#MySQL-中-在-page-內如何定位行？？" class="headerlink" title="MySQL 中, 在 page 內如何定位行？？"></a><strong>MySQL 中, 在 page 內如何定位行？？</strong></h6><p>通過有序數組, 二分法</p>
<h6 id="MySQL-中-索引樹的葉子節點-存什麼？"><a href="#MySQL-中-索引樹的葉子節點-存什麼？" class="headerlink" title="MySQL 中, 索引樹的葉子節點, 存什麼？"></a><strong>MySQL 中, 索引樹的葉子節點, 存什麼？</strong></h6><p>存著頁, 頁裏存行</p>
<h6 id="MySQL-中-最小的儲存單位是？"><a href="#MySQL-中-最小的儲存單位是？" class="headerlink" title="MySQL 中, 最小的儲存單位是？"></a><strong>MySQL 中, 最小的儲存單位是？</strong></h6><p>page</p>
<h6 id="MySQL-中-默認-page-大小為？"><a href="#MySQL-中-默認-page-大小為？" class="headerlink" title="MySQL 中, 默認 page 大小為？"></a><strong>MySQL 中, 默認 page 大小為？</strong></h6><p>16 kb</p>
<h6 id="MySQL-中-默認-pointer-大小為？"><a href="#MySQL-中-默認-pointer-大小為？" class="headerlink" title="MySQL 中, 默認 pointer 大小為？"></a><strong>MySQL 中, 默認 pointer 大小為？</strong></h6><p>6 bytes</p>
<h6 id="MySQL-中-若調整-page-size-page-大跟小有什麼影響？"><a href="#MySQL-中-若調整-page-size-page-大跟小有什麼影響？" class="headerlink" title="MySQL 中, 若調整 page size, page 大跟小有什麼影響？"></a><strong>MySQL 中, 若調整 page size, page 大跟小有什麼影響？</strong></h6><p>page 越大, 則可容納的 key 越多, 則載入內存與搜尋</p>
<h6 id="MySQL-中-為什麼-key-的大小會影響到-N-叉樹的-N？"><a href="#MySQL-中-為什麼-key-的大小會影響到-N-叉樹的-N？" class="headerlink" title="MySQL 中, 為什麼 key 的大小會影響到 N 叉樹的 N？"></a><strong>MySQL 中, 為什麼 key 的大小會影響到 N 叉樹的 N？</strong></h6><p>索引 N 叉樹中, 非葉子節點的通常儲存 key 以及 pointer, pointer 固定為 6 bytes, 而 key 的大小不定, 假設為 10 bytes, 而一個 page 的默認大小為 16kb, 那該 page 就可以容納 1024 個 key, 則該 B+ 樹的 N 為 1024</p>
<h6 id="MySQL-中-若要調整-N-叉樹的-N-有哪兩種方向？"><a href="#MySQL-中-若要調整-N-叉樹的-N-有哪兩種方向？" class="headerlink" title="MySQL 中, 若要調整 N 叉樹的 N, 有哪兩種方向？"></a><strong>MySQL 中, 若要調整 N 叉樹的 N, 有哪兩種方向？</strong></h6><ul>
<li>調整 key 的大小</li>
<li>調整 page_size</li>
</ul>
<h6 id="MySQL-中-刪除連線-推薦使用什麼工具？"><a href="#MySQL-中-刪除連線-推薦使用什麼工具？" class="headerlink" title="MySQL 中, 刪除連線, 推薦使用什麼工具？"></a><strong>MySQL 中, 刪除連線, 推薦使用什麼工具？</strong></h6><p><code>Percona pt-kill</code></p>
<h6 id="MySQL-中-建議將-innodb-undo-tablespaces-设置成-2-或更大的值-為什麼？"><a href="#MySQL-中-建議將-innodb-undo-tablespaces-设置成-2-或更大的值-為什麼？" class="headerlink" title="MySQL 中, 建議將 innodb_undo_tablespaces 设置成 2, 或更大的值, 為什麼？"></a><strong>MySQL 中, 建議將 <code>innodb_undo_tablespaces</code> 设置成 2, 或更大的值, 為什麼？</strong></h6><p>如果出現長事務導致回滾過大, 方便清理</p>
<h6 id="MySQL-中-如果要避免長事務-可以監控哪個表？"><a href="#MySQL-中-如果要避免長事務-可以監控哪個表？" class="headerlink" title="MySQL 中, 如果要避免長事務, 可以監控哪個表？"></a><strong>MySQL 中, 如果要避免長事務, 可以監控哪個表？</strong></h6><p><code>information_schema.Innodb_trx</code></p>
<h6 id="MySQL-中-SET-MAX-EXECUTION-TIME-的意思以及用途是？"><a href="#MySQL-中-SET-MAX-EXECUTION-TIME-的意思以及用途是？" class="headerlink" title="MySQL 中, SET MAX_EXECUTION_TIME 的意思以及用途是？"></a><strong>MySQL 中, <code>SET MAX_EXECUTION_TIME</code> 的意思以及用途是？</strong></h6><p>設定 SQL 語句最長的執行時間, 以確保不會有語句執行意外太長的時間</p>
<h6 id="資料庫中-有什麼場景不使用-auto-increment-primary-key-的呢？"><a href="#資料庫中-有什麼場景不使用-auto-increment-primary-key-的呢？" class="headerlink" title="資料庫中, 有什麼場景不使用 auto increment primary key 的呢？"></a><strong>資料庫中, 有什麼場景不使用 auto increment primary key 的呢？</strong></h6><p>KV 場景, 像是 redis</p>
<h6 id="MySQL-中-primary-key-長度越小-二級索引佔據的空間越小-為什麼？"><a href="#MySQL-中-primary-key-長度越小-二級索引佔據的空間越小-為什麼？" class="headerlink" title="MySQL 中, primary key 長度越小, 二級索引佔據的空間越小, 為什麼？"></a><strong>MySQL 中, primary key 長度越小, 二級索引佔據的空間越小, 為什麼？</strong></h6><p>因為二級索引儲存著 primary key</p>
<h6 id="MySQL-中-使用有業務邏輯的-string-當作-primary-key-為何成本相對較高？"><a href="#MySQL-中-使用有業務邏輯的-string-當作-primary-key-為何成本相對較高？" class="headerlink" title="MySQL 中, 使用有業務邏輯的 string 當作 primary key, 為何成本相對較高？"></a><strong>MySQL 中, 使用有業務邏輯的 string 當作 primary key, 為何成本相對較高？</strong></h6><p>因為不保證有序插入, 可能會造成葉節點數據分裂</p>
<h6 id="MySQL-中-auto-increment-對於效能上有什麼幫助？"><a href="#MySQL-中-auto-increment-對於效能上有什麼幫助？" class="headerlink" title="MySQL 中, auto increment 對於效能上有什麼幫助？"></a><strong>MySQL 中, auto increment 對於效能上有什麼幫助？</strong></h6><p>每次都固定 id + 1, 故不需要對 B+ 數進行插入動作, 只會用到追加, 不涉及挪動其他紀錄, 也不會觸發葉子節點分裂</p>
<h6 id="MySQL-中-何謂頁合併"><a href="#MySQL-中-何謂頁合併" class="headerlink" title="MySQL 中, 何謂頁合併?"></a><strong>MySQL 中, 何謂頁合併?</strong></h6><p>當相鄰的兩個數據頁有資料被刪除, 造成利用率很低, 這時會合併兩個數據頁, 又稱為頁合併</p>
<h6 id="MySQL-中-何謂頁分裂"><a href="#MySQL-中-何謂頁分裂" class="headerlink" title="MySQL 中, 何謂頁分裂?"></a><strong>MySQL 中, 何謂頁分裂?</strong></h6><p>當前的數據頁已滿, 但又有塞東西進來的需求, 所以必須要將部分的數據移動到新的數據頁</p>
<h6 id="下圖中-如果我要插入-ID-400-但位於-R5-所在的數據頁已經滿了-那會發生什麼事？？"><a href="#下圖中-如果我要插入-ID-400-但位於-R5-所在的數據頁已經滿了-那會發生什麼事？？" class="headerlink" title="下圖中, 如果我要插入 ID 400, 但位於 R5 所在的數據頁已經滿了, 那會發生什麼事？？"></a><strong>下圖中, 如果我要插入 ID 400, 但位於 R5 所在的數據頁已經滿了, 那會發生什麼事？？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>申請一個新的數據頁, 挪動部分數據過去, 又稱為頁分裂</li>
</ul>
<h6 id="MySQL-中-非-primary-key-index-又稱為？"><a href="#MySQL-中-非-primary-key-index-又稱為？" class="headerlink" title="MySQL 中, 非 primary key index 又稱為？"></a><strong>MySQL 中, 非 primary key index 又稱為？</strong></h6><p>secondary index</p>
<h6 id="MySQL-中-primary-key-index-又稱為？？"><a href="#MySQL-中-primary-key-index-又稱為？？" class="headerlink" title="MySQL 中, primary key index 又稱為？？"></a><strong>MySQL 中, primary key index 又稱為？？</strong></h6><p>clustered index</p>
<h6 id="以下的-MySQL-example-image-的意思是？-37"><a href="#以下的-MySQL-example-image-的意思是？-37" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><p><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cswXqSzJYPv7gonbHbRQ3kfpiuo-Ma864kWlcWKGRPMs1IkWTEWIRXU2_swnteQRHqaxSFr3r7E62UUD25fGBF-kSzudFxT1t2Dx_Ql7o5Iz71g_bOjE9bLfbwb2dssZo9Js_x2GL7ey5nAhcQWoAFZw=w1142-h856-no?authuser=0"></p>
</li>
<li><p><strong>Answer</strong><br>兩顆 B+樹, primary key (ID) 這棵樹, 一個 ID 對應到整個 row, k index 這棵樹, k 值對應到相對應的 ID primary key</p>
</li>
</ul>
<h6 id="資料結構中-N-叉數-假設-N-為-1200-那樹高三層-會有幾筆資料？"><a href="#資料結構中-N-叉數-假設-N-為-1200-那樹高三層-會有幾筆資料？" class="headerlink" title="資料結構中, N 叉數, 假設 N 為 1200, 那樹高三層, 會有幾筆資料？"></a><strong>資料結構中, N 叉數, 假設 N 為 1200, 那樹高三層, 會有幾筆資料？</strong></h6><p>N 的三次方</p>
<h6 id="資料結構中-二元樹的搜索效率最好-但為何資料庫卻不採用二元樹這種資料結構？"><a href="#資料結構中-二元樹的搜索效率最好-但為何資料庫卻不採用二元樹這種資料結構？" class="headerlink" title="資料結構中, 二元樹的搜索效率最好, 但為何資料庫卻不採用二元樹這種資料結構？"></a><strong>資料結構中, 二元樹的搜索效率最好, 但為何資料庫卻不採用二元樹這種資料結構？</strong></h6><p>因為索引不只在內存, 更在硬碟中, 而每棵樹的查找都相當於訪問一個 block, 換言之, 資料越多, 樹越高, 訪問的 block 越多, 這個查詢效率並不友善 (訪問太多硬碟 block)</p>
<h6 id="以下的數據結構-query-與-insert-的-complexity-是多少？"><a href="#以下的數據結構-query-與-insert-的-complexity-是多少？" class="headerlink" title="以下的數據結構, query 與 insert 的 complexity 是多少？"></a><strong>以下的數據結構, query 與 insert 的 complexity 是多少？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dztqVh_OItXI8hcjMmg5fZXB-4eSVDsD-XbEJOZ2UHZ54hBjOei1E3m8wMPEoGlqb2id29hSxfwNBV7A_9nWzpKyxKir9gvQZ1Ke4_J-TEv9cSgz0gwzpsR3lEEeagtxxxbtId3sfEDHItrAncZmZKiw=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>O(log(N))</li>
</ul>
<h6 id="以下的數據結構-適合怎樣的情境？"><a href="#以下的數據結構-適合怎樣的情境？" class="headerlink" title="以下的數據結構, 適合怎樣的情境？"></a><strong>以下的數據結構, 適合怎樣的情境？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0"></li>
<li><strong>Answer</strong><br>有序數組較適合靜態引擎, 即不太會更動的資料庫</li>
</ul>
<h6 id="以下的數據結構-劣勢在於？"><a href="#以下的數據結構-劣勢在於？" class="headerlink" title="以下的數據結構, 劣勢在於？"></a><strong>以下的數據結構, 劣勢在於？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0"></li>
<li><strong>Answer</strong><br>為了維持有序, 所以 insert 會增加額外的 cost 使其維持有序, insert 資料效率差</li>
</ul>
<h6 id="以下的數據結構-優勢在於？"><a href="#以下的數據結構-優勢在於？" class="headerlink" title="以下的數據結構, 優勢在於？"></a><strong>以下的數據結構, 優勢在於？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0"></li>
<li><strong>Answer</strong><br>查詢, 因為有序, 可使用二分法, 區間查詢效率也很好</li>
</ul>
<h6 id="以下的-MySQL-example-picture-是怎樣的數據結構？"><a href="#以下的-MySQL-example-picture-是怎樣的數據結構？" class="headerlink" title="以下的 MySQL example picture, 是怎樣的數據結構？"></a><strong>以下的 MySQL example picture, 是怎樣的數據結構？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3defZWFSrYsk7Q8rSvpMQ_jb6zcVt3-5ORdMVQFicIXzU2oJ8WcSoiaVYFRzr-700za3mOaPV8IveOQ4Va0OtuUgale8D3FVY3jS7KcD_r1GMi9y89ndg3TMJjj8fe7krbqi1EOxL-OJfqp2G3pC2Ulow=w1142-h787-no?authuser=0"></li>
<li><strong>Answer</strong><br>有序數組</li>
</ul>
<h6 id="MySQL-hash-索引只適用於什麼樣的查詢？"><a href="#MySQL-hash-索引只適用於什麼樣的查詢？" class="headerlink" title="MySQL hash 索引只適用於什麼樣的查詢？"></a><strong>MySQL hash 索引只適用於什麼樣的查詢？</strong></h6><p>等值查詢, 比如 Memcached 或 NoSQL, 因為其 hash value 並無順序性</p>
<h6 id="以下的-hash-data-structure-索引在區間查詢非常慢-原因為何？"><a href="#以下的-hash-data-structure-索引在區間查詢非常慢-原因為何？" class="headerlink" title="以下的 hash data structure 索引在區間查詢非常慢, 原因為何？"></a><strong>以下的 hash data structure 索引在區間查詢非常慢, 原因為何？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>因為 key 的 hash 並無順序性, 所以若要查找區間, 等於全表掃描</li>
</ul>
<h6 id="以下的-data-structure-hash-的值是有順序性的嗎？"><a href="#以下的-data-structure-hash-的值是有順序性的嗎？" class="headerlink" title="以下的 data structure, hash 的值是有順序性的嗎？"></a><strong>以下的 data structure, hash 的值是有順序性的嗎？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>沒有</li>
</ul>
<h6 id="以下的-picture-的意思是？"><a href="#以下的-picture-的意思是？" class="headerlink" title="以下的 picture 的意思是？"></a><strong>以下的 picture 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ezyPtszN0XIDShfNIf7Dx0XdiiWTGiQvbM_Evu4nvA0JQ4dDDqxycUfOfw8AQVbtD44Ii9N8jn4P7FLhQp75VLGacjStFya3PW2yFnq_uYxgXjHQAX4MeukVE5CgwODVg4qPNhkztBN0tb_1KdFMyCCg=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>Hash 索引, 將 key 透過 hash method 得到一個 hash 值, 將 value 放到一個數組中, 而前面得到的 hash 值, 就是這個 value 在數組中的 key, 如果 hash 值重複, 則對應的 value 會構成一個 linked list, 所以精妙的 hash method 會讓重複機率降低</li>
</ul>
<h6 id="MySQL-中-如果我要使用連續的-transaction-但我想省略-begin-來節省一次的連線-那可以怎麼做？"><a href="#MySQL-中-如果我要使用連續的-transaction-但我想省略-begin-來節省一次的連線-那可以怎麼做？" class="headerlink" title="MySQL 中, 如果我要使用連續的 transaction, 但我想省略 begin 來節省一次的連線, 那可以怎麼做？"></a><strong>MySQL 中, 如果我要使用連續的 transaction, 但我想省略 begin 來節省一次的連線, 那可以怎麼做？</strong></h6><p>使用 commit work and chain 語法</p>
<h6 id="以下的-MySQL-example-code-的意思是？-38"><a href="#以下的-MySQL-example-code-的意思是？-38" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select * from information_schema.innodb_trx where TIME_TO_SEC(timediff(now(),trx_started))&gt;60</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>查詢超過 60 秒的長事務</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-39"><a href="#以下的-MySQL-example-code-的意思是？-39" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">set autocommit=0</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>代表關閉自動 transaction 提交, 也就是說你執行一個最基本的 select, transaction 就開始了, 而且不會自動提交, 這就導致意外的長事務</li>
</ul>
<h6 id="MySQL-中-長事務跟-undo-log-有什麼關係？"><a href="#MySQL-中-長事務跟-undo-log-有什麼關係？" class="headerlink" title="MySQL 中, 長事務跟 undo log 有什麼關係？"></a><strong>MySQL 中, 長事務跟 undo log 有什麼關係？</strong></h6><p>transaction 越長, 所需要保留的 undo log 越多, 佔據的空間也越大</p>
<h6 id="以下的-MySQL-illustration-中-undo-log-什麼時候會被刪除？"><a href="#以下的-MySQL-illustration-中-undo-log-什麼時候會被刪除？" class="headerlink" title="以下的 MySQL illustration 中, undo log 什麼時候會被刪除？"></a><strong>以下的 MySQL illustration 中, undo log 什麼時候會被刪除？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0"></li>
<li><strong>Answer</strong><br>當這個 undo log 不再被需要的時候, 例如沒有比這個 undo log 更早的 transaction read view 存在</li>
</ul>
<h6 id="以下的-MySQL-illustration-中-read-view-的意思是？"><a href="#以下的-MySQL-illustration-中-read-view-的意思是？" class="headerlink" title="以下的 MySQL illustration 中, read view 的意思是？"></a><strong>以下的 MySQL illustration 中, read view 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0"></li>
<li><strong>Answer</strong><br>代表不同時刻啟動的 transaction, 在 repeatable isolation 中, 不同的 transaction 會有不同的 read view</li>
</ul>
<h6 id="以下的-MySQL-illustration-的意思是？"><a href="#以下的-MySQL-illustration-的意思是？" class="headerlink" title="以下的 MySQL illustration 的意思是？"></a><strong>以下的 MySQL illustration 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f3OSG1uVB9hRd53wkqjBxnillm19eE9EAiavyOf6nAxaeqyXqCL5S6IYKo0eJTYS7VVdq0Qu4NAP3HGu0C6If3hPu3NGm4AblakZo9aYRtAzT5281g7aXy274h6Y40VJE9AhXMyIzmd5QEuRJIwuBnpQ=w1142-h737-no?authuser=0"></li>
<li><strong>Answer</strong><br>在每一次的 update, 同時都會紀錄下 undo log, 供不同的 read view 使用</li>
</ul>
<h6 id="MySQL-inno-DB-中-當提交一筆-update-時-共會紀錄哪三種-log"><a href="#MySQL-inno-DB-中-當提交一筆-update-時-共會紀錄哪三種-log" class="headerlink" title="MySQL inno DB 中, 當提交一筆 update 時, 共會紀錄哪三種 log?"></a><strong>MySQL inno DB 中, 當提交一筆 update 時, 共會紀錄哪三種 log?</strong></h6><p>redo log, undo log, binlog</p>
<h6 id="MySQL-中-一天備份一次跟一週備份一次-差別在哪？"><a href="#MySQL-中-一天備份一次跟一週備份一次-差別在哪？" class="headerlink" title="MySQL 中, 一天備份一次跟一週備份一次, 差別在哪？"></a><strong>MySQL 中, 一天備份一次跟一週備份一次, 差別在哪？</strong></h6><p>恢復時間的長短差別, 使用備份來復原的速度比使用 binlog 復原的速度還快</p>
<h6 id="MySQL-中-binlog-的-row-模式-是用什麼方式紀錄-log"><a href="#MySQL-中-binlog-的-row-模式-是用什麼方式紀錄-log" class="headerlink" title="MySQL 中, binlog 的 row 模式, 是用什麼方式紀錄 log?"></a><strong>MySQL 中, binlog 的 row 模式, 是用什麼方式紀錄 log?</strong></h6><p>紀錄 row 的內容, 記兩條, 更新前和更新後</p>
<h6 id="MySQL-中-binlog-的-statement-模式-是用什麼方式紀錄-log"><a href="#MySQL-中-binlog-的-statement-模式-是用什麼方式紀錄-log" class="headerlink" title="MySQL 中, binlog 的 statement 模式, 是用什麼方式紀錄 log?"></a><strong>MySQL 中, binlog 的 statement 模式, 是用什麼方式紀錄 log?</strong></h6><p>紀錄 sql 語句</p>
<h6 id="MySQL-中-binlog-又分為哪兩種模式？"><a href="#MySQL-中-binlog-又分為哪兩種模式？" class="headerlink" title="MySQL 中, binlog 又分為哪兩種模式？"></a><strong>MySQL 中, binlog 又分為哪兩種模式？</strong></h6><p>statement<br>row</p>
<h6 id="MySQL-中-redo-log-是物理性-binlog-是邏輯性-何謂物理性跟邏輯性？"><a href="#MySQL-中-redo-log-是物理性-binlog-是邏輯性-何謂物理性跟邏輯性？" class="headerlink" title="MySQL 中, redo log 是物理性, binlog 是邏輯性, 何謂物理性跟邏輯性？"></a><strong>MySQL 中, redo log 是物理性, binlog 是邏輯性, 何謂物理性跟邏輯性？</strong></h6><p>redo log 紀錄硬碟上數據的物理變化<br>binlog 紀錄當時所執行的 sql 語法</p>
<h6 id="MySQL-中-innodb-flush-log-at-trx-commit-1-這個參數的意思是？"><a href="#MySQL-中-innodb-flush-log-at-trx-commit-1-這個參數的意思是？" class="headerlink" title="MySQL 中, innodb_flush_log_at_trx_commit=1 這個參數的意思是？"></a><strong>MySQL 中, innodb_flush_log_at_trx_commit=1 這個參數的意思是？</strong></h6><p>讓每次 redo log 都會持久化到 disk</p>
<h6 id="MySQL-中-又不是常常會需要復原資料-為何一定要使用二階段提交來確保-redo-log-與-binlog-資料一致？"><a href="#MySQL-中-又不是常常會需要復原資料-為何一定要使用二階段提交來確保-redo-log-與-binlog-資料一致？" class="headerlink" title="MySQL 中, 又不是常常會需要復原資料, 為何一定要使用二階段提交來確保 redo log 與 binlog 資料一致？"></a><strong>MySQL 中, 又不是常常會需要復原資料, 為何一定要使用二階段提交來確保 redo log 與 binlog 資料一致？</strong></h6><p>因為當需要 scale 來增加系統 read 的 capacity 時, 便會用到 binlog 來實現增加新的 read database, 若資料不一致便無法實現這樣的操作</p>
<h6 id="MySQL-中-假設不使用二階段提交-先寫-binlog-再寫-redo-log-假設-binlog-寫完-但-redo-log-還沒寫完時就-crash-了-會發生什麼事？"><a href="#MySQL-中-假設不使用二階段提交-先寫-binlog-再寫-redo-log-假設-binlog-寫完-但-redo-log-還沒寫完時就-crash-了-會發生什麼事？" class="headerlink" title="MySQL 中, 假設不使用二階段提交, 先寫 binlog, 再寫 redo log, 假設 binlog 寫完, 但 redo log 還沒寫完時就 crash 了, 會發生什麼事？"></a><strong>MySQL 中, 假設不使用二階段提交, 先寫 binlog, 再寫 redo log, 假設 binlog 寫完, 但 redo log 還沒寫完時就 crash 了, 會發生什麼事？</strong></h6><p>由於 redo log 還沒寫, 也就是該 transaction 無效, 但 binlog 已寫了, 造成跟原庫的資料不一致</p>
<h6 id="MySQL-中-假設不使用二階段提交-先寫-redo-log-再寫-binlog-假設-redo-log-寫完-但-binlog-還沒寫完時就-crash-了-會發生什麼事？"><a href="#MySQL-中-假設不使用二階段提交-先寫-redo-log-再寫-binlog-假設-redo-log-寫完-但-binlog-還沒寫完時就-crash-了-會發生什麼事？" class="headerlink" title="MySQL 中, 假設不使用二階段提交, 先寫 redo log, 再寫 binlog, 假設 redo log 寫完, 但 binlog 還沒寫完時就 crash 了, 會發生什麼事？"></a><strong>MySQL 中, 假設不使用二階段提交, 先寫 redo log, 再寫 binlog, 假設 redo log 寫完, 但 binlog 還沒寫完時就 crash 了, 會發生什麼事？</strong></h6><p>server 重啟後, 因為 redo log 的 crash save 能力, 資料並沒有丟失, 但是如果使用 binlog 復原資料時, 便會少了那筆紀錄, 造成兩邊資料不一致</p>
<h6 id="MySQL-中-redo-log-與-binlog-的二階段提交主要的作用是？"><a href="#MySQL-中-redo-log-與-binlog-的二階段提交主要的作用是？" class="headerlink" title="MySQL 中, redo log 與 binlog 的二階段提交主要的作用是？"></a><strong>MySQL 中, redo log 與 binlog 的二階段提交主要的作用是？</strong></h6><p>讓兩份 log 的邏輯一致</p>
<h6 id="MySQL-中-binlog-跟-redo-log-分別的主要作用是？"><a href="#MySQL-中-binlog-跟-redo-log-分別的主要作用是？" class="headerlink" title="MySQL 中, binlog 跟 redo log 分別的主要作用是？"></a><strong>MySQL 中, binlog 跟 redo log 分別的主要作用是？</strong></h6><ul>
<li>redo log: crash save (innoDB 層面)</li>
<li>binlog: 恢復某個時間點的數據</li>
</ul>
<h6 id="MySQL-中-redo-log-與-binlog-的寫入流程是？"><a href="#MySQL-中-redo-log-與-binlog-的寫入流程是？" class="headerlink" title="MySQL 中, redo log 與 binlog 的寫入流程是？"></a><strong>MySQL 中, redo log 與 binlog 的寫入流程是？</strong></h6><p><img src="https://lh3.googleusercontent.com/pw/ACtC-3dDeUFBKih_YOvZUPhdjgtlj21G7dwDKlSWsfwtMIGb23uEmNldWDVoWlfWEKo63ixi5GqfPRpXAXjQSUO9SXRqs6-vQmqifLclt_z0gn9S9ZnJ8pmhYRfTMi95dtiAubODl_EFA3-FzO3AxpOvutr-HA=w1142-h1522-no?authuser=0"></p>
<ol>
<li>執行器先找引擎取 ID=2 這一行。 ID 是主鍵，引擎直接用樹搜索找到這一行。如果 ID=2 這一行所在的數據頁本來就在內存中，就直接返回給執行器；否則，需要先從磁盤讀入內存，然後再返回。</li>
<li>執行器拿到引擎給的行數據，把這個值加上 1，比如原來是 N，現在就是 N+1，得到新的一行數據，再調用引擎接口寫入這行新數據。</li>
<li>引擎將這行新數據更新到內存中，同時將這個更新操作記錄到 redo log 裡面，此時 redo log 處於 prepare 狀態。然後告知執行器執行完成了，隨時可以提交事務。</li>
<li>執行器生成這個操作的 binlog，並把 binlog 寫入磁盤。</li>
<li>執行器調用引擎的提交事務接口，引擎把剛剛寫入的 redo log 改成提交（commit）狀態，更新完成。<br>重點： binlog 與 redo log 會有共同的 XID, 當 crash 重啟後, 如果有 prepare 又有 commit 的 redo log, 就直接提交, 如果有 prepare 但沒有 commit 的 redo log, 就拿著 XID 去尋找是否有該 binlog, 有則提交, 無則 rollback</li>
</ol>
<h6 id="MySQL-中-redo-log-和-binlog-哪個是循環寫-哪個是追加寫？"><a href="#MySQL-中-redo-log-和-binlog-哪個是循環寫-哪個是追加寫？" class="headerlink" title="MySQL 中, redo log 和 binlog, 哪個是循環寫 哪個是追加寫？"></a><strong>MySQL 中, redo log 和 binlog, 哪個是循環寫 哪個是追加寫？</strong></h6><p>redo log 是循環寫, binlog 是追加寫</p>
<h6 id="MySQL-中-redo-log-和-binlog-哪個是物理性-哪個是邏輯性？"><a href="#MySQL-中-redo-log-和-binlog-哪個是物理性-哪個是邏輯性？" class="headerlink" title="MySQL 中, redo log 和 binlog, 哪個是物理性, 哪個是邏輯性？"></a><strong>MySQL 中, redo log 和 binlog, 哪個是物理性, 哪個是邏輯性？</strong></h6><p>redo log 是物理性, binlog 是邏輯性</p>
<h6 id="MySQL-redo-log-中-先寫日誌-具體來說是寫到哪？-跟實際更新硬碟的差別在於？"><a href="#MySQL-redo-log-中-先寫日誌-具體來說是寫到哪？-跟實際更新硬碟的差別在於？" class="headerlink" title="MySQL redo log 中, 先寫日誌, 具體來說是寫到哪？ 跟實際更新硬碟的差別在於？"></a><strong>MySQL redo log 中, 先寫日誌, 具體來說是寫到哪？ 跟實際更新硬碟的差別在於？</strong></h6><p>也是寫到磁盤中, 但如果跟實際更新硬碟相比, 一個是順序 I/O, 一個是隨機 I/O, 差別在於隨機 I/O 有一個尋址的過程, cost 較高</p>
<h6 id="MySQL-中-任何-Storage-Engine-都可使用-屬於-Server-層的-Log-是哪一個？"><a href="#MySQL-中-任何-Storage-Engine-都可使用-屬於-Server-層的-Log-是哪一個？" class="headerlink" title="MySQL 中, 任何 Storage Engine 都可使用, 屬於 Server 層的 Log 是哪一個？"></a><strong>MySQL 中, 任何 Storage Engine 都可使用, 屬於 Server 層的 Log 是哪一個？</strong></h6><p>binlog</p>
<h6 id="MySQL-中-redo-log-是屬於哪種儲存引擎專屬的？"><a href="#MySQL-中-redo-log-是屬於哪種儲存引擎專屬的？" class="headerlink" title="MySQL 中, redo log 是屬於哪種儲存引擎專屬的？"></a><strong>MySQL 中, redo log 是屬於哪種儲存引擎專屬的？</strong></h6><p>InnoDB</p>
<h6 id="MySQL-整體上來看-其實就分為哪兩層？"><a href="#MySQL-整體上來看-其實就分為哪兩層？" class="headerlink" title="MySQL 整體上來看, 其實就分為哪兩層？"></a><strong>MySQL 整體上來看, 其實就分為哪兩層？</strong></h6><p>server, storage</p>
<h6 id="以下的-MySQL-redo-log-picture-中-check-point-代表的意思是？"><a href="#以下的-MySQL-redo-log-picture-中-check-point-代表的意思是？" class="headerlink" title="以下的 MySQL redo log picture 中, check point 代表的意思是？"></a><strong>以下的 MySQL redo log picture 中, check point 代表的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>當前要擦除的位置</li>
</ul>
<h6 id="以下的-MySQL-redo-log-picture-中-write-pos-代表的意思是？"><a href="#以下的-MySQL-redo-log-picture-中-write-pos-代表的意思是？" class="headerlink" title="以下的 MySQL redo log picture 中, write pos 代表的意思是？"></a><strong>以下的 MySQL redo log picture 中, write pos 代表的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>目前從此處開始寫入</li>
</ul>
<h6 id="以下的-MySQL-redo-log-picture-中-綠色部分代表的意思是？"><a href="#以下的-MySQL-redo-log-picture-中-綠色部分代表的意思是？" class="headerlink" title="以下的 MySQL redo log picture 中, 綠色部分代表的意思是？"></a><strong>以下的 MySQL redo log picture 中, 綠色部分代表的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>可以寫入的空白地方</li>
</ul>
<h6 id="MySQL-的-redo-log-主要解決了什麼問題？"><a href="#MySQL-的-redo-log-主要解決了什麼問題？" class="headerlink" title="MySQL 的 redo log 主要解決了什麼問題？"></a><strong>MySQL 的 redo log 主要解決了什麼問題？</strong></h6><p>減少 I/O 成本<br>如果每一次的更新操作都需要寫進磁盤，然後磁盤也要找到對應的那條記錄，然後再更新，整個過程 IO 成本、查找成本都很高</p>
<h6 id="MySQL-的-redo-log-可以讓-MySQL-server-就算臨時異常重啟-之前提交的記錄也不會丟失-這種能力稱為？"><a href="#MySQL-的-redo-log-可以讓-MySQL-server-就算臨時異常重啟-之前提交的記錄也不會丟失-這種能力稱為？" class="headerlink" title="MySQL 的 redo log 可以讓 MySQL server 就算臨時異常重啟, 之前提交的記錄也不會丟失, 這種能力稱為？"></a><strong>MySQL 的 redo log 可以讓 MySQL server 就算臨時異常重啟, 之前提交的記錄也不會丟失, 這種能力稱為？</strong></h6><p>crash-save<br>關鍵點就是先寫日誌，再寫磁盤，也就是先寫粉板，等不忙的時候再寫賬本。</p>
<h6 id="以下的-MySQL-picture-是哪一種-log"><a href="#以下的-MySQL-picture-是哪一種-log" class="headerlink" title="以下的 MySQL picture 是哪一種 log?"></a><strong>以下的 MySQL picture 是哪一種 log?</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fy3nrrP3owcl3biLX5Pme8EfxDS8R0ukV08PO3DBjzRrt00vmsF1vR2iS9HEMQxT8CZ0As375yiv8gdA_NEf196aZV_hmrT-wMXXJlD7iVDMLUvYc9zL1Za-jnJi7KpkIlkyKt4XCqyfDdl3tBss3ZCA=w1142-h856-no?authuser=0"></li>
<li><strong>Answer</strong><br>redo log</li>
</ul>
<h6 id="MySQL-中-redo-log-的大小是固定的-對嗎？"><a href="#MySQL-中-redo-log-的大小是固定的-對嗎？" class="headerlink" title="MySQL 中, redo log 的大小是固定的, 對嗎？"></a><strong>MySQL 中, redo log 的大小是固定的, 對嗎？</strong></h6><p>對的</p>
<h6 id="MySQL-中-WAL-的全稱是？"><a href="#MySQL-中-WAL-的全稱是？" class="headerlink" title="MySQL 中, WAL 的全稱是？"></a><strong>MySQL 中, WAL 的全稱是？</strong></h6><p>Write-Ahead Logging, 先寫日誌, 再寫磁盤</p>
<h6 id="MySQL-8-0-還能使用查詢緩存嗎？"><a href="#MySQL-8-0-還能使用查詢緩存嗎？" class="headerlink" title="MySQL 8.0 還能使用查詢緩存嗎？"></a><strong>MySQL 8.0 還能使用查詢緩存嗎？</strong></h6><p>不行</p>
<h6 id="MySQL-查詢緩存-什麼是-key-什麼是-value"><a href="#MySQL-查詢緩存-什麼是-key-什麼是-value" class="headerlink" title="MySQL 查詢緩存, 什麼是 key, 什麼是 value?"></a><strong>MySQL 查詢緩存, 什麼是 key, 什麼是 value?</strong></h6><p>查詢語句為 key, 查詢結果為 value</p>
<h6 id="MySQL-中-預設的-client-端與-server-端的連線是多久？"><a href="#MySQL-中-預設的-client-端與-server-端的連線是多久？" class="headerlink" title="MySQL 中, 預設的 client 端與 server 端的連線是多久？"></a><strong>MySQL 中, 預設的 client 端與 server 端的連線是多久？</strong></h6><p>8 小時</p>
<h6 id="以下的-MySQL-example-picture-的意思是？"><a href="#以下的-MySQL-example-picture-的意思是？" class="headerlink" title="以下的 MySQL example picture 的意思是？"></a><strong>以下的 MySQL example picture 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fjW0XEfmW2DyzVQ4VCCMFUjfdGCpFWggzuTG071ohPhLEagEzLpyZ8BRURKjHsLcJMn5GRWweuRR0wyZzMvYTsP81Az-v0TXmvXiHiiAF2qlUuatDXSzpvf9iPksJQqcEDZ50CjN-VPq843gaJKr7saQ=w1920-h1440-no?authuser=0"></li>
<li><strong>Answer</strong><br>MySQL 的架構圖</li>
</ul>
<h6 id="MySQL-的-timestamp-column-從資料庫看-顯示的時間是哪一個時區？"><a href="#MySQL-的-timestamp-column-從資料庫看-顯示的時間是哪一個時區？" class="headerlink" title="MySQL 的 timestamp column, 從資料庫看, 顯示的時間是哪一個時區？"></a><strong>MySQL 的 timestamp column, 從資料庫看, 顯示的時間是哪一個時區？</strong></h6><p>預設為機器當下的時區, 因為 MySQL timezone variable 預設去抓 system timezone</p>
<h6 id="MySQL-的-timestamp-column-會隨著系統的時區調整而變動-為什麼？"><a href="#MySQL-的-timestamp-column-會隨著系統的時區調整而變動-為什麼？" class="headerlink" title="MySQL 的 timestamp column 會隨著系統的時區調整而變動, 為什麼？"></a><strong>MySQL 的 timestamp column 會隨著系統的時區調整而變動, 為什麼？</strong></h6><p>MySQL timestamp 會在底層儲存 UTC 的時間, 而從資料庫中看到的時間是根據當下機器的時區轉化過的, 所以 timestamp 欄位會隨著機器的時區不同而顯示該時區的時間, 所以調整 MySQL 的 timezone 是不會影響到資料準確度的</p>
<h6 id="以下的-MySQL-example-code-的意思是？-40"><a href="#以下的-MySQL-example-code-的意思是？-40" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	`branch_managers`.`account`,</span><br><span class="line">	`branch_managers`.`created_at`,</span><br><span class="line">	`shops`.`name`</span><br><span class="line">FROM</span><br><span class="line">	`branch_managers`</span><br><span class="line">	INNER JOIN `shops` ON `branch_managers`.`shop_id` = `shops`.`id`</span><br><span class="line">WHERE</span><br><span class="line">	AND `branch_managers`.`id` in(</span><br><span class="line">		SELECT</span><br><span class="line">			`id` FROM ((</span><br><span class="line">				SELECT</span><br><span class="line">					`id` FROM `branch_managers`</span><br><span class="line">				WHERE</span><br><span class="line">					match(account) against (&#x27;4k&#x27; IN boolean mode))</span><br><span class="line">			UNION (</span><br><span class="line">				SELECT</span><br><span class="line">					`branch_managers`.`id` FROM `branch_managers`</span><br><span class="line">					INNER JOIN `shops` ON `branch_managers`.`shop_id` = `shops`.`id`</span><br><span class="line">				WHERE</span><br><span class="line">					match(name) against (&#x27;4k&#x27; IN boolean mode))) AS `matches`)</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><br>無法直接使用 <strong>or where match</strong> 這樣子的 full text search 在多個表格, 因此統一取得 id, 在使用 where in 取得最後需要的資料<br>使用 union 來取得兩個 select query 取得的不重複 id<br>使用 derived table, 避免 where in 與 union query 之間的 dependency</li>
</ul>
<h6 id="以下的-MySQL-example-image-的意思是？-38"><a href="#以下的-MySQL-example-image-的意思是？-38" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ekwu-P3VY_S0_1hK5J-kdfmp0wrN7clSPT-G2QjU6EKZSy3fCf0DAhzvrIx1KEg3VEt9dALWAzccCgUoHFTEiR496rvQ7eNS2mIwniIO6gpzvXKB25z9SlBiNKH5VwHoQxmAa2OmaOUkmIvNFwed_OwQ=w1922-h1082-no?authuser=0"></li>
<li><strong>Answer</strong><br>SELECT 時加上 exclusive lock, 雖然 weight column 並沒有 index, 但 MySQL 為了做到 RR Isolation, 會把整張 table lock 住</li>
</ul>
<h6 id="使用-MySQL-的-range-lock-時-要特別注意什麼事？"><a href="#使用-MySQL-的-range-lock-時-要特別注意什麼事？" class="headerlink" title="使用 MySQL 的 range lock 時, 要特別注意什麼事？"></a><strong>使用 MySQL 的 range lock 時, 要特別注意什麼事？</strong></h6><p>range column 一定要有 index, 否則 MySQL 為了維持 RR Isolation, 會 lock 整張 table</p>
<h6 id="MySQL-的-range-lock-如果-range-column-並沒有-index-那會有什麼行為？"><a href="#MySQL-的-range-lock-如果-range-column-並沒有-index-那會有什麼行為？" class="headerlink" title="MySQL 的 range lock 如果 range column 並沒有 index, 那會有什麼行為？"></a><strong>MySQL 的 range lock 如果 range column 並沒有 index, 那會有什麼行為？</strong></h6><p>MySQL 為了維持 RR Isolation, 會 lock 整張 table</p>
<h6 id="以下的-MySQL-example-image-的意思是？-39"><a href="#以下的-MySQL-example-image-的意思是？-39" class="headerlink" title="以下的 MySQL example image 的意思是？"></a><strong>以下的 MySQL example image 的意思是？</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eNnbNqUcPVOcj7T89BAI0MySfznedETHOYkouABM3KqdJCYYznbPScZ_2GxXRIp7JSBPGSfsSqXC7gIu7c3PwOoERWGiZET0SF065Ag2ZQnLLQ8Rdu_xPfzqdWxNbJyn__xqHJqoiNyYMvgrYt9yOqIg=w1400-h1178-no?authuser=0"></li>
<li><strong>Answer</strong><br>SELECT 時加上 exclusive lock, 所以所有 height &gt;= 170 這個 range 的 row 都被鎖住了</li>
</ul>
<h6 id="MySQL-的-repeatable-isolation-中-如何避免-lost-update"><a href="#MySQL-的-repeatable-isolation-中-如何避免-lost-update" class="headerlink" title="MySQL 的 repeatable isolation 中, 如何避免 lost update?"></a><strong>MySQL 的 repeatable isolation 中, 如何避免 lost update?</strong></h6><p>使用 Atomic operation, 像是 credit = credit - 1, 但如果要避免負數, 還是要使用 lock</p>
<h6 id="MySQL-的-repeatable-isolation-實作的-snapshot-只對什麼語法有效？"><a href="#MySQL-的-repeatable-isolation-實作的-snapshot-只對什麼語法有效？" class="headerlink" title="MySQL 的 repeatable isolation, 實作的 snapshot 只對什麼語法有效？"></a><strong>MySQL 的 repeatable isolation, 實作的 snapshot 只對什麼語法有效？</strong></h6><p>只對 DQL, 像是 select 有效, 對 DML, 像是 insert, update, delete 都無效</p>
<h6 id="MySQL-的-repeatable-isolation-是如何實作-snapshot-的？"><a href="#MySQL-的-repeatable-isolation-是如何實作-snapshot-的？" class="headerlink" title="MySQL 的 repeatable isolation 是如何實作 snapshot 的？"></a><strong>MySQL 的 repeatable isolation 是如何實作 snapshot 的？</strong></h6><p>會在 transaction 一開始進行一次 select, 並記錄下時間, 之後在此 transaction 中只可看到此時間之前的 committed row, 已經 transaction 自己本身作出的改變, 但這個規則只對 DQL (Data Query Language)有效, 對 DML (Data Manipulation Language) 無效</p>
<h6 id="以下的-MySQL-transaction-illustration-image-的意思是"><a href="#以下的-MySQL-transaction-illustration-image-的意思是" class="headerlink" title="以下的 MySQL transaction illustration image 的意思是?"></a><strong>以下的 MySQL transaction illustration image 的意思是?</strong></h6><ul>
<li><strong>Example</strong><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cIlzcow0TaxIoSNLt8t-KlF4vTnzkHcxpAd5PY3G2ZO1fTRlCHs6mA1QIRfmvLrd_KEh6aAfrBwKnIYJ45atJjq-chqsdUFDTd-vGRFhPA5HemoO11mRlRgR6vCTg-tZtHlROplllre7DGo558OsoTxA=w1400-h1258-no?authuser=0"></li>
<li><strong>Answer</strong><br>MySQL 的 repeatable read 只可避免 phantom read, 但無法避免 phantom update, insert, delete 等其他操作<br>在 transaction 中, update 的作用範圍依然是所有已經 commit 的 row, 而在 transaction 中, 可以看到自己 update 的 row, 因此 update 造成了 write skew, 而 select 產生 phantom read</li>
</ul>
<h6 id="資料庫中-Serializable-Isolation-中的-Serializable-Snapshot-Isolation-是如何實作"><a href="#資料庫中-Serializable-Isolation-中的-Serializable-Snapshot-Isolation-是如何實作" class="headerlink" title="資料庫中, Serializable Isolation 中的 Serializable Snapshot Isolation, 是如何實作?"></a><strong>資料庫中, Serializable Isolation 中的 Serializable Snapshot Isolation, 是如何實作?</strong></h6><p>不特別對 transaction 做互相 block, 而是在最後 commit 的時候再做確認, 效能最佳, 但 2008 年才提出, 因此大部分資料庫都還沒有採用</p>
<h6 id="大部分的資料庫都採用哪種方式實作-Serializable-Isolation"><a href="#大部分的資料庫都採用哪種方式實作-Serializable-Isolation" class="headerlink" title="大部分的資料庫都採用哪種方式實作 Serializable Isolation?"></a><strong>大部分的資料庫都採用哪種方式實作 Serializable Isolation?</strong></h6><p>Two-phase Lock</p>
<h6 id="資料庫中-Serializable-Isolation-中的-Two-phase-Lock-是如何實作"><a href="#資料庫中-Serializable-Isolation-中的-Two-phase-Lock-是如何實作" class="headerlink" title="資料庫中, Serializable Isolation 中的 Two-phase Lock, 是如何實作?"></a><strong>資料庫中, Serializable Isolation 中的 Two-phase Lock, 是如何實作?</strong></h6><p>使用 Shared Lock 以及 Exclusive Lock 配合, 讓每一筆資料在同一時間最多都只會有一個 Transaction 對它進行讀寫, 還要搭配 Range Lock 避免 Phantom 現象, 大部分資料庫都採用這種實作</p>
<h6 id="資料庫中-Serializable-Isolation-中的-Serial-Order-是如何實作"><a href="#資料庫中-Serializable-Isolation-中的-Serial-Order-是如何實作" class="headerlink" title="資料庫中, Serializable Isolation 中的 Serial Order, 是如何實作?"></a><strong>資料庫中, Serializable Isolation 中的 Serial Order, 是如何實作?</strong></h6><p>真正照順序進行資料讀寫, 避免所有同時執行更新可能造成的衝突, 犧牲 concurrency, 效能差, 適合讀寫較快速的 In-Memory 資料庫, 如 redis</p>
<h6 id="資料庫中-Serializable-Isolation-有哪三種實作方式"><a href="#資料庫中-Serializable-Isolation-有哪三種實作方式" class="headerlink" title="資料庫中, Serializable Isolation 有哪三種實作方式?"></a><strong>資料庫中, Serializable Isolation 有哪三種實作方式?</strong></h6><p>Serial Order<br>Two-phase Lock<br>Serializable Snapshot Isolation</p>
<h6 id="資料庫中-何謂-Serializable-Isolation"><a href="#資料庫中-何謂-Serializable-Isolation" class="headerlink" title="資料庫中, 何謂 Serializable Isolation?"></a><strong>資料庫中, 何謂 Serializable Isolation?</strong></h6><p>可以保證在多個 Transaction 同時對資料庫進行讀寫所得到的結果, 會跟一次只讓一個 transaction 照順序 (serially) 進行讀寫所得到的結果完全一致, 最嚴格的 Isolation level, 但效能較差</p>
<h6 id="資料庫中-何謂-Repeatable-Read-Isolation"><a href="#資料庫中-何謂-Repeatable-Read-Isolation" class="headerlink" title="資料庫中, 何謂 Repeatable Read Isolation?"></a><strong>資料庫中, 何謂 Repeatable Read Isolation?</strong></h6><p>只要可以避免 Dirty Read 和 Non-repeatable Read, 就可以稱為 Repeatable Read Isolation, 依照實作方法不同, 有些資料庫的 Repeatable Read 可以避免 Lost Update 以及 Phantom</p>
<h6 id="資料庫中-何謂-Read-Committed-Isolation"><a href="#資料庫中-何謂-Read-Committed-Isolation" class="headerlink" title="資料庫中, 何謂 Read Committed Isolation?"></a><strong>資料庫中, 何謂 Read Committed Isolation?</strong></h6><p>只允許讀取已經被 Commit 的資料, 可以避免 dirty read</p>
<h6 id="資料庫中-何謂-Read-Uncommitted-Isolation"><a href="#資料庫中-何謂-Read-Uncommitted-Isolation" class="headerlink" title="資料庫中, 何謂 Read Uncommitted Isolation?"></a><strong>資料庫中, 何謂 Read Uncommitted Isolation?</strong></h6><p>允許讀取尚未被 commit 的資料</p>
<h6 id="資料庫中-Isolation-又分為哪四種？"><a href="#資料庫中-Isolation-又分為哪四種？" class="headerlink" title="資料庫中, Isolation 又分為哪四種？"></a><strong>資料庫中, Isolation 又分為哪四種？</strong></h6><p>Read Uncommitted Isolation<br>Read Committed Isolation<br>Repeatable Read Isolation<br>Serializable Isolation</p>
<h6 id="資料庫中-以下的情況又稱為？"><a href="#資料庫中-以下的情況又稱為？" class="headerlink" title="資料庫中, 以下的情況又稱為？"></a><strong>資料庫中, 以下的情況又稱為？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cSrjdapjyC57uQPG55HZIc_KJxUokfg3YQzp0CX5D18325Cki7ho-O3jKdMCbKMdEym1LtUGrd72KnRLI40c-d3cFYiLzQE1m9NpMsLELWTS0x47Qs67rU3ugnXxufRO5grKF6s0YLFFhub4aVo3gBuw=w1400-h841-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>Write Skew<br>只有 Serializable Isolation 可以避免</li>
</ul>
<h6 id="資料庫中-以下的情況又稱為？-1"><a href="#資料庫中-以下的情況又稱為？-1" class="headerlink" title="資料庫中, 以下的情況又稱為？"></a><strong>資料庫中, 以下的情況又稱為？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fgHsR4hH9u3VrwYE9FWHyJhZw4TsMHM5n9tbLKInhgwE4dX8_8woqOxqklNzkxmwPY6Qe55JyHP_7BA7BVBflzImjiwGuOfe5Dofwt1NUgn-DQTofoz41BRZeUrdnxC1mTKEUbFaN6znXnGRn31iH2QA=w1400-h841-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>Phantom Read, Serializable Isolation 可以避免這個現象, Repeatable Read Isolation 視乎各個資料的實作, PostgreSQL 可以完全避免, MySQL InnoDB 只能避免 Phantom Read, 但無法避免 UPDATE, DELETE 等 DML 寫入的操作</li>
</ul>
<h6 id="資料庫中-以下的情況又稱為？-2"><a href="#資料庫中-以下的情況又稱為？-2" class="headerlink" title="資料庫中, 以下的情況又稱為？"></a><strong>資料庫中, 以下的情況又稱為？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3ebqdFM2ZmkDrmMigbqRe887FSRNiO3_vPqVRBmxWNaspmbTGfZuQh45FpeF6sGvmpfK_R3AkEfTiuoit_CugmX_l9CGELIhDD2qNAbc-I_goMzK-A-20n6gJRwVsyfQ0hAfsVqsXTRYdNnHM8yfOdfUg=w1400-h841-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>Lost Update, Serializable Isolation 可以避免這個情況, Repeatable Read Isolation 看每個資料庫的實作不同有不同的行為, MySQL 無法避免 Lost Update, PostgreSQL 可以</li>
</ul>
<h6 id="資料庫中-以下的情況又稱為？-3"><a href="#資料庫中-以下的情況又稱為？-3" class="headerlink" title="資料庫中, 以下的情況又稱為？"></a><strong>資料庫中, 以下的情況又稱為？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3coTHFB5d9fvCUVMGMT-ygib7lAk8LmoaCKKdXoNapFR_1ux8klLdfDT_XMcctS-HK8Ts_djId1kf1-0Ut6SKCrLlXCQ0CiBBCJ5b6SIVXvRAb7wAvHhelbeA2oL98AKE4H5uR5ayP3OipquGwFNhIN6g=w1400-h841-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>Read Skew (Non-repeatable Read), Repeatable Read 或更高的 Isolation 可避免這個情況</li>
</ul>
<h6 id="資料庫中-以下的情況又稱為？-4"><a href="#資料庫中-以下的情況又稱為？-4" class="headerlink" title="資料庫中, 以下的情況又稱為？"></a><strong>資料庫中, 以下的情況又稱為？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dgsXj5ZD0YgEzsv6DA3YvsBMak86F_h23dEnDnd-hEJWuY9KV5s7eAcUb0D2b2I7kRHYahe25l2w9QsB2JB6ZA9YrZeUcR4lhTRpzdOVhnomMCtmDEW8NT6NrJvn1r-psDcyq0o-8UcLkST4t54ueztg=w1400-h841-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>Dirty Read, Read Committed 或更高的 Isolation 可避免 dirty read</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-range-lock-範圍內的資料-InnoDB-可以讀嗎？可以寫嗎？"><a href="#以下的-MySQL-example-code-中-range-lock-範圍內的資料-InnoDB-可以讀嗎？可以寫嗎？" class="headerlink" title="以下的 MySQL example code 中, range lock 範圍內的資料 InnoDB 可以讀嗎？可以寫嗎？"></a><strong>以下的 MySQL example code 中, range lock 範圍內的資料 InnoDB 可以讀嗎？可以寫嗎？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT * FROM student WHERE height &gt;= 170 FOR UPDATE;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>如果 Isolation level 是 Serializable 的話, 不可讀不可寫<br>如果 Isolation level 是 Repeatable Read 的話, 可讀不可寫, 因為 InnoDB 的 RR Isolation 實作是採用 Snapshot Isolation, 讀取時都是讀取 Snapshot 內的資料</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-哪些資料會被鎖住？-會加上什麼鎖"><a href="#以下的-MySQL-example-code-中-哪些資料會被鎖住？-會加上什麼鎖" class="headerlink" title="以下的 MySQL example code 中, 哪些資料會被鎖住？ 會加上什麼鎖?"></a><strong>以下的 MySQL example code 中, 哪些資料會被鎖住？ 會加上什麼鎖?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT * FROM student WHERE height &gt;= 170 FOR UPDATE;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><strong>height &gt;= 170</strong> 的資料<br>exclusive lock</li>
</ul>
<h6 id="MySQL-中-如果一筆資料只被一個-transaction-加上-shared-lock-該-transaction-可以將此-shared-lock-升級成-exclusive-lock-嗎？"><a href="#MySQL-中-如果一筆資料只被一個-transaction-加上-shared-lock-該-transaction-可以將此-shared-lock-升級成-exclusive-lock-嗎？" class="headerlink" title="MySQL 中, 如果一筆資料只被一個 transaction 加上 shared lock, 該 transaction 可以將此 shared lock 升級成 exclusive lock 嗎？"></a><strong>MySQL 中, 如果一筆資料只被一個 transaction 加上 shared lock, 該 transaction 可以將此 shared lock 升級成 exclusive lock 嗎？</strong></h6><p>可以</p>
<h6 id="MySQL-中-當一筆資料被-1-個或-1-個以上的-transaction-加上-shared-lock-該筆資料可以被加上-exlusive-lock-嗎？"><a href="#MySQL-中-當一筆資料被-1-個或-1-個以上的-transaction-加上-shared-lock-該筆資料可以被加上-exlusive-lock-嗎？" class="headerlink" title="MySQL 中, 當一筆資料被 1 個或 1 個以上的 transaction 加上 shared lock, 該筆資料可以被加上 exlusive lock 嗎？"></a><strong>MySQL 中, 當一筆資料被 1 個或 1 個以上的 transaction 加上 shared lock, 該筆資料可以被加上 exlusive lock 嗎？</strong></h6><p>不行</p>
<h6 id="MySQL-中-同一筆資料可以同時被多個-transaction-加上-shared-lock-嗎？"><a href="#MySQL-中-同一筆資料可以同時被多個-transaction-加上-shared-lock-嗎？" class="headerlink" title="MySQL 中, 同一筆資料可以同時被多個 transaction 加上 shared lock 嗎？"></a><strong>MySQL 中, 同一筆資料可以同時被多個 transaction 加上 shared lock 嗎？</strong></h6><p>可以</p>
<h6 id="MySQL-中-當一個-transaction-取得某資料的-shared-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行寫入嗎"><a href="#MySQL-中-當一個-transaction-取得某資料的-shared-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行寫入嗎" class="headerlink" title="MySQL 中, 當一個 transaction 取得某資料的 shared lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行寫入嗎?"></a><strong>MySQL 中, 當一個 transaction 取得某資料的 shared lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行寫入嗎?</strong></h6><p>不行</p>
<h6 id="MySQL-中-當一個-transaction-取得某資料的-shared-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行讀取嗎"><a href="#MySQL-中-當一個-transaction-取得某資料的-shared-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行讀取嗎" class="headerlink" title="MySQL 中, 當一個 transaction 取得某資料的 shared lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行讀取嗎?"></a><strong>MySQL 中, 當一個 transaction 取得某資料的 shared lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行讀取嗎?</strong></h6><p>可以</p>
<h6 id="MySQL-中-當一個-transaction-取得某資料的-exclusive-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行讀取嗎"><a href="#MySQL-中-當一個-transaction-取得某資料的-exclusive-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行讀取嗎" class="headerlink" title="MySQL 中, 當一個 transaction 取得某資料的 exclusive lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行讀取嗎?"></a><strong>MySQL 中, 當一個 transaction 取得某資料的 exclusive lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行讀取嗎?</strong></h6><p>不行</p>
<h6 id="MySQL-中-當一個-transaction-取得某資料的-exclusive-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行寫入嗎"><a href="#MySQL-中-當一個-transaction-取得某資料的-exclusive-lock-在該-lock-釋放之前-其他-transaction-可以對此資料進行寫入嗎" class="headerlink" title="MySQL 中, 當一個 transaction 取得某資料的 exclusive lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行寫入嗎?"></a><strong>MySQL 中, 當一個 transaction 取得某資料的 exclusive lock, 在該 lock 釋放之前, 其他 transaction 可以對此資料進行寫入嗎?</strong></h6><p>不行</p>
<h6 id="MySQL-中-何謂-shared-lock"><a href="#MySQL-中-何謂-shared-lock" class="headerlink" title="MySQL 中, 何謂 shared lock?"></a><strong>MySQL 中, 何謂 shared lock?</strong></h6><p>當一個 transaction 取得資料的 shared lock 之後, 其他 transaction 可以 <strong>讀取</strong> 資料, 但無法 <strong>寫入</strong> 資料 </p>
<h6 id="MySQL-中-何謂-Exclusive-lock"><a href="#MySQL-中-何謂-Exclusive-lock" class="headerlink" title="MySQL 中, 何謂 Exclusive lock?"></a><strong>MySQL 中, 何謂 Exclusive lock?</strong></h6><p>當一個 transaction 取得資料的 exclusive lock 之後, 其他 transaction 無法對此資料做 <strong>讀取</strong> 以及 <strong>寫入</strong><br>例如： <code>select a from b for update</code></p>
<h6 id="以下的-MySQL-example-code-的意思是？-41"><a href="#以下的-MySQL-example-code-的意思是？-41" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlimport –user=&#x27;marie_dyer&#x27; --password=&#x27;sevenangels&#x27; \</span><br><span class="line">--replace --low-priority  --ignore-lines=&#x27;1&#x27; \</span><br><span class="line">--fields-enclosed-by=&#x27;&quot;&#x27; --fields-terminated-by=&#x27;|&#x27; --fields-escaped-by=&#x27;\\&#x27; \</span><br><span class="line">--lines-terminated-by=&#x27;]\r\n&#x27; \</span><br><span class="line">--columns=&#x27;prospect_name, prospect_email, prospect_country&#x27; \</span><br><span class="line">birdwatchers &#x27;/tmp/birdwatcher_prospects_import.csv&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>基本上語法跟 LOAD DATA 是一樣的, 差別在於檔名若有 <code>-</code> 要改成 <code>_</code>, 以免 MySQL 判定為刪減符號<br>以下為 FIELDS 子句意思：</li>
</ul>
<p><strong>TERMINATED BY</strong>: 表示 <code>|</code> 為 field 跟 field 之間的間隔<br><strong>ENCLOSED BY</strong>: 表示每一個 field 的內容都會由 <code>&quot;</code> 包住<br><strong>ESCAPE BY</strong>: 標示跳脫用字元, 不過預設就是 <code>\</code>, 因此這個可省略<br>LINES 子句：<br><strong>STRINGS BY</strong>: 表示 <code>[</code> 開頭算一行的開始<br><strong>TERMINATED BY</strong>: 表示 <code>]\r\n</code> 為一行的結束, 正常 Linux 只需 <code>\n</code> 即可, 但考量到 Windows 環境, 因此多加了 <code>\r</code></p>
<h6 id="以下的-MySQL-example-code-的意思是？-42"><a href="#以下的-MySQL-example-code-的意思是？-42" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">( SELECT &#x27;scientific name&#x27;,&#x27;common name&#x27;,&#x27;family name&#x27; )</span><br><span class="line">UNION</span><br><span class="line">( SELECT birds.scientific_name,</span><br><span class="line">  IFNULL(common_name, &#x27;&#x27;),</span><br><span class="line">  bird_families.scientific_name</span><br><span class="line">  FROM rookery.birds</span><br><span class="line">  JOIN rookery.bird_families USING(family_id)</span><br><span class="line">  JOIN rookery.bird_orders USING(order_id)</span><br><span class="line">  WHERE bird_orders.scientific_name = &#x27;Charadriiformes&#x27;</span><br><span class="line">  ORDER BY common_name</span><br><span class="line">  INTO OUTFILE &#x27;/tmp/birds-list.csv&#x27;</span><br><span class="line">  FIELDS ENCLOSED BY &#x27;&quot;&#x27; TERMINATED BY &#x27;|&#x27; ESCAPED BY &#x27;\\&#x27;</span><br><span class="line">  LINES TERMINATED BY &#x27;\n&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 SELECT INTO OUTFILE 將資料匯出, 子句部分語法跟 LOAD DATA 完全一樣<br>需使用 IFNULL 將 null 轉為空字串, 因為 INTO OUTFILE 預設會將 null 轉為 n<br>以下為 FIELDS 子句意思：</li>
</ul>
<p><strong>TERMINATED BY</strong>: 表示 <code>|</code> 為 field 跟 field 之間的間隔<br><strong>ENCLOSED BY</strong>: 表示每一個 field 的內容都會由 <code>&quot;</code> 包住<br><strong>ESCAPE BY</strong>: 標示跳脫用字元, 不過預設就是 <code>\</code>, 因此這個可省略<br>LINES 子句：<br><strong>STRINGS BY</strong>: 表示 <code>[</code> 開頭算一行的開始<br><strong>TERMINATED BY</strong>: 表示 <code>]\r\n</code> 為一行的結束, 正常 Linux 只需 <code>\n</code> 即可, 但考量到 Windows 環境, 因此多加了 <code>\r</code></p>
<h6 id="MySQL-中-如果目標-server-並不支援-LOAD-DATA-INFILE-那有什麼解法？"><a href="#MySQL-中-如果目標-server-並不支援-LOAD-DATA-INFILE-那有什麼解法？" class="headerlink" title="MySQL 中, 如果目標 server 並不支援 LOAD DATA INFILE, 那有什麼解法？"></a><strong>MySQL 中, 如果目標 server 並不支援 LOAD DATA INFILE, 那有什麼解法？</strong></h6><p>找一台有支援的使用 LOAD DATA 匯入後, 在匯出 mysqldump file, 再到目標 server 上復原 from mysqldump file</p>
<h6 id="MySQL-中-如果遠端登入使用-LOAD-DATA-匯入檔案操作-在-server-端跟-client-端都要開啟哪一個選項？"><a href="#MySQL-中-如果遠端登入使用-LOAD-DATA-匯入檔案操作-在-server-端跟-client-端都要開啟哪一個選項？" class="headerlink" title="MySQL 中, 如果遠端登入使用 LOAD DATA 匯入檔案操作, 在 server 端跟 client 端都要開啟哪一個選項？"></a><strong>MySQL 中, 如果遠端登入使用 LOAD DATA 匯入檔案操作, 在 server 端跟 client 端都要開啟哪一個選項？</strong></h6><p>local-infile=1</p>
<h6 id="以下的-MySQL-example-code-的意思是？-43"><a href="#以下的-MySQL-example-code-的意思是？-43" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## csv 格式範例：</span><br><span class="line">[&quot;prospect name&quot;|&quot;prospect email&quot;|&quot;prospect country&quot;]</span><br><span class="line">[&quot;Mr. Bogdan Kecman&quot;|&quot;bodgan\@kecman-birds.com&quot;|&quot;Serbia&quot;]</span><br><span class="line">[&quot;Ms. Sveta Smirnova&quot;|&quot;bettasveta\@gmail.com&quot;|&quot;Russia&quot;]</span><br><span class="line">[&quot;Mr. Collin Charles&quot;|&quot;callincollin\@gmail.com&quot;|&quot;Malaysia&quot;]</span><br><span class="line">[&quot;Ms. Sveta A. Smirnova&quot;|&quot;bettasveta\@gmail.com&quot;|&quot;Russia&quot;]</span><br><span class="line"></span><br><span class="line">## SQL 範例</span><br><span class="line">LOAD DATA INFILE &#x27;/tmp/birdwatcher-prospects.csv&#x27;</span><br><span class="line">INTO TABLE birdwatchers.birdwatcher_prospects_import</span><br><span class="line">FIELDS TERMINATED BY &#x27;|&#x27; ENCLOSED BY &#x27;&quot;&#x27; ESCAPED BY &#x27;\\&#x27;</span><br><span class="line">LINES STARTING BY &#x27;[&#x27; TERMINATED BY &#x27;]\r\n&#x27;</span><br><span class="line">IGNORE 1 LINES</span><br><span class="line">(prospect_name, prospect_email, prospect_country);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Answer</strong>:<br>從 csv 檔讀取資料並匯入 database.table</li>
</ul>
<p><strong>FIELD TERMINATED BY</strong>: field 跟 field 之間由 <code>,</code> 區隔開來<br><strong>OPTIONALLY</strong>: 有則處理, 沒有則不執行<br><strong>ENCLOSED BY</strong>: 使用 <code>ENCLOSED BY &#39;&quot;&#39;</code>, 當 <code>&quot; (doube quote)</code> 有出現時, 會將兩個 <code>&quot; (double quote)</code> 之間的內容視為一個 column 的內容, 若沒出現則不使用, 為了應付某些 filed 的內容其實是 text, 會用 <code>&quot; (double quote)</code> 包住, 但內容有許多 <code>,(comma)</code><br><strong>IGNORE 1 LINES</strong>: 表示忽略第一行, 因為第一行是 field name, 我們並不會用到<br><strong>@niente</strong>: 因為 csv 檔中某些欄位的資料我們並不需要, 因此在建立 table 時只需要建立我們需要的 column, 在匯入時, 將沒用到的 fieldd 按照 csv 上的順序標示為 <code>@niente</code> (只要是變數就行, 名稱不重要), 這樣就不會將資料匯入啦<br><strong>@family, SET family</strong>: 可以在 LOAD DATA 的過程中, 針對 csv 上特定的 column 做處理, 匯入完成後就已經會是處理好的</p>
<h6 id="以下的-MySQL-example-code-的意思是？-44"><a href="#以下的-MySQL-example-code-的意思是？-44" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">LOAD DATA INFILE &#x27;/tmp/Clements-Checklist-6.9-final.csv&#x27;</span><br><span class="line">INTO TABLE rookery.clements_list_import</span><br><span class="line">FIELDS TERMINATED BY &#x27;,&#x27; OPTIONALLY ENCLOSED BY &#x27;&quot;&#x27;</span><br><span class="line">IGNORE 1 LINES;</span><br><span class="line">(id, change_type, @niente, @niente,</span><br><span class="line">scientific_name, english_name,</span><br><span class="line">@niente, bird_order, @family, @niente,</span><br><span class="line">@niente, @niente, @niente, @niente,</span><br><span class="line">@niente, @niente, @niente, @niente);</span><br><span class="line">SET family = SUBSTRING(@family, 1, LOCATE(&#x27; (&#x27;, @family) );</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 csv 檔讀取資料並匯入 database.table<br><strong>FIELD TERMINATED BY</strong>: field 跟 field 之間由 <code>,</code> 區隔開來<br><strong>OPTIONALLY</strong>: 有則處理, 沒有則不執行<br><strong>ENCLOSED BY</strong>: 使用 <code>ENCLOSED BY &#39;&quot;&#39;</code>, 當 <code>&quot; (doube quote)</code> 有出現時, 會將兩個 <code>&quot; (double quote)</code> 之間的內容視為一個 column 的內容, 若沒出現則不使用, 為了應付某些 filed 的內容其實是 text, 會用 <code>&quot; (double quote)</code> 包住, 但內容有許多 <code>,(comma)</code><br><strong>IGNORE 1 LINES</strong>: 表示忽略第一行, 因為第一行是 field name, 我們並不會用到<br><strong>@niente</strong>: 因為 csv 檔中某些欄位的資料我們並不需要, 因此在建立 table 時只需要建立我們需要的 column, 在匯入時, 將沒用到的 fieldd 按照 csv 上的順序標示為 <code>@niente</code> (只要是變數就行, 名稱不重要), 這樣就不會將資料匯入啦<br><strong>@family, SET family</strong>: 可以在 LOAD DATA 的過程中, 針對 csv 上特定的 column 做處理, 匯入完成後就已經會是處理好的</li>
</ul>
<h6 id="使用-MySQL-時-當遇到-warning-時-如何顯示-warning"><a href="#使用-MySQL-時-當遇到-warning-時-如何顯示-warning" class="headerlink" title="使用 MySQL 時, 當遇到 warning 時, 如何顯示 warning?"></a><strong>使用 MySQL 時, 當遇到 warning 時, 如何顯示 warning?</strong></h6><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW WARNINGS;</span><br></pre></td></tr></table></figure>

<h6 id="以下的-MySQL-example-code-的意思是？-45"><a href="#以下的-MySQL-example-code-的意思是？-45" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">LOAD DATA INFILE &#x27;/tmp/Clements-Checklist-6.9-final.csv&#x27;</span><br><span class="line">INTO TABLE rookery.clements_list_import</span><br><span class="line">FIELDS TERMINATED BY &#x27;,&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>讀取 csv 檔並 insert 到指定 database.table, 以 <code>,</code> 為 filed 跟 field 之間的分隔點</li>
</ul>
<h6 id="MySQL-中-當我在-CREATE-TABLE-時-如果-column-name-可能是-MySQL-的保留字-那我要用什麼符號將-column-name-包住？"><a href="#MySQL-中-當我在-CREATE-TABLE-時-如果-column-name-可能是-MySQL-的保留字-那我要用什麼符號將-column-name-包住？" class="headerlink" title="MySQL 中, 當我在 CREATE TABLE 時, 如果 column name 可能是 MySQL 的保留字, 那我要用什麼符號將 column name 包住？"></a><strong>MySQL 中, 當我在 CREATE TABLE 時, 如果 column name 可能是 MySQL 的保留字, 那我要用什麼符號將 column name 包住？</strong></h6><p><em>` `</em> (backquote) 符號</p>
<h6 id="MySQL-中-若要執行-LOCK-TABLE-需先把哪一個選項關閉-以避免-LOCK-TABLE-與-TRANSACTION-相互影響？"><a href="#MySQL-中-若要執行-LOCK-TABLE-需先把哪一個選項關閉-以避免-LOCK-TABLE-與-TRANSACTION-相互影響？" class="headerlink" title="MySQL 中, 若要執行 LOCK TABLE, 需先把哪一個選項關閉, 以避免 LOCK TABLE 與 TRANSACTION 相互影響？"></a><strong>MySQL 中, 若要執行 LOCK TABLE, 需先把哪一個選項關閉, 以避免 LOCK TABLE 與 TRANSACTION 相互影響？</strong></h6><p>AUTOCOMMIT</p>
<h6 id="MySQL-中-目前-innoDB-是如何處理死鎖的？"><a href="#MySQL-中-目前-innoDB-是如何處理死鎖的？" class="headerlink" title="MySQL 中, 目前 innoDB 是如何處理死鎖的？"></a><strong>MySQL 中, 目前 innoDB 是如何處理死鎖的？</strong></h6><p>將持有最少行級排他鎖的 transaction rollback</p>
<h6 id="以下的-MySQL-example-code-中-當兩個-transaction-同時執行時-很可能會產生哪一種問題？"><a href="#以下的-MySQL-example-code-中-當兩個-transaction-同時執行時-很可能會產生哪一種問題？" class="headerlink" title="以下的 MySQL example code 中, 當兩個 transaction 同時執行時, 很可能會產生哪一種問題？"></a><strong>以下的 MySQL example code 中, 當兩個 transaction 同時執行時, 很可能會產生哪一種問題？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">事務1</span><br><span class="line">    START TRANSACTION;</span><br><span class="line">    UPDATE StockPrice SET close = 45.50 WHERE stock_id = 4 and date = &#x27;2002-05-01&#x27;;</span><br><span class="line">    UPDATE StockPrice SET close = 19.80 WHERE stock_id = 3 and date = &#x27;2002-05-02&#x27;;</span><br><span class="line">    COMMIT;</span><br><span class="line">事務2</span><br><span class="line">    START TRANSACTION;</span><br><span class="line">    UPDATE StockPrice SET high = 20.12 WHERE stock_id = 3 and date = &#x27;2002-05-02&#x27;;</span><br><span class="line">    UPDATE StockPrice SET high = 47.20 WHERE stock_id = 4 and date = &#x27;2002-05-01&#x27;;</span><br><span class="line">    COMMIT;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>死鎖, 即事務 1, 2 同時執行了第一條 update, 這時第一句 update 作用的 row 已被鎖住, 而當事務 1, 2 嘗試執行第二句 update 時, 發現該 row 已被鎖住, 彼此都在等對方釋放鎖, 故又稱為死鎖</li>
</ul>
<h6 id="以下的-MySQL-形容-屬於-ACID-中的哪一種？"><a href="#以下的-MySQL-形容-屬於-ACID-中的哪一種？" class="headerlink" title="以下的 MySQL 形容, 屬於 ACID 中的哪一種？"></a><strong>以下的 MySQL 形容, 屬於 ACID 中的哪一種？</strong></h6><ul>
<li><strong>Example</strong>:<br>一旦事務提交，則其所做的修改就會永久保存到數據庫中。此時即使系統崩潰，修改的數據也不會丟失。持久性是個有點模糊的概念，因為實際上持久性也分很多不同的級別。有些持久性策略能夠提供非常強的安全保障，而有些則未必。而且不可能有能做到100％的持久性保證的策略（如果數據庫本身就能做到真正的持久性，那麼備份又怎麼能增加持久性呢？）</li>
<li><strong>Answer</strong>:<br>durability (持久性)</li>
</ul>
<h6 id="以下的-MySQL-形容-屬於-ACID-中的哪一種？-1"><a href="#以下的-MySQL-形容-屬於-ACID-中的哪一種？-1" class="headerlink" title="以下的 MySQL 形容, 屬於 ACID 中的哪一種？"></a><strong>以下的 MySQL 形容, 屬於 ACID 中的哪一種？</strong></h6><ul>
<li><strong>Example</strong>:<br>通常來說，一個事務所做的修改在最終提交以前，對其他事務是不可見的</li>
<li><strong>Answer</strong>:<br>isolation (隔離性)</li>
</ul>
<h6 id="以下的-MySQL-形容-屬於-ACID-中的哪一種？-2"><a href="#以下的-MySQL-形容-屬於-ACID-中的哪一種？-2" class="headerlink" title="以下的 MySQL 形容, 屬於 ACID 中的哪一種？"></a><strong>以下的 MySQL 形容, 屬於 ACID 中的哪一種？</strong></h6><ul>
<li><strong>Example</strong>:<br>數據庫總是從一個一致性的狀態轉換到另外一個一致性的狀態。在前面的例子中，一致性確保了，即使在執行第三、四條語句之間時系統崩潰，支票賬戶中也不會損失200美元，因為事務最終沒有提交，所以事務中所做的修改也不會保存到數據庫中。</li>
<li><strong>Answer</strong>:<br>consistency (一致性)</li>
</ul>
<h6 id="以下的-MySQL-形容-屬於-ACID-中的哪一種？-3"><a href="#以下的-MySQL-形容-屬於-ACID-中的哪一種？-3" class="headerlink" title="以下的 MySQL 形容, 屬於 ACID 中的哪一種？"></a><strong>以下的 MySQL 形容, 屬於 ACID 中的哪一種？</strong></h6><ul>
<li><strong>Example</strong>:<br>一個事務必須被視為一個不可分割的最小工作單元，整個事務中的所有操作要麼全部提交成功，要麼全部失敗回滾，對於一個事務來說，不可能只執行其中的一部分操作</li>
<li><strong>Answer</strong>:<br>atomicity (原子性)</li>
</ul>
<h6 id="MySQL-中的-ACID-分別是哪四種特性？"><a href="#MySQL-中的-ACID-分別是哪四種特性？" class="headerlink" title="MySQL 中的 ACID, 分別是哪四種特性？"></a><strong>MySQL 中的 ACID, 分別是哪四種特性？</strong></h6><p>atomicity (原子性)<br>consistency (一致性)<br>isolation (隔離性)<br>durability (持久性)</p>
<h6 id="以下的-MySQL-Image-是？？"><a href="#以下的-MySQL-Image-是？？" class="headerlink" title="以下的 MySQL Image 是？？"></a><strong>以下的 MySQL Image 是？？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f8F7UIcwsl1kqV9s8A-iZ62JiTHlM4hYJCsrvNeyVmTS_UlzKN97od8Ii-JRNAfYH5aH7xP5TopMTZdN-5YiNeWoI5q3_ptgXzreCB1EqaOlNi22_meBIrlSkRhCDb5zLE2IH2yeZlB6trQKVSyv8zYA=w1559-h744-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>MySQL 邏輯架構圖</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-46"><a href="#以下的-MySQL-example-code-的意思是？-46" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=rookery  --start-position=&quot;1284889&quot; --to-last-log \</span><br><span class="line">            binaryLogAbsoluteLocation |</span><br><span class="line">            mysql --user=userName --password</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 binary log 備份中, 從 position 1284889 開始復原, 直到最後一個 log, 復原範圍有包含 1284889</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-47"><a href="#以下的-MySQL-example-code-的意思是？-47" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=databaseName--stop-position=&quot;1258707&quot; \</span><br><span class="line">             binaryLogAbsoluteLocation |</span><br><span class="line">             mysql --user=userName --password</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 binary log 備份中, 復原到 position 1258707, 復原範圍不包含 1258707</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-48"><a href="#以下的-MySQL-example-code-的意思是？-48" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># at 1258707</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258778 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">SET TIMESTAMP=1410887424/*!*/;</span><br><span class="line">SET @@session.sql_mode=0/*!*/;</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1258778</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258900 </span><br><span class="line">Query thread_id=382 exec_time=0 error_code=0</span><br><span class="line">use `rookery`/*!*/;</span><br><span class="line">SET TIMESTAMP=1410887424/*!*/;</span><br><span class="line"></span><br><span class="line">DELETE FROM birds_simple WHERE common_name LIKE &#x27;%Blue%&#x27;</span><br><span class="line">/*!*/;</span><br><span class="line"></span><br><span class="line"># at 1258900</span><br><span class="line">#140916 13:10:24 server id 1 end_log_pos 1258927 Xid = 45248</span><br><span class="line"></span><br><span class="line">COMMIT/*!*/;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>binary log 中的一次 transaction 的紀錄, 1258707 為起點, 1258900 為終點, 1258927 為下一個起點</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-49"><a href="#以下的-MySQL-example-code-的意思是？-49" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqlbinlog --database=databaseName \</span><br><span class="line">            /binaryLogAbsoluteLocation &gt; whateverNameYouLike.txt</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 binary log 匯出成 txt 檔, 方便手動尋找 position</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-50"><a href="#以下的-MySQL-example-code-的意思是？-50" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dLHgEznBsXr7t-82j2rYygjpH1OHPP0bZCGAqyJ5WQFhUTvuc0_niupQiQAqC_vQustP5808xVodm9edAGaMUkzw_VQXiCF54XsSSSPmb3_3z38vlhj1AAKAh3LQfQXcy4xw9CUOMFHm3TWUURcUfWfQ=w554-h172-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES WHERE Variable_Name LIKE &#x27;datadir&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>取得實際檔案存放位置</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-51"><a href="#以下的-MySQL-example-code-的意思是？-51" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eCOB4piETTlFOeCde2FZYK5Pvg5nEZtsfQO-EFuQkSf14JOwJafQQdkQzrIlrzHiPPmyuS0YI00jSXOmCxephH3nA0-IQXRKUvWXMplnGbDs-beIAPokuysuWARL7r24FXEkICxpWctx1uSqN2El5YXA=w1980-h262-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW MASTER STATUS;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示當前的 binary log</li>
</ul>
<p><strong>Binlog_Do_DB</strong>: 指定哪些資料庫才要記錄到 binary log<br><strong>Binlog_Ignore_DB</strong>: 指定哪些資料庫不要記錄到 binary log<br><strong>Executed_Gtid_Set</strong>: 已經執行的 transaction 編號</p>
<h6 id="MySQL-中-何謂-DDL"><a href="#MySQL-中-何謂-DDL" class="headerlink" title="MySQL 中, 何謂 DDL?"></a><strong>MySQL 中, 何謂 DDL?</strong></h6><p>Data Definition Language, 例如 CREATE, DROP, ALTER</p>
<h6 id="以下的-MySQL-example-code-的意思是？-52"><a href="#以下的-MySQL-example-code-的意思是？-52" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW BINARY LOGS</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示 binary log 是否有啟動<br>若有則顯示 log<br>若無則返回錯誤 <code>ERROR 1381 (HY000): You are not using binary logging</code></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是？-53"><a href="#以下的-MySQL-example-code-的意思是？-53" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">log-bin</span><br><span class="line">binlog-ignore-db=mysql</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>啟動 binary log 功能<br>不 log mysql 這個 table, 安全考量</li>
</ul>
<h6 id="MySQL-中-如果我想要從一個-dump-file-中只復原一部分的-table-該怎麼做？"><a href="#MySQL-中-如果我想要從一個-dump-file-中只復原一部分的-table-該怎麼做？" class="headerlink" title="MySQL 中, 如果我想要從一個 dump file 中只復原一部分的 table, 該怎麼做？"></a><strong>MySQL 中, 如果我想要從一個 dump file 中只復原一部分的 table, 該怎麼做？</strong></h6><p>  修改 dump file, 只留下開頭, 結尾變數, 以及需要的 table 段落<br>  或是修改 create database, 改成一個臨時的 database name, 匯出後在從該臨時 database 中取出資料, 完成後再刪掉該 temporary database<br>  或是賦予一個臨時使用者該 table 的權限, 讓這個使用者去執行 restore</p>
<h6 id="以下的-MySQL-example-code-的意思是？-54"><a href="#以下的-MySQL-example-code-的意思是？-54" class="headerlink" title="以下的 MySQL example code 的意思是？"></a><strong>以下的 MySQL example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqldump --user=admin_backup --password --lock-tables \</span><br><span class="line">          --databases rookery --tables birds &gt; birds-humans.sql</span><br><span class="line"></span><br><span class="line">mysqldump --user=admin_backup --password --lock-tables \</span><br><span class="line">          --databases birdwatchers --tables humans &gt;&gt; birds-humans.sql</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>備份兩個資料庫的不同資料表, 但只產生一個 dump file</li>
</ul>
<h6 id="以下的-shell-script-的意思是"><a href="#以下的-shell-script-的意思是" class="headerlink" title="以下的 shell script 的意思是?"></a><strong>以下的 shell script 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">my_user=<span class="hljs-string">&#x27;admin_back&#x27;</span></span><br><span class="line">my_pwd=<span class="hljs-string">&#x27;my_silly_password&#x27;</span></span><br><span class="line"></span><br><span class="line">db1=<span class="hljs-string">&#x27;rookery&#x27;</span></span><br><span class="line">db2=<span class="hljs-string">&#x27;birdwatchers&#x27;</span></span><br><span class="line"></span><br><span class="line">date_today=$(<span class="hljs-built_in">date</span> +%Y-%m-%d)</span><br><span class="line"></span><br><span class="line">backup_dir=<span class="hljs-string">&#x27;/data/backup/&#x27;</span></span><br><span class="line">dump_file=<span class="hljs-variable">$db1</span>-<span class="hljs-variable">$db2</span>-<span class="hljs-variable">$date_today</span><span class="hljs-string">&#x27;.sql&#x27;</span></span><br><span class="line"></span><br><span class="line">/usr/bin/mysqldump --user=<span class="hljs-variable">$my_usr</span> --password=<span class="hljs-variable">$my_pwd</span> --lock-tables \</span><br><span class="line">                   --databases <span class="hljs-variable">$db1</span> <span class="hljs-variable">$db2</span> &gt; $backup_dir<span class="hljs-variable">$dump_file</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">exit</span></span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>備份 MySQL Database 的 script</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是"><a href="#以下的-MySQL-example-code-的意思是" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">LOCK TABLES `bird_families` WRITE;</span><br><span class="line"></span><br><span class="line">/*!40000 ALTER TABLE `bird_families` DISABLE KEYS */;</span><br><span class="line"></span><br><span class="line">INSERT INTO `bird_families` VALUES</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/*!40000 ALTER TABLE `bird_families` ENABLE KEYS */;</span><br><span class="line"></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>通常還原資料, 在執行 INSERT 敘述時, 會先 DISABLE KEYS, 等到 INSERT 都完成後, 再 ENABLE KEYS, 這樣的效率會比 INSERT 時一筆筆的 INSERT INDEX 來得好</li>
</ul>
<h6 id="MySQL-dump-復原資料時-預設會覆蓋掉原本存在的資料嗎？"><a href="#MySQL-dump-復原資料時-預設會覆蓋掉原本存在的資料嗎？" class="headerlink" title="MySQL dump 復原資料時, 預設會覆蓋掉原本存在的資料嗎？"></a><strong>MySQL dump 復原資料時, 預設會覆蓋掉原本存在的資料嗎？</strong></h6><p>會哦, 因為會先 drop 現存的同名 table, 再 insert</p>
<h6 id="以下的-MySQL-example-code-的意思是-1"><a href="#以下的-MySQL-example-code-的意思是-1" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqldump --user=specifiedUserAndHostName \</span><br><span class="line">          --password --lock-all-tables </span><br><span class="line">          --all-databases &gt; /preferredLocationAndFileName.sql</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><strong>–user</strong>: 要求 mysqlsump 使用 <code>admin_backup</code> 這個帳號與 MySQL Server 互動<br><strong>–password</strong>: 指定使用帳號的密碼<br><strong>–lock-all-tables</strong>: 在開始備份前, 先把所有資料表鎖定<br><strong>–all-databases</strong>: 指定匯出所有資料庫</li>
</ul>
<h6 id="以下位於-dump-檔的-MySQL-example-code-的意思是"><a href="#以下位於-dump-檔的-MySQL-example-code-的意思是" class="headerlink" title="以下位於 dump 檔的 MySQL example code 的意思是?"></a><strong>以下位於 dump 檔的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><strong>*!40101</strong>: 當 MySQL 版本在 4.01.01 以上時, 該行指令才會執行<br>設定一個變數 @OLD_CHARACTER_SET_CLIENT, 並將目前的通用變數 <code>CHARACTER_SET_CLIENT</code> 儲存起來</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-2"><a href="#以下的-MySQL-example-code-的意思是-2" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT &#x27;roleName&#x27; TO &#x27;userName&#x27;@&#x27;hostName&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>賦予使用者 Role 權限</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-3"><a href="#以下的-MySQL-example-code-的意思是-3" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE ROLE &#x27;roleName&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立 Role, 可賦予 Role 權限, 在賦予使用者 Role</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-4"><a href="#以下的-MySQL-example-code-的意思是-4" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SET ROLE &#x27;admin_import_role&#x27;;</span><br><span class="line"></span><br><span class="line">LOAD DATA INFILE</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">SET ROLE NONE;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當該使用者有被賦予該 Role 時, 可切換該 Role<br>執行完權限後, 登出 Role</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-5"><a href="#以下的-MySQL-example-code-的意思是-5" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">RENAME USER &#x27;lena_stankoska&#x27;@&#x27;lena_stankoska_home&#x27;</span><br><span class="line">TO &#x27;lena&#x27;@&#x27;stankoskahouse.com&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>重新命名使用者帳號</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-6"><a href="#以下的-MySQL-example-code-的意思是-6" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW PROCESSLIST;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當我們刪除一個使用者後, 如果該使用者在當下仍與 Server 處於一個連線狀態中, 那該使用者依然可以對資料庫進行操作, 這時可以透過 SHOW PROCESSLIST 列出連線, 並使用 <code>kill processId</code> 刪除該連線<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eITBPO8i_Eaq2_BvUbQNGY-rY5vbz9kVaNMCkotQXVIUkzjkjh6t0y1UI_gH04U9JrBvLNX8fSKCmBYx_5nMG9RV6mGCWg50y4g8XZoqqF4HyruWRhd9Mowml7yKFOmZl3d_PP49EmQtgbzJt2h-Qzvw=w2940-h374-no?authuser=2"></li>
</ul>
<h6 id="MySQL-中-當我刪除一個使用者後-如果該使用者在當下仍跟-Server-處於連線狀態-該使用者還能操作資料庫嗎？"><a href="#MySQL-中-當我刪除一個使用者後-如果該使用者在當下仍跟-Server-處於連線狀態-該使用者還能操作資料庫嗎？" class="headerlink" title="MySQL 中, 當我刪除一個使用者後, 如果該使用者在當下仍跟 Server 處於連線狀態, 該使用者還能操作資料庫嗎？"></a><strong>MySQL 中, 當我刪除一個使用者後, 如果該使用者在當下仍跟 Server 處於連線狀態, 該使用者還能操作資料庫嗎？</strong></h6><p>  可以</p>
<h6 id="以下的-MySQL-example-code-的意思是-7"><a href="#以下的-MySQL-example-code-的意思是-7" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">REVOKE ALL PRIVILEGES</span><br><span class="line">ON rookery.*</span><br><span class="line">FROM &#x27;michael_stone&#x27;@&#x27;localhost&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 REVOKE 語法, 從 <code>&#39;michael_stone@localhost&#39;</code> user 身上收回 rookery 資料庫的所有的權限</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-8"><a href="#以下的-MySQL-example-code-的意思是-8" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON rookery.*</span><br><span class="line">TO &#x27;admin_granter&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;avocet_123&#x27;</span><br><span class="line">WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">GRANT ALL PRIVILEGES ON birdwatchers.*</span><br><span class="line">TO &#x27;admin_granter&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;avocet_123&#x27;</span><br><span class="line">WITH GRANT OPTION;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>透過 <strong>WITH GRANT OPTION</strong> 語法, 可以將自身擁有的權限賦予給其他帳號</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-9"><a href="#以下的-MySQL-example-code-的意思是-9" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;admin_import&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;another_pwd_789&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT FILE ON *.*</span><br><span class="line">TO &#x27;admin_import&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立一個可從檔案匯入資料的帳號, 擁有權限的帳號相當於可以讀取 MySQL 在主機上有權觸及的任何檔案, 並且可以把資料匯入到任何一個資料庫, 反之, 也可從資料庫會出資料, 甚至是含有密碼的資料庫</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-10"><a href="#以下的-MySQL-example-code-的意思是-10" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;admin_restore&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;different_pwd_456&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT INSERT, LOCK TABLES, CREATE,</span><br><span class="line">CREATE TEMPORARY TABLES, INDEX, ALTER</span><br><span class="line">ON rookery.*</span><br><span class="line">TO &#x27;admin_restore&#x27;@&#x27;localhost&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT INSERT, LOCK TABLES, CREATE,</span><br><span class="line">CREATE TEMPORARY TABLES, INDEX, ALTER</span><br><span class="line">ON birdwatchers.*</span><br><span class="line">TO &#x27;admin_restore&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立一個專門還原備份資料的使用者<br>要從 dump file 復原, 所以必須要具有 INSERT 權限<br>復原時為了能鎖定資料表, 因此需要 LOCK TABLES 權限<br>要重建資料表, 因此需要 CREATE 權限<br>要重建 index, 因此需要 INDEX 權限<br>dump 內的 SQL 敘述可能會修改資料表, 因此需要 ALTER 權限<br>如果想把資料還原至臨時資料表, 那就需要 CREATE TEMPORARY TABLES 權限<br>如果還有包含 TRIGGER 或 VIEW, 那就要加上 CREATE VIEW 和 TRIGGER 權限</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-11"><a href="#以下的-MySQL-example-code-的意思是-11" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;admin_backup&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;its_password_123&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT SELECT, LOCK TABLES</span><br><span class="line">ON rookery.*</span><br><span class="line">TO &#x27;admin_backup&#x27;@&#x27;localhost&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT SELECT, LOCK TABLES</span><br><span class="line">ON birdwatchers.*</span><br><span class="line">TO &#x27;admin_backup&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立一個管理備份用的帳號, 賦予 SELECT 權限, 所以可讀取資料庫, 因為在備份的過程中必須 lock table, 所以賦予 LOCK TABLES 權限, 只限定特定資料庫</li>
</ul>
<h6 id="以下的-Shell-script-example-code-的意思是"><a href="#以下的-Shell-script-example-code-的意思是" class="headerlink" title="以下的 Shell script example code 的意思是?"></a><strong>以下的 Shell script example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">mysql_connect=&quot;mysql --user root -pmy_pwd&quot;</span><br><span class="line"></span><br><span class="line">results=`$mysql_connect --skip-column-names \</span><br><span class="line">         --execute &#x27;SHOW TABLES FROM birdwatchers;&#x27;`</span><br><span class="line"></span><br><span class="line">items=$(echo $results | tr &quot; &quot; &quot;\n&quot;)</span><br><span class="line"></span><br><span class="line">for item in $items</span><br><span class="line">do</span><br><span class="line"></span><br><span class="line">  if [ $item = &#x27;humans&#x27; ] ||</span><br><span class="line">     [ $item = &#x27;birder_families&#x27; ] ||</span><br><span class="line">     [ $item = &#x27;birding_events_children&#x27; ]</span><br><span class="line">  then</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br><span class="line"></span><br><span class="line">  `$mysql_connect --execute &quot;GRANT SELECT ON birdwatchers.$item \</span><br><span class="line">                             TO &#x27;lena_stankoska&#x27;@&#x27;lena_stankoska_home&#x27;&quot;`</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>由於 MySQL 中, 如果要 GRANT 特定權限給特定 table 必須要一個一個指定, 所以使用 shell script 來批量 GRANT</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-12"><a href="#以下的-MySQL-example-code-的意思是-12" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT COLUMN_GET(choices, answer AS CHAR)</span><br><span class="line">  AS &#x27;Birding Site&#x27;,</span><br><span class="line">COUNT(*) AS &#x27;Votes&#x27;,</span><br><span class="line">CONCAT( TRUNCATE( (COUNT(*) / @fav_site_total) * 100, 1), &#x27;%&#x27;)</span><br><span class="line">  AS &#x27;Percent&#x27;</span><br><span class="line">FROM survey_answers</span><br><span class="line">JOIN survey_questions USING(question_id)</span><br><span class="line">WHERE survey_id = 1</span><br><span class="line">AND question_id = 1</span><br><span class="line">GROUP BY answer;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>TRUNCATE() 的 arg1 表示要處理的 input, arg2 表示小數位 1 位之後都要拿掉</li>
</ul>
<h6 id="以下的-MySQL-function-的差異是"><a href="#以下的-MySQL-function-的差異是" class="headerlink" title="以下的 MySQL function 的差異是?"></a><strong>以下的 MySQL function 的差異是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ROUND()</span><br><span class="line">FLOOR()</span><br><span class="line">CEILING()</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>四捨五入, 無條件捨去, 無條件進位</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-13"><a href="#以下的-MySQL-example-code-的意思是-13" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT COLUMN_GET(choices, answer AS CHAR)</span><br><span class="line">  AS &#x27;Birding Site&#x27;,</span><br><span class="line">COUNT(*) AS &#x27;Votes&#x27;,</span><br><span class="line">(COUNT(*) / @fav_site_total) AS &#x27;Percent&#x27;</span><br><span class="line">FROM survey_answers</span><br><span class="line">JOIN survey_questions USING(question_id)</span><br><span class="line">WHERE survey_id = 1</span><br><span class="line">AND question_id = 1</span><br><span class="line">GROUP BY answer;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>@fav_site_total 為 variable, 需事先定義</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-14"><a href="#以下的-MySQL-example-code-的意思是-14" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SET @fav_site_total =</span><br><span class="line">(SELECT COUNT(*)</span><br><span class="line">FROM survey_answers</span><br><span class="line">JOIN survey_questions USING(question_id)</span><br><span class="line">WHERE survey_id = 1</span><br><span class="line">AND question_id = 1);</span><br><span class="line"></span><br><span class="line">SELECT @fav_site_total;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>@fav_site_total 為變數, assign 一段 SQL query</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-15"><a href="#以下的-MySQL-example-code-的意思是-15" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT IFNULL(COLUMN_GET(choices, answer AS CHAR), &#x27;total&#x27;)</span><br><span class="line">AS &#x27;Birding Site&#x27;, COUNT(*) AS &#x27;Votes&#x27;</span><br><span class="line">FROM survey_answers</span><br><span class="line">JOIN survey_questions USING(question_id)</span><br><span class="line">WHERE survey_id = 1</span><br><span class="line">AND question_id = 1</span><br><span class="line">GROUP BY answer WITH ROLLUP;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 COLUMN_GET(), 從 choices column 取值。 其為 MariaDB 的 blob data type, 可以存多組 key/value, 並且取值時要指定型別</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-16"><a href="#以下的-MySQL-example-code-的意思是-16" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT NOW(), event_date, start_time,</span><br><span class="line">CONCAT(</span><br><span class="line">   DATEDIFF(event_date, DATE(NOW())), &#x27; Days, &#x27;,</span><br><span class="line">   DATE_FORMAT(TIMEDIFF(start_time, TIME(NOW())), &#x27;%k hours, %i minutes&#x27;))</span><br><span class="line">   AS &#x27;Time to Event&#x27;</span><br><span class="line">FROM birding_events;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 DATEDIFF() 取得 <strong>event_date</strong> 以及 <strong>NOW()</strong> 的差異天數<br>使用 TIMEDIFF() 將 start_time 以及現在的時間的差異 <strong>小時, 分鐘</strong> 取出<br>再使用 CONCAT 串起來<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dnV6FOj-6J3wQ-FDwa2S46j11ngndzbvAaG03B6HA7oQrTP1xyyDigAyt4L-qgZWdgSAiG9JPg3DSEETU8rqnl7q5dTdUysgbXBYqh2ZMJHvKie7t4eFJWbbST28-cRH7DzQpkmhskx7zx2wI4tS8w7Q=w1350-h150-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-17"><a href="#以下的-MySQL-example-code-的意思是-17" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CURDATE() AS &#x27;Today&#x27;,</span><br><span class="line">DATE_FORMAT(membership_expiration, &#x27;%M %e, %Y&#x27;)</span><br><span class="line">   AS &#x27;Date Membership Expires&#x27;,</span><br><span class="line">DATEDIFF(membership_expiration, CURDATE())</span><br><span class="line">   AS &#x27;Days Until Expiration&#x27;</span><br><span class="line">FROM humans</span><br><span class="line">WHERE human_id = 4;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 DATEDIFF() 來比較兩個日期時間的差異天數<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f9w98Lp6bWxrsSeOPErWilxclYurqga7yfCDB3gdoR_J4CG_nYoUasEeGzfUdkH3JuFIvNQkfIz7pF6s-wXCh5KiucijT9sI9CjWe2aF4UpHQ5dwQiMsNvnD2V5f1cS4wMxoZV74RgnfGRlRdFTE2QfQ=w1098-h166-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-18"><a href="#以下的-MySQL-example-code-的意思是-18" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">COUNT(time_seen) AS &#x27;Sightings Recorded&#x27;</span><br><span class="line">FROM bird_sightings</span><br><span class="line">JOIN humans USING(human_id)</span><br><span class="line">WHERE CONCAT(QUARTER(time_seen), YEAR(time_seen)) =</span><br><span class="line">CONCAT(</span><br><span class="line">   QUARTER(</span><br><span class="line">      STR_TO_DATE(</span><br><span class="line">         PERIOD_ADD( EXTRACT(YEAR_MONTH FROM CURDATE()), -3),</span><br><span class="line">                             &#x27;%Y%m&#x27;) ),</span><br><span class="line">   YEAR(</span><br><span class="line">      STR_TO_DATE(</span><br><span class="line">         PERIOD_ADD( EXTRACT(YEAR_MONTH FROM CURDATE()), -3),</span><br><span class="line">                             &#x27;%Y%m&#x27;) ) )</span><br><span class="line">GROUP BY human_id LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>先用 EXTRACT() 將 YEAR_MONTH 從目前時間取出, 接著使用 PERIOD_ADD() 減掉 3 個月, 再用 STR_TO_DATE 設定成 ‘%Y%m’ 格式, 最後再用 QUARTER() 以及 YEAR 算出第幾季以及第幾年<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eU2uwBaix5YszaenNWm8fXL3IJ0ayqe9qp8apx8-Nq-vJgUYvpbajziTM2EFmPxruDe5_oUEeWgdnxnHAaqResY3qLFF0RpN8IA_n3r-TCjneLaCexff3MWUz8_4u4Q7Hr46ZlNd_jXvvcWrX7XP71_A=w722-h282-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-19"><a href="#以下的-MySQL-example-code-的意思是-19" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT TIME(NOW()),</span><br><span class="line">TIME_TO_SEC(NOW()),</span><br><span class="line">TIME_TO_SEC(NOW()) / 60 /60 AS &#x27;Hours&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>僅將 <strong>時間</strong> 部分轉換成秒數, 即今天至今已過了幾秒<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dKyHGO5w46f2XGJMjIE2hm8CLTOHEtA6ummhPc2JtSWVfW1zPZp0kfdg4psDTciLU5Jh8lgEUjJqd-RGGE3CjwdkHE_xqH4Yh215D-TEW2cvmkr3BsW3iL1c0zMODa_L4U2BY6U4uT1jSR71wWO5CTEA=w976-h156-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-20"><a href="#以下的-MySQL-example-code-的意思是-20" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE bird_sightings</span><br><span class="line">SET time_seen = DATE_ADD(time_seen, INTERVAL &#x27;1 2&#x27; DAY_HOUR)</span><br><span class="line">WHERE sighting_id = 16;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 DATE_ADD(), 增加 1 天 2 小時</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-21"><a href="#以下的-MySQL-example-code-的意思是-21" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE humans</span><br><span class="line">SET membership_expiration = DATE_ADD(membership_expiration, INTERVAL -1 YEAR)</span><br><span class="line">WHERE CONCAT(name_first, SPACE(1), name_last) = &#x27;Melissa Lee&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當使用負號, DATE_ADD() 也有 DATE_SUB() 的效果</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-22"><a href="#以下的-MySQL-example-code-的意思是-22" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE humans</span><br><span class="line">SET membership_expiration = DATE_SUB(membership_expiration, INTERVAL 1 YEAR)</span><br><span class="line">WHERE CONCAT(name_first, SPACE(1), name_last) = &#x27;Melissa Lee&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>更新 membership_expiration, 使用 DATE_SUB 扣掉一年</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-23"><a href="#以下的-MySQL-example-code-的意思是-23" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE humans</span><br><span class="line">SET membership_expiration = DATE_ADD(membership_expiration, INTERVAL 3 MONTH)</span><br><span class="line">WHERE country_id = &#x27;uk&#x27;</span><br><span class="line">AND membership_expiration &gt; CURDATE( );</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>更新 membership_expiration, 使用 DATE_ADD 將日期往後增加三個月</li>
</ul>
<h6 id="以下的-MySQL-my-cnf-example-code-的意思是？"><a href="#以下的-MySQL-my-cnf-example-code-的意思是？" class="headerlink" title="以下的 MySQL my.cnf example code 的意思是？"></a><strong>以下的 MySQL my.cnf example code 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">default-time-zone=&#x27;GMT&#x27;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 server 的預設時區改為 GMT</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-24"><a href="#以下的-MySQL-example-code-的意思是-24" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS &#x27;Bird&#x27;,</span><br><span class="line">CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">DATE_FORMAT(time_seen, &#x27;%r&#x27;) AS &#x27;System Time Spotted&#x27;,</span><br><span class="line">DATE_FORMAT(CONVERT_TZ(time_seen, &#x27;US/Eastern&#x27;, &#x27;Europe/Rome&#x27;), &#x27;%r&#x27;) </span><br><span class="line">  AS &#x27;Birder Time Spotted&#x27;</span><br><span class="line">FROM bird_sightings</span><br><span class="line">JOIN humans USING(human_id)</span><br><span class="line">JOIN rookery.birds USING(bird_id)</span><br><span class="line">JOIN rookery.conservation_status USING(conservation_status_id) LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 CONVERT_TZ, arg1 為時間, arg2 為來源時區, arg3 為欲轉換成的時區, 再將結果作為 parameter 帶入 DATE_FORMAT()<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cRNgaEJnYozPr1Fu1JgGhNK1m9xvtJa_FMBBI1f_4VxpztvbMOG51HJseURsQ594Lm3nCVpCizBHk43n3zdaS0hyNqgUla1qMncCrOlegqsA6PUZDcfCZ4xdmNXZfNDm0PzrmznB-F2Pv_JHCykDF8gg=w1194-h210-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-25"><a href="#以下的-MySQL-example-code-的意思是-25" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;time_zone&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>取得 MySQL 系統時區<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3d4VGASGTQBeW0k4Vl5RMAB4soLpPjR0DmM8GvLBhA6nTnohK7dkDxDEwBZ35QbYmV0vgqt3kE7yaJXG4NrB0oICf12ZkudAVgi1s_fvLG_OqofnS8cv8WULW7JfjEF81cDhwfgqUFLB748n2PzmDIDig=w408-h142-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-26"><a href="#以下的-MySQL-example-code-的意思是-26" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT DATE_FORMAT(CURDATE(), GET_FORMAT(DATE,&#x27;EUR&#x27;))</span><br><span class="line">   AS &#x27;Date in Europe&#x27;,</span><br><span class="line">DATE_FORMAT(CURDATE(), GET_FORMAT(DATE,&#x27;USA&#x27;))</span><br><span class="line">   AS &#x27;Date in U.S.&#x27;,</span><br><span class="line">REPLACE(DATE_FORMAT(CURDATE(), GET_FORMAT(DATE,&#x27;USA&#x27;)), &#x27;.&#x27;, &#x27;-&#x27;)</span><br><span class="line">   AS &#x27;Another Date in U.S.&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 GET_FORMAT 取得特定地區的時間格式, 再將結果帶入 DATE_FORMAT 完成格式設定<br>使用 REPLACE 將不喜歡的格式做客製化替換<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f4lntKBqX4j2wgHYDVmtHRmM3rsj5T69tGNW1_T_NK13JKp5-GZAseiMbDlkmWtIEELMCrr58GMREp2RM1s1gZ7_LyDep5lqzlom536LkFYaoy5cnaGliBOj4rBAi2OLQj2LjLgVOKhUJZ-YNfLrzwFQ=w852-h142-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-27"><a href="#以下的-MySQL-example-code-的意思是-27" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS &#x27;Endangered Bird&#x27;,</span><br><span class="line">CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">DATE_FORMAT(time_seen, &#x27;%W, %M %e, %Y&#x27;) AS &#x27;Date Spotted&#x27;,</span><br><span class="line">TIME_FORMAT(time_seen, &#x27;%l:%i %p&#x27;) AS &#x27;Time Spotted&#x27;</span><br><span class="line">FROM bird_sightings</span><br><span class="line">JOIN humans USING(human_id)</span><br><span class="line">JOIN rookery.birds USING(bird_id)</span><br><span class="line">JOIN rookery.conservation_status USING(conservation_status_id)</span><br><span class="line">WHERE conservation_category = &#x27;Threatened&#x27; LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 DATE_FORMAT, TIME_FORMAT 從指定時間擷取並輸入定義的格式, 格式碼可<a target="_blank" rel="noopener" href="https://lh3.googleusercontent.com/pw/ACtC-3fRVByzBoNC2ZHa5xcOibwQ4dg92GqTXG5GfTA4jGHwkUSKd-8Ut45re0xSI_QqBPteoUB6qiTdKQzOo8EeH2Qz8SrF_mbO6609SVRaOubpuyb-IobR676pAgkC4YCTdpmVnb4ZhfAeonbBMH4p1Bj31A=w1112-h1600-no?authuser=0">參考</a><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dtMv8Io-btkq2UQwoqVM0uo_vYJC6QCr29XDqc4lQ8ayt1h2d4vT_XURAirpy34KHND13o5DmB6Lp-gCMrIfG6di0ygI6u7vjT995tPwFABlkSkb10yj2QVCCAYuEdfhDwFclx5BdMhSU3MT9-aaQVow=w1200-h202-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-28"><a href="#以下的-MySQL-example-code-的意思是-28" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT time_seen,</span><br><span class="line">EXTRACT(YEAR_MONTH FROM time_seen) AS &#x27;Year &amp; Month&#x27;,</span><br><span class="line">EXTRACT(MONTH FROM time_seen) AS &#x27;Month Only&#x27;,</span><br><span class="line">EXTRACT(HOUR_MINUTE FROM time_seen) AS &#x27;Hour &amp; Minute&#x27;,</span><br><span class="line">EXTRACT(HOUR FROM time_seen) AS &#x27;Hour Only&#x27;</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 EXTRACT() 從指定時間中擷取特定格式, EXTRACT() 支援格式可<a target="_blank" rel="noopener" href="https://lh3.googleusercontent.com/pw/ACtC-3dqUVTlPUMHdpBmM_QU6i0LgZseJ0T01Unirov9bdR7H9beJRhoE29RZ1K9E0RECrFuQajKnsHk6daK_EYacSFAfGFAyO_bKmCz9ncwRfglSYkX3xi4Fc-StfdMS8Y8iOwMlR_u9-sEbHtG-dAZ5LfP4Q=w696-h1704-no?authuser=0">參考</a><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-29"><a href="#以下的-MySQL-example-code-的意思是-29" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT time_seen,</span><br><span class="line">EXTRACT(YEAR_MONTH FROM time_seen) AS &#x27;Year &amp; Month&#x27;,</span><br><span class="line">EXTRACT(MONTH FROM time_seen) AS &#x27;Month Only&#x27;,</span><br><span class="line">EXTRACT(HOUR_MINUTE FROM time_seen) AS &#x27;Hour &amp; Minute&#x27;,</span><br><span class="line">EXTRACT(HOUR FROM time_seen) AS &#x27;Hour Only&#x27;</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 EXTRACT() 從指定時間中擷取特定格式, EXTRACT() 支援格式可<a target="_blank" rel="noopener" href="https://lh3.googleusercontent.com/pw/ACtC-3dqUVTlPUMHdpBmM_QU6i0LgZseJ0T01Unirov9bdR7H9beJRhoE29RZ1K9E0RECrFuQajKnsHk6daK_EYacSFAfGFAyO_bKmCz9ncwRfglSYkX3xi4Fc-StfdMS8Y8iOwMlR_u9-sEbHtG-dAZ5LfP4Q=w696-h1704-no?authuser=0">參考</a><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3frOI8ATEShz_N1HZyXw8r-SeRN7VbBylhxdQ9zkCd8IYaTedU6_o7JH5TyRvIaUuS5-NPis4LpS9E1jzVQLAsih-DAfAxIdXdOKlmWB3QGWoLsvrGrCQCwbsF6-niBP2wA8TPeKgCXmVGM_M2ICx2meg=w1356-h218-no?authuser=0"></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-30"><a href="#以下的-MySQL-example-code-的意思是-30" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS &#x27;Endangered Bird&#x27;,</span><br><span class="line">CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">CONCAT(DAYNAME(time_seen), &#x27;, &#x27;, MONTHNAME(time_seen), SPACE(1),</span><br><span class="line">  DAY(time_seen), &#x27;, &#x27;, YEAR(time_seen)) AS &#x27;Date Spotted&#x27;,</span><br><span class="line">CONCAT(HOUR(time_seen), &#x27;:&#x27;, MINUTE(time_seen),</span><br><span class="line">  IF(HOUR(time_seen) &lt; 12, &#x27; a.m.&#x27;, &#x27; p.m.&#x27;)) AS &#x27;Time Spotted&#x27;</span><br><span class="line">FROM bird_sightings</span><br><span class="line">JOIN humans USING(human_id)</span><br><span class="line">JOIN rookery.birds USING(bird_id)</span><br><span class="line">JOIN rookery.conservation_status USING(conservation_status_id)</span><br><span class="line">WHERE conservation_category = &#x27;Threatened&#x27; LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eoskj7AUogq4jmWfLb7-dI5iGJUWz8UV6L5eDFXrafIGL9w5ZaVIHs9-XN3KiLWMuTQ_HKFvIpc6Za5G5YYlSJaQNwxp_gzNWrG9uYEwiEXvI8jKywSlEVtFVn3uzSRQq8Hw7fRgDQ-amYaa1-nW7mGA=w1352-h212-no?authuser=0"><br>使用 DAYNAME(), MONTHNAME, 分別擷取帶入時間, 並輸出成 <strong>Day 的英文單字</strong>, <strong>月份英文單字</strong><br>使用 DAY(), YEAR(), HOUR(), MINUTE(), 分別擷取帶入時間的 <strong>天</strong>, <strong>年</strong>, <strong>時</strong>, <strong>分</strong><br>最後判斷, 如果 HOUR 小於 12, 即為上午 a.m., 大於 12, 即下午 p.m.</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-31"><a href="#以下的-MySQL-example-code-的意思是-31" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">time_seen, YEAR(time_seen), MONTH(time_seen), DAY(time_seen),</span><br><span class="line">MONTHNAME(time_seen), DAYNAME(time_seen)</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">WHERE bird_id = 309 \G</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3c3GhlwuBEL-0uPRC9FJ-ImkNJxSXb1HDkRz571CZkFs3ZfoH2f2TV3_t4QVeTvWIVyKMo6VniY6dzp-VfpvOiFWCzOEeCB0n1JysgCnDgVMGRWX7Da6IQY9jbsKy0i_9yDxGgQi6jKjkAgGkN62ZIXTQ=w1074-h260-no?authuser=0"><br>使用 YEAR(), MONTH(), DAY(), 分別擷取帶入時間的 <strong>年</strong>, <strong>月</strong>, <strong>日</strong><br>使用 MONTHNAME(), DAYNAME(), 分別擷取並輸出成帶入時間的 <strong>月份英文單字</strong>, <strong>day 的英文單字</strong></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-32"><a href="#以下的-MySQL-example-code-的意思是-32" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">time_seen, HOUR(time_seen), MINUTE(time_seen), SECOND(time_seen)</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">WHERE bird_id = 309 \G</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dlhJ2763E6CXuF5pp3k00zJTFc_7OJgHVvjth0NQCHyrPvo5pmY37E_9M14U5iyuZdAKV_ehH9IY1lGBpj5cKq0wM17AiyKUUbjFeGy4IyK_Oi335QExW8xShQH8eTfpI3uJRnuH2g2Q3u4_0zBWMnHA=w1072-h204-no?authuser=0"><br>使用 HOUR(), MINUTE(), SECOND(), 分別擷取帶入時間的 <strong>小時</strong>, <strong>分</strong>, <strong>秒</strong></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-33"><a href="#以下的-MySQL-example-code-的意思是-33" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">time_seen, DATE(time_seen), TIME(time_seen)</span><br><span class="line">FROM bird_sightings</span><br><span class="line">JOIN humans USING(human_id)</span><br><span class="line">WHERE bird_id = 309;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3feB2ngYRfVdXNaL3c94cuoPCGBleI_fkgIZxm-CgRI6ALNMgPcRshpeLH_ZGDJtO1NZG8axLMUO7h4W-2m6IXVBgsAn7imnLlN1w9EMLOe83frCffIpBtJN5IDcfqwdqrsmjvxk8zpebhTSIExlYgKaA=w1254-h152-no?authuser=0"><br>使用 DATE(), TIME() 分別擷取帶入時間的 <strong>年月日</strong> 以及 <strong>時間</strong> 部分</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-34"><a href="#以下的-MySQL-example-code-的意思是-34" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line">ROUND((UNIX_TIMESTAMP( ) - UNIX_TIMESTAMP(time_seen)) / 60 / 60 / 24)</span><br><span class="line">   AS &#x27;Days Since Spotted&#x27;</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">WHERE bird_id = 309;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eLNtMOG3MF8YjmvFeuyU0E_1DFukmbz5JOT_ZUOH6GXoUnsjao1HKaWmlr7tjvXHeCo1G2DnO8iOBgqa1SvPgKgYbL2hsdrMTyhERwgLWbHrO2ShsIbjIbhY5asOEUyPYYh_CO62Me0zz4SRLOB822Jg=w618-h152-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS &#x27;Birdwatcher&#x27;,</span><br><span class="line"># UNIX_TIMESTAMP() 為取得 1970 年 1 月 1 號至今所經過的秒數</span><br><span class="line"># 帶入特定時間點並經過計算後, 可取得特定時間點至今所經過的天數</span><br><span class="line">ROUND((UNIX_TIMESTAMP() - UNIX_TIMESTAMP(time_seen)) / 60 / 60 / 24)</span><br><span class="line">   AS &#x27;Days Since Spotted&#x27;</span><br><span class="line">FROM bird_sightings JOIN humans USING(human_id)</span><br><span class="line">WHERE bird_id = 309;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-35"><a href="#以下的-MySQL-example-code-的意思是-35" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT NOW(), CURDATE(), CURTIME();</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3f2Q6KEQsP2PqS2DY-m8VwUYZAvw2gifnl2WZQgR-4ftknaxYFuLYMskW8AHy2Rejfk8iYdsP1ubbgILMXyl9_Q440wcP9YiqzNjsRQ7w_jop4QttbJsFZdZgSZg4HA1_zxLT8L54XkbgAjPqYFdxOMgw=w732-h102-no?authuser=0"><br>分別是取得當前日期時間, 當前日期, 當前時間</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-36"><a href="#以下的-MySQL-example-code-的意思是-36" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT NOW(), SLEEP(4) AS &#x27;Zzz&#x27;, SYSDATE(), SLEEP(2) AS &#x27;Zzz&#x27;, SYSDATE();</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dF4ZjW2F4Us_lz5QG_fhn3FgK_vDcwYXzsH84ISaw24SAKvuMXX1Om0FLDBv0CjOPDctRE4vhWsq_TESBvtvOhw5xX37XjGLJ8aJfMfcOhTnMap2rS4zEenBIVFUJZRPVxIXx2uuwcpL7up-iua1iGCA=w1658-h102-no?authuser=0"><br>NOW() 是取得 SQL Query 執行當下的時間, 而 SYSDATE() 是取得該函式執行當下的時間, 如果要在複雜的 SQL Query 當中取得某段函式的執行時間時, 便可使用 SYSDATE()</li>
</ul>
<h6 id="MySQL-中-以下幾個函式的功能都一樣-為什麼需要這麼多不同名稱卻同功能的函示？"><a href="#MySQL-中-以下幾個函式的功能都一樣-為什麼需要這麼多不同名稱卻同功能的函示？" class="headerlink" title="MySQL 中, 以下幾個函式的功能都一樣, 為什麼需要這麼多不同名稱卻同功能的函示？"></a><strong>MySQL 中, 以下幾個函式的功能都一樣, 為什麼需要這麼多不同名稱卻同功能的函示？</strong></h6><ul>
<li><strong>Example</strong>:<br>NOW(), CURRENT_TIMESTAMP(), LOCALTIME(), LOCALTIMESTAMP()</li>
<li><strong>Answer</strong>:<br>因為為了配合其他種類的資料庫, 像是 PostgreSQL, Oracle, Sybase 等等…<br>這樣原本使用其他資料庫的應用程式就可以在不更動程式碼下直接更換資料庫</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-37"><a href="#以下的-MySQL-example-code-的意思是-37" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT UNCOMPRESS(birding_background) AS Background</span><br><span class="line">FROM humans</span><br><span class="line">WHERE name_first = &#x27;Melissa&#x27; AND name_last = &#x27;Lee&#x27; \G</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>UNCOMPRESS function 可以解壓縮 COMPRESS function 壓縮過的欄位資料</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-38"><a href="#以下的-MySQL-example-code-的意思是-38" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT INTO humans</span><br><span class="line">(formal_title, name_first, name_last, join_date, birding_background)</span><br><span class="line">VALUES(&#x27;Ms&#x27;, &#x27;Melissa&#x27;, &#x27;Lee&#x27;, CURDATE(), COMPRESS(&quot;lengthy background...&quot;));</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>COMPRESS function 可以壓縮字串, 適用於大量的 text, 效能有待研究</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-39"><a href="#以下的-MySQL-example-code-的意思是-39" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT bird_name, gender_age, bird_image</span><br><span class="line">FROM bird_images</span><br><span class="line">WHERE bird_name LIKE &#x27;%Plover%&#x27;</span><br><span class="line">ORDER BY CONVERT(gender_age USING utf8)</span><br><span class="line">LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 gender_age 的 character set 暫時轉為 utf8</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-40"><a href="#以下的-MySQL-example-code-的意思是-40" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT bird_name, gender_age, bird_image</span><br><span class="line">FROM bird_images</span><br><span class="line">WHERE bird_name LIKE &#x27;%Plover%&#x27;</span><br><span class="line">ORDER BY CONVERT(gender_age, CHAR)</span><br><span class="line">LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 gender_age 的 column type 暫時轉換為 CHAR, 只反映在結果上, 並不會真正更動資料庫</li>
</ul>
<h6 id="MySQL-中-如果-column-type-是-enum-那排序上會依照-enum-的排序還是-collation-的排序？"><a href="#MySQL-中-如果-column-type-是-enum-那排序上會依照-enum-的排序還是-collation-的排序？" class="headerlink" title="MySQL 中, 如果 column type 是 enum, 那排序上會依照 enum 的排序還是 collation 的排序？"></a><strong>MySQL 中, 如果 column type 是 enum, 那排序上會依照 enum 的排序還是 collation 的排序？</strong></h6><p>enum 的排序</p>
<h6 id="以下的-MySQL-example-code-的意思是-41"><a href="#以下的-MySQL-example-code-的意思是-41" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT sorting_id, bird_name, bird_image</span><br><span class="line">FROM bird_images ORDER BY CAST(sorting_id AS INT) LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 sorting_id column type 暫時轉換為 INT, 只作用到結果, 不會變動 column type</li>
</ul>
<h6 id="以下的-MySQL-example-為什麼-sorting-id-的排列方式是如此"><a href="#以下的-MySQL-example-為什麼-sorting-id-的排列方式是如此" class="headerlink" title="以下的 MySQL example 為什麼 sorting_id 的排列方式是如此?"></a><strong>以下的 MySQL example 為什麼 sorting_id 的排列方式是如此?</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fPAS4KqqtzGeAU12yKAWD2BP9Zen-xVonh7-Gh6E5EE8jc8HenpqFzj3OUG58SVoA7N2tqY4__6RJoTRi4j05QyWYjoJ8NRj7yt5AThkItAJjPcGd6uGvFIWrnHmlc4Pk4JibmiSHF_A3_PpBedzAzjA=w1044-h280-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT sorting_id, bird_name, bird_image</span><br><span class="line">FROM bird_images</span><br><span class="line">ORDER BY sorting_id</span><br><span class="line">LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>因為 sorting_id column 的 column type 被設為 char, 而非 int</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-42"><a href="#以下的-MySQL-example-code-的意思是-42" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><p><img src="https://lh3.googleusercontent.com/pw/ACtC-3dZmUV2lxpqaVP8bgD6SCJAjA-vaPSY0RQaYfWCYqo0NlODpYV_1xfvpo_BKcVeVquShiT50JFTyzzjUTd56MBxHDgizOwff27--7doto15R4hZVqJRdqCg5iq5o9p9BGA9EoLtZTUzRWb0QdOO-3Whig=w710-h160-no?authuser=0"></p>
<ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS Original,</span><br><span class="line">REPLACE(common_name, &#x27;Gt.&#x27;, &#x27;Great&#x27;) AS Replaced</span><br><span class="line">FROM birds</span><br><span class="line">WHERE common_name REGEXP &#x27;Gt.&#x27; LIMIT 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>REPLACE() 跟 REPLACE 不同<br>直接尋找 ‘Gt.’ 並將之替換為 ‘Great’, 只改變顯示結果, 並不會真正的更動資料庫</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-43"><a href="#以下的-MySQL-example-code-的意思是-43" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><p><img src="https://lh3.googleusercontent.com/pw/ACtC-3dBcljw4liFBsgiYPQ9qeStIrWDoE22Xba3Zyd4446hYqcdDfCmTWijLiSWx-5bMkxdlZQ5M8H8nToPlxfjf79xR710ax3LazSzRJOEv_0xxvh5ApzpT-IY2R5peojEnIX1fVOpC2FQRCvsrUnUOk-W_Q=w710-h160-no?authuser=0"></p>
<ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS Original,</span><br><span class="line">INSERT(common_name, LOCATE(&#x27;Gt.&#x27;, common_name), 3, &#x27;Great&#x27;) AS Adjusted</span><br><span class="line">FROM birds</span><br><span class="line">WHERE common_name REGEXP &#x27;Gt.&#x27; LIMIT 1;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>INSERT() 跟 INSERT 不同, INSERT() 只會將結果替換掉指定的字串, 不會真正的更動資料庫<br>arg1 為要作用的欄位, arg2 為替換起始位置, arg3 為總共要覆蓋原本字串多少個字, arg4 為要用來替換的字串<br>如上 example, LOCATE 會回傳 1, 所以從 1 開始替換 ‘Gt.’ 共三個字, 所以會全部覆蓋掉<br>若不希望覆蓋掉任何字, arg3 可指定 0</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-44"><a href="#以下的-MySQL-example-code-的意思是-44" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS Name,</span><br><span class="line">common_name AS Bird,</span><br><span class="line">SUBSTRING(comments, 1, 25) AS Comments</span><br><span class="line">FROM birdwatchers.bird_sightings</span><br><span class="line">JOIN birdwatchers.humans USING(human_id)</span><br><span class="line">JOIN rookery.birds USING(bird_id)</span><br><span class="line">WHERE MATCH (comments) AGAINST (&#x27;beautiful&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(name_first, SPACE(1), name_last) AS Name,</span><br><span class="line">common_name AS Bird,</span><br><span class="line"># 從第 1 個位置開始取, 取 25 個字</span><br><span class="line">SUBSTRING(comments, 1, 25) AS Comments</span><br><span class="line">FROM birdwatchers.bird_sightings</span><br><span class="line">JOIN birdwatchers.humans USING(human_id)</span><br><span class="line">JOIN rookery.birds USING(bird_id)</span><br><span class="line"># 唯有先行建立 FULLTEXT INDEX, 方可使用 MATCH ... AGAINST 函數</span><br><span class="line"># 從 &#x27;comments&#x27; column 尋找 &#x27;beautiful&#x27; 字串</span><br><span class="line">WHERE MATCH (comments) AGAINST (&#x27;beautiful&#x27;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-45"><a href="#以下的-MySQL-example-code-的意思是-45" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE FULLTEXT INDEX comment_index</span><br><span class="line">ON bird_sightings (comments);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立 FULLTEXT index 名為 comment_index, 唯有建立 FULLTEXT index 方可使用 match … against 函數</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-46"><a href="#以下的-MySQL-example-code-的意思是-46" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT IGNORE INTO possible_duplicate_email</span><br><span class="line">(human_id, email_address_1, email_address_2, entry_date)</span><br><span class="line">VALUES(LAST_INSERT_ID(), &#x27;bobyfischer@mymail.com&#x27;, &#x27;bobbyfischer@mymail.com&#x27;)</span><br><span class="line">WHERE ABS( STRCMP(&#x27;bobbyrobin@mymail.com&#x27;, &#x27;bobyrobin@mymail.com&#x27;) ) = 1 ;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT IGNORE INTO possible_duplicate_email</span><br><span class="line">(human_id, email_address_1, email_address_2, entry_date)</span><br><span class="line">VALUES(LAST_INSERT_ID(), &#x27;bobyfischer@mymail.com&#x27;, &#x27;bobbyfischer@mymail.com&#x27;)</span><br><span class="line">## ABS 會將 value 轉為絕對值, 即 -1 變成 1, 1 還是 1</span><br><span class="line">## STRCMP 會比較兩個數, 相等則為 0, 否則則為 1 或 -1</span><br><span class="line">WHERE ABS( STRCMP(&#x27;bobbyrobin@mymail.com&#x27;, &#x27;bobyrobin@mymail.com&#x27;) ) = 1 ;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-47"><a href="#以下的-MySQL-example-code-的意思是-47" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT IF(CHAR_LENGTH(comments) &gt; 100), &#x27;long&#x27;, &#x27;short&#x27;)</span><br><span class="line">FROM bird_sightings</span><br><span class="line">WHERE sighting_id = 2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>select <code>&#39;comments&#39;</code> 欄位, 如果長度大於 100, 則回傳 <code>&#39;long&#39;</code>, 反之則回傳 <code>&#39;short&#39;</code></li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-48"><a href="#以下的-MySQL-example-code-的意思是-48" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3fv-rQ7tzspcmyeZ2XQUaRcRD9rrd0RyH-gxr7NOXB-jOBoIUKZRf8Zm9ww6m1veO0MO7Z5F4H4U6Ho4MOpnsiZlm-_kamXXv-Dk3MU8EYSz297cq8MZH56BqOIy_0xaVwBqssH7tsSmAHIcHg8iPr77w=w774-h224-no?authuser=0"><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eTTAw26GSGEeuRePK-a-nHoYnqV-CnjY-sYCnF6QrevQ_Sbnm5J99Mn2tTK_Kkn23uaLSuc9v1K_o7gDKfNOkLxhmX5ilCqlF9zLluV-KtnjEN6q05faeaiVmLTA4MbmEXYPdfteBZezRladlBEhqcmg=w214-h164-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT FIND_IN_SET(&#x27;Anahit Vanetsyan&#x27;, Names) AS Position</span><br><span class="line">  FROM</span><br><span class="line">    (SELECT GROUP_CONCAT(Name ORDER BY join_date) AS Names</span><br><span class="line">     FROM</span><br><span class="line">       ( SELECT CONCAT(name_first, SPACE(1), name_last) AS Name,</span><br><span class="line">         join_date</span><br><span class="line">         FROM humans</span><br><span class="line">         WHERE country_id = &#x27;ru&#x27;)</span><br><span class="line">       AS derived_1 )</span><br><span class="line">    AS derived_2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>GROUP_CONCAT 會將 Name column 的所有姓名連接起來, 並 ORDER BY join_date, 然後 FIND_IN_SET() 從 Name column 中找到 ‘Anahit Vanetsyan’ 的位置</li>
</ul>
<h6 id="以下的-MySQL-example-code-的意思是-49"><a href="#以下的-MySQL-example-code-的意思是-49" class="headerlink" title="以下的 MySQL example code 的意思是?"></a><strong>以下的 MySQL example code 的意思是?</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3evheWl4A6EdFxznfZBHZ2EZrpoCIfbblBndOR4rE69PPacvJNTtvPak2V5f9fqwFWhVdsFnjNKSu49PlvOakOKJMWqvdCBe2JfDetwMba9_gO1z_3zj20FuZwoHJT7ux4V_IS1cdPwFyqekyiGNykNaw=w364-h248-no?authuser=0"><br><img src="https://lh3.googleusercontent.com/pw/ACtC-3e2PdSbQRQ1cIqySO17As5bRqmoyyPF4pWMGWCPPB7YOs3tLsB7t7aV-MQZ3a1pCmJVsJ6h-losYKEbbedwOLjzhu1CIer8tE9pHU5phwm1dlldS3Xj6K-6ZzaCa8gX5wOKkvqtKmFHNrrrX9GZwZXjuw=w264-h248-no?authuser=0"><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">SUBSTRING(common_name, 1, LOCATE(&#x27; Avocet&#x27;, common_name) ) AS &#x27;Avocet&#x27;</span><br><span class="line">FROM birds</span><br><span class="line">JOIN bird_families USING(family_id)</span><br><span class="line">WHERE bird_families.scientific_name = &#x27;Recurvirostridae&#x27;</span><br><span class="line">AND birds.common_name LIKE &#x27;%Avocet%&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>LOCATE 會取得 ‘ Avocet’ 前面那一個空格的位置, 而 SUBSTRING 從第 1 個位置開始取, 取 LOCATE 得到的結果, 正好把 ‘Avocet’ 濾掉</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？"><a href="#以下的-MySQL-query-的意思是？" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | prospect_name                                          |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | Ms.| Caryn-Amy     |           Rose                    |</span><br><span class="line"># | Mr.| Colin         |           Charles                 |</span><br><span class="line"># | Mr.| Kenneth       |           Dyer                    |</span><br><span class="line"># | Ms.| Sveta         |           Smirnova                |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">SELECT SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, 1) AS title,</span><br><span class="line">SUBSTRING_INDEX( SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, 2), &#x27;|&#x27;, -1) AS first_name,</span><br><span class="line">SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, -1) AS last_name</span><br><span class="line">FROM prospects WHERE prospect_id = 7;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">// 取到第一個 &#x27;|&#x27; 之前的所有字串</span><br><span class="line">SELECT SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, 1) AS title,</span><br><span class="line">// 內函數取得第兩個 &#x27;|&#x27; 之前的所有字串, 外函數則是從尾端往前找, 直到找到 &#x27;|&#x27;, 取這之間的字串</span><br><span class="line">SUBSTRING_INDEX( SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, 2), &#x27;|&#x27;, -1) AS first_name,</span><br><span class="line">// 從尾端往前找, 直到找到 &#x27;|&#x27;, 取這之間的字串</span><br><span class="line">SUBSTRING_INDEX(prospect_name, &#x27;|&#x27;, -1) AS last_name</span><br><span class="line">FROM prospects WHERE prospect_id = 7;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-1"><a href="#以下的-MySQL-query-的意思是？-1" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | prospect_name                                          |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | Ms. Caryn-Amy                Rose                      |</span><br><span class="line"># | Mr. Colin                    Charles                   |</span><br><span class="line"># | Mr. Kenneth                  Dyer                      |</span><br><span class="line"># | Ms. Sveta                    Smirnova                  |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">SELECT SUBSTRING(prospect_name, 1, 2) AS title,</span><br><span class="line">SUBSTRING(prospect_name FROM 5 FOR 25) AS first_name,</span><br><span class="line">SUBSTRING(prospect_name, -25) AS last_name</span><br><span class="line">FROM prospects LIMIT 3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">// 從第 1 個開始取, 取 2 個</span><br><span class="line">SELECT SUBSTRING(prospect_name, 1, 2) AS title,</span><br><span class="line">// 從第 5 個開始取, 取 25 個</span><br><span class="line">SUBSTRING(prospect_name FROM 5 FOR 25) AS first_name,</span><br><span class="line">// 取後面算來 25 個</span><br><span class="line">SUBSTRING(prospect_name, -25) AS last_name</span><br><span class="line">FROM prospects LIMIT 3;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-2"><a href="#以下的-MySQL-query-的意思是？-2" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | prospect_name                                          |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"># | Ms. Caryn-Amy                Rose                      |</span><br><span class="line"># | Mr. Colin                    Charles                   |</span><br><span class="line"># | Mr. Kenneth                  Dyer                      |</span><br><span class="line"># | Ms. Sveta                    Smirnova                  |</span><br><span class="line"># +--------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">SELECT LEFT(prospect_name, 2) AS title,</span><br><span class="line">MID(prospect_name, 5, 25) AS first_name,</span><br><span class="line">RIGHT(prospect_name, 25) AS last_name</span><br><span class="line">FROM prospects LIMIT 4;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>LEFT: 從左邊開始取, 取 2 個<br>MID: 從第 5 個開始取, 取 25 個<br>RIGHT: 從後面往前取, 取 25 個</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-3"><a href="#以下的-MySQL-query-的意思是？-3" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(RPAD(common_name, 20, &#x27;.&#x27; ),</span><br><span class="line">RPAD(Families.scientific_name, 15, &#x27;.&#x27;),</span><br><span class="line">Orders.scientific_name) AS Birds</span><br><span class="line">FROM birds</span><br><span class="line">JOIN bird_families AS Families USING(family_id)</span><br><span class="line">JOIN bird_orders AS Orders</span><br><span class="line">WHERE common_name != &#x27;&#x27;</span><br><span class="line">AND Orders.scientific_name = &#x27;Ciconiiformes&#x27;</span><br><span class="line">ORDER BY common_name LIMIT 3;</span><br><span class="line"></span><br><span class="line"># +--------------------------------------------------+</span><br><span class="line"># | Birds                                            |</span><br><span class="line"># +--------------------------------------------------+</span><br><span class="line"># | Abbott&#x27;s Babbler....Pellorneidae...Ciconiiformes |</span><br><span class="line"># | Abbott&#x27;s Booby......Sulidae........Ciconiiformes |</span><br><span class="line"># | Abbott&#x27;s Starling...Sturnidae......Ciconiiformes |</span><br><span class="line"># +--------------------------------------------------+</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>利用 RPAD 將空格填滿, arg1 為作用的 column, arg2 為該 column 預期的字串長度, arg3 為不足字串長度時, 要使用什麼字符將之補滿</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-4"><a href="#以下的-MySQL-query-的意思是？-4" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT QUOTE(common_name)</span><br><span class="line">FROM birds</span><br><span class="line">WHERE common_name LIKE &quot;%Prince%&quot;</span><br><span class="line">ORDER BY common_name;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># 將資料夾上 quote 輸出, 並 escape 特殊符號</span><br><span class="line">SELECT QUOTE(common_name)</span><br><span class="line">FROM birds</span><br><span class="line">WHERE common_name LIKE &quot;%Prince%&quot;</span><br><span class="line">ORDER BY common_name;</span><br><span class="line"></span><br><span class="line"># +----------------------------------+</span><br><span class="line"># | QUOTE(common_name)               |</span><br><span class="line"># +----------------------------------+</span><br><span class="line"># | &#x27;Prince Henry\&#x27;s Laughingthrush&#x27; |</span><br><span class="line"># | &#x27;Prince Ruspoli\&#x27;s Turaco&#x27;       |</span><br><span class="line"># | &#x27;Princess Parrot&#x27;                |</span><br><span class="line"># +----------------------------------+</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-5"><a href="#以下的-MySQL-query-的意思是？-5" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT LCASE(common_name) AS Species,</span><br><span class="line">UCASE(bird_families.scientific_name) AS Family</span><br><span class="line">FROM birds</span><br><span class="line">JOIN bird_families USING(family_id)</span><br><span class="line">WHERE common_name LIKE &#x27;%Wren%&#x27;</span><br><span class="line">ORDER BY Species</span><br><span class="line">LIMIT 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## 將 common_name column 的值轉為小寫</span><br><span class="line">SELECT LCASE(common_name) AS Species,</span><br><span class="line">## 將 scientific_name column 的值轉為大寫</span><br><span class="line">UCASE(bird_families.scientific_name) AS Family</span><br><span class="line">FROM birds</span><br><span class="line">## 經由 family_id JOIN 兩張表</span><br><span class="line">JOIN bird_families USING(family_id)</span><br><span class="line">WHERE common_name LIKE &#x27;%Wren%&#x27;</span><br><span class="line">ORDER BY Species</span><br><span class="line">LIMIT 5;</span><br><span class="line"></span><br><span class="line"># +-------------------------+---------------+</span><br><span class="line"># | Species                 | Family        |</span><br><span class="line"># +-------------------------+---------------+</span><br><span class="line"># | apolinar&#x27;s wren         | TROGLODYTIDAE |</span><br><span class="line"># | band-backed wren        | TROGLODYTIDAE |</span><br><span class="line"># | banded wren             | TROGLODYTIDAE |</span><br><span class="line"># | bar-winged wood-wren    | TROGLODYTIDAE |</span><br><span class="line"># | bar-winged wren-babbler | TIMALIIDAE    |</span><br><span class="line"># +-------------------------+---------------+</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-6"><a href="#以下的-MySQL-query-的意思是？-6" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -p --skip-column-names -e \</span><br><span class="line">&quot;SELECT CONCAT_WS(&#x27;|&#x27;, IFNULL(formal_title, &#x27; &#x27;), IFNULL(name_first, &#x27; &#x27;),</span><br><span class="line">IFNULL(name_last, &#x27; &#x27;), IFNULL(street_address, &#x27; &#x27;),</span><br><span class="line">IFNULL(city, &#x27; &#x27;), IFNULL(state_province, &#x27; &#x27;),</span><br><span class="line">IFNULL(postal_code, &#x27; &#x27;), IFNULL(country_id, &#x27; &#x27;))</span><br><span class="line">FROM birdwatchers.humans WHERE membership_type = &#x27;premium&#x27;</span><br><span class="line">AND membership_expiration &gt; CURDATE();&quot; &gt; rookery_patch_mailinglist.txt</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -p --skip-column-names -e \</span><br><span class="line"># 跳過欄位那一欄不做處理, -p 代表 password, -e 代表執行 &quot;&quot; 內的程式碼</span><br><span class="line"># 使用 &#x27;|&#x27; 來連接並隔開每個 column 的value</span><br><span class="line"># CONCAT_WS, WS 為 with seprarator 的意思</span><br><span class="line">&quot;SELECT CONCAT_WS(&#x27;|&#x27;, IFNULL(formal_title, &#x27; &#x27;), IFNULL(name_first, &#x27; &#x27;),</span><br><span class="line"># 加上 IFNULL, 若 NULL 的話也會輸出空字串, 否則 CONCAT_WS 會不處理直接跳過</span><br><span class="line"># 造成 select 8 個欄位, 但卻只輸出 4 個欄位的值, 也不知道哪個欄位沒值</span><br><span class="line">IFNULL(name_last, &#x27; &#x27;), IFNULL(street_address, &#x27; &#x27;),</span><br><span class="line">IFNULL(city, &#x27; &#x27;), IFNULL(state_province, &#x27; &#x27;),</span><br><span class="line">IFNULL(postal_code, &#x27; &#x27;), IFNULL(country_id, &#x27; &#x27;))</span><br><span class="line">FROM birdwatchers.humans WHERE membership_type = &#x27;premium&#x27;</span><br><span class="line"># 將結果輸出到 txt 檔</span><br><span class="line">AND membership_expiration &gt; CURDATE();&quot; &gt; rookery_patch_mailinglist.txt</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-7"><a href="#以下的-MySQL-query-的意思是？-7" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS &#x27;Bird&#x27;,</span><br><span class="line">conservation_state AS &#x27;Status&#x27;</span><br><span class="line">FROM birds</span><br><span class="line">LEFT JOIN conservation_status USING(conservation_status_id)</span><br><span class="line">WHERE common_name LIKE &#x27;%Egret%&#x27;</span><br><span class="line">ORDER BY Status, Bird;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 birds table select common_name column (命名呈現的 column name 為 Bird), conservation_state column (命名呈現的 column name 為 Status)<br>left join conservation_status table, 透過 conservation_status_id<br>left join 會先取出 birds table, 所以如果並沒有對應的 conservation_status_id 的話, 就會顯示 null<br>像是<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">+--------------------+-----------------+</span><br><span class="line">| Bird               | Status          |</span><br><span class="line">+--------------------+-----------------+</span><br><span class="line">| Great Egret        | NULL            |</span><br><span class="line">| Cattle Egret       | Least Concern   |</span><br><span class="line">| Intermediate Egret | Least Concern   |</span><br><span class="line">| Little Egret       | Least Concern   |</span><br><span class="line">| Snowy Egret        | Least Concern   |</span><br><span class="line">| Reddish Egret      | Near Threatened |</span><br><span class="line">| Chinese Egret      | Vulnerable      |</span><br><span class="line">| Slaty Egret        | Vulnerable      |</span><br><span class="line">+--------------------+-----------------+</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-8"><a href="#以下的-MySQL-query-的意思是？-8" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT book_id, title, status_name</span><br><span class="line">FROM books</span><br><span class="line">JOIN status_names USING(status_id);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>JOIN books 跟 status_names 兩張 table, 因為要用來 connect 兩張 table 的 key 都一樣, 因此使用 USING</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-9"><a href="#以下的-MySQL-query-的意思是？-9" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT book_id, title, status_name</span><br><span class="line">FROM books</span><br><span class="line">JOIN status_names ON(status = status_id);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>JOIN books 跟 status_names 兩張 table, 用 ON 連結 status 以及 status_id 欄位</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-10"><a href="#以下的-MySQL-query-的意思是？-10" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT &#x27;Pelecanidae&#x27; AS &#x27;Family&#x27;,</span><br><span class="line">    COUNT(*) AS &#x27;Species&#x27;</span><br><span class="line">    FROM birds, bird_families AS families</span><br><span class="line">    WHERE birds.family_id = families.family_id</span><br><span class="line">    AND families.scientific_name = &#x27;Pelecanidae&#x27;</span><br><span class="line">UNION</span><br><span class="line">  SELECT &#x27;Ardeidae&#x27;,</span><br><span class="line">    COUNT(*)</span><br><span class="line">    FROM birds, bird_families AS families</span><br><span class="line">    WHERE birds.family_id = families.family_id</span><br><span class="line">    AND families.scientific_name = &#x27;Ardeidae&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">    ## &#x27;Pelacanidae&#x27; 為不存在的欄位, 以純文字賦予欄位值, 結果如下</span><br><span class="line">SELECT &#x27;Pelecanidae&#x27; AS &#x27;Family&#x27;,</span><br><span class="line">    ## Species 為另一個 column</span><br><span class="line">    COUNT(*) AS &#x27;Species&#x27;</span><br><span class="line">    FROM birds, bird_families AS families</span><br><span class="line">    WHERE birds.family_id = families.family_id</span><br><span class="line">    AND families.scientific_name = &#x27;Pelecanidae&#x27;</span><br><span class="line">UNION</span><br><span class="line">    ## 因為使用 Union, 這邊不須再加 alias, 會自動歸類到 &#x27;Family&#x27; column</span><br><span class="line">  SELECT &#x27;Ardeidae&#x27;,</span><br><span class="line">    COUNT(*)</span><br><span class="line">    FROM birds, bird_families AS families</span><br><span class="line">    WHERE birds.family_id = families.family_id</span><br><span class="line">    AND families.scientific_name = &#x27;Ardeidae&#x27;;</span><br><span class="line">    </span><br><span class="line">## +-------------+---------+</span><br><span class="line">## | Family      | Species |</span><br><span class="line">## +-------------+---------+</span><br><span class="line">## | Pelecanidae |      10 |</span><br><span class="line">## | Ardeidae    |     157 |</span><br><span class="line">## +-------------+---------+</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-11"><a href="#以下的-MySQL-query-的意思是？-11" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">DELETE FROM humans, prize_winners</span><br><span class="line">USING humans JOIN prize_winners</span><br><span class="line">WHERE name_first = &#x27;Elena&#x27;</span><br><span class="line">AND name_last = &#x27;Bokova&#x27;</span><br><span class="line">AND email_address LIKE &#x27;%yahoo.com&#x27;</span><br><span class="line">AND humans.human_id = prize_winners.human_id;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">// 同時 delete humans 以及 prize_winners 的資料</span><br><span class="line">// 如果不加 prize_winners, 那該 table 上的資料就</span><br><span class="line">// 不會被刪除</span><br><span class="line">DELETE FROM humans, prize_winners</span><br><span class="line">// JOIN prize_winners table</span><br><span class="line">USING humans JOIN prize_winners</span><br><span class="line">WHERE name_first = &#x27;Elena&#x27;</span><br><span class="line">AND name_last = &#x27;Bokova&#x27;</span><br><span class="line">AND email_address LIKE &#x27;%yahoo.com&#x27;</span><br><span class="line">AND humans.human_id = prize_winners.human_id;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-12"><a href="#以下的-MySQL-query-的意思是？-12" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE TEMPORARY TABLE possible_duplicates</span><br><span class="line">(name_1 varchar(25), name_2 varchar(25));</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立一個臨時的 table, 當退出 MySQL client 時, 該 table 會自動銷毀</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-13"><a href="#以下的-MySQL-query-的意思是？-13" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT INTO humans</span><br><span class="line">(formal_title, name_first, name_last, email_address, better_birders_site)</span><br><span class="line">VALUES(&#x27;Mr&#x27;,&#x27;Barry&#x27;,&#x27;Pilson&#x27;, &#x27;barry@gomail.com&#x27;, 1),</span><br><span class="line">      (&#x27;Ms&#x27;,&#x27;Lexi&#x27;,&#x27;Hollar&#x27;, &#x27;alexandra@mysqlresources.com&#x27;, 1),</span><br><span class="line">      (&#x27;Mr&#x27;,&#x27;Ricky&#x27;,&#x27;Adams&#x27;, &#x27;ricky@gomail.com&#x27;, 1)</span><br><span class="line">ON DUPLICATE KEY</span><br><span class="line">UPDATE better_birders_site = 2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>因為 email_address 有 unique 特性, 所以當 insert 過程中發現有 duplicate 的 row 時, 會 update 該 row 的 better_birders_site column 為 2</li>
</ul>
<h6 id="以下的-MySQL-query-錯誤的原因是？"><a href="#以下的-MySQL-query-錯誤的原因是？" class="headerlink" title="以下的 MySQL query 錯誤的原因是？"></a><strong>以下的 MySQL query 錯誤的原因是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE prize_winners, humans</span><br><span class="line">SET winner_date = CURDATE()</span><br><span class="line">WHERE winner_date IS NULL</span><br><span class="line">AND country_id = &#x27;uk&#x27;</span><br><span class="line">AND prize_winners.human_id = humans.human_id</span><br><span class="line">ORDER BY RAND()</span><br><span class="line">LIMIT 2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>order by 及 limit 只適用於單一 table, 當 update 複數的 table 時就會出錯</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-14"><a href="#以下的-MySQL-query-的意思是？-14" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE prize_winners, humans</span><br><span class="line">SET winner_date = NULL,</span><br><span class="line">    prize_chosen = NULL,</span><br><span class="line">    prize_sent = NULL</span><br><span class="line">WHERE country_id = &#x27;uk&#x27;</span><br><span class="line">AND prize_winners.human_id = humans.human_id;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 human table 中取得 ‘country_id = uk’ 的 row, 再經此找到符合 ‘prize_winners.human_id = humans.human_id’ 的 prize_winners<br>最後 update 這些 prize_winners 的 winner_date, prize_chosen, prize_sent columns</li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-15"><a href="#以下的-MySQL-query-的意思是？-15" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE humans</span><br><span class="line">CHANGE COLUMN formal_title formal_title ENUM(&#x27;Mr.&#x27;,&#x27;Ms.&#x27;,&#x27;Mr&#x27;,&#x27;Ms&#x27;);</span><br><span class="line"></span><br><span class="line">UPDATE humans</span><br><span class="line">SET formal_title = SUBSTRING(formal_title, 1, 2);</span><br><span class="line"></span><br><span class="line">ALTER TABLE humans</span><br><span class="line">CHANGE COLUMN formal_title formal_title ENUM(&#x27;Mr&#x27;,&#x27;Ms&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## 修改 humans table</span><br><span class="line">ALTER TABLE humans</span><br><span class="line">## 將 column formal_title 改成 formal_title, type 為 ENUM(&#x27;Mr.&#x27;, &#x27;Ms.&#x27;, &#x27;Mr&#x27;, &#x27;Ms&#x27;);</span><br><span class="line">CHANGE COLUMN formal_title formal_title ENUM(&#x27;Mr.&#x27;,&#x27;Ms.&#x27;,&#x27;Mr&#x27;,&#x27;Ms&#x27;);</span><br><span class="line"></span><br><span class="line">## 更新 humans table</span><br><span class="line">UPDATE humans</span><br><span class="line">## 更新 formal_title column, 取 formal_title 的值, 從第一個字開始取, 共取兩個字</span><br><span class="line">## 因此 &quot;Mr.&quot; 會變成 &quot;Mr&quot;</span><br><span class="line">SET formal_title = SUBSTRING(formal_title, 1, 2);</span><br><span class="line"></span><br><span class="line">## 同上, 修改 formal_title colum 的 type</span><br><span class="line">ALTER TABLE humans</span><br><span class="line">CHANGE COLUMN formal_title formal_title ENUM(&#x27;Mr&#x27;,&#x27;Ms&#x27;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-query-的意思是？-16"><a href="#以下的-MySQL-query-的意思是？-16" class="headerlink" title="以下的 MySQL query 的意思是？"></a><strong>以下的 MySQL query 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">select common_name as &#x27;hawks&#x27;</span><br><span class="line">from birds</span><br><span class="line">where common_name regexp &#x27;[[:space:]]hawk|[[.hyphen.]]hawk&#x27;</span><br><span class="line">and common_name not regexp &#x27;hawk-owl|hawk owl&#x27;</span><br><span class="line">order by family_id;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## select common_name column, 並定義新欄位名稱為 Hawks</span><br><span class="line">select common_name as &#x27;hawks&#x27;</span><br><span class="line">## 從 birds table</span><br><span class="line">from birds</span><br><span class="line">## common_name 的值必須是 &quot; hawk&quot;, 或是 &quot;-hawk&quot;</span><br><span class="line">where common_name regexp &#x27;[[:space:]]hawk|[[.hyphen.]]hawk&#x27;</span><br><span class="line">## common_name 的值必須不是 &quot;hawk_owl&quot; 或 &quot;hawk owl&quot;</span><br><span class="line">and common_name not regexp &#x27;hawk-owl|hawk owl&#x27;</span><br><span class="line">## 經由 family_id column 排序</span><br><span class="line">order by family_id;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-column-information-中-latin1-bin-的-bin-是什麼意思？"><a href="#以下的-MySQL-column-information-中-latin1-bin-的-bin-是什麼意思？" class="headerlink" title="以下的 MySQL column information 中, latin1_bin 的 bin 是什麼意思？"></a><strong>以下的 MySQL column information 中, latin1_bin 的 bin 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW FULL COLUMNS</span><br><span class="line">FROM birds LIKE &#x27;common_name&#x27; \G</span><br><span class="line"></span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">     Field: common_name</span><br><span class="line">      Type: varchar(255)</span><br><span class="line"> Collation: latin1_bin</span><br><span class="line">      Null: YES</span><br><span class="line">       Key:</span><br><span class="line">   Default: NULL</span><br><span class="line">     Extra:</span><br><span class="line">Privileges: select,insert,update,references</span><br><span class="line">   Comment: </span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>binary 的意思, 表示儲存在該欄位的資料都會以 binary 定序</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？"><a href="#以下的-MySQL-example-code-是什麼意思？" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name AS &#x27;Hawks&#x27;</span><br><span class="line">FROM birds</span><br><span class="line">WHERE common_name REGEXP BINARY &#x27;Hawk&#x27;</span><br><span class="line">AND common_name NOT REGEXP &#x27;Hawk-Owl&#x27;</span><br><span class="line">ORDER BY family_id LIMIT 10;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>一般來說, REGEXP 不會區分大小寫, 若要區分, 可加上 BINARY, 會以二進制定序, h 跟 H 的二進制碼不同, 所以可以區分大小寫</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-1"><a href="#以下的-MySQL-example-code-是什麼意思？-1" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT common_name, scientific_name, family_id</span><br><span class="line">FROM birds</span><br><span class="line">WHERE family_id IN(103, 160, 162, 164)</span><br><span class="line">AND common_name != &#x27;&#x27;</span><br><span class="line">ORDER BY common_name</span><br><span class="line">LIMIT 3, 2;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從第三筆之後開始查詢, 取得兩筆資料, 相當於 offset 3, limit 2</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-2"><a href="#以下的-MySQL-example-code-是什麼意思？-2" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT HIGH_PRIORITY INTO bird_sightings</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>MySQL 預設 insert 的 priority 就大於 select, 但如果預設值被改掉, 就可以使用上面的語法</li>
</ul>
<h6 id="以下的-MySQL-example-code-有個與-MySQL-Client-不方便的地方-是什麼？"><a href="#以下的-MySQL-example-code-有個與-MySQL-Client-不方便的地方-是什麼？" class="headerlink" title="以下的 MySQL example code 有個與 MySQL Client 不方便的地方, 是什麼？"></a><strong>以下的 MySQL example code 有個與 MySQL Client 不方便的地方, 是什麼？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT LOW_PRIORITY INTO bird_sightings</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>在 low priority instruction 被執行之前, client 會一直卡住</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-3"><a href="#以下的-MySQL-example-code-是什麼意思？-3" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT LOW_PRIORITY INTO bird_sightings</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>先完成手邊的工作, 再處理 low priority 的工作</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-4"><a href="#以下的-MySQL-example-code-是什麼意思？-4" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">REPLACE INTO bird_families</span><br><span class="line">(scientific_name, brief_description, order_id)</span><br><span class="line">VALUES(&#x27;Viduidae&#x27;, &#x27;Indigobirds &amp; Whydahs&#x27;, 128),</span><br><span class="line">(&#x27;Estrildidae&#x27;, &#x27;Waxbills, Weaver Finches, &amp; Allies&#x27;, 128),</span><br><span class="line">(&#x27;Ploceidae&#x27;, &#x27;Weavers, Malimbe, &amp; Bishops&#x27;, 128);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將指定的 value insert 到指定的欄位, 如果遇到重複的, 則覆寫, 相當於 Laravel 中的 insertOrUpdate</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-5"><a href="#以下的-MySQL-example-code-是什麼意思？-5" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">UPDATE bird_families, bird_orders</span><br><span class="line">SET bird_families.order_id = bird_orders.order_id</span><br><span class="line">WHERE bird_families.order_id IS NULL</span><br><span class="line">AND cornell_bird_order = bird_orders.scientific_name;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>將 bird_families table 中的 order_id update 為 bird_orders table 中的 order_id<br>只更新 where clause 中限制的 record</li>
</ul>
<h6 id="以下的-MySQL-example-code-是什麼意思？-6"><a href="#以下的-MySQL-example-code-是什麼意思？-6" class="headerlink" title="以下的 MySQL example code 是什麼意思？"></a><strong>以下的 MySQL example code 是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT IGNORE INTO bird_families</span><br><span class="line">(scientific_name, brief_description, cornell_bird_order)</span><br><span class="line">SELECT bird_family, examples, bird_order</span><br><span class="line">FROM cornell_birds_families_orders;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 cornell_birds_families_orders table, select bird_family, examples, bird_order 三個欄位, 並將 select 的結果 insert 到 bird_families table 的 scientific_name, brief_description, cornell_bird_order 欄位, 同時, 若過程中出現錯誤, ignore 錯誤繼續執行</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-為什麼會失敗？"><a href="#以下的-MySQL-example-code-中-為什麼會失敗？" class="headerlink" title="以下的 MySQL example code 中, 為什麼會失敗？"></a><strong>以下的 MySQL example code 中, 為什麼會失敗？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE conservation_status</span><br><span class="line">CHANGE status_id conservation_status_id INT AUTO_INCREMENT PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">ERROR 1068: Multiple primary key defined</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>status_id 欄位原本已經有 primary_key, 這是一個 index<br>上面的語法在原本已經有一個 index 的同時, 又要增加一個 index, 所以報錯<br>應該要先把原本的 index 拿掉</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-為什麼最後一行的-common-name-要重複兩次？"><a href="#以下的-MySQL-example-code-中-為什麼最後一行的-common-name-要重複兩次？" class="headerlink" title="以下的 MySQL example code 中, 為什麼最後一行的 common_name 要重複兩次？"></a><strong>以下的 MySQL example code 中, 為什麼最後一行的 common_name 要重複兩次？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE birds_new</span><br><span class="line">ADD COLUMN body_id CHAR(2) AFTER wing_id,</span><br><span class="line">ADD COLUMN bill_id CHAR(2) AFTER body_id,</span><br><span class="line">ADD COLUMN endangered BIT DEFAULT b&#x27;1&#x27; AFTER bill_id,</span><br><span class="line">CHANGE COLUMN common_name common_name VARCHAR(255);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>第一次是指要變更的 column 名稱<br>第二次是指要變更成哪個名稱</li>
</ul>
<h6 id="以下的-MySQL-example-code-中-在建立-bill-id-column-時-理論上-body-id-column-應該還沒創建出來-那為什麼可以指定-bill-id-after-body-id-呢？"><a href="#以下的-MySQL-example-code-中-在建立-bill-id-column-時-理論上-body-id-column-應該還沒創建出來-那為什麼可以指定-bill-id-after-body-id-呢？" class="headerlink" title="以下的 MySQL example code 中, 在建立 bill_id column 時, 理論上 body_id column 應該還沒創建出來, 那為什麼可以指定 bill_id after body_id 呢？"></a><strong>以下的 MySQL example code 中, 在建立 bill_id column 時, 理論上 body_id column 應該還沒創建出來, 那為什麼可以指定 bill_id after body_id 呢？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER TABLE birds_new</span><br><span class="line">ADD COLUMN body_id CHAR(2) AFTER wing_id,</span><br><span class="line">ADD COLUMN bill_id CHAR(2) AFTER body_id,</span><br><span class="line">ADD COLUMN endangered BIT DEFAULT b&#x27;1&#x27; AFTER bill_id,</span><br><span class="line">CHANGE COLUMN common_name common_name VARCHAR(255);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>在 MySQL ALTER 的過程中, 會先建立一張虛擬的表格, 如果語法執行上都沒有問題, 會用這張虛擬表格取代原本的<br>如果語法有錯, 則會刪除這張虛擬表格</li>
</ul>
<h6 id="MySQL-的-column-property-character-set-以及-collation-分別代表的意思是？"><a href="#MySQL-的-column-property-character-set-以及-collation-分別代表的意思是？" class="headerlink" title="MySQL 的 column property character set 以及 collation, 分別代表的意思是？"></a><strong>MySQL 的 column property <code>character set</code> 以及 <code>collation</code>, 分別代表的意思是？</strong></h6><p>character set: 該欄位會儲存的語言屬於哪一種編碼<br>collation: 該欄位該以什麼樣的語種排序</p>
<h6 id="以下的-MySQL-command-的意思是？"><a href="#以下的-MySQL-command-的意思是？" class="headerlink" title="以下的 MySQL command 的意思是？"></a><strong>以下的 MySQL command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SHOW CREATE TABLE birds \G</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示建立該 table 的語法</li>
</ul>
<h6 id="MySQL-中-CHAR-跟-VARCHAR-使用的大原則是？"><a href="#MySQL-中-CHAR-跟-VARCHAR-使用的大原則是？" class="headerlink" title="MySQL 中, CHAR 跟 VARCHAR, 使用的大原則是？"></a><strong>MySQL 中, CHAR 跟 VARCHAR, 使用的大原則是？</strong></h6><p>如果確切知道有幾個 character, 就使用 CHAR, 否則則使用 VARCHAR</p>
<h6 id="MySQL-中-CHAR-跟-VARCHAR-哪個較不會產生-fragmentation"><a href="#MySQL-中-CHAR-跟-VARCHAR-哪個較不會產生-fragmentation" class="headerlink" title="MySQL 中, CHAR 跟 VARCHAR, 哪個較不會產生 fragmentation?"></a><strong>MySQL 中, CHAR 跟 VARCHAR, 哪個較不會產生 fragmentation?</strong></h6><p>VARCHAR</p>
<h6 id="MySQL-中-CHAR-跟-VARCHAR-哪個使用-index-的-performance-較佳？"><a href="#MySQL-中-CHAR-跟-VARCHAR-哪個使用-index-的-performance-較佳？" class="headerlink" title="MySQL 中, CHAR 跟 VARCHAR, 哪個使用 index 的 performance 較佳？"></a><strong>MySQL 中, CHAR 跟 VARCHAR, 哪個使用 index 的 performance 較佳？</strong></h6><p>CHAR</p>
<h6 id="MySQL-中-當我使用-mysql-client-select-有時會因為資料太多而資料欄位沒有排列好-像下圖一樣-這時候可以使用哪個-command-來顯示正確的格式？"><a href="#MySQL-中-當我使用-mysql-client-select-有時會因為資料太多而資料欄位沒有排列好-像下圖一樣-這時候可以使用哪個-command-來顯示正確的格式？" class="headerlink" title="MySQL 中, 當我使用 mysql client select, 有時會因為資料太多而資料欄位沒有排列好, 像下圖一樣, 這時候可以使用哪個 command 來顯示正確的格式？"></a><strong>MySQL 中, 當我使用 mysql client select, 有時會因為資料太多而資料欄位沒有排列好, 像下圖一樣, 這時候可以使用哪個 command 來顯示正確的格式？</strong></h6><ul>
<li><strong>Example</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3dAIYjJ92lwi-2YKq_9IVVY-779K6GbYuQfgdjCGlSJAgWeaBVWJrzwMtQL2wk6G_o8vLbJuuyIT3BcHq0OTvlw08sMFaZMMytL10EbfhiiIwQyDRglE6XGJMXJlfYVjufFRRSWLIlmTI8pnIniMb71Ww=w3414-h2002-no?authuser=0"></li>
<li><strong>Answer</strong>:<br>可在最後用 <code>\G</code> 取代 <code>;</code></li>
</ul>
<h6 id="MySQL-中-virtualAs-column-type-的作用是？"><a href="#MySQL-中-virtualAs-column-type-的作用是？" class="headerlink" title="MySQL 中, virtualAs column type 的作用是？"></a><strong>MySQL 中, virtualAs column type 的作用是？</strong></h6><p>虛擬 column, 內容來自於其他 column 的計算結果(自定義), 比如說, 新增一個 virtualAs column 叫做 full_name, 自定義內容來自於 first_name + last_name</p>
<h6 id="command-line-中-如果-filesystem-的目前登入者跟-MySQL-的-user-是同一個-那在登入時我還需要使用-mysql-u-username-p-password-嗎？"><a href="#command-line-中-如果-filesystem-的目前登入者跟-MySQL-的-user-是同一個-那在登入時我還需要使用-mysql-u-username-p-password-嗎？" class="headerlink" title="command line 中, 如果 filesystem 的目前登入者跟 MySQL 的 user 是同一個, 那在登入時我還需要使用 mysql -u username -p password 嗎？"></a><strong>command line 中, 如果 filesystem 的目前登入者跟 MySQL 的 user 是同一個, 那在登入時我還需要使用 <code>mysql -u username -p password</code> 嗎？</strong></h6><p>不需要, 直接使用 <code>mysql -p</code> 即可</p>
<h6 id="以下的-mysql-command-的意思是？"><a href="#以下的-mysql-command-的意思是？" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;GRANT ALL ON *.* TO &#x27;russell&#x27;@&#x27;localhost&#x27;;&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>賦予 russell, host 為 localhost, 所有資料庫以及 table 的操作權限<br>第一個 * 的位置代表資料庫, * 表示全部資料庫<br>第二個 * 的位置代表 table, * 表示全部 table</li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-1"><a href="#以下的-mysql-command-的意思是？-1" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;SHOW GRANTS FOR &#x27;russell&#x27;@&#x27;localhost&#x27; \G&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示 russell 的所有權限</li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-2"><a href="#以下的-mysql-command-的意思是？-2" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;GRANT SELECT ON *.* TO &#x27;russell&#x27;@&#x27;localhost&#x27;;&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>給予 russell user, host 為 localhost, select 所有資料庫所有 table 的權限</li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-3"><a href="#以下的-mysql-command-的意思是？-3" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;GRANT USAGE ON *.*</span><br><span class="line">TO &#x27;russell&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;Rover#My_1st_Dog&amp;Not_Yours!&#x27;;&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">## 給予存取所有資料庫所有 table 的權限, 這裡是指可存取的 database 以及 table</span><br><span class="line">## 但並沒有給予任何實際上的權限, 如 select, update, insert</span><br><span class="line">mysql -u root -p -e &quot;GRANT USAGE ON *.*</span><br><span class="line">## 賦予上面的權限給 user russell, host 為 localhost</span><br><span class="line">TO &#x27;russell&#x27;@&#x27;localhost&#x27;</span><br><span class="line">## 密碼為 Rover#My_1st_Dog&amp;Not_Yours!</span><br><span class="line">IDENTIFIED BY &#x27;Rover#My_1st_Dog&amp;Not_Yours!&#x27;;&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-4"><a href="#以下的-mysql-command-的意思是？-4" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysqladmin -u root -p flush-privileges</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>當完成一些設定更新後, 下達上面的指令讓設定生效</li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-5"><a href="#以下的-mysql-command-的意思是？-5" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;SELECT User,Host FROM mysql.user;&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>列出所有的 user 以及 host</li>
</ul>
<h6 id="以下的-mysql-command-的意思是？-6"><a href="#以下的-mysql-command-的意思是？-6" class="headerlink" title="以下的 mysql command 的意思是？"></a><strong>以下的 mysql command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">mysql -u root -p -e &quot;SET PASSWORD FOR &#x27;root&#x27;@&#x27;127.0.0.1&#x27; PASSWORD(&#x27;new_pwd&#x27;);&quot;</span><br><span class="line">mysql -u root -p -e &quot;SET PASSWORD FOR &#x27;root&#x27;@&#x27;localhost&#x27; PASSWORD(&#x27;new_pwd&#x27;);&quot;</span><br><span class="line">mysql -u root -p -e &quot;DROP USER &#x27;root&#x27;@&#x27;%&#x27;;&quot;</span><br><span class="line">mysql -u root -p -e &quot;DROP USER &#x27;&#x27;@&#x27;localhost&#x27;;&quot;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>1, 2 行給 root 的不同 host 設定新密碼, 儘管 127.0.0.1 等於 localhost, 但也必須分別設定密碼<br>3, <code>&#39;root&#39;@&#39;%&#39;</code> 表示不管從任何 host 都可以 claim 自己是 root, 這樣的設定並不安全, 必須刪除<br>4, <code>&#39;&#39;@&#39;localhost&#39;</code> 表示只要是來自 localhost, 任何 username 都被接受, 這樣的設定也不安全, 應該要刪除這樣的 anonymous user</li>
</ul>
<h6 id="Mysql-中-如果搜尋的字串是-開頭-那可以用-index-嗎？"><a href="#Mysql-中-如果搜尋的字串是-開頭-那可以用-index-嗎？" class="headerlink" title="Mysql 中, 如果搜尋的字串是 % 開頭, 那可以用 index 嗎？"></a><strong>Mysql 中, 如果搜尋的字串是 <code>%</code> 開頭, 那可以用 index 嗎？</strong></h6><p>不行</p>
<h6 id="Mysql-中-set-column-type-的特性是？"><a href="#Mysql-中-set-column-type-的特性是？" class="headerlink" title="Mysql 中, set column type 的特性是？"></a><strong>Mysql 中, set column type 的特性是？</strong></h6><p>可指定一個允許輸入值列表, 所有 insert 的值都必須在這列表內才允許輸入, 與 enum 不同之處在於, enum 只允許 insert 一個值, set 允許 insert 零個或多個</p>
<h6 id="如何在已知-root-現有密碼的情況下重新設定-root-密碼？"><a href="#如何在已知-root-現有密碼的情況下重新設定-root-密碼？" class="headerlink" title="如何在已知 root 現有密碼的情況下重新設定 root 密碼？"></a><strong>如何在已知 root 現有密碼的情況下重新設定 root 密碼？</strong></h6><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">mysqladmin -u root -p flush-privileges password</span><br></pre></td></tr></table></figure>


<h6 id="Mysql-中-enum-column-type-的特性是？"><a href="#Mysql-中-enum-column-type-的特性是？" class="headerlink" title="Mysql 中, enum column type 的特性是？"></a><strong>Mysql 中, enum column type 的特性是？</strong></h6><p>可指定一個允許輸入值列表, 所有 insert 的值都必須在這列表內才允許輸入, 與 enum 不同之處在於, enum 只允許 insert 一個值, set 允許 insert 零個或多個</p>
<h6 id="Mysql-中-date-datetime-timestamp-三種-data-type-差異分別是？"><a href="#Mysql-中-date-datetime-timestamp-三種-data-type-差異分別是？" class="headerlink" title="Mysql 中, date, datetime, timestamp, 三種 data type 差異分別是？"></a><strong>Mysql 中, date, datetime, timestamp, 三種 data type 差異分別是？</strong></h6><p>date: yyyy-mm-dd<br>datetime: yyyy-mm-dd hh:mm:ss<br>timestamp: yyyy-mm-dd hh:mm:ss 除此之外, timestamp 會將收到的時間轉成 UTC, 當 query 此欄位時, 會再從 UTC 轉成目前時區</p>
<h6 id="Mysql-中-float-double-decimal-由小至大的排列順序為？"><a href="#Mysql-中-float-double-decimal-由小至大的排列順序為？" class="headerlink" title="Mysql 中, float, double, decimal, 由小至大的排列順序為？"></a><strong>Mysql 中, float, double, decimal, 由小至大的排列順序為？</strong></h6><p>float, double, decimal</p>
<h6 id="Mysql-中-若要精準的儲存一個數字-含小數點-建議使用哪個-type"><a href="#Mysql-中-若要精準的儲存一個數字-含小數點-建議使用哪個-type" class="headerlink" title="Mysql 中, 若要精準的儲存一個數字(含小數點), 建議使用哪個 type?"></a><strong>Mysql 中, 若要精準的儲存一個數字(含小數點), 建議使用哪個 type?</strong></h6><p>decimal</p>
<h6 id="Mysql-中-double-type-有效位數約為？"><a href="#Mysql-中-double-type-有效位數約為？" class="headerlink" title="Mysql 中, double type 有效位數約為？"></a><strong>Mysql 中, double type 有效位數約為？</strong></h6><p>17 位</p>
<h6 id="Mysql-中-float-type-有效位數約為？"><a href="#Mysql-中-float-type-有效位數約為？" class="headerlink" title="Mysql 中, float type 有效位數約為？"></a><strong>Mysql 中, float type 有效位數約為？</strong></h6><p>7 位數</p>
<h6 id="Mysqld-通常代表什麼？"><a href="#Mysqld-通常代表什麼？" class="headerlink" title="Mysqld 通常代表什麼？"></a><strong>Mysqld 通常代表什麼？</strong></h6><p>MySQL Daemon, 通常代表 MySQL Server</p>
<h6 id="以下的-SQL-語法中的意思是？"><a href="#以下的-SQL-語法中的意思是？" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE INDEX prod_name_ind</span><br><span class="line">ON PRODUCTS (prod_name);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>  建立一個 index, 名為 <code>prod_name_ind</code>, table 為 PRODUCTS, 欄位為<code>PROD_NAME</code></li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-1"><a href="#以下的-SQL-語法中的意思是？-1" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><p><strong>Example</strong>:</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">BEGIN TRANSACTION</span><br><span class="line">INSERT INTO Customers(cust_id, cust_name)</span><br><span class="line">VALUES(&#x27;1000000010&#x27;, &#x27;Toys Emporium&#x27;);</span><br><span class="line">SAVE TRANSACTION StartOrder;</span><br><span class="line">INSERT INTO Orders(order_num, order_date, cust_id)</span><br><span class="line">VALUES(20100,&#x27;2001/12/1&#x27;,&#x27;1000000010&#x27;);</span><br><span class="line">IF @@ERROR &lt;&gt; 0 ROLLBACK TRANSACTION StartOrder;</span><br><span class="line">INSERT INTO OrderItems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line">VALUES(20100, 1, &#x27;BR01&#x27;, 100, 5.49);</span><br><span class="line">IF @@ERROR &lt;&gt; 0 ROLLBACK TRANSACTION StartOrder;</span><br><span class="line">INSERT INTO OrderItems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line">VALUES(20100, 2, &#x27;BR03&#x27;, 100, 10.99);</span><br><span class="line">IF @@ERROR &lt;&gt; 0 ROLLBACK TRANSACTION StartOrder;</span><br><span class="line">COMMIT TRANSACTION</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Answer</strong>:<br>在第一個 insert 建立一個 savepoint StartOrder, 如果之後的語法失敗, 回到 savepoint</p>
</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-2"><a href="#以下的-SQL-語法中的意思是？-2" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE VIEW ProductCustomers AS</span><br><span class="line">SELECT cust_name, cust_contact, prod_id</span><br><span class="line">FROM Customers, Orders, OrderItems</span><br><span class="line">WHERE Customers.cust_id = Orders.cust_id</span><br><span class="line"> AND OrderItems.order_num = Orders.order_num;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立一個 VIEW, 為一張虛擬的 table, 可藉此簡單化省略重複複雜 SQL 語法</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-3"><a href="#以下的-SQL-語法中的意思是？-3" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">INTO CustCopy</span><br><span class="line">FROM Customers;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 Customers table 撈出所有 record, 再 insert 到 CustCopy table</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-4"><a href="#以下的-SQL-語法中的意思是？-4" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">INSERT INTO Customers(cust_id,</span><br><span class="line">                      cust_contact,</span><br><span class="line">                      cust_email,</span><br><span class="line">                      cust_name,</span><br><span class="line">                      cust_address,</span><br><span class="line">                      cust_city,</span><br><span class="line">                      cust_state,</span><br><span class="line">                      cust_zip,</span><br><span class="line">                      cust_country)</span><br><span class="line">SELECT cust_id,</span><br><span class="line">       cust_contact,</span><br><span class="line">       cust_email,</span><br><span class="line">       cust_name,</span><br><span class="line">       cust_address,</span><br><span class="line">       cust_city,</span><br><span class="line">       cust_state,</span><br><span class="line">       cust_zip,</span><br><span class="line">       cust_country</span><br><span class="line">FROM CustNew;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 CustNew table 中 select 出 record, 在 insert 進 Customers table</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-5"><a href="#以下的-SQL-語法中的意思是？-5" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, cust_contact, cust_email</span><br><span class="line">FROM Customers</span><br><span class="line">WHERE cust_state IN (&#x27;IL&#x27;,&#x27;IN&#x27;,&#x27;MI&#x27;)</span><br><span class="line">UNION</span><br><span class="line">SELECT cust_name, cust_contact, cust_email</span><br><span class="line">FROM Customers</span><br><span class="line">WHERE cust_name = &#x27;Fun4All&#x27;</span><br><span class="line">ORDER BY cust_name, cust_contact; </span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>只在最後一個 SELECT 使用 ORDER BY, 因為 UNION 會將它用來排序所有 SELECT 語句返回的結果</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-6"><a href="#以下的-SQL-語法中的意思是？-6" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, cust_contact, cust_email </span><br><span class="line">FROM Customers </span><br><span class="line">WHERE cust_state IN (&#x27;IL&#x27;,&#x27;IN&#x27;,&#x27;MI&#x27;) </span><br><span class="line">UNION ALL</span><br><span class="line">SELECT cust_name, cust_contact, cust_email </span><br><span class="line">FROM Customers </span><br><span class="line">WHERE cust_name = &#x27;Fun4All&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 UNION 語法同時執行兩個 query, UNION 默認取消重複的 record, ALL 表示不默認取消</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-7"><a href="#以下的-SQL-語法中的意思是？-7" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, cust_contact</span><br><span class="line">FROM Customers AS C, Orders AS O, OrderItems AS OI</span><br><span class="line">WHERE C.cust_id = O.cust_id</span><br><span class="line"> AND OI.order_num = O.order_num</span><br><span class="line"> AND prod_id = &#x27;RGAN01&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>使用 AS 來縮短 SQL 語法</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-8"><a href="#以下的-SQL-語法中的意思是？-8" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT prod_name, vend_name, prod_price, quantity</span><br><span class="line">FROM OrderItems, Products, Vendors</span><br><span class="line">WHERE Products.vend_id = Vendors.vend_id</span><br><span class="line"> AND OrderItems.prod_id = Products.prod_id</span><br><span class="line"> AND order_num = 20007;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從三個 table 中取出指定的 column, 並指定連結</li>
</ul>
<h6 id="以下的-SQL-語法會取出多少行的-record？"><a href="#以下的-SQL-語法會取出多少行的-record？" class="headerlink" title="以下的 SQL 語法會取出多少行的 record？"></a><strong>以下的 SQL 語法會取出多少行的 record？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT vend_name, prod_name, prod_price</span><br><span class="line">FROM Vendors, Products;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>因為沒有指定關聯, 所以共會取出 Vendors 與 Products 行數的相乘</li>
</ul>
<h6 id="以下的-SQL-語法中的意思是？-9"><a href="#以下的-SQL-語法中的意思是？-9" class="headerlink" title="以下的 SQL 語法中的意思是？"></a><strong>以下的 SQL 語法中的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, </span><br><span class="line">       cust_state,</span><br><span class="line">       (SELECT COUNT(*) </span><br><span class="line">        FROM Orders </span><br><span class="line">        WHERE Orders.cust_id = Customers.cust_id) AS orders</span><br><span class="line">FROM Customers </span><br><span class="line">ORDER BY cust_name; </span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>利用子查詢取得 orders 欄位, 即在 orders table 中, cust_id 跟 Customers table 中的 cust_id 相同</li>
</ul>
<h6 id="以下的-SQL-語法中-作為子查詢-可以-select-多個-column-嗎？"><a href="#以下的-SQL-語法中-作為子查詢-可以-select-多個-column-嗎？" class="headerlink" title="以下的 SQL 語法中, 作為子查詢, 可以 select 多個 column 嗎？"></a><strong>以下的 SQL 語法中, 作為子查詢, 可以 select 多個 column 嗎？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_id</span><br><span class="line">FROM Orders</span><br><span class="line">WHERE order_num IN (SELECT order_num</span><br><span class="line">                    FROM OrderItems</span><br><span class="line">                    WHERE prod_id = &#x27;RGAN01&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>不行</li>
</ul>
<h6 id="以下的-SQL-語法的意思是？"><a href="#以下的-SQL-語法的意思是？" class="headerlink" title="以下的 SQL 語法的意思是？"></a><strong>以下的 SQL 語法的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_id</span><br><span class="line">FROM Orders</span><br><span class="line">WHERE order_num IN (SELECT order_num</span><br><span class="line">                    FROM OrderItems</span><br><span class="line">                    WHERE prod_id = &#x27;RGAN01&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從子查詢得到的結果來 filter</li>
</ul>
<h6 id="下面的-select-子句的排列順序是？"><a href="#下面的-select-子句的排列順序是？" class="headerlink" title="下面的 select 子句的排列順序是？"></a><strong>下面的 select 子句的排列順序是？</strong></h6><ul>
<li><strong>Example</strong><br>SELECT, FROM, WHERE, GROUP BY, HAVING, ORDER BY</li>
<li><strong>Answer</strong>:<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3eO_NrScVvF5M6te4kEX7VTplPkSEI-_0gkyRvJgKbeeANIH1XkUiS6nXi7ELtyGh0EDk4S6z0CR3WtHfsdEuGh4OQYaISqeEioE2dY6p0d0ENZAgD10YOsvnXs8desk4fYwGgPX7vv9Pa8Rq_P04qshw=w920-h472-no?authuser=0"></li>
</ul>
<h6 id="SQL-語法中-WHERE-跟-HAVING-差別是？"><a href="#SQL-語法中-WHERE-跟-HAVING-差別是？" class="headerlink" title="SQL 語法中, WHERE 跟 HAVING 差別是？"></a><strong>SQL 語法中, WHERE 跟 HAVING 差別是？</strong></h6><p>where 過濾行<br>having 過濾分組</p>
<h6 id="SQL-語法中-count-會否忽略-NULL-值？"><a href="#SQL-語法中-count-會否忽略-NULL-值？" class="headerlink" title="SQL 語法中, count(*) 會否忽略 NULL 值？"></a><strong>SQL 語法中, count(*) 會否忽略 NULL 值？</strong></h6><p>不會</p>
<h6 id="SQL-語法中-當使用-把不同-column-的值串在一起-卻發現有多餘的空白如下-example-在-example-2-當中-該怎麼去掉這些空白呢？"><a href="#SQL-語法中-當使用-把不同-column-的值串在一起-卻發現有多餘的空白如下-example-在-example-2-當中-該怎麼去掉這些空白呢？" class="headerlink" title="SQL 語法中, 當使用 + 把不同 column 的值串在一起, 卻發現有多餘的空白如下 example, 在 example 2 當中, 該怎麼去掉這些空白呢？"></a><strong>SQL 語法中, 當使用 + 把不同 column 的值串在一起, 卻發現有多餘的空白如下 example, 在 example 2 當中, 該怎麼去掉這些空白呢？</strong></h6><ul>
<li><strong>Example output</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">Bear Emporium                                (USA        )</span><br><span class="line">Bears R Us                                   (USA        )</span><br><span class="line">Doll House Inc.                              (USA        )</span><br><span class="line">Fun and Games                                (England    )</span><br><span class="line">Furball Inc.                                 (USA        )</span><br><span class="line">Jouets et ours                               (France     )</span><br></pre></td></tr></table></figure></li>
<li><strong>Example 2</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT RTRIM(vend_name) + &#x27; (&#x27; + 這裡是？(vend_country) + &#x27;)&#x27;</span><br><span class="line">FROM Vendors</span><br><span class="line">ORDER BY vend_name;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT RTRIM(vend_name) + &#x27; (&#x27; + RTRIM(vend_country) + &#x27;)&#x27;</span><br><span class="line">FROM Vendors</span><br><span class="line">ORDER BY vend_name;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="SQL-語法中-如果要把兩個不同-column-的-value-串在一起成一個字串輸出-如下-example-該使用什麼符號？？"><a href="#SQL-語法中-如果要把兩個不同-column-的-value-串在一起成一個字串輸出-如下-example-該使用什麼符號？？" class="headerlink" title="SQL 語法中, 如果要把兩個不同 column 的 value 串在一起成一個字串輸出, 如下 example, 該使用什麼符號？？"></a><strong>SQL 語法中, 如果要把兩個不同 column 的 value 串在一起成一個字串輸出, 如下 example, 該使用什麼符號？？</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT vend_name 這裡是？ &#x27; (&#x27; 這裡是？ vend_country 這裡是？ &#x27;)&#x27;</span><br><span class="line">FROM Vendors</span><br><span class="line">ORDER BY vend_name;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT vend_name + &#x27; (&#x27; + vend_country + &#x27;)&#x27;</span><br><span class="line">FROM Vendors</span><br><span class="line">ORDER BY vend_name;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="SQL-語法中-wildcard-是否會耗費比較多的時間？"><a href="#SQL-語法中-wildcard-是否會耗費比較多的時間？" class="headerlink" title="SQL 語法中, wildcard 是否會耗費比較多的時間？"></a><strong>SQL 語法中, wildcard 是否會耗費比較多的時間？</strong></h6><p>會的</p>
<h6 id="SQL-語法中-當使用-wildcard-時-最好將語法置於開頭處或結尾處？"><a href="#SQL-語法中-當使用-wildcard-時-最好將語法置於開頭處或結尾處？" class="headerlink" title="SQL 語法中, 當使用 wildcard 時, 最好將語法置於開頭處或結尾處？"></a><strong>SQL 語法中, 當使用 wildcard 時, 最好將語法置於開頭處或結尾處？</strong></h6><p>結尾處</p>
<h6 id="SQL-語法中-假如我要找出所有名字以-J-或-M-起頭的聯絡人-在以下的-example-中-該使用哪個-wildcard"><a href="#SQL-語法中-假如我要找出所有名字以-J-或-M-起頭的聯絡人-在以下的-example-中-該使用哪個-wildcard" class="headerlink" title="SQL 語法中, 假如我要找出所有名字以 J 或 M 起頭的聯絡人, 在以下的 example 中, 該使用哪個 wildcard?"></a><strong>SQL 語法中, 假如我要找出所有名字以 J 或 M 起頭的聯絡人, 在以下的 example 中, 該使用哪個 wildcard?</strong></h6><ul>
<li><strong>Example</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_contact</span><br><span class="line">FROM Customers</span><br><span class="line">WHERE cust_contact LIKE &#x27;這裡是？%&#x27;</span><br><span class="line">ORDER BY cust_contact;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong><figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">SELECT cust_contact</span><br><span class="line">FROM Customers</span><br><span class="line">WHERE cust_contact LIKE &#x27;[JM]%&#x27;</span><br><span class="line">ORDER BY cust_contact;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="SQL-語法中-代表多字-wildcard-如果我要單個字的-wildcard-要使用哪個符號？"><a href="#SQL-語法中-代表多字-wildcard-如果我要單個字的-wildcard-要使用哪個符號？" class="headerlink" title="SQL 語法中, % 代表多字 wildcard, 如果我要單個字的 wildcard, 要使用哪個符號？"></a><strong>SQL 語法中, <em>%</em> 代表多字 wildcard, 如果我要單個字的 wildcard, 要使用哪個符號？</strong></h6><p><em>_</em>, 是一個 word, 不是 character</p>
<h6 id="SQL-語法中-以下-example-中的語法會撈出-value-為-null-的-row-嗎？"><a href="#SQL-語法中-以下-example-中的語法會撈出-value-為-null-的-row-嗎？" class="headerlink" title="SQL 語法中, 以下 example 中的語法會撈出 value 為 null 的 row 嗎？"></a><strong>SQL 語法中, 以下 example 中的語法會撈出 value 為 null 的 row 嗎？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">SELECT prod_name</span><br><span class="line">FROM Products</span><br><span class="line">WHERE prod_name LIKE <span class="hljs-string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>不會</li>
</ul>
<h6 id="以下的-SQL-語法是什麼意思？"><a href="#以下的-SQL-語法是什麼意思？" class="headerlink" title="以下的 SQL 語法是什麼意思？"></a><strong>以下的 SQL 語法是什麼意思？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">SELECT prod_name</span><br><span class="line">FROM Products</span><br><span class="line">LIMIT 5 OFFSET 5;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>抵銷 5 行, 也就是從第 6 行開始撈<br>撈 5 行資料</li>
</ul>
<h6 id="SQL-語法中-有區分大小寫嗎？"><a href="#SQL-語法中-有區分大小寫嗎？" class="headerlink" title="SQL 語法中, 有區分大小寫嗎？"></a><strong>SQL 語法中, 有區分大小寫嗎？</strong></h6><p>無</p>
<h6 id="SQL-語法中-inner-join-跟-join-差在哪？"><a href="#SQL-語法中-inner-join-跟-join-差在哪？" class="headerlink" title="SQL 語法中, inner join 跟 join 差在哪？"></a><strong>SQL 語法中, inner join 跟 join 差在哪？</strong></h6><p>一樣</p>
<h6 id="SQL-語法中-left-outer-join-跟-left-join-差在哪？"><a href="#SQL-語法中-left-outer-join-跟-left-join-差在哪？" class="headerlink" title="SQL 語法中, left outer join 跟 left join 差在哪？"></a><strong>SQL 語法中, left outer join 跟 left join 差在哪？</strong></h6><p>一樣</p>
<h6 id="SQL-語法中-right-outer-join-跟-right-join-差在哪？"><a href="#SQL-語法中-right-outer-join-跟-right-join-差在哪？" class="headerlink" title="SQL 語法中, right outer join 跟 right join 差在哪？"></a><strong>SQL 語法中, right outer join 跟 right join 差在哪？</strong></h6><p>一樣</p>
<h6 id="SQL-語法中-join-語法的用途是？"><a href="#SQL-語法中-join-語法的用途是？" class="headerlink" title="SQL 語法中, join 語法的用途是？"></a><strong>SQL 語法中, join 語法的用途是？</strong></h6><p>同時撈出兩張表的資料</p>
<h6 id="SQL-語法中-left-join-跟-right-join-語法的差別是？"><a href="#SQL-語法中-left-join-跟-right-join-語法的差別是？" class="headerlink" title="SQL 語法中, left join 跟 right join 語法的差別是？"></a><strong>SQL 語法中, left join 跟 right join 語法的差別是？</strong></h6><p>left join 除了 join 兩張表有相關的資料外, 還會把左邊表的所有不相關資料也撈出來, right join 則是會把右邊表的所有不相關資料取出</p>
<h6 id="以下的-MySQL-example-command-的意思是？"><a href="#以下的-MySQL-example-command-的意思是？" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">show variables like &#x27;validate_password%&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>顯示密碼驗證相關訊息, 如下<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line"># validate_password.check_user_name	ON</span><br><span class="line"># validate_password.dictionary_file	</span><br><span class="line"># validate_password.length	8</span><br><span class="line"># validate_password.mixed_case_count	1</span><br><span class="line"># validate_password.number_count	1</span><br><span class="line"># validate_password.policy	MEDIUM</span><br><span class="line"># validate_password.special_char_count	1</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-1"><a href="#以下的-MySQL-example-command-的意思是？-1" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">SELECT user,authentication_string,plugin,host FROM mysql.user;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>user: username<br>authentication_string: 就是 password<br>plugin: 這邊是 authentication plugin, caching_sha2_password 可在 memory cache 之前使用過的 user, 增進效能<br>host: 該 user 的 host, username + host 才是一個完整的 user<br><img src="https://lh3.googleusercontent.com/pw/ACtC-3cyStcyEOpQ3RC-ZwRm0sdp2S0QJmpG6vdYXhw1tIk3TqLLIGYxiS6zcaFguwpOxOfCbxNI5CP6JT10C90alEBwRuDEF5Fo8qTm54RRQ2k4jEZBVwqn_pM4NmB5aYf7YVCJx1B75F_EzGPAEv7pzsMMLw=w3158-h214-no?authuser=2"></li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-2"><a href="#以下的-MySQL-example-command-的意思是？-2" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;password&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>更改 root 密碼</li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-3"><a href="#以下的-MySQL-example-command-的意思是？-3" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-built_in">set</span> global validate_password_length=3;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>修改密碼長度規則</li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-4"><a href="#以下的-MySQL-example-command-的意思是？-4" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-built_in">set</span> global validate_password_policy=0;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>修改密碼驗證原則</li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-5"><a href="#以下的-MySQL-example-command-的意思是？-5" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE mydatabase CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>建立資料庫 mydatabase, 設定 character set 為 utf8mb4, collate 為 utf8mb4_unicode_ci</li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-6"><a href="#以下的-MySQL-example-command-的意思是？-6" class="headerlink" title="以下的 MySQL example command 的意思是？"></a><strong>以下的 MySQL example command 的意思是？</strong></h6><ul>
<li><strong>Example</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">mysql -uroot -pYourPassword -Bse <span class="hljs-string">&quot;use test; delete from testTable;&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>Answer</strong>:<br>從 shell 不進入 MySQL client 直接下達 command</li>
</ul>
<h6 id="以下的-MySQL-example-command-的意思是？-Example"><a href="#以下的-MySQL-example-command-的意思是？-Example" class="headerlink" title="以下的 MySQL example command 的意思是？ - Example: ```"></a><strong>以下的 MySQL example command 的意思是？</strong> - <strong>Example</strong>: ```</h6><p>set global log_timestamps = ‘system’;</p>
<figure class="highlight plaintext hljs"><table><tr><td class="code"><pre><span class="line">- **Answer**:</span><br><span class="line">更改 log 的時區為系統時間</span><br><span class="line"></span><br><span class="line">###### **以下的 MySQL example command 的意思是？**</span><br><span class="line">- **Example**:</span><br></pre></td></tr></table></figure>
<p>DROP DATABASE <code>databaseName</code>;</p>
<pre><code>- **Answer**:
刪除資料庫

&lt;br&gt;

## # 參考書目
- [SQL 必知必會](https://www.tenlong.com.tw/products/9787115313980)
- [MySQL 與 MariaDB 學習手冊 (Learning MySQL and MariaDB: Heading in the Right Direction with MySQL and MariaDB)](https://www.tenlong.com.tw/products/9789864763832)
</code></pre>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/MySQL/">#MySQL</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/zh-tw/GCPLoadBalancer/">手把手教你理解並建立 GCP 平衡負載</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/zh-tw/gitlab/">Gitlab 學習筆記</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5c72643b9ea706001139fd89&amp;product=inline-share-buttons' async='async'></script>

</div>



<div class="comments">
    <h3 class="title is-4">留言</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://tn710617.github.io/zh-tw/mysql/';
        this.page.identifier = 'zh-tw/mysql/';
        
        this.language = 'zh';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'rayscodingjourney' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2022 Ray&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
            <script>
                mermaid.initialize({ theme: 'default' });
            </script>

            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/tn710617">
                
                    <i class="fab fa-github"></i>
                
            </a>
            
            <a class="navbar-item" title="Medium" target="_blank" rel="noopener" href="https://medium.com/@raycodingjourney">
                
                    <i class="fab fa-medium"></i>
                
            </a>
            
            <a class="navbar-item" title="Linkedin" target="_blank" rel="noopener" href="https://www.linkedin.com/in/ray-lee-99315315a">
                
                    <i class="fab fa-linkedin"></i>
                
            </a>
            
            <a class="navbar-item" title="Facebook" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100001626039430">
                
                    <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="navbar-item" title="CakeResume" target="_blank" rel="noopener" href="https://www.cakeresume.com/resumes/ray-6edaef/edit">
                
                    <i class="far fa-address-card"></i>
                
            </a>
            
            <a class="navbar-item" title="E-Mail" href="mailto:tn710617@gmail.com">
                
                    <i class="far fa-envelope"></i>
                
            </a>
            
            <a class="navbar-item" title="Skype" href="skype:adad0310?call|chat">
                
                    <i class="fab fa-skype"></i>
                
            </a>
            
            

        </div>
    </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.zh-tw.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>