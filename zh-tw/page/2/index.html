<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Ray&#39;s Coding Journey</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="Ray&#39;s Coding Journey">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/page/2/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ray&#39;s Coding Journey">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


    <link href="/page/2/index.html" rel="alternate" hreflang="en">








    <meta property="og:type" content="website">
<meta property="og:title" content="Ray&#39;s Coding Journey">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/page/2/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ray&#39;s Coding Journey">





    <link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
        
    
        
    
        
    
        
    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135063928-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135063928-1');
</script>


    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/zh-tw">
                
                    
                    不學會死
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/zh-tw/archives">歸檔</a>
            
            <a class="navbar-item " href="/zh-tw/categories">分類</a>
            
            <a class="navbar-item " href="/zh-tw/tags">標籤</a>
            
            <a class="navbar-item " href="/zh-tw/schedule">行程</a>
            
            <a class="navbar-item " href="/zh-tw/about">關於</a>
            
            <a class="navbar-item " href="/zh-tw/japanese">日語</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            

            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/page/2/index.html" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-tw/page/2/index.html" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/kubernetes-workloads-controllers-deployments/" itemprop="url">Kubernetes - Deployments</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-02-07T12:34:33.000Z" itemprop="datePublished">2月 7 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Ops/">Ops</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            1 小时 讀完 (大概 9593 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Deployment 提供宣告式的方法來更新 Pods 以及 ReplicaSets<br>透過 Deployment 描述希望的狀態, 然後 Deployment Controller 會將目前的狀態改變成希望的狀態, 你可以定義 Deployments 來建立一個新的 ReplicaSets, 或是移除已存在的 Deployments, 然後重新建一個。</p>
        <p class="article-more-link">
            <a href="/zh-tw/kubernetes-workloads-controllers-deployments/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/kubernetes-container-lifecycle-hooks/" itemprop="url">Kubernetes - Container Lifecycle Hooks</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-02-05T08:30:08.000Z" itemprop="datePublished">2月 5 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Ops/">Ops</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            17 分钟 讀完 (大概 2526 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>如許多的程式語言框架, 如 Angular, 有著元件生命週期 hooks, Kubernetes 也為容器提供了生命週期 hooks。 Hooks 使容器在管理的生命週期間可以意識到事件的發生, 並且當對應的生命週期 hook 被觸發時, 執行在 handler 中實作的程式碼。</p>
        <p class="article-more-link">
            <a href="/zh-tw/kubernetes-container-lifecycle-hooks/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/config-liveness-readiness-startup-probes/" itemprop="url">Kubernetes - Health Check</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-02-02T09:34:05.000Z" itemprop="datePublished">2月 2 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Ops/">Ops</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            28 分钟 讀完 (大概 4206 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>本篇會示範如何設定 liveness probe(存活探針), readiness probe(就緒探針), 以及 startup probe(啟動探針)。 <a href="https://kubernetes.io/docs/admin/kubelet/" target="_blank" rel="noopener">kubelet</a> 使用 liveness probe 來決定何時重啟容器, 舉例來說, 當你的應用處於運行中, 但是卻無法處理 request。</p>
        <p class="article-more-link">
            <a href="/zh-tw/config-liveness-readiness-startup-probes/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/managing-compute-resources-for-containers/" itemprop="url">Kubernetes - Resources Limit</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-30T10:35:30.000Z" itemprop="datePublished">1月 30 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Ops/">Ops</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            43 分钟 讀完 (大概 6497 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>當你指定一個 Pod, 你可以選擇性的指定每個容器需要多少 CPU 以及 memory (RAM), 當你有指定 <em>資源要求</em> (resource request) 給容器, scheduler 可以更加的分配 Pods 到 nodes 上。 而當你有指定容器的 <em>資源限制</em> (resource limits), 在 node 上的資源競爭將以指定的方式來處理。 更多 requests 以及 limits 的不同之處可以參考 <a href="https://git.k8s.io/community/contributors/design-proposals/node/resource-qos.md" target="_blank" rel="noopener">Resource QoS</a></p>
<h2 id="資源類型"><a href="#資源類型" class="headerlink" title="資源類型"></a>資源類型</h2><p>CPU 以及 memory 為 <em>資源類型</em> (resource type), 資源類型有其基本單位。 CPU 以 cores 為單位, 而 memory 以 bytes 為單位。 如果你使用的是 Kubernetes v1.14 或更新的版本, 你可以指定 <em>巨頁</em> (huge page) 資源。 Huge pages 是 Linux 上特定的功能, node 的 kernel 可以分配比預設 page 更大的 memory。<br>比如說, 在預設 page 大小為 4KiB 的系統, 你可以指定一個限制, <code>hugepages-2Mi: 80Mi</code>。 如果容器試圖分配超過 40 2MiB huge pages (總共 80MiB), 則分配將失敗。<br>Ray 第一次聽到 Huge Page 的概念時也是 <em>一臉矇逼</em>, 不過本著學習者的心態 Google 了幾下之後, 就不再那麼矇了。<br>簡單來說, memory 有過被管理的單位叫做 <strong>頁 (page)</strong>, 在很多系統中預設是 4Ki, 所以 1Mi 的 memory 就有 256 pages, 沒問題吧？ 而有個硬體叫做 TLB (Translation Lookaside Buffer), 它是個大小固定的緩存硬體, 而虛擬記憶體對應實體記憶體的 mapping 會緩存 TLB 上。簡單來說, 如果是使用 4Ki 為 page 為單位的話, 那就要有很多 page, 而越多 page 記憶體的位置就需要越大的緩存去管理, 偏偏 TLB 這東西又是固定大小, 所以能怎麼做？ 那自然就是加大 page 的大小, 讓總 page 的數量下降, 這樣緩存就不需要那麼大的空間來記住那麼多的記憶體位置了。 這便是 huge page 的簡單概念, 更詳細一點的資料可以參考 <a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-node/20190129-hugepages.md" target="_blank" rel="noopener">這篇文章</a></p>
<p><strong>注意</strong>: 跟 <code>memory</code> 以及 <code>cpu</code> 資源不同, 你無法過量使用 <code>hugepages-*</code> 資源</p>
<p>CPU 以及 memory 都被歸類在 <em>compute resources</em>, 或 <em>resources</em>。 Compute resources 為可被要求, 分配, 以及消耗的可量測數量。 他們與 [API resources] 不同。 API resources, 像是 Pod 以及 Services 為可通過 Kubernetes API server 讀取以及修改的物件。</p>
<p><br><br><br></p>
<h2 id="Pod-以及-Container-的資源要求以及資源限制"><a href="#Pod-以及-Container-的資源要求以及資源限制" class="headerlink" title="Pod 以及 Container 的資源要求以及資源限制"></a>Pod 以及 Container 的資源要求以及資源限制</h2><p>每個 Container 或 Pod 可被指定下列一個或多個條件：</p>
<ul>
<li><code>spec.containers[].resources.limits.cpu</code></li>
<li><code>spec.containers[].resources.limits.memory</code></li>
<li><code>spec.containers[].resources.limits.hugepages-&lt;size&gt;</code></li>
<li><code>spec.containers[].resources.requests.cpu</code></li>
<li><code>spec.containers[].resources.requests.memory</code></li>
<li><code>spec.containers[].resources.requests.hugepages-&lt;size&gt;</code></li>
</ul>
<p>儘管 requests 以及 limits 只可被指定再單獨的 Container 上, 但要計算出 Pod 的 request 以及 limits 也很方便。 Pod 對某項特定資源的 <em>request/limit</em> 就等於該 Pod 裡的所有容器的 <em>request/limit</em> 總和。</p>
<p><br><br><br></p>
<h2 id="CPU-解釋"><a href="#CPU-解釋" class="headerlink" title="CPU 解釋"></a>CPU 解釋</h2><p>CPU 資源的 limits 以及 requests 都以 <em>cpu</em> 為單位衡量。 1 cpu, 在 Kubernetes 中, 相當於以下單位:</p>
<ul>
<li>1 AWS vCPU</li>
<li>1 GCP Core</li>
<li>1 Azure vCore</li>
<li>1 IBM vCPU</li>
<li>1 Hyperthread, Hyperthreading 的 Intel bare-metal 處理器</li>
</ul>
<p>小數的資源請求是容許的。 <code>spec.container[].resources.requests.cpu</code> 如果設為 <code>0.5</code>, 那相當於要求 1 CPU 的一半。 <code>0.1</code> 相等於 <code>100m</code>, 100m 也可讀為 “100 millicpu”。 有些人說 “100 millicores”, 都可理解為同樣的東西。 有小數點的請求, 像是 <code>0.1</code>, 會被 API 轉換到 <code>100m</code>, 而精度最小為 <code>1m</code>, 所以設定 <code>100m</code> 會是比較理想的</p>
<p>CPU 都是絕對數字, 不會是相對數字; 舉例來說, 0.1 在 1-core, 2-core, 或 48-core 的機器中代表的量都是一樣的。</p>
<p><br><br><br></p>
<h2 id="Memory-解釋"><a href="#Memory-解釋" class="headerlink" title="Memory 解釋"></a>Memory 解釋</h2><p>Memory 中的 limits 以及 requests 資源管理以 bytes 為單位。 記憶體可被表示為簡單的 integer, 或固定位數的 integer, 可使用以下後綴： E, P, T, G, M, K 。 你也可以使用: Ei, Pi, Ti, Gi, Mi, Ki, 舉例來說, 下面都代表大約相同的值：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">128974848, 129e6, 129M, 123Mi</span><br></pre></td></tr></table></figure></p>
<p>這邊有個範例, 下面的 Pod 含有兩個容器。 每個容器都有 resource requests, 0.25 cpu 以及 64MiB 記憶體。 每個容器都有 resource limits 0.5 cpu 以及 128 MiB 記憶體。 可以說, 這個 Pod 有 resource requests 0.5 cpu 以及 128 MiB 記憶體, resource limits 1 cpu 以及 256 MiB 記憶體<br><figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">frontend</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">db</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">mysql</span></span><br><span class="line"><span class="hljs-attr">    env:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line"><span class="hljs-attr">      value:</span> <span class="hljs-string">"password"</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line"><span class="hljs-attr">        memory:</span> <span class="hljs-string">"64Mi"</span></span><br><span class="line"><span class="hljs-attr">        cpu:</span> <span class="hljs-string">"250m"</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line"><span class="hljs-attr">        memory:</span> <span class="hljs-string">"128Mi"</span></span><br><span class="line"><span class="hljs-attr">        cpu:</span> <span class="hljs-string">"500m"</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">wp</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">wordpress</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line"><span class="hljs-attr">        memory:</span> <span class="hljs-string">"64Mi"</span></span><br><span class="line"><span class="hljs-attr">        cpu:</span> <span class="hljs-string">"250m"</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line"><span class="hljs-attr">        memory:</span> <span class="hljs-string">"128Mi"</span></span><br><span class="line"><span class="hljs-attr">        cpu:</span> <span class="hljs-string">"500m"</span></span><br></pre></td></tr></table></figure></p>
<p><br><br><br></p>
<h2 id="有-resource-requests-的-Pod-是被如何調度的？"><a href="#有-resource-requests-的-Pod-是被如何調度的？" class="headerlink" title="有 resource requests 的 Pod 是被如何調度的？"></a>有 resource requests 的 Pod 是被如何調度的？</h2><p>當你建立 Pod, Kubernetes scheduler 會挑選一個 node 來運行該 Pod。 每個 node 針對每種資源類型都有最大容量: 也就是說, 有多少 CPU 以及 memory 可以分配給 Pods。 Scheduler 會確保被調度的容器的各類型資源總和會小於該 Node 的資源總量。 注意到, 就算 node 上的資源使用量非常低, 如果容量確認沒過的話, Scheduler 還是不會分配 Pod 到這個 node 上。 這確保在 node 上資源短缺, 比如說, 在每日的資源用量高峰。</p>
<p><br><br><br></p>
<h2 id="有-resource-limits-的-Pod-是如何被調度？"><a href="#有-resource-limits-的-Pod-是如何被調度？" class="headerlink" title="有 resource limits 的 Pod 是如何被調度？"></a>有 resource limits 的 Pod 是如何被調度？</h2><p>當 Kubelet 啟動 Pod 中的一個 Container, 它會將 CPU 以及 memory limits 帶入到該 container runtime。<br>當使用 Docker:</p>
<ul>
<li><code>spec.containers[].resources.requests.cpu</code> 會被轉換成 core 值, 它可能會是有小數點的, 以及會被乘以 1024。 在 <code>docker run</code> 指令中使用 <a href="https://docs.docker.com/engine/reference/run/#cpu-share-constraint" target="_blank" rel="noopener"><code>--cpu-shares</code></a>, 可以設定比這更高的數字或 2 </li>
<li><code>spec.containers[].resources.limits.cpu</code> 會被轉換成 millicore 值以及乘以 100。 結果值為容器在每 100ms (也就是十分之一秒)的 CPU time 中可使用的總量, 容器無法使用超過被分到的 CPU 配額, 這個部分如果看不是很懂, 有興趣的話最下面會有補充說明。<br><strong>注意</strong>: 預設的 quota period 為 100ms, 最小為 1ms</li>
<li><code>spec.containers[].resources.limits.memory</code> 會被轉換成 integer, 如同 <code>docker run</code> 指令的 [<code>--memory</code>] flag 的效果</li>
</ul>
<p>如果容器超出了其 memory limits 限制, 它會被終止。 如果它設置為可重啟, 跟其他的 runtime failure 一樣, kubelet 將會重啟它。<br>如果容器超出了其 memory request 限制, 當 node memory 耗光了之後, 就會把該 Pod 砍了, Ray 看到這一段的時候也有點矇逼, 下面會再補充解釋！<br>容器可能會或者可能不會被允許超出其 CPU limit 限制, 然而, 超出了也不會被砍了。<br>要得知容器是否無法被分配, 或者因為資源限制被殺掉了, 可以參考 <a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#troubleshooting" target="_blank" rel="noopener">Troubleshooting</a> 區塊</p>
<p><br><br><br></p>
<h2 id="監控資源使用量"><a href="#監控資源使用量" class="headerlink" title="監控資源使用量"></a>監控資源使用量</h2><h2 id="以下是幫助釐清觀念的-Q-amp-A"><a href="#以下是幫助釐清觀念的-Q-amp-A" class="headerlink" title="以下是幫助釐清觀念的 Q&amp;A"></a>以下是幫助釐清觀念的 Q&amp;A</h2><h6 id="Kubernetes-的可計算資源管理中-所指定的資源配額是絕對數字還是相對數字？"><a href="#Kubernetes-的可計算資源管理中-所指定的資源配額是絕對數字還是相對數字？" class="headerlink" title="Kubernetes 的可計算資源管理中, 所指定的資源配額是絕對數字還是相對數字？"></a><strong>Kubernetes 的可計算資源管理中, 所指定的資源配額是絕對數字還是相對數字？</strong></h6><p>絕對數字</p>
<h6 id="Kubernetes-compute-resource-management-中-如果我-CPU-設為-0-1-在單核-雙核-甚至-48核的機器中-代表的量會有所不同嗎？"><a href="#Kubernetes-compute-resource-management-中-如果我-CPU-設為-0-1-在單核-雙核-甚至-48核的機器中-代表的量會有所不同嗎？" class="headerlink" title="Kubernetes compute resource management 中, 如果我 CPU 設為 0.1, 在單核, 雙核, 甚至 48核的機器中, 代表的量會有所不同嗎？"></a><strong>Kubernetes compute resource management 中, 如果我 CPU 設為 <code>0.1</code>, 在單核, 雙核, 甚至 48核的機器中, 代表的量會有所不同嗎？</strong></h6><p>不會哦</p>
<h6 id="什麼是-TLB"><a href="#什麼是-TLB" class="headerlink" title="什麼是 TLB?"></a><strong>什麼是 TLB?</strong></h6><p>Translation lookaside buffer, 緩存虛擬記憶體到實體記憶體的 mapping</p>
<h6 id="在-Linux-系統中-虛擬記憶體管理系統中-最小的-memory-單位是什麼？"><a href="#在-Linux-系統中-虛擬記憶體管理系統中-最小的-memory-單位是什麼？" class="headerlink" title="在 Linux 系統中, 虛擬記憶體管理系統中, 最小的 memory 單位是什麼？"></a><strong>在 Linux 系統中, 虛擬記憶體管理系統中, 最小的 memory 單位是什麼？</strong></h6><p>page</p>
<h6 id="Kubernetes-resource-limit-management-中-huge-page-是什麼"><a href="#Kubernetes-resource-limit-management-中-huge-page-是什麼" class="headerlink" title="Kubernetes resource limit management 中, huge page 是什麼?"></a><strong>Kubernetes resource limit management 中, huge page 是什麼?</strong></h6><p>size 較大的 page</p>
<h6 id="Kubernetes-中-如果一個-Pod-卡在-pending-status-那很有可能是甚麼原因？"><a href="#Kubernetes-中-如果一個-Pod-卡在-pending-status-那很有可能是甚麼原因？" class="headerlink" title="Kubernetes 中, 如果一個 Pod 卡在 pending status, 那很有可能是甚麼原因？"></a><strong>Kubernetes 中, 如果一個 Pod 卡在 pending status, 那很有可能是甚麼原因？</strong></h6><p>沒有 Node 有足夠的資源來運行這個 Pod</p>
<h6 id="Kubernetes-中-Resource-的限制可分為-CPU-以及-Memory-限制類型主要分成哪兩種？"><a href="#Kubernetes-中-Resource-的限制可分為-CPU-以及-Memory-限制類型主要分成哪兩種？" class="headerlink" title="Kubernetes 中, Resource 的限制可分為 CPU 以及 Memory, 限制類型主要分成哪兩種？"></a><strong>Kubernetes 中, Resource 的限制可分為 CPU 以及 Memory, 限制類型主要分成哪兩種？</strong></h6><ul>
<li>Request</li>
<li>Limit</li>
</ul>
<h6 id="Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-request-主要代表的是？"><a href="#Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-request-主要代表的是？" class="headerlink" title="Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, request 主要代表的是？"></a><strong>Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, request 主要代表的是？</strong></h6><p>這個 Pod 正常需要多少的資源可以正常運行</p>
<h6 id="Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-在-Kubernetes-各元件當中-request-resource-對哪一個元件格外重要？"><a href="#Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-在-Kubernetes-各元件當中-request-resource-對哪一個元件格外重要？" class="headerlink" title="Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 在 Kubernetes 各元件當中, request resource 對哪一個元件格外重要？"></a><strong>Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 在 Kubernetes 各元件當中, request resource 對哪一個元件格外重要？</strong></h6><p>scheduler</p>
<h6 id="Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-在-Kubernetes-各元件當中-limit-resource-對哪一個元件格外重要？"><a href="#Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-在-Kubernetes-各元件當中-limit-resource-對哪一個元件格外重要？" class="headerlink" title="Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 在 Kubernetes 各元件當中, limit resource 對哪一個元件格外重要？"></a><strong>Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 在 Kubernetes 各元件當中, limit resource 對哪一個元件格外重要？</strong></h6><p>kubelet</p>
<h6 id="Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-當-Scheduler-在選擇要在哪一個-Node-上面運行-Pod-時-主要會考量哪一種類？"><a href="#Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-當-Scheduler-在選擇要在哪一個-Node-上面運行-Pod-時-主要會考量哪一種類？" class="headerlink" title="Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 當 Scheduler 在選擇要在哪一個 Node 上面運行 Pod 時, 主要會考量哪一種類？"></a><strong>Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 當 Scheduler 在選擇要在哪一個 Node 上面運行 Pod 時, 主要會考量哪一種類？</strong></h6><p>request</p>
<h6 id="Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-當-Scheduler-跟-request-的關係是？"><a href="#Kubernetes-Resource-的限制又可分為-requests-以及-limits-兩大類-當-Scheduler-跟-request-的關係是？" class="headerlink" title="Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 當 Scheduler 跟 request 的關係是？"></a><strong>Kubernetes Resource 的限制又可分為 requests 以及 limits 兩大類, 當 Scheduler 跟 request 的關係是？</strong></h6><p>Scheduler 會選擇有足夠資源 (request 要求的資源) 的 node 來運行該 pod</p>
<h6 id="以下的-Kubernetes-yaml-檔所代表的意思是"><a href="#以下的-Kubernetes-yaml-檔所代表的意思是" class="headerlink" title="以下的 Kubernetes yaml 檔所代表的意思是?"></a><strong>以下的 Kubernetes yaml 檔所代表的意思是?</strong></h6><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">resources:</span></span><br><span class="line"><span class="hljs-attr">  requests:</span></span><br><span class="line"><span class="hljs-attr">    cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">  limits:</span></span><br><span class="line"><span class="hljs-attr">    cpu:</span> <span class="hljs-number">100</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    memory:</span> <span class="hljs-number">100</span><span class="hljs-string">Mi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># 定義資源限制</span></span><br><span class="line"><span class="hljs-attr">resources:</span></span><br><span class="line">  <span class="hljs-comment"># 定義 requests 種類限制, scheduler 會選擇有足夠 request 資源的 Node 來運行該 Pod</span></span><br><span class="line"><span class="hljs-attr">  requests:</span></span><br><span class="line"><span class="hljs-attr">    cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line">  <span class="hljs-comment"># 定義 limits 種類限制, Kubelet 會根據 limits 資源來決定是否重啟該 Pod</span></span><br><span class="line"><span class="hljs-attr">  limits:</span></span><br><span class="line"><span class="hljs-attr">    cpu:</span> <span class="hljs-number">100</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    memory:</span> <span class="hljs-number">100</span><span class="hljs-string">Mi</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="Kubernetes-中-1-MiB-等於多少？"><a href="#Kubernetes-中-1-MiB-等於多少？" class="headerlink" title="Kubernetes 中, 1 MiB 等於多少？"></a><strong>Kubernetes 中, 1 MiB 等於多少？</strong></h6><p>1 MiB = 1024 KiB = 1024 * 1024 = 1048576 Bytes</p>
<h6 id="Kubernetes-中-1-MB-等於多少？"><a href="#Kubernetes-中-1-MB-等於多少？" class="headerlink" title="Kubernetes 中, 1 MB 等於多少？"></a><strong>Kubernetes 中, 1 MB 等於多少？</strong></h6><p>1 MB = 1000 KB = 1000 * 1000 = 1000000 Bytes</p>
<h6 id="Kubernetes-中-一個-Pod-的資源總限制是-什麼-的總和？"><a href="#Kubernetes-中-一個-Pod-的資源總限制是-什麼-的總和？" class="headerlink" title="Kubernetes 中, 一個 Pod 的資源總限制是 什麼 的總和？"></a><strong>Kubernetes 中, 一個 Pod 的資源總限制是 <code>什麼</code> 的總和？</strong></h6><p>該 Pod 內所有容器的資源限制加總</p>
<h6 id="Cgroup-的全寫是？"><a href="#Cgroup-的全寫是？" class="headerlink" title="Cgroup 的全寫是？"></a><strong>Cgroup 的全寫是？</strong></h6><p>Control Group</p>
<h6 id="Cgroup-簡單解釋"><a href="#Cgroup-簡單解釋" class="headerlink" title="Cgroup 簡單解釋?"></a><strong>Cgroup 簡單解釋?</strong></h6><p>有著一系列相關屬性的容器, 控制 kernel 如何運行程序</p>
<h6 id="Kubernetes-resource-limit-中-當我們只設置-limits-但沒設置-requests-時-會發生什麼事？"><a href="#Kubernetes-resource-limit-中-當我們只設置-limits-但沒設置-requests-時-會發生什麼事？" class="headerlink" title="Kubernetes resource limit 中, 當我們只設置 limits, 但沒設置 requests 時, 會發生什麼事？"></a><strong>Kubernetes resource limit 中, 當我們只設置 limits, 但沒設置 requests 時, 會發生什麼事？</strong></h6><p>Kubernetes 會將 requests 設為 limits 的值</p>
<h6 id="當宿主機面臨記憶體壓力時-會做什麼事？"><a href="#當宿主機面臨記憶體壓力時-會做什麼事？" class="headerlink" title="當宿主機面臨記憶體壓力時, 會做什麼事？"></a><strong>當宿主機面臨記憶體壓力時, 會做什麼事？</strong></h6><p>會殺掉程序</p>
<h6 id="當一個程序使用了超過在-cgroup-中規定的-memory-時-會發生什麼事？"><a href="#當一個程序使用了超過在-cgroup-中規定的-memory-時-會發生什麼事？" class="headerlink" title="當一個程序使用了超過在 cgroup 中規定的 memory 時, 會發生什麼事？"></a><strong>當一個程序使用了超過在 cgroup 中規定的 memory 時, 會發生什麼事？</strong></h6><p>該程序會被列入要殺掉的優先名單中</p>
<h6 id="Server-中的-OOM-的全寫是"><a href="#Server-中的-OOM-的全寫是" class="headerlink" title="Server 中的 OOM 的全寫是??"></a><strong>Server 中的 OOM 的全寫是??</strong></h6><p>Out Of Memory</p>
<h6 id="Kubernetes-resource-limit-當中-當我設定了-requests-的限制-Kubernetes-會否要求-docker-去設定-memory-cgroup-中的-soft-limit"><a href="#Kubernetes-resource-limit-當中-當我設定了-requests-的限制-Kubernetes-會否要求-docker-去設定-memory-cgroup-中的-soft-limit" class="headerlink" title="Kubernetes resource limit 當中, 當我設定了 requests 的限制, Kubernetes 會否要求 docker 去設定 memory cgroup 中的 soft_limit?"></a><strong>Kubernetes resource limit 當中, 當我設定了 requests 的限制, Kubernetes 會否要求 docker 去設定 memory cgroup 中的 soft_limit?</strong></h6><p>不會</p>
<h6 id="Kubernetes-resource-limit-當中-requests-若設得太高會發生什麼事？"><a href="#Kubernetes-resource-limit-當中-requests-若設得太高會發生什麼事？" class="headerlink" title="Kubernetes resource limit 當中, requests 若設得太高會發生什麼事？"></a><strong>Kubernetes resource limit 當中, requests 若設得太高會發生什麼事？</strong></h6><p>可能會出現沒有 node 可以運行這個 pod, 明明這個 pod 正常不會需要這麼高的 memory</p>
<h6 id="Kubernetes-resource-limit-當中-requests-若設得太低會發生什麼事？"><a href="#Kubernetes-resource-limit-當中-requests-若設得太低會發生什麼事？" class="headerlink" title="Kubernetes resource limit 當中, requests 若設得太低會發生什麼事？"></a><strong>Kubernetes resource limit 當中, requests 若設得太低會發生什麼事？</strong></h6><p>如果一個 node 的剩餘空間已經沒有很多了, 因為 request 設得低, 所以依然會被分派到這個 node, 但該 pod 實際需要的資源遠高於 request 值, 所以該 node 面臨記憶體壓力時就會優先砍掉這個 pod</p>
<h6 id="Kubernetes-中-一個-core-為幾-m"><a href="#Kubernetes-中-一個-core-為幾-m" class="headerlink" title="Kubernetes 中, 一個 core 為幾 m?"></a><strong>Kubernetes 中, 一個 core 為幾 m?</strong></h6><p>1000 m</p>
<h6 id="Kubernetes-將一個-core-分成幾份？"><a href="#Kubernetes-將一個-core-分成幾份？" class="headerlink" title="Kubernetes 將一個 core 分成幾份？"></a><strong>Kubernetes 將一個 core 分成幾份？</strong></h6><p>1000</p>
<h6 id="Docker-將一個-core-分成幾份？"><a href="#Docker-將一個-core-分成幾份？" class="headerlink" title="Docker 將一個 core 分成幾份？"></a><strong>Docker 將一個 core 分成幾份？</strong></h6><p>1024</p>
<h6 id="CGroup-將一個-core-分成幾份？"><a href="#CGroup-將一個-core-分成幾份？" class="headerlink" title="CGroup 將一個 core 分成幾份？"></a><strong>CGroup 將一個 core 分成幾份？</strong></h6><p>1024</p>
<h6 id="Kubernetes-中-當設定-memory-的-request-limit-後-會作用到-cgroup-嗎？"><a href="#Kubernetes-中-當設定-memory-的-request-limit-後-會作用到-cgroup-嗎？" class="headerlink" title="Kubernetes 中, 當設定 memory 的 request limit 後, 會作用到 cgroup 嗎？"></a><strong>Kubernetes 中, 當設定 memory 的 request limit 後, 會作用到 cgroup 嗎？</strong></h6><p>不會</p>
<h6 id="Kubernetes-中-當設定-CPU-的-request-limit-後-會作用到-cgroup-嗎？"><a href="#Kubernetes-中-當設定-CPU-的-request-limit-後-會作用到-cgroup-嗎？" class="headerlink" title="Kubernetes 中, 當設定 CPU 的 request limit 後, 會作用到 cgroup 嗎？"></a><strong>Kubernetes 中, 當設定 CPU 的 request limit 後, 會作用到 cgroup 嗎？</strong></h6><p>會</p>
<h6 id="Kubernetes-resource-limit-中-request-resource-是由哪一個-cgroup-系統所管理的"><a href="#Kubernetes-resource-limit-中-request-resource-是由哪一個-cgroup-系統所管理的" class="headerlink" title="Kubernetes resource limit 中, request resource 是由哪一個 cgroup 系統所管理的?"></a><strong>Kubernetes resource limit 中, request resource 是由哪一個 cgroup 系統所管理的?</strong></h6><p><code>cpu shares system</code></p>
<h6 id="cgroup-cpu-cfs-period-us-中的-period-代表幾秒？"><a href="#cgroup-cpu-cfs-period-us-中的-period-代表幾秒？" class="headerlink" title="cgroup cpu.cfs_period_us 中的 period 代表幾秒？"></a><strong>cgroup <code>cpu.cfs_period_us</code> 中的 period 代表幾秒？</strong></h6><p>1/10 秒 或 100000 microseconds (百萬分之一秒)</p>
<h6 id="cgroup-cpu-cfs-quota-us-中的-quota-代表什麼？"><a href="#cgroup-cpu-cfs-quota-us-中的-quota-代表什麼？" class="headerlink" title="cgroup cpu.cfs_quota_us 中的 quota 代表什麼？"></a><strong>cgroup <code>cpu.cfs_quota_us</code> 中的 quota 代表什麼？</strong></h6><p>一個程序在 period 中容許可調用的最大值</p>
<h6 id="假如我的-CPU-request-limit-是-200m-那我的-cpu-cfs-period-us-以及-cpu-cfs-quota-us-分別是多少？"><a href="#假如我的-CPU-request-limit-是-200m-那我的-cpu-cfs-period-us-以及-cpu-cfs-quota-us-分別是多少？" class="headerlink" title="假如我的 CPU request limit 是 200m, 那我的 cpu.cfs_period_us 以及 cpu.cfs_quota_us 分別是多少？"></a><strong>假如我的 CPU request limit 是 200m, 那我的 <code>cpu.cfs_period_us</code> 以及 <code>cpu.cfs_quota_us</code> 分別是多少？</strong></h6><ul>
<li><code>cpu.cfs_period_us</code>: 100000</li>
<li><code>cpu.cfs_quota_us</code>: 20000</li>
</ul>
<h6 id="cpu-cfs-period-us-跟-cpu-cfs-quota-us-是屬於哪一個-cgroup"><a href="#cpu-cfs-period-us-跟-cpu-cfs-quota-us-是屬於哪一個-cgroup" class="headerlink" title="cpu.cfs_period_us 跟 cpu.cfs_quota_us 是屬於哪一個 cgroup?"></a><strong><code>cpu.cfs_period_us</code> 跟 <code>cpu.cfs_quota_us</code> 是屬於哪一個 cgroup?</strong></h6><p>cpu,cpuacct</p>
<h6 id="cpu-cfs-period-us-跟-cpu-cfs-quota-us-中的-cfs-的意思是"><a href="#cpu-cfs-period-us-跟-cpu-cfs-quota-us-中的-cfs-的意思是" class="headerlink" title="cpu.cfs_period_us 跟 cpu.cfs_quota_us 中的 cfs 的意思是?"></a><strong><code>cpu.cfs_period_us</code> 跟 <code>cpu.cfs_quota_us</code> 中的 cfs 的意思是?</strong></h6><p>Completely Fair Scheduler</p>
<h6 id="Linux-的預設-CPU-scheduler-是哪一個"><a href="#Linux-的預設-CPU-scheduler-是哪一個" class="headerlink" title="Linux 的預設 CPU scheduler 是哪一個?"></a><strong>Linux 的預設 CPU scheduler 是哪一個?</strong></h6><p>CFS (Completely Fair Scheduler)</p>
<h6 id="Kubernetes-中-當設定-CPU-的-request-resource-限制-會作用到-cgroup-嗎？"><a href="#Kubernetes-中-當設定-CPU-的-request-resource-限制-會作用到-cgroup-嗎？" class="headerlink" title="Kubernetes 中, 當設定 CPU 的 request resource 限制, 會作用到 cgroup 嗎？"></a><strong>Kubernetes 中, 當設定 CPU 的 request resource 限制, 會作用到 cgroup 嗎？</strong></h6><p>會哦</p>
<h6 id="Kubernetes-中-程序可以超出-CPU-request-resource-限制-規定的用量嗎？"><a href="#Kubernetes-中-程序可以超出-CPU-request-resource-限制-規定的用量嗎？" class="headerlink" title="Kubernetes 中, 程序可以超出 CPU request resource 限制 規定的用量嗎？"></a><strong>Kubernetes 中, 程序可以超出 <code>CPU request resource 限制</code> 規定的用量嗎？</strong></h6><p>不行</p>
<h6 id="Kubernetes-中-當程序使用了超過-CPU-request-resource-限制-規定的用量的話-會發生什麼事？"><a href="#Kubernetes-中-當程序使用了超過-CPU-request-resource-限制-規定的用量的話-會發生什麼事？" class="headerlink" title="Kubernetes 中, 當程序使用了超過 CPU request resource 限制 規定的用量的話, 會發生什麼事？"></a><strong>Kubernetes 中, 當程序使用了超過 <code>CPU request resource 限制</code> 規定的用量的話, 會發生什麼事？</strong></h6><p>不會有這種情況, 因為 <code>CPU request resource 限制</code> 規定的用量不允許超出</p>
<h6 id="Kubernetes-resource-limit-中-如果我只設定了-limits-但沒設定-requests-會發生什麼事？"><a href="#Kubernetes-resource-limit-中-如果我只設定了-limits-但沒設定-requests-會發生什麼事？" class="headerlink" title="Kubernetes resource limit 中, 如果我只設定了 limits, 但沒設定 requests, 會發生什麼事？"></a><strong>Kubernetes resource limit 中, 如果我只設定了 limits, 但沒設定 requests, 會發生什麼事？</strong></h6><p>requests 的預設值會被設為跟 limits 一樣</p>
<h6 id="Kubernetes-resource-limit-中-如果我只設定了-requests-但沒設定-limits-會發生什麼事？"><a href="#Kubernetes-resource-limit-中-如果我只設定了-requests-但沒設定-limits-會發生什麼事？" class="headerlink" title="Kubernetes resource limit 中, 如果我只設定了 requests, 但沒設定 limits, 會發生什麼事？"></a><strong>Kubernetes resource limit 中, 如果我只設定了 requests, 但沒設定 limits, 會發生什麼事？</strong></h6><p>scheduler 會正常根據 requests 的資源數據啟動 pod, 但該 process 的資源使用量將無法被限制</p>
<h6 id="以下的-Kubernetes-yaml-設定檔的意思是"><a href="#以下的-Kubernetes-yaml-設定檔的意思是" class="headerlink" title="以下的 Kubernetes yaml 設定檔的意思是?"></a><strong>以下的 Kubernetes yaml 設定檔的意思是?</strong></h6><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">LimitRange</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">default-limit</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  limits:</span></span><br><span class="line"><span class="hljs-attr">  - default:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">100</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">100</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    defaultRequest:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">  - max:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">512</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">500</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">  - min:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line"><span class="hljs-attr">    type:</span> <span class="hljs-string">Container</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># API 版本</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 種類為 LimitRange</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">LimitRange</span></span><br><span class="line"><span class="hljs-comment"># 該 LimitRange 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># 該 LimitRange 的 name</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">default-limit</span></span><br><span class="line"><span class="hljs-comment"># 該 LimitRange 運行的規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 定義 limits</span></span><br><span class="line"><span class="hljs-attr">  limits:</span></span><br><span class="line">    <span class="hljs-comment"># 預設的 resource limits, 若該 namespace 下的 pod 在建立時沒有指定資源限制, 將套用此預設設定</span></span><br><span class="line"><span class="hljs-attr">  - default:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">100</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">100</span><span class="hljs-string">m</span></span><br><span class="line">    <span class="hljs-comment"># 預設的 resource requested, 若該 namespace 下的 pod 在建立時沒有指定資源限制, 將套用此預設設定</span></span><br><span class="line"><span class="hljs-attr">    defaultRequest:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line">    <span class="hljs-comment"># 若欲在此 namespace 下建立 pod, 而該 pod 若指定資源限制高於此設定, 將不允許建立</span></span><br><span class="line"><span class="hljs-attr">  - max:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">512</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">500</span><span class="hljs-string">m</span></span><br><span class="line">    <span class="hljs-comment"># 若欲在此 namespace 下建立 pod, 而該 pod 若指定資源限制低於此設定, 將不允許建立</span></span><br><span class="line"><span class="hljs-attr">  - min:</span></span><br><span class="line"><span class="hljs-attr">      memory:</span> <span class="hljs-number">50</span><span class="hljs-string">Mi</span></span><br><span class="line"><span class="hljs-attr">      cpu:</span> <span class="hljs-number">50</span><span class="hljs-string">m</span></span><br><span class="line">    <span class="hljs-comment"># 限制的類型為 container</span></span><br><span class="line"><span class="hljs-attr">    type:</span> <span class="hljs-string">Container</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="Kubernetes-request-resource-限制中-1-core-1000-m-那允許的最小設定值是多少？"><a href="#Kubernetes-request-resource-限制中-1-core-1000-m-那允許的最小設定值是多少？" class="headerlink" title="Kubernetes request resource 限制中, 1 core = 1000 m, 那允許的最小設定值是多少？"></a><strong>Kubernetes request resource 限制中, 1 core = 1000 m, 那允許的最小設定值是多少？</strong></h6><p>1m</p>
<h6 id="Kubernetes-中-要如何查看-node-有多少可用資源？"><a href="#Kubernetes-中-要如何查看-node-有多少可用資源？" class="headerlink" title="Kubernetes 中, 要如何查看 node 有多少可用資源？"></a><strong>Kubernetes 中, 要如何查看 node 有多少可用資源？</strong></h6><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl describe nodes nodeName</span><br></pre></td></tr></table></figure>
<h6 id="Kubernetes-中-如何知道容器有沒有因為資源達到限制而被砍掉？"><a href="#Kubernetes-中-如何知道容器有沒有因為資源達到限制而被砍掉？" class="headerlink" title="Kubernetes 中, 如何知道容器有沒有因為資源達到限制而被砍掉？"></a><strong>Kubernetes 中, 如何知道容器有沒有因為資源達到限制而被砍掉？</strong></h6><ul>
<li><p>取得 pod 資訊</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kube describe pod podName</span><br></pre></td></tr></table></figure>
</li>
<li><p>取得前一個 pod 被砍掉的原因</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get pod -o go-template=<span class="hljs-string">'&#123;&#123;range.status.containerStatuses&#125;&#125;&#123;&#123;"Container Name: "&#125;&#125;&#123;&#123;.name&#125;&#125;&#123;&#123;"\r\nLastState: "&#125;&#125;&#123;&#123;.lastState&#125;&#125;&#123;&#123;end&#125;&#125;'</span>  simmemleak-hra99</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="Kubernetes-中-local-ephemeral-storage-指的是什麼地方？"><a href="#Kubernetes-中-local-ephemeral-storage-指的是什麼地方？" class="headerlink" title="Kubernetes 中, local ephemeral storage 指的是什麼地方？"></a><strong>Kubernetes 中, local ephemeral storage 指的是什麼地方？</strong></h6><p>root partition</p>
<h6 id="Kubernetes-中-emptyDir-volumes-container-logs-image-layers-container-writable-layers-這些都是使用哪一塊空間？"><a href="#Kubernetes-中-emptyDir-volumes-container-logs-image-layers-container-writable-layers-這些都是使用哪一塊空間？" class="headerlink" title="Kubernetes 中, emptyDir volumes, container logs, image layers, container writable layers, 這些都是使用哪一塊空間？"></a><strong>Kubernetes 中, emptyDir volumes, container logs, image layers, container writable layers, 這些都是使用哪一塊空間？</strong></h6><p>root partition</p>
<h6 id="以下的-Kubernetes-yaml-檔是什麼意思呢？"><a href="#以下的-Kubernetes-yaml-檔是什麼意思呢？" class="headerlink" title="以下的 Kubernetes yaml 檔是什麼意思呢？"></a><strong>以下的 Kubernetes yaml 檔是什麼意思呢？</strong></h6><ul>
<li><p><strong>yaml 檔</strong></p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">frontend</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">db</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">mysql</span></span><br><span class="line"><span class="hljs-attr">    env:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line"><span class="hljs-attr">      value:</span> <span class="hljs-string">"password"</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"2Gi"</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"4Gi"</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">wp</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">wordpress</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"2Gi"</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"4Gi"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># API 版本</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 種類為 Pod</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># 該 Pod 的 name</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">frontend</span></span><br><span class="line"><span class="hljs-comment"># 該 pod 運行的規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 定義容器規格</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line">    <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">db</span></span><br><span class="line">    <span class="hljs-comment"># 鏡像名稱</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">mysql</span></span><br><span class="line">    <span class="hljs-comment"># 定義變數</span></span><br><span class="line"><span class="hljs-attr">    env:</span></span><br><span class="line">      <span class="hljs-comment"># 變數名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD</span></span><br><span class="line">      <span class="hljs-comment"># 變數值</span></span><br><span class="line"><span class="hljs-attr">      value:</span> <span class="hljs-string">"password"</span></span><br><span class="line">    <span class="hljs-comment"># 定義資源限制</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line">      <span class="hljs-comment"># 定義 requests 資源限制</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line">        <span class="hljs-comment"># 限制 ephemeral-storage</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"2Gi"</span></span><br><span class="line">      <span class="hljs-comment"># 定義 limits 資源限制</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line">        <span class="hljs-comment"># 限制 ephemeral-storage</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"4Gi"</span></span><br><span class="line">    <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">wp</span></span><br><span class="line">    <span class="hljs-comment"># 鏡像名稱</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-string">wordpress</span></span><br><span class="line">    <span class="hljs-comment"># 定義資源限制</span></span><br><span class="line"><span class="hljs-attr">    resources:</span></span><br><span class="line">      <span class="hljs-comment"># 定義 requests 資源限制</span></span><br><span class="line"><span class="hljs-attr">      requests:</span></span><br><span class="line">        <span class="hljs-comment"># 限制 ephemeral-storage</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"2Gi"</span></span><br><span class="line">      <span class="hljs-comment"># 定義 limits 資源限制</span></span><br><span class="line"><span class="hljs-attr">      limits:</span></span><br><span class="line">        <span class="hljs-comment"># 限制 ephemeral-storage</span></span><br><span class="line"><span class="hljs-attr">        ephemeral-storage:</span> <span class="hljs-string">"4Gi"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="Kubernetes-哪一個元件依據-ephemeral-storage-資源分配-pod-到適當的-node"><a href="#Kubernetes-哪一個元件依據-ephemeral-storage-資源分配-pod-到適當的-node" class="headerlink" title="Kubernetes, 哪一個元件依據 ephemeral-storage 資源分配 pod 到適當的 node?"></a><strong>Kubernetes, 哪一個元件依據 ephemeral-storage 資源分配 pod 到適當的 node?</strong></h6><p>scheduler</p>
<h6 id="Kubernetes-如果一個-pod-裡頭的某個容器的-writable-layer-以及-logs-使用量超過的-ephemeral-storage-的資源限制-會發生什麼事？"><a href="#Kubernetes-如果一個-pod-裡頭的某個容器的-writable-layer-以及-logs-使用量超過的-ephemeral-storage-的資源限制-會發生什麼事？" class="headerlink" title="Kubernetes, 如果一個 pod 裡頭的某個容器的 writable layer 以及 logs 使用量超過的 ephemeral-storage 的資源限制, 會發生什麼事？"></a><strong>Kubernetes, 如果一個 pod 裡頭的某個容器的 writable layer 以及 logs 使用量超過的 ephemeral-storage 的資源限制, 會發生什麼事？</strong></h6><p>該 pod 會被砍了</p>
<h6 id="Kubernetes-如果一個-pod-裡頭的所有容器使用的-ephemeral-storage-用量以及-emptyDir-volumes-超過了資院限制-會發生什麼事？"><a href="#Kubernetes-如果一個-pod-裡頭的所有容器使用的-ephemeral-storage-用量以及-emptyDir-volumes-超過了資院限制-會發生什麼事？" class="headerlink" title="Kubernetes, 如果一個 pod 裡頭的所有容器使用的 ephemeral-storage 用量以及 emptyDir volumes 超過了資院限制, 會發生什麼事？"></a><strong>Kubernetes, 如果一個 pod 裡頭的所有容器使用的 ephemeral-storage 用量以及 emptyDir volumes 超過了資院限制, 會發生什麼事？</strong></h6><p>該 pod 會被砍了</p>
<p><br><br><br></p>
<h2 id="參考資源"><a href="#參考資源" class="headerlink" title="參考資源"></a>參考資源</h2><ul>
<li><a href="https://link.medium.com/GJYhX4tlF3" target="_blank" rel="noopener">Understanding resource limits in Kubernetes: memory</a></li>
<li><a href="https://medium.com/@betz.mark/understanding-resource-limits-in-kubernetes-cpu-time-9eff74d3161b" target="_blank" rel="noopener">Understanding resource limits in kubernetes: cpu time</a></li>
<li><a href="https://docs.docker.com/engine/reference/run/#cpu-share-constraint" target="_blank" rel="noopener">Docker Documentation</a></li>
<li><a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/" target="_blank" rel="noopener">Kubernetes Documentation</a></li>
<li><a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-node/20190129-hugepages.md" target="_blank" rel="noopener">Kubernetes/enhancements</a></li>
</ul>
<h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p>Yo~ 這是針對 Kubernetes 的資源限制 (Resource Limits) 的一篇學習筆記, 探詢 <code>requests</code> 以及 <code>limits</code> 的用途, 不然都傻傻分不清楚！<br></p>
        <p class="article-more-link">
            <a href="/zh-tw/managing-compute-resources-for-containers/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/gitSensitiveness/" itemprop="url">一下子敏感, 一下子不敏感, Git 你搞得我好亂啊</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-23T05:51:46.000Z" itemprop="datePublished">1月 23 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/TOOLs/">TOOLs</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            12 分钟 讀完 (大概 1816 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在一個因緣際會之下, 我與 Git 有場美麗的邂逅, 殊不知, 對我這個情場處子來說, Git 就像一隻貓, 忽遠忽近, 忽冷忽熱, 忽上忽下, 忽快忽慢… 一下子敏感, 一下子又不敏感, 那個… 我說的是大小寫。</p>
        <p class="article-more-link">
            <a href="/zh-tw/gitSensitiveness/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/laravelEloquentORMRelationships/" itemprop="url">Laravel - EloquentORM - Relationships</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-23T02:31:15.000Z" itemprop="datePublished">1月 23 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Dev/">Dev</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            1 小时 讀完 (大概 8143 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>學習一個框架, Ray 的想法是, 在深入理解底層實作的原理之前, 應該先知道這個框架的 <code>使用方法</code>; 先學習怎麼<strong>使用</strong>這個前人造的輪子, 再學習怎麼樣<strong>造</strong>一個輪子。<br>所以本篇文章重點在於細讀<strong>官方文件</strong>, 並將內容理解後以 <strong>Q&amp;A</strong> 的方式記錄下來, 加速學習以及查詢。</p>
        <p class="article-more-link">
            <a href="/zh-tw/laravelEloquentORMRelationships/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/continuousDeliveryPipelinesWithSpinnakerAndKubernetesEngine/" itemprop="url">使用 Spinnaker 在 Kubernetes Engine 中實作持續交付管道</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-18T02:46:40.000Z" itemprop="datePublished">1月 18 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/GCP/">GCP</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            1 小时 讀完 (大概 10044 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在本教程中, 你將會學到如何使用 Google Kubernetes Engine, Google Cloud Source Repositories, Google Cloud Container Builder, 以及 Spinnaker 來建立持續交付管道。 在你建立範例應用之後, 你將設定這些服務, 使他們可以自動建立, 測試, 以及部署。<br>當你修改了應用的程式碼, 這個變更會觸發持續交付管道, 使用新的版本來重新建立, 測試, 以及部署。</p>
        <p class="article-more-link">
            <a href="/zh-tw/continuousDeliveryPipelinesWithSpinnakerAndKubernetesEngine/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/monitoringWithStackdriverOnKubernetesEngine/" itemprop="url">&lt;未完成&gt; 使用 Stackdriver 在 Kubernetes Engine 上實施監控</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-10T01:55:34.000Z" itemprop="datePublished">1月 10 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/GCP/">GCP</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            18 分钟 讀完 (大概 2745 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><a href="https://cloud.google.com/monitoring/kubernetes-engine/" target="_blank" rel="noopener">Stackdriver Kubernetes Monitoring</a> 是 Stackdriver 上個一個新功能, 它更緊密地與 GKE 整合, 可以更好的顯示你運行在 GKE 上的工作、服務的重要統計資訊。<br>新功能也包含了匯入, 可以匯入我們用 Prometheus 在 pods 取得的 metrics(指標), 就像是原生 Stackdriver metrics 一樣。 這讓我們可以使用 Prometheus 的 metrics 來觸發 Stackdriver 原生的警告功能, 不需要額外的設定以及串接。<br></p>
        <p class="article-more-link">
            <a href="/zh-tw/monitoringWithStackdriverOnKubernetesEngine/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/GKEMigratingToContainers/" itemprop="url">GKE Migrating to Containers</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-01-04T03:34:31.000Z" itemprop="datePublished">1月 4 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/GCP/">GCP</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            41 分钟 讀完 (大概 6208 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>容器正在以很快的速度成為軟體應用部署的業界標準。 容器化所帶來的商業以及技術上的好處正在推動很多團隊將他們的應用移到容器內。 本教程會提供一個基礎的示範, 示範如何將一個無狀態的應用, 從 VM 上轉移到 <a href="https://cloud.google.com/kubernetes-engine/" target="_blank" rel="noopener">Kubernetes Engine (GKE)</a>, 本範例示範了應用轉移的過程, 從典型的 VM/OS-based 部署, 到特定的容器化的 os, 再到一個你所知道的容器專用的平台 <a href="https://cloud.google.com/kubernetes-engine/" target="_blank" rel="noopener">GKE</a></p>
        <p class="article-more-link">
            <a href="/zh-tw/GKEMigratingToContainers/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/zh-tw/laravelDiggingDeeperQueues/" itemprop="url">Laravel - Digging Deeper - Queues</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-12-31T02:30:57.000Z" itemprop="datePublished">12月 31 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Dev/">Dev</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            28 分钟 讀完 (大概 4224 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>學習一個框架, Ray 的想法是, 在深入理解底層實作的原理之前, 應該先知道這個框架的 <code>使用方法</code>; 先學習怎麼<strong>使用</strong>這個前人造的輪子, 再學習怎麼樣<strong>造</strong>一個輪子。<br>所以本篇文章重點在於細讀<strong>官方文件</strong>, 並將內容理解後以 <strong>Q&amp;A</strong> 的方式記錄下來, 加速學習以及查詢。</p>
        <p class="article-more-link">
            <a href="/zh-tw/laravelDiggingDeeperQueues/#more">點擊閱讀</a>
        </p>
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="/zh-tw/">上一頁</a>
    </div>
    <div class="pagination-next">
        <a href="/zh-tw/page/3/">下一頁</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="/zh-tw/">1</a></li>
        
        <li><a class="pagination-link is-current" href="/zh-tw/page/2/">2</a></li>
        
        <li><a class="pagination-link" href="/zh-tw/page/3/">3</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/zh-tw/page/12/">12</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Ray&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
                       <a class="navbar-item" title="GitHub" href="https://github.com/tn710617">
                           
                           <i class="fab fa-github"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Medium" href="https://medium.com/@raycodingjourney">
                           
                           <i class="fab fa-medium"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Linkedin" href="https://www.linkedin.com/in/ray-lee-99315315a">
                           
                           <i class="fab fa-linkedin"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Facebook" href="https://www.facebook.com/profile.php?id=100001626039430">
                           
                           <i class="fab fa-facebook"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="CakeResume" href="https://www.cakeresume.com/resumes/ray-6edaef/edit">
                           
                           <i class="far fa-address-card"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="E-Mail" href="mailto:tn710617@gmail.com">
                           
                           <i class="far fa-envelope"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Skype" href="skype:adad0310?call|chat">
                           
                           <i class="fab fa-skype"></i>
                           
                       </a>
                          
                       
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.zh-tw.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>