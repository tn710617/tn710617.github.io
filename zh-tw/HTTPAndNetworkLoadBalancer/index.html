<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>設定 Network 以及 HTTP 平衡負載器 - Ray&#39;s Coding Journey</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta name="keywords" content="GCP Essentials,QWIKLABS,Google Load Balancers">
<meta property="og:type" content="article">
<meta property="og:title" content="設定 Network 以及 HTTP 平衡負載器">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/HTTPAndNetworkLoadBalancer/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta property="og:locale" content="zh-tw">
<meta property="og:image" content="https://lh3.googleusercontent.com/JoxRKMMSKbzKyCJ83rgcHWsp0GqmDd4VJyA2JHttJIWtbeuSIiuLjuSSxc4iqePChDXbxGcLwlK2Ak3L_XKUbYDDc02KsoQczJQUjhf54Va0RDUXYR3Rs41gZ6chzqI4yNHMtFh8n21uoOrorZxFgQW_zUF7DxoFbP2cud5EQHISGuRo46oC3y4twF9RdpS0TSSA4olJ7qOJOWkyI6BVt4W3xNBLoNQe1KpHMsh4yZmNy62qzpIPZzG6mOyWJhxoeQgDv_AJMUZeePJb07cQRL0A1Z2o4BOmY2yDMeQxeo6zLOUa2YQn03IyyXmRkOHITivPHxEUNTRwRpx692JGJ0xLiRXaTrR3zUHIshdqfeUgqqpu3IzBEyFeQf_uuq3SBcVam2n-82KYWus0e9V9JyPdc57OK88fPGEv2FQ8gL3BphZ2cGk4m8-r2aZlcUu8eyAc3xf0ggMczseovjEtSj-Yd3hf7qMhQj6kczUUNLQ3bzF5Xj3X_w4frm5zaeGneTpLzM3R0rCa1OG-97DkR22YNXTSZoAHeEyH6i5TIWUjLQZfUFgAaDe7yHFFFv6ykMXIosO0hR93UeNtSxfkwBmZ1YSvIM_GBF4u5kSqRJkiPkIv0wso8tkk6Lu0lrvEPMUDeLwu_c_7AM-gq0GPkFdXF4Q4ED4=w297-h293-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/7d6Sw0e-DdZsWhuQG4LieT4RhHJlEIYZ3PbCTTS9B1rLivIvMY7G-VFuy-sQl3bbaNBlVoWipPwQyAWu-oPHUEQYIU5WOnfxflf5JtqsPiaRjQZ32Euuzo5_GqdSZ_hTaGyOBdVq8PzLfoT0RXQGIIEX5GJpnQvm1H8V9VD54X7RACmwemGHdHnOIN3OEYaYDTu3tfMD7NMlmlxvfs4aw1ZuKKGg52cuhwFZQB8e-uOFILtjRwvlJLVEO_iwmv8DDefMd6bIJDh6UdkunTMPcozfKT1muTgaqD1ie8LlaXUgHg5Uqnk9peB7yFejJfL-AwG44agBDOehNad2fJZAIb10HF8ZsAv0_JM-MJzSGbNQ3GK8J0ghFWu1qCNA5udefx6IXzX3vcDz92ArWjSz1QyNBErc2Zkj8YAA5Mfa0CRdFqTmOfXdxt73q7dpQup3zu5aASM4lh37l6SMCQ1ZVy07vcYvCL1mFnQ_hjc4Dg0SqdI7SvravdzmNO3ZEsumpEYgaIIJsnkRU7tzOrmZbV8hH__b90cAkfAamsPmVlgp9sZIwqUzptuDvuPEDyBPBYZC4o9eo5KyQahlTN1grAvzKkPMKYNQfiuKZKch1vpV24M0zuvjgRZFUQnz3V2ERzreJVNRaT_REMv6ifmf1RetnnHYIHg=w356-h248-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/LTqcvw12A83DFUA6wBwrvyfkCfqOXSzirXjbsH-F2lXQSFeA-RLHZ7-OwmSo2KRMIyh4aeOIM3sH7OEcgtvyRBhBZ3XUT0KeCA6JCziJfbwWoHeo_yQJEM6L0yNrsOxxvYsTfi7vc0JcG2PCq16I_-VapQeMzCUG4YHfQ05FMXM_Qbk3Q5AS_Gz37Qnnb2LBnS_FEq6xB1P5JZQPg0ewtkXL_w4uzxXBuiTF20FD5Wmvozjka_hHRPg7sNNv_s7Gl5QozEPvCLluVaulnZRr_EgqkMDsFhAYQo6f40EJ3d2G7h-teXuZxzGUNNauapux1XG54aCL-dbHexnOLC-_zPGhCJcU8s51SPLH_-mscGdvTbSmM1bfacQb4jqn28Ce0YTeFk_GdKE_Yc1uBhzv7AX3hPI47EtVMoDTN1S_4VRalxoaCGMW1W8weYxiVOKvqvts_vKrXPNcQhID-XGtTLRbMxHVVJQM_CZVLMdbIS04olUmWMompFUREpOdVvogPOxCeMNiOZOrjY8I53D6SdKdDjepyNBVHpD1U9clBS88hczGUhhZbEMDqM5V91GG0OmpcFu0vgc0vnAhmpBvcUrA4xf0_16Nxq3fxYky9x7xLLUXS12pIfLwShDt9RWhU8hiDDTzGkugZB294m_e1d4rjHxTiOw=w1172-h266-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NQiAOvTG-8VLhp5DpNDvWH8j61jQ_9siMi_WMu8ZkujJnJ1nDCddW6e25xxpJykZi9CppWFX3PUbQ-1DOGAVO68NF_qXSOB0ne3apVKL3-x-CFbxxOjDc6FMZ6QK6Xq9cOX1WRgLxk76IhOWGZq4KQ2JOpE6XcH8CMWaowuunUPBLURUdnYWsEh_uanRFPwvabcbMGDgaU8Y-rXOTlMaiC8rBanZtz94OziyEuW8quqpTUb0t9zsLb9WwbZn3dQzC7nK7IBwZ4Hn_F9oeTtGk4RWpd-C0GdqHeDvobjExPIKjkIaO1n56PZHPbkBIZi8ltEAEaR8IRp31u2ryYpKSDFtobrWVA4Px9zI1FyWed-MhwoCJVX2KE-8LJEahoYgO-d43oi_bolFsiCmjEkJj5q9UWeIF3SapHHZj3rHUtV3WRnlpP32UWXnltfOpaDvFfSgDC_IukM_uwrn64VHRo0mwyCPM8jZM280GWdg2CGJOLBf8T4tq-5Tj71vBj3toOtfcHYSa0_fTBfCwfQUeuzR3qncAHKYk0N7TVIxtcTQdmQX9fVTI3lB0ngg_suUB5NWIErLkfGhHpxNO5m6Iji5h1tBl4Cx3UqTBpqbQD4qqmuDpfYqjjxfyymoTGDGuFvYlyheBnx6LYz4R-5WTcgwpL06OCs=w1172-h266-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NsZ_a6EE077gPoIPQHGUyv3oi-CS0ZXvCCqcqQRSHXNB5NJP_532CiuaTBPpV3bC6WZK9mP5xuRCsIQCHERH-qJc5Ez1ISujFlCPJXBgAPZSTi_vg7pQKIQwEDei7UrjelpPIFpu8nj5c48WcLyn7iy8ZB5rW1jMCCnaICN9ckEPST_Bq4mum0WyDA0vbxZ6s_prBqRwHP7BYqK-yv5LY5WU2Cp_u58T2EVXS-TJ3b460s-PNEaKgPC6SoCpdamnW9VY2YzsvCycviBIODgAH-pvIZf7AppQsTWF7fe9d6JLq0yvBT3fnO4isK-Tu_i3ZlzIHyb5Ccmb4oYBzt42FIm9NmgUF0sDhiVEi3y2qgts7aU-5S3Sd85uv1N9qVuHZqTcuZk0uNgAfjfKfZN6clp4JFcf-CsZWPxZOJ5QdxSFG8wKAxz02vgiQdopj-R9SEEBR--TikL2KiSl2zHFqmegWol-8TYaLQSI4ZKKRqgzrsLuDvf_nw3Z9RqvX-4_P7HY9cqmaRDIkwK5pP-KF0gOjurvuRRmbGpdSpNCbM7cVZbyCpQgV28UdUdLdd0N-7xHa2QT1hVJnVGwmn3e7dMdc5PuTnJ6TMm6h0mcLKVdvqF7cInxrhsqBrvGj1VAZwY5ej4O4VPF1r0XAEH7bnD4HqSXMWg=w993-h696-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/67XYRFIt0PZG-lcSS21Eum9KeVPQBBSZ6WedKsA578qdHbCrs43df3Url887daqVpEm5xJTYmhlu3g1IVQFf8QOwIU01QWXSqybAnT9oRhjnx31l9ykNLa_hJCc9Szr1ODStfEd7hEXnlknqkrawQx9KWHIVAfYQsv36VXHzNh8CFRRYC96L8G8TnWUh-3GDiijvkBIg30jPWDCXrcre6bKvQmiOS8RIdhYsmh8KaYXYsMJQ83pWyQeKaTkY8fAcwnuFHTLt1Fx6lVolrSIUFqTH7N_snLcLxqVVnBcr9jBWN_cz-hGEyNzYPCq-GR1XjY8REeisXM9wskHXtYKBIwzyIpSkrZqSF-yJ5Y83UL55nQQ3aqK1gPOMizYbApEBfVEEOai-o9bO9hiSgAzg2oNckT3e7zRNeak5WUe41e1RPK8qvZIRPgUDfTWAUhBJgYPFfzQtI-HC4M_6G8Cj9y_W1DWtc9h8MnEbdBU2ARIWEsOBPhGEIrVCfWjIFk_wg13j3SidpqUXvjy8oqoDhwzJ_dnrntwL_o22ZBn0wxzdhjltdIjAB079f19G6PqRcxtNHVfwn9J4BTliJ4JYDx_13LkVArVmi1o8ZmnBuBb-99qBscIcj1qPrGSVbE-f2AQ7to7pSZHuFpn0BuHrQNDYcfnqePs=w1267-h196-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/HkHGuvhUdSd0M5XRhDA16I2SPmAS82B5BsE4o7gqcgLfgQC0D2m6HnStqoPKJjYZKWZ4jOByLhPL7mB5sb72EGpzVxs_jN1_wJcXUyclIQ3rkEs2OHQs8oV17PLZ6RYG__-_U9VW29CL1wJQ8M-_TNWvTKr9jYaTBUP5GPVKHuCi9MdwvJvo_pBNrJVgd8YMKHSPltAj6yBw5rSspE27AIztTpnSj1-tbT8_ghO-YYKsG-IesekblS52uzVjvryBre-lR8knLxpThpAoxCJURcT2bTjj37KmDPfhtjUnPPxOjoelt_zwzd5sXpRJLpz52QLHlALanloCsc0wE9HG-ZHuJ7hr51paxXvfEzR5t71ZnXuUM8ZInztYpvGiT3gBGfgAHM-vqEMAzJrxRyZgNiFonuvH7Qd1H46RI-NBkwdSAhR-ULSrFqtSadE5qRj67iw09IGprXwi8ZX2prFD3LxVoHO1RPrmD9Gt0g2ORm9RShgnDQqbCF6HILXa-9MZ6wSKaYyWFqQifWMAFki6wAQMs9pJynKz4gOrppBrFLpDHqSb1Q8Z5In_6gEWRCCv79S080maB5SNevS5B_rg1n7Vwm1xd5btXPyLE2uB4JX-HrEwzz87xgx7oLW6xMQsiuZvjsd7vBcZzBv8qTpDXerInDc5asW7xVNyZ--xmN-1QiwY9aAHzHQ=w1034-h230-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/2apX2v8MHHX_J_83Wzbe_bwSAtvYpy0iiK4tvbD_6kfguCqMfDLxa_Romlzi2aVmJGIdIi9iHsRQMZJaB6fQk4YvA4rbHebfRzOs1Z19_oMIcGtbcZmzAlCBkx9IW9w3BCeCwVFiKm5yRsaywNuVUqe2IPXtt9tqV45rM-itUgGk3-CiQK-ddju0_V8jt2BVWaz04bGzUDw1dA1UZlETjBC2zD5akrGqbNjL6cJwnJINZSF3DUCm2K7Eex_BIz8HN7b2ZVjreZlvk5jfP9M6qn7co1HpXjXBZGyPTGWNtCdrZ53rHbt7Sl2bPWQy8u85qDbvpjUDRstC2_Wf1nTwM5G3s9CKmN4QIm77f4sjcWQy-XKBA1LzHItyt8lEhCROjx84SJBviaR5leGNfUwg-Bf1sazdUvQ4tjYnXYuvpw_DKkmFzNqRpHXNwxl6Hc0ufoS0BUER4kmKax51rM8z3g3rsLf5_9WsuT73ngIBi-Astx_GMnDtUkVEB7V8zIWKzQpks1YLvf6TvxnTyKa7JTywl4aUfyGCk6-CzqNKDU2gl8SZRgde7DSXcwuP568CpFU0bdTEA_Yw_H1Q_TpoStF8XRnJzoi3SEpUi0y-33smyrIRRzCHHGiiE0anroRwIJ_dmzQ12D7ZEXijnentXH-Pg9pAT-YLGeZoABT4kkcbXocz8-OzaOA=w1034-h262-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/pA7515fJS19-2Syf8gLT7iV-tuDBjrqjSmXrBgF8_PHerYQxp0x185WfEq31zCS9YsacFiXPwzSakttU8dtyx7GzDHQI77YuUdue39QGcfZ2FpkJQZq-g5LbRn9Ufx7b2lnOL3s9yVAC8QvzKXmkON_eT0i83shqN3kDApaNHvkWbzi_ngwHYSK45FbRyGiLbv4zaa75BuAF0B-UzrOQGaJgbRLFlM5J0B9RnC2e-_PQUoE09uklcL_6zCVhoY0DyKsfRd5h1sC_sxkPGCQ4e3PgrVJfYKN7tOt_367N33n0YIUiphjPttzYy_HBgUHCjK5SMPXQCB5KWrzh428TIfqYulTKqXEaN_Gab2LW5bxZmrM0HKtVboub5-cN5Oam0_vvBXAPKrg5fMZJnfmbJQ4KZojyJgQyj9H23tIIDQt0ZY6VMk0ma_28nifDhoQ6Q67JXI0wNXSaiTC6wh20XGklLCsNCgUdw_adOp2iFEMp2Ik58xzhri9v4mcgF97tKLOjcYt1OHpFdNy-6kAYt8dCvEalqIhUJAaDBvzYg855suuf6tC7DoGAnnlplNU1tlt0yfa_cc--i9Xhy2T3ZnpO8Hnx9ekKzsuaYWBpTXxY41k9N1gUeColW4lVhiVUyvwwO4jyE8Zgx_x2FsneRemGiITRNcyZk1tGJra_g4k4fRKw7O7XeXc=w1034-h262-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/uGpdRrP912S81P24a74yn4-coVYQre0jRQYCd9uH7DzNT-eUgU-DQv6D0DIuQtQTiS4eClxh9cmZjZY99vFQ1iKWxbr6xkyyt1IDQAn8urgbnV20TCrUV0T4fJjLtM1_EqgPFYhg0JyOFCRyMpnjgEgkyPth1RzMCDT3icG6nXeXZBXwVUISc9mfGZ-2q-l8QrawI1Of_J-qR1OE3GtjQZxWFO0XSf51TzGnlYCYfTPtXFyHpHRUByaJXgKNUyWKFF6s9lN_cnxzNK2lb9ZPDNQnGQv0F5JlsVg0AVp_qpAYz-u6PfJK3i7qvQibUANMTaupwuM9Uv3z4B-VgV4LjLjYS2sWObioxu36GEk40rfYifzwJAfFUNjVNAQS0XCI9Ms07oAcazoZcFQpG7WUU4bLcE1xnqsmNFVHHIV61fCBFjwqqauEQg6aBGQ9dG1g55_Led-oT12MIIzJVJkKespkOw4naHCoA5784H6PQcjC5tpN93qz3yKdPIKfuRcHwLV5pAk3VOLjYa93dCqSXxVizECXpp4vxUIokXrNHnZasLu5gsJPALT5Zdq5ec77LBbwV1ku4Q2Yek9Rnt-P8gdJ7C9WFBmFmxd5hfNiKl9tdF5l5s3vehdTloqfqoN7oWSt8lyaKv6FeEyCZYp9qDeOYuFV3G0dya6q87yQRWFGVOAo-zHoSUc=w1034-h322-no">
<meta property="og:updated_time" content="2020-02-04T10:11:38.791Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="設定 Network 以及 HTTP 平衡負載器">
<meta name="twitter:description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/JoxRKMMSKbzKyCJ83rgcHWsp0GqmDd4VJyA2JHttJIWtbeuSIiuLjuSSxc4iqePChDXbxGcLwlK2Ak3L_XKUbYDDc02KsoQczJQUjhf54Va0RDUXYR3Rs41gZ6chzqI4yNHMtFh8n21uoOrorZxFgQW_zUF7DxoFbP2cud5EQHISGuRo46oC3y4twF9RdpS0TSSA4olJ7qOJOWkyI6BVt4W3xNBLoNQe1KpHMsh4yZmNy62qzpIPZzG6mOyWJhxoeQgDv_AJMUZeePJb07cQRL0A1Z2o4BOmY2yDMeQxeo6zLOUa2YQn03IyyXmRkOHITivPHxEUNTRwRpx692JGJ0xLiRXaTrR3zUHIshdqfeUgqqpu3IzBEyFeQf_uuq3SBcVam2n-82KYWus0e9V9JyPdc57OK88fPGEv2FQ8gL3BphZ2cGk4m8-r2aZlcUu8eyAc3xf0ggMczseovjEtSj-Yd3hf7qMhQj6kczUUNLQ3bzF5Xj3X_w4frm5zaeGneTpLzM3R0rCa1OG-97DkR22YNXTSZoAHeEyH6i5TIWUjLQZfUFgAaDe7yHFFFv6ykMXIosO0hR93UeNtSxfkwBmZ1YSvIM_GBF4u5kSqRJkiPkIv0wso8tkk6Lu0lrvEPMUDeLwu_c_7AM-gq0GPkFdXF4Q4ED4=w297-h293-no">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


    <link href="/HTTPAndNetworkLoadBalancer/" rel="alternate" hreflang="en">








    <meta name="description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta name="keywords" content="GCP Essentials,QWIKLABS,Google Load Balancers">
<meta property="og:type" content="article">
<meta property="og:title" content="設定 Network 以及 HTTP 平衡負載器">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/HTTPAndNetworkLoadBalancer/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta property="og:locale" content="zh-tw">
<meta property="og:image" content="https://lh3.googleusercontent.com/JoxRKMMSKbzKyCJ83rgcHWsp0GqmDd4VJyA2JHttJIWtbeuSIiuLjuSSxc4iqePChDXbxGcLwlK2Ak3L_XKUbYDDc02KsoQczJQUjhf54Va0RDUXYR3Rs41gZ6chzqI4yNHMtFh8n21uoOrorZxFgQW_zUF7DxoFbP2cud5EQHISGuRo46oC3y4twF9RdpS0TSSA4olJ7qOJOWkyI6BVt4W3xNBLoNQe1KpHMsh4yZmNy62qzpIPZzG6mOyWJhxoeQgDv_AJMUZeePJb07cQRL0A1Z2o4BOmY2yDMeQxeo6zLOUa2YQn03IyyXmRkOHITivPHxEUNTRwRpx692JGJ0xLiRXaTrR3zUHIshdqfeUgqqpu3IzBEyFeQf_uuq3SBcVam2n-82KYWus0e9V9JyPdc57OK88fPGEv2FQ8gL3BphZ2cGk4m8-r2aZlcUu8eyAc3xf0ggMczseovjEtSj-Yd3hf7qMhQj6kczUUNLQ3bzF5Xj3X_w4frm5zaeGneTpLzM3R0rCa1OG-97DkR22YNXTSZoAHeEyH6i5TIWUjLQZfUFgAaDe7yHFFFv6ykMXIosO0hR93UeNtSxfkwBmZ1YSvIM_GBF4u5kSqRJkiPkIv0wso8tkk6Lu0lrvEPMUDeLwu_c_7AM-gq0GPkFdXF4Q4ED4=w297-h293-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/7d6Sw0e-DdZsWhuQG4LieT4RhHJlEIYZ3PbCTTS9B1rLivIvMY7G-VFuy-sQl3bbaNBlVoWipPwQyAWu-oPHUEQYIU5WOnfxflf5JtqsPiaRjQZ32Euuzo5_GqdSZ_hTaGyOBdVq8PzLfoT0RXQGIIEX5GJpnQvm1H8V9VD54X7RACmwemGHdHnOIN3OEYaYDTu3tfMD7NMlmlxvfs4aw1ZuKKGg52cuhwFZQB8e-uOFILtjRwvlJLVEO_iwmv8DDefMd6bIJDh6UdkunTMPcozfKT1muTgaqD1ie8LlaXUgHg5Uqnk9peB7yFejJfL-AwG44agBDOehNad2fJZAIb10HF8ZsAv0_JM-MJzSGbNQ3GK8J0ghFWu1qCNA5udefx6IXzX3vcDz92ArWjSz1QyNBErc2Zkj8YAA5Mfa0CRdFqTmOfXdxt73q7dpQup3zu5aASM4lh37l6SMCQ1ZVy07vcYvCL1mFnQ_hjc4Dg0SqdI7SvravdzmNO3ZEsumpEYgaIIJsnkRU7tzOrmZbV8hH__b90cAkfAamsPmVlgp9sZIwqUzptuDvuPEDyBPBYZC4o9eo5KyQahlTN1grAvzKkPMKYNQfiuKZKch1vpV24M0zuvjgRZFUQnz3V2ERzreJVNRaT_REMv6ifmf1RetnnHYIHg=w356-h248-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/LTqcvw12A83DFUA6wBwrvyfkCfqOXSzirXjbsH-F2lXQSFeA-RLHZ7-OwmSo2KRMIyh4aeOIM3sH7OEcgtvyRBhBZ3XUT0KeCA6JCziJfbwWoHeo_yQJEM6L0yNrsOxxvYsTfi7vc0JcG2PCq16I_-VapQeMzCUG4YHfQ05FMXM_Qbk3Q5AS_Gz37Qnnb2LBnS_FEq6xB1P5JZQPg0ewtkXL_w4uzxXBuiTF20FD5Wmvozjka_hHRPg7sNNv_s7Gl5QozEPvCLluVaulnZRr_EgqkMDsFhAYQo6f40EJ3d2G7h-teXuZxzGUNNauapux1XG54aCL-dbHexnOLC-_zPGhCJcU8s51SPLH_-mscGdvTbSmM1bfacQb4jqn28Ce0YTeFk_GdKE_Yc1uBhzv7AX3hPI47EtVMoDTN1S_4VRalxoaCGMW1W8weYxiVOKvqvts_vKrXPNcQhID-XGtTLRbMxHVVJQM_CZVLMdbIS04olUmWMompFUREpOdVvogPOxCeMNiOZOrjY8I53D6SdKdDjepyNBVHpD1U9clBS88hczGUhhZbEMDqM5V91GG0OmpcFu0vgc0vnAhmpBvcUrA4xf0_16Nxq3fxYky9x7xLLUXS12pIfLwShDt9RWhU8hiDDTzGkugZB294m_e1d4rjHxTiOw=w1172-h266-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NQiAOvTG-8VLhp5DpNDvWH8j61jQ_9siMi_WMu8ZkujJnJ1nDCddW6e25xxpJykZi9CppWFX3PUbQ-1DOGAVO68NF_qXSOB0ne3apVKL3-x-CFbxxOjDc6FMZ6QK6Xq9cOX1WRgLxk76IhOWGZq4KQ2JOpE6XcH8CMWaowuunUPBLURUdnYWsEh_uanRFPwvabcbMGDgaU8Y-rXOTlMaiC8rBanZtz94OziyEuW8quqpTUb0t9zsLb9WwbZn3dQzC7nK7IBwZ4Hn_F9oeTtGk4RWpd-C0GdqHeDvobjExPIKjkIaO1n56PZHPbkBIZi8ltEAEaR8IRp31u2ryYpKSDFtobrWVA4Px9zI1FyWed-MhwoCJVX2KE-8LJEahoYgO-d43oi_bolFsiCmjEkJj5q9UWeIF3SapHHZj3rHUtV3WRnlpP32UWXnltfOpaDvFfSgDC_IukM_uwrn64VHRo0mwyCPM8jZM280GWdg2CGJOLBf8T4tq-5Tj71vBj3toOtfcHYSa0_fTBfCwfQUeuzR3qncAHKYk0N7TVIxtcTQdmQX9fVTI3lB0ngg_suUB5NWIErLkfGhHpxNO5m6Iji5h1tBl4Cx3UqTBpqbQD4qqmuDpfYqjjxfyymoTGDGuFvYlyheBnx6LYz4R-5WTcgwpL06OCs=w1172-h266-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NsZ_a6EE077gPoIPQHGUyv3oi-CS0ZXvCCqcqQRSHXNB5NJP_532CiuaTBPpV3bC6WZK9mP5xuRCsIQCHERH-qJc5Ez1ISujFlCPJXBgAPZSTi_vg7pQKIQwEDei7UrjelpPIFpu8nj5c48WcLyn7iy8ZB5rW1jMCCnaICN9ckEPST_Bq4mum0WyDA0vbxZ6s_prBqRwHP7BYqK-yv5LY5WU2Cp_u58T2EVXS-TJ3b460s-PNEaKgPC6SoCpdamnW9VY2YzsvCycviBIODgAH-pvIZf7AppQsTWF7fe9d6JLq0yvBT3fnO4isK-Tu_i3ZlzIHyb5Ccmb4oYBzt42FIm9NmgUF0sDhiVEi3y2qgts7aU-5S3Sd85uv1N9qVuHZqTcuZk0uNgAfjfKfZN6clp4JFcf-CsZWPxZOJ5QdxSFG8wKAxz02vgiQdopj-R9SEEBR--TikL2KiSl2zHFqmegWol-8TYaLQSI4ZKKRqgzrsLuDvf_nw3Z9RqvX-4_P7HY9cqmaRDIkwK5pP-KF0gOjurvuRRmbGpdSpNCbM7cVZbyCpQgV28UdUdLdd0N-7xHa2QT1hVJnVGwmn3e7dMdc5PuTnJ6TMm6h0mcLKVdvqF7cInxrhsqBrvGj1VAZwY5ej4O4VPF1r0XAEH7bnD4HqSXMWg=w993-h696-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/67XYRFIt0PZG-lcSS21Eum9KeVPQBBSZ6WedKsA578qdHbCrs43df3Url887daqVpEm5xJTYmhlu3g1IVQFf8QOwIU01QWXSqybAnT9oRhjnx31l9ykNLa_hJCc9Szr1ODStfEd7hEXnlknqkrawQx9KWHIVAfYQsv36VXHzNh8CFRRYC96L8G8TnWUh-3GDiijvkBIg30jPWDCXrcre6bKvQmiOS8RIdhYsmh8KaYXYsMJQ83pWyQeKaTkY8fAcwnuFHTLt1Fx6lVolrSIUFqTH7N_snLcLxqVVnBcr9jBWN_cz-hGEyNzYPCq-GR1XjY8REeisXM9wskHXtYKBIwzyIpSkrZqSF-yJ5Y83UL55nQQ3aqK1gPOMizYbApEBfVEEOai-o9bO9hiSgAzg2oNckT3e7zRNeak5WUe41e1RPK8qvZIRPgUDfTWAUhBJgYPFfzQtI-HC4M_6G8Cj9y_W1DWtc9h8MnEbdBU2ARIWEsOBPhGEIrVCfWjIFk_wg13j3SidpqUXvjy8oqoDhwzJ_dnrntwL_o22ZBn0wxzdhjltdIjAB079f19G6PqRcxtNHVfwn9J4BTliJ4JYDx_13LkVArVmi1o8ZmnBuBb-99qBscIcj1qPrGSVbE-f2AQ7to7pSZHuFpn0BuHrQNDYcfnqePs=w1267-h196-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/HkHGuvhUdSd0M5XRhDA16I2SPmAS82B5BsE4o7gqcgLfgQC0D2m6HnStqoPKJjYZKWZ4jOByLhPL7mB5sb72EGpzVxs_jN1_wJcXUyclIQ3rkEs2OHQs8oV17PLZ6RYG__-_U9VW29CL1wJQ8M-_TNWvTKr9jYaTBUP5GPVKHuCi9MdwvJvo_pBNrJVgd8YMKHSPltAj6yBw5rSspE27AIztTpnSj1-tbT8_ghO-YYKsG-IesekblS52uzVjvryBre-lR8knLxpThpAoxCJURcT2bTjj37KmDPfhtjUnPPxOjoelt_zwzd5sXpRJLpz52QLHlALanloCsc0wE9HG-ZHuJ7hr51paxXvfEzR5t71ZnXuUM8ZInztYpvGiT3gBGfgAHM-vqEMAzJrxRyZgNiFonuvH7Qd1H46RI-NBkwdSAhR-ULSrFqtSadE5qRj67iw09IGprXwi8ZX2prFD3LxVoHO1RPrmD9Gt0g2ORm9RShgnDQqbCF6HILXa-9MZ6wSKaYyWFqQifWMAFki6wAQMs9pJynKz4gOrppBrFLpDHqSb1Q8Z5In_6gEWRCCv79S080maB5SNevS5B_rg1n7Vwm1xd5btXPyLE2uB4JX-HrEwzz87xgx7oLW6xMQsiuZvjsd7vBcZzBv8qTpDXerInDc5asW7xVNyZ--xmN-1QiwY9aAHzHQ=w1034-h230-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/2apX2v8MHHX_J_83Wzbe_bwSAtvYpy0iiK4tvbD_6kfguCqMfDLxa_Romlzi2aVmJGIdIi9iHsRQMZJaB6fQk4YvA4rbHebfRzOs1Z19_oMIcGtbcZmzAlCBkx9IW9w3BCeCwVFiKm5yRsaywNuVUqe2IPXtt9tqV45rM-itUgGk3-CiQK-ddju0_V8jt2BVWaz04bGzUDw1dA1UZlETjBC2zD5akrGqbNjL6cJwnJINZSF3DUCm2K7Eex_BIz8HN7b2ZVjreZlvk5jfP9M6qn7co1HpXjXBZGyPTGWNtCdrZ53rHbt7Sl2bPWQy8u85qDbvpjUDRstC2_Wf1nTwM5G3s9CKmN4QIm77f4sjcWQy-XKBA1LzHItyt8lEhCROjx84SJBviaR5leGNfUwg-Bf1sazdUvQ4tjYnXYuvpw_DKkmFzNqRpHXNwxl6Hc0ufoS0BUER4kmKax51rM8z3g3rsLf5_9WsuT73ngIBi-Astx_GMnDtUkVEB7V8zIWKzQpks1YLvf6TvxnTyKa7JTywl4aUfyGCk6-CzqNKDU2gl8SZRgde7DSXcwuP568CpFU0bdTEA_Yw_H1Q_TpoStF8XRnJzoi3SEpUi0y-33smyrIRRzCHHGiiE0anroRwIJ_dmzQ12D7ZEXijnentXH-Pg9pAT-YLGeZoABT4kkcbXocz8-OzaOA=w1034-h262-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/pA7515fJS19-2Syf8gLT7iV-tuDBjrqjSmXrBgF8_PHerYQxp0x185WfEq31zCS9YsacFiXPwzSakttU8dtyx7GzDHQI77YuUdue39QGcfZ2FpkJQZq-g5LbRn9Ufx7b2lnOL3s9yVAC8QvzKXmkON_eT0i83shqN3kDApaNHvkWbzi_ngwHYSK45FbRyGiLbv4zaa75BuAF0B-UzrOQGaJgbRLFlM5J0B9RnC2e-_PQUoE09uklcL_6zCVhoY0DyKsfRd5h1sC_sxkPGCQ4e3PgrVJfYKN7tOt_367N33n0YIUiphjPttzYy_HBgUHCjK5SMPXQCB5KWrzh428TIfqYulTKqXEaN_Gab2LW5bxZmrM0HKtVboub5-cN5Oam0_vvBXAPKrg5fMZJnfmbJQ4KZojyJgQyj9H23tIIDQt0ZY6VMk0ma_28nifDhoQ6Q67JXI0wNXSaiTC6wh20XGklLCsNCgUdw_adOp2iFEMp2Ik58xzhri9v4mcgF97tKLOjcYt1OHpFdNy-6kAYt8dCvEalqIhUJAaDBvzYg855suuf6tC7DoGAnnlplNU1tlt0yfa_cc--i9Xhy2T3ZnpO8Hnx9ekKzsuaYWBpTXxY41k9N1gUeColW4lVhiVUyvwwO4jyE8Zgx_x2FsneRemGiITRNcyZk1tGJra_g4k4fRKw7O7XeXc=w1034-h262-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/uGpdRrP912S81P24a74yn4-coVYQre0jRQYCd9uH7DzNT-eUgU-DQv6D0DIuQtQTiS4eClxh9cmZjZY99vFQ1iKWxbr6xkyyt1IDQAn8urgbnV20TCrUV0T4fJjLtM1_EqgPFYhg0JyOFCRyMpnjgEgkyPth1RzMCDT3icG6nXeXZBXwVUISc9mfGZ-2q-l8QrawI1Of_J-qR1OE3GtjQZxWFO0XSf51TzGnlYCYfTPtXFyHpHRUByaJXgKNUyWKFF6s9lN_cnxzNK2lb9ZPDNQnGQv0F5JlsVg0AVp_qpAYz-u6PfJK3i7qvQibUANMTaupwuM9Uv3z4B-VgV4LjLjYS2sWObioxu36GEk40rfYifzwJAfFUNjVNAQS0XCI9Ms07oAcazoZcFQpG7WUU4bLcE1xnqsmNFVHHIV61fCBFjwqqauEQg6aBGQ9dG1g55_Led-oT12MIIzJVJkKespkOw4naHCoA5784H6PQcjC5tpN93qz3yKdPIKfuRcHwLV5pAk3VOLjYa93dCqSXxVizECXpp4vxUIokXrNHnZasLu5gsJPALT5Zdq5ec77LBbwV1ku4Q2Yek9Rnt-P8gdJ7C9WFBmFmxd5hfNiKl9tdF5l5s3vehdTloqfqoN7oWSt8lyaKv6FeEyCZYp9qDeOYuFV3G0dya6q87yQRWFGVOAo-zHoSUc=w1034-h322-no">
<meta property="og:updated_time" content="2020-02-04T10:11:38.791Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="設定 Network 以及 HTTP 平衡負載器">
<meta name="twitter:description" content="概述在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/JoxRKMMSKbzKyCJ83rgcHWsp0GqmDd4VJyA2JHttJIWtbeuSIiuLjuSSxc4iqePChDXbxGcLwlK2Ak3L_XKUbYDDc02KsoQczJQUjhf54Va0RDUXYR3Rs41gZ6chzqI4yNHMtFh8n21uoOrorZxFgQW_zUF7DxoFbP2cud5EQHISGuRo46oC3y4twF9RdpS0TSSA4olJ7qOJOWkyI6BVt4W3xNBLoNQe1KpHMsh4yZmNy62qzpIPZzG6mOyWJhxoeQgDv_AJMUZeePJb07cQRL0A1Z2o4BOmY2yDMeQxeo6zLOUa2YQn03IyyXmRkOHITivPHxEUNTRwRpx692JGJ0xLiRXaTrR3zUHIshdqfeUgqqpu3IzBEyFeQf_uuq3SBcVam2n-82KYWus0e9V9JyPdc57OK88fPGEv2FQ8gL3BphZ2cGk4m8-r2aZlcUu8eyAc3xf0ggMczseovjEtSj-Yd3hf7qMhQj6kczUUNLQ3bzF5Xj3X_w4frm5zaeGneTpLzM3R0rCa1OG-97DkR22YNXTSZoAHeEyH6i5TIWUjLQZfUFgAaDe7yHFFFv6ykMXIosO0hR93UeNtSxfkwBmZ1YSvIM_GBF4u5kSqRJkiPkIv0wso8tkk6Lu0lrvEPMUDeLwu_c_7AM-gq0GPkFdXF4Q4ED4=w297-h293-no">





    <link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
        
    
        
    
        
    
        
    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135063928-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135063928-1');
</script>


    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/zh-tw">
                
                    
                    不學會死
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/zh-tw/archives">歸檔</a>
            
            <a class="navbar-item " href="/zh-tw/categories">分類</a>
            
            <a class="navbar-item " href="/zh-tw/tags">標籤</a>
            
            <a class="navbar-item " href="/zh-tw/schedule">行程</a>
            
            <a class="navbar-item " href="/zh-tw/about">關於</a>
            
            <a class="navbar-item " href="/zh-tw/japanese">日語</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="目錄">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#概述">1&nbsp;&nbsp;<b>概述</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#前言">2&nbsp;&nbsp;<b>前言</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#設定及要求">3&nbsp;&nbsp;<b>設定及要求</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#啟動-Google-Cloud-Shell">3.1&nbsp;&nbsp;啟動 Google Cloud Shell</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#為你的資源設定預設的-region-以及-zone">4&nbsp;&nbsp;<b>為你的資源設定預設的 region 以及 zone</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#建立多個-web-server-instance">5&nbsp;&nbsp;<b>建立多個 web server instance</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#測試進度">5.1&nbsp;&nbsp;測試進度</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#建立Network-Load-Balancer">6&nbsp;&nbsp;<b>建立Network Load Balancer</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#測試進度-1">6.1&nbsp;&nbsp;測試進度</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#建立一個-HTTP-S-Load-Balancer">7&nbsp;&nbsp;<b>建立一個 HTTP(S) Load Balancer</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#測試進度-2">7.1&nbsp;&nbsp;測試進度</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#測試你的理解">8&nbsp;&nbsp;<b>測試你的理解</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#恭喜">9&nbsp;&nbsp;<b>恭喜</b></a>
                    
                </div>
            </div>
            

            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/HTTPAndNetworkLoadBalancer/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-tw/HTTPAndNetworkLoadBalancer/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            設定 Network 以及 HTTP 平衡負載器
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-02-19T07:57:05.000Z" itemprop="datePublished">2月 19 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/GCP/">GCP</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            27 分钟 讀完 (大概 4082 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在這個教程中，你將會學習 network load balance 與 HTTP load balance 之間的不同，以及如何正確地根據你的應用來設定，讓你的應用在 Google Compute Engine VM 上運行平衡負載的功能。</p>
<a id="more"></a>
<p>有好幾種方法可以在<a href="https://cloud.google.com/load-balancing/docs/load-balancing-overview#a_closer_look_at_cloud_load_balancers" target="_blank" rel="noopener">Google Cloud Platform 上實施平衡負載</a>。 本教程會帶你走過以下兩種負載器的設定：</p>
<ul>
<li>L3 <a href="https://cloud.google.com/compute/docs/load-balancing/network/" target="_blank" rel="noopener">Network Load Balancer</a></li>
<li>L7 <a href="https://cloud.google.com/compute/docs/load-balancing/http/" target="_blank" rel="noopener">HTTP(s) Load Balancer</a></li>
</ul>
<p>學生們會建議自己輸入指令，這對學習核心概念有幫助。 很多教程中，都會有代碼區塊，可以直接複製需要的代碼，你可以很簡單的從代碼區塊複製貼上這些指令到教程中適當的位置。</p>
<p><strong>你將會做什麼</strong></p>
<ul>
<li>設定一個網路平衡負載器</li>
<li>設定一個 HTTP(S) 平衡負載器</li>
<li>通過實作，學習兩者之間的不同之處</li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本篇主要是利用 Google 的 Qwiklab 平台學習的同時，做的一份學習筆記</p>
<p><br><br><br></p>
<h2 id="設定及要求"><a href="#設定及要求" class="headerlink" title="設定及要求"></a>設定及要求</h2><p><strong>在你按下 Start Lab 按鈕之前</strong></p>
<p>詳讀所有的教學。 Labs 是有時間限制的, 而且你不可以停止時間倒數。 倒數計時器在你按下 Start Lab 按鈕後開始倒數, 上面顯示的時間為你還能使用 Cloud 資源的時間。</p>
<p>Qwiklabs 的手把手環境, 讓你可以在真實環境中來操作進行 Qwiklabs 上提供的課程, 而不是在一個模擬或是展示的環境。 我們透過提供你一個全新的、暫時的帳號密碼, 在計時器歸零之前, 你可以用來登入並存取 Google Cloud Platform。</p>
<p><strong>你需要什麼？</strong></p>
<p>要完成這個 lab, 你需要:</p>
<ul>
<li>一個一般的網路瀏覽器（推薦 Chrome）</li>
<li>完成這個 lab 的時間</li>
</ul>
<p><strong>備註：</strong> 如果你已經有你自己的個人 GCP 帳號或專案,請不要使用在這一個 lab</p>
<p>現在你已經開始你的 <code>lab</code>, 你將會登入 <code>Google Cloud Shell</code> 主控台, 然後開啟命令列工具</p>
<p><strong>如何開始你的 lab, 然後登入 Console?</strong></p>
<ul>
<li>按下 <b>Start Lab</b> 按鈕。 如果你需要付費, 會有一個彈出視窗來讓你選擇付費的方式。 在左方你會看到一個面板, 上面有暫時的帳號密碼, 你必須使用這些帳號密碼在此次 lab</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/JoxRKMMSKbzKyCJ83rgcHWsp0GqmDd4VJyA2JHttJIWtbeuSIiuLjuSSxc4iqePChDXbxGcLwlK2Ak3L_XKUbYDDc02KsoQczJQUjhf54Va0RDUXYR3Rs41gZ6chzqI4yNHMtFh8n21uoOrorZxFgQW_zUF7DxoFbP2cud5EQHISGuRo46oC3y4twF9RdpS0TSSA4olJ7qOJOWkyI6BVt4W3xNBLoNQe1KpHMsh4yZmNy62qzpIPZzG6mOyWJhxoeQgDv_AJMUZeePJb07cQRL0A1Z2o4BOmY2yDMeQxeo6zLOUa2YQn03IyyXmRkOHITivPHxEUNTRwRpx692JGJ0xLiRXaTrR3zUHIshdqfeUgqqpu3IzBEyFeQf_uuq3SBcVam2n-82KYWus0e9V9JyPdc57OK88fPGEv2FQ8gL3BphZ2cGk4m8-r2aZlcUu8eyAc3xf0ggMczseovjEtSj-Yd3hf7qMhQj6kczUUNLQ3bzF5Xj3X_w4frm5zaeGneTpLzM3R0rCa1OG-97DkR22YNXTSZoAHeEyH6i5TIWUjLQZfUFgAaDe7yHFFFv6ykMXIosO0hR93UeNtSxfkwBmZ1YSvIM_GBF4u5kSqRJkiPkIv0wso8tkk6Lu0lrvEPMUDeLwu_c_7AM-gq0GPkFdXF4Q4ED4=w297-h293-no" alt></p>
<ul>
<li>複製 <code>username</code>, 然後點擊 <code>Open Google Console</code>。 Lab 會開啟另外一個視窗, 顯示<code>選擇帳號</code>的頁面</li>
</ul>
<p><strong>tip:</strong> 開啟一個全新的視窗,然後跟原本的頁面並排</p>
<ul>
<li>在<code>選擇帳號</code>頁面, 點擊 <code>Use Another Account</code></li>
</ul>
<p><img src="https://lh3.googleusercontent.com/7d6Sw0e-DdZsWhuQG4LieT4RhHJlEIYZ3PbCTTS9B1rLivIvMY7G-VFuy-sQl3bbaNBlVoWipPwQyAWu-oPHUEQYIU5WOnfxflf5JtqsPiaRjQZ32Euuzo5_GqdSZ_hTaGyOBdVq8PzLfoT0RXQGIIEX5GJpnQvm1H8V9VD54X7RACmwemGHdHnOIN3OEYaYDTu3tfMD7NMlmlxvfs4aw1ZuKKGg52cuhwFZQB8e-uOFILtjRwvlJLVEO_iwmv8DDefMd6bIJDh6UdkunTMPcozfKT1muTgaqD1ie8LlaXUgHg5Uqnk9peB7yFejJfL-AwG44agBDOehNad2fJZAIb10HF8ZsAv0_JM-MJzSGbNQ3GK8J0ghFWu1qCNA5udefx6IXzX3vcDz92ArWjSz1QyNBErc2Zkj8YAA5Mfa0CRdFqTmOfXdxt73q7dpQup3zu5aASM4lh37l6SMCQ1ZVy07vcYvCL1mFnQ_hjc4Dg0SqdI7SvravdzmNO3ZEsumpEYgaIIJsnkRU7tzOrmZbV8hH__b90cAkfAamsPmVlgp9sZIwqUzptuDvuPEDyBPBYZC4o9eo5KyQahlTN1grAvzKkPMKYNQfiuKZKch1vpV24M0zuvjgRZFUQnz3V2ERzreJVNRaT_REMv6ifmf1RetnnHYIHg=w356-h248-no" alt></p>
<ul>
<li>登入頁面開啟, 貼上之前複製的 <code>username</code> 以及 <code>password</code>, 然後貼上</li>
</ul>
<p><strong>重要：</strong> 必須使用之前於 <code>Connection Details 面板</code> 取得的帳號密碼,不要使用你自己的 Qwiklabs 帳號密碼。 如果你有自己的 GCP 帳號, 請不要用在這裡（避免產生費用）</p>
<ul>
<li>點擊並通過接下來的頁面:<ul>
<li>接受 <code>terms</code> 以及 <code>conditions</code></li>
<li>不要增加 <code>recovery optoins</code> 或 <code>two factor authentication</code> (因為這只是一個臨時帳號)</li>
<li>不要註冊免費體驗</li>
</ul>
</li>
</ul>
<p>稍待一些時候, GCP 控制台將會在這個視窗開啟。</p>
<p><strong>注意：</strong> 按下左上方位於 <code>Google Cloud Platform</code> 隔壁的 <code>Navigation menu</code>, 你可以瀏覽選單, 裡面有一系列的 GCP 產品以及服務<br><img src="https://lh3.googleusercontent.com/LTqcvw12A83DFUA6wBwrvyfkCfqOXSzirXjbsH-F2lXQSFeA-RLHZ7-OwmSo2KRMIyh4aeOIM3sH7OEcgtvyRBhBZ3XUT0KeCA6JCziJfbwWoHeo_yQJEM6L0yNrsOxxvYsTfi7vc0JcG2PCq16I_-VapQeMzCUG4YHfQ05FMXM_Qbk3Q5AS_Gz37Qnnb2LBnS_FEq6xB1P5JZQPg0ewtkXL_w4uzxXBuiTF20FD5Wmvozjka_hHRPg7sNNv_s7Gl5QozEPvCLluVaulnZRr_EgqkMDsFhAYQo6f40EJ3d2G7h-teXuZxzGUNNauapux1XG54aCL-dbHexnOLC-_zPGhCJcU8s51SPLH_-mscGdvTbSmM1bfacQb4jqn28Ce0YTeFk_GdKE_Yc1uBhzv7AX3hPI47EtVMoDTN1S_4VRalxoaCGMW1W8weYxiVOKvqvts_vKrXPNcQhID-XGtTLRbMxHVVJQM_CZVLMdbIS04olUmWMompFUREpOdVvogPOxCeMNiOZOrjY8I53D6SdKdDjepyNBVHpD1U9clBS88hczGUhhZbEMDqM5V91GG0OmpcFu0vgc0vnAhmpBvcUrA4xf0_16Nxq3fxYky9x7xLLUXS12pIfLwShDt9RWhU8hiDDTzGkugZB294m_e1d4rjHxTiOw=w1172-h266-no" alt></p>
<p><br></p>
<h3 id="啟動-Google-Cloud-Shell"><a href="#啟動-Google-Cloud-Shell" class="headerlink" title="啟動 Google Cloud Shell"></a>啟動 Google Cloud Shell</h3><p><code>Google Cloud Shell</code> 是載有開發工具的虛擬機器。 它提供了5GB的 home 資料夾, 並且運行在 <code>Google Cloud</code> 上。 <code>Google Cloud Shell</code> 讓你可以利用 command-line 存取 <code>GCP</code> 資源</p>
<ul>
<li>在 <code>GCP 控制台</code>, 右上的工具列,點擊 <code>Open Cloud Shell</code> 按鈕</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/NQiAOvTG-8VLhp5DpNDvWH8j61jQ_9siMi_WMu8ZkujJnJ1nDCddW6e25xxpJykZi9CppWFX3PUbQ-1DOGAVO68NF_qXSOB0ne3apVKL3-x-CFbxxOjDc6FMZ6QK6Xq9cOX1WRgLxk76IhOWGZq4KQ2JOpE6XcH8CMWaowuunUPBLURUdnYWsEh_uanRFPwvabcbMGDgaU8Y-rXOTlMaiC8rBanZtz94OziyEuW8quqpTUb0t9zsLb9WwbZn3dQzC7nK7IBwZ4Hn_F9oeTtGk4RWpd-C0GdqHeDvobjExPIKjkIaO1n56PZHPbkBIZi8ltEAEaR8IRp31u2ryYpKSDFtobrWVA4Px9zI1FyWed-MhwoCJVX2KE-8LJEahoYgO-d43oi_bolFsiCmjEkJj5q9UWeIF3SapHHZj3rHUtV3WRnlpP32UWXnltfOpaDvFfSgDC_IukM_uwrn64VHRo0mwyCPM8jZM280GWdg2CGJOLBf8T4tq-5Tj71vBj3toOtfcHYSa0_fTBfCwfQUeuzR3qncAHKYk0N7TVIxtcTQdmQX9fVTI3lB0ngg_suUB5NWIErLkfGhHpxNO5m6Iji5h1tBl4Cx3UqTBpqbQD4qqmuDpfYqjjxfyymoTGDGuFvYlyheBnx6LYz4R-5WTcgwpL06OCs=w1172-h266-no" alt></p>
<ul>
<li>在打開的對話框裡, 按下 <code>START CLOUD SHELL</code>:</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/NsZ_a6EE077gPoIPQHGUyv3oi-CS0ZXvCCqcqQRSHXNB5NJP_532CiuaTBPpV3bC6WZK9mP5xuRCsIQCHERH-qJc5Ez1ISujFlCPJXBgAPZSTi_vg7pQKIQwEDei7UrjelpPIFpu8nj5c48WcLyn7iy8ZB5rW1jMCCnaICN9ckEPST_Bq4mum0WyDA0vbxZ6s_prBqRwHP7BYqK-yv5LY5WU2Cp_u58T2EVXS-TJ3b460s-PNEaKgPC6SoCpdamnW9VY2YzsvCycviBIODgAH-pvIZf7AppQsTWF7fe9d6JLq0yvBT3fnO4isK-Tu_i3ZlzIHyb5Ccmb4oYBzt42FIm9NmgUF0sDhiVEi3y2qgts7aU-5S3Sd85uv1N9qVuHZqTcuZk0uNgAfjfKfZN6clp4JFcf-CsZWPxZOJ5QdxSFG8wKAxz02vgiQdopj-R9SEEBR--TikL2KiSl2zHFqmegWol-8TYaLQSI4ZKKRqgzrsLuDvf_nw3Z9RqvX-4_P7HY9cqmaRDIkwK5pP-KF0gOjurvuRRmbGpdSpNCbM7cVZbyCpQgV28UdUdLdd0N-7xHa2QT1hVJnVGwmn3e7dMdc5PuTnJ6TMm6h0mcLKVdvqF7cInxrhsqBrvGj1VAZwY5ej4O4VPF1r0XAEH7bnD4HqSXMWg=w993-h696-no" alt></p>
<p>你可以立即按下 <code>START CLOUD SHELL</code> 當對話視窗打開。</p>
<p>連結並提供環境會需要一點時間。 當你連結成功, 這代表你已成功獲得授權, 且此專案已被設為你的專案ID, 例如：</p>
<p><img src="https://lh3.googleusercontent.com/67XYRFIt0PZG-lcSS21Eum9KeVPQBBSZ6WedKsA578qdHbCrs43df3Url887daqVpEm5xJTYmhlu3g1IVQFf8QOwIU01QWXSqybAnT9oRhjnx31l9ykNLa_hJCc9Szr1ODStfEd7hEXnlknqkrawQx9KWHIVAfYQsv36VXHzNh8CFRRYC96L8G8TnWUh-3GDiijvkBIg30jPWDCXrcre6bKvQmiOS8RIdhYsmh8KaYXYsMJQ83pWyQeKaTkY8fAcwnuFHTLt1Fx6lVolrSIUFqTH7N_snLcLxqVVnBcr9jBWN_cz-hGEyNzYPCq-GR1XjY8REeisXM9wskHXtYKBIwzyIpSkrZqSF-yJ5Y83UL55nQQ3aqK1gPOMizYbApEBfVEEOai-o9bO9hiSgAzg2oNckT3e7zRNeak5WUe41e1RPK8qvZIRPgUDfTWAUhBJgYPFfzQtI-HC4M_6G8Cj9y_W1DWtc9h8MnEbdBU2ARIWEsOBPhGEIrVCfWjIFk_wg13j3SidpqUXvjy8oqoDhwzJ_dnrntwL_o22ZBn0wxzdhjltdIjAB079f19G6PqRcxtNHVfwn9J4BTliJ4JYDx_13LkVArVmi1o8ZmnBuBb-99qBscIcj1qPrGSVbE-f2AQ7to7pSZHuFpn0BuHrQNDYcfnqePs=w1267-h196-no" alt></p>
<p><strong>gcloud</strong> 是 <code>Google Cloud Platform</code> 的 command-line 工具, 他已事先被安裝在 <code>Cloud Shell</code> 並且支援自動補齊</p>
<p>使用這個 command, 你可以列出有效帳戶名稱:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud auth list</span><br></pre></td></tr></table></figure></p>
<p>輸出:<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Credentialed accounts:</span><br><span class="line"> - &lt;myaccount&gt;@&lt;mydomain&gt;.com (active)</span><br></pre></td></tr></table></figure></p>
<p>範例輸出:<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Credentialed accounts:</span><br><span class="line"> - google1623327_student@qwiklabs.net</span><br></pre></td></tr></table></figure></p>
<p>你可以使用以下 command 來列出專案 ID</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud config list project</span><br></pre></td></tr></table></figure>
<p>輸出：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">[core]</span><br><span class="line">project = &lt;project_ID&gt;</span><br></pre></td></tr></table></figure></p>
<p>範例輸出：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">[core]</span><br><span class="line">project = qwiklabs-gcp-44776a13dea667a6</span><br></pre></td></tr></table></figure></p>
<p><code>gcloud</code> 的完整文件可以參閱 <a href="https://cloud.google.com/sdk/gcloud" target="_blank" rel="noopener">Google Cloud gcloud Overview</a></p>
<p><br><br><br></p>
<h2 id="為你的資源設定預設的-region-以及-zone"><a href="#為你的資源設定預設的-region-以及-zone" class="headerlink" title="為你的資源設定預設的 region 以及 zone"></a>為你的資源設定預設的 region 以及 zone</h2><ul>
<li><p>在 Cloud Shell ，設定預設 zone</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud config <span class="hljs-built_in">set</span> compute/zone us-central1<span class="hljs-_">-a</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Cloud Shell ，設定預設 region</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud config <span class="hljs-built_in">set</span> compute/region us-central1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="建立多個-web-server-instance"><a href="#建立多個-web-server-instance" class="headerlink" title="建立多個 web server instance"></a>建立多個 web server instance</h2><p><br>為了模擬使用一個群組的機器來服務，我們可以利用 Instance Template 以及 Managed Instance Groups 來創建一個群集的 Nginx  web servers 用以服務靜態的內容。 Instance Template 定義了在這個群組中的 virtual machine 的規格（ disk, CPUs, memory, 等等）。  Managed Instance Groups 可以初始化多台使用 Instance Template 定義的 virtual machine<br></p>

<p>要建立一個 Nginx web server 服務群，建立以下事物:</p>
<ul>
<li>一份用來設定所有 virtual machine 上的 Nginx server 的 script</li>
<li>一份 instance template 來使用上述的 script</li>
<li>一個 target pool</li>
<li>一個使用 instance template 的 managed instance group</li>
</ul>
<p><br></p>
<p>在 <code>Cloud Shell</code> 中，建立一個使用在所有 VM 上的 <code>startup script</code>。 這個腳本會在一開始時設定 Nginx server<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; startup.sh</span><br><span class="line"><span class="hljs-meta">#! /bin/bash</span></span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y nginx</span><br><span class="line">service nginx start</span><br><span class="line">sed -i -- <span class="hljs-string">'s/nginx/Google Cloud Platform - '</span><span class="hljs-string">"\$HOSTNAME"</span><span class="hljs-string">'/'</span> /var/www/html/index.nginx-debian.html</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<p>建立使用 startup script 的 instance template</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute instance-templates create nginx-template \</span><br><span class="line">         --metadata-from-file startup-script=startup.sh</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [...].</span><br><span class="line">NAME           MACHINE_TYPE  PREEMPTIBLE CREATION_TIMESTAMP</span><br><span class="line">nginx-template n1-standard-1             2015-11-09T08:44:59.007-08:00</span><br></pre></td></tr></table></figure></p>
<p>建立 target pool 。一個 target pool 將針對所有的群組內的 instance 提供一個存取點，且在之後的平衡負載步驟，這是必須的。<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute target-pools create nginx-pool</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [...].</span><br><span class="line">NAME       REGION       SESSION_AFFINITY BACKUP HEALTH_CHECKS</span><br><span class="line">nginx-pool us-central1</span><br></pre></td></tr></table></figure></p>
<p>建立一個使用 instance template 的 managed instance group</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute instance-groups managed create nginx-group \</span><br><span class="line">         --base-instance-name nginx \</span><br><span class="line">         --size 2 \</span><br><span class="line">         --template nginx-template \</span><br><span class="line">         --target-pool nginx-pool</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [...].</span><br><span class="line">NAME         LOCATION       SCOPE  BASE_INSTANCE_NAME  SIZE  TARGET_SIZE  INSTANCE_TEMPLATE  AUTOSCALED</span><br><span class="line">nginx-group  us-central1-a  zone   nginx               0     2            nginx-template     no</span><br></pre></td></tr></table></figure></p>
<p>這將會建立兩個擁有相同前綴名稱 nginx-的vurtual machine ，需要幾分鐘。</p>
<p><br></p>
<p>檢視所有已建立的 instances<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute instances list</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">NAME       ZONE           MACHINE_TYPE  PREEMPTIBLE INTERNAL_IP EXTERNAL_IP    STATUS</span><br><span class="line">nginx-7wvi us-central1-a n1-standard-1             10.240.X.X  X.X.X.X           RUNNING</span><br><span class="line">nginx-9mwd us-central1-a n1-standard-1             10.240.X.X  X.X.X.X           RUNNING</span><br></pre></td></tr></table></figure></p>
<p>現在設定防火牆，所以我們可以經由 port 80，EXTERNAL_IP 位址來連接我們的機器    </p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute firewall-rules create www-firewall --allow tcp:80</span><br></pre></td></tr></table></figure>
<p>現在我們應該要可以經由上述的 external IP 位址連接到任何一台的 instance</p>
<h3 id="測試進度"><a href="#測試進度" class="headerlink" title="測試進度"></a>測試進度</h3><p>點擊 <strong>Check my progress</strong> 來確認目前的進度。如果你已經完成目前的進度，你將獲得一個評價分數。</p>
<p><img src="https://lh3.googleusercontent.com/HkHGuvhUdSd0M5XRhDA16I2SPmAS82B5BsE4o7gqcgLfgQC0D2m6HnStqoPKJjYZKWZ4jOByLhPL7mB5sb72EGpzVxs_jN1_wJcXUyclIQ3rkEs2OHQs8oV17PLZ6RYG__-_U9VW29CL1wJQ8M-_TNWvTKr9jYaTBUP5GPVKHuCi9MdwvJvo_pBNrJVgd8YMKHSPltAj6yBw5rSspE27AIztTpnSj1-tbT8_ghO-YYKsG-IesekblS52uzVjvryBre-lR8knLxpThpAoxCJURcT2bTjj37KmDPfhtjUnPPxOjoelt_zwzd5sXpRJLpz52QLHlALanloCsc0wE9HG-ZHuJ7hr51paxXvfEzR5t71ZnXuUM8ZInztYpvGiT3gBGfgAHM-vqEMAzJrxRyZgNiFonuvH7Qd1H46RI-NBkwdSAhR-ULSrFqtSadE5qRj67iw09IGprXwi8ZX2prFD3LxVoHO1RPrmD9Gt0g2ORm9RShgnDQqbCF6HILXa-9MZ6wSKaYyWFqQifWMAFki6wAQMs9pJynKz4gOrppBrFLpDHqSb1Q8Z5In_6gEWRCCv79S080maB5SNevS5B_rg1n7Vwm1xd5btXPyLE2uB4JX-HrEwzz87xgx7oLW6xMQsiuZvjsd7vBcZzBv8qTpDXerInDc5asW7xVNyZ--xmN-1QiwY9aAHzHQ=w1034-h230-no" alt></p>
<p><br><br><br><br><br></p>
<h2 id="建立Network-Load-Balancer"><a href="#建立Network-Load-Balancer" class="headerlink" title="建立Network Load Balancer"></a>建立Network Load Balancer</h2><p>Network Load Balancing 允許我們依據收到的 IP 協議資料，像是位址， port 號，還有協議類型，來平衡負載我們的系統。<br>我們還可以取得一些 HTTP(S) load balancing 沒有提供的選項，例如說，基於 TCP/UDP 的協議, 像是 SMTP traffic ，且如果你的應用對 TCP 連結相關的特性感興趣的話， Network Load Balacing 也允許你的 app 去檢查封包，這是 HTTP(S) Load Balancing 沒有提供的。</p>
<p>更多資訊，可以參考<a href="https://cloud.google.com/compute/docs/load-balancing/network/" target="_blank" rel="noopener">Setting Up Network Load Balancing</a></p>
<p>針對我們的 instance ，建立一個 L3 network load balancer </p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute forwarding-rules create nginx-lb \</span><br><span class="line">         --region us-central1 \</span><br><span class="line">         --ports=80 \</span><br><span class="line">         --target-pool nginx-pool</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br></pre></td></tr></table></figure></p>
<p>列出所有 Google Compute Engine 轉發的規則</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute forwarding-rules list</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">NAME     REGION       IP_ADDRESS     IP_PROTOCOL TARGET</span><br><span class="line">nginx-lb us-central1 X.X.X.X        TCP         us-central1/targetPools/nginx-pool</span><br></pre></td></tr></table></figure></p>
<p>經由瀏覽器來拜訪 load balancer<br><code>http://IP_ADDRESS/</code><br>IP_ADDRESS 可從上一個指令輸出中找到</p>
<h3 id="測試進度-1"><a href="#測試進度-1" class="headerlink" title="測試進度"></a>測試進度</h3><p>點擊 <strong>Check my progress</strong> 來確認目前的進度。如果你已經完成目前的進度，你將獲得一個評價分數。</p>
<p><img src="https://lh3.googleusercontent.com/2apX2v8MHHX_J_83Wzbe_bwSAtvYpy0iiK4tvbD_6kfguCqMfDLxa_Romlzi2aVmJGIdIi9iHsRQMZJaB6fQk4YvA4rbHebfRzOs1Z19_oMIcGtbcZmzAlCBkx9IW9w3BCeCwVFiKm5yRsaywNuVUqe2IPXtt9tqV45rM-itUgGk3-CiQK-ddju0_V8jt2BVWaz04bGzUDw1dA1UZlETjBC2zD5akrGqbNjL6cJwnJINZSF3DUCm2K7Eex_BIz8HN7b2ZVjreZlvk5jfP9M6qn7co1HpXjXBZGyPTGWNtCdrZ53rHbt7Sl2bPWQy8u85qDbvpjUDRstC2_Wf1nTwM5G3s9CKmN4QIm77f4sjcWQy-XKBA1LzHItyt8lEhCROjx84SJBviaR5leGNfUwg-Bf1sazdUvQ4tjYnXYuvpw_DKkmFzNqRpHXNwxl6Hc0ufoS0BUER4kmKax51rM8z3g3rsLf5_9WsuT73ngIBi-Astx_GMnDtUkVEB7V8zIWKzQpks1YLvf6TvxnTyKa7JTywl4aUfyGCk6-CzqNKDU2gl8SZRgde7DSXcwuP568CpFU0bdTEA_Yw_H1Q_TpoStF8XRnJzoi3SEpUi0y-33smyrIRRzCHHGiiE0anroRwIJ_dmzQ12D7ZEXijnentXH-Pg9pAT-YLGeZoABT4kkcbXocz8-OzaOA=w1034-h262-no" alt></p>
<p><br><br><br><br><br></p>
<h2 id="建立一個-HTTP-S-Load-Balancer"><a href="#建立一個-HTTP-S-Load-Balancer" class="headerlink" title="建立一個 HTTP(S) Load Balancer"></a>建立一個 HTTP(S) Load Balancer</h2><p>HTTP(S) Load Balancing 提供全球性的所有對我們的 instance 所做的請求。我們可以設定 URL 規則來將某些 URL 導向一些 instance ，而將另一些 URL 導向另外一些 instance 。正常下，請求將會被導向離使用者最近的 instance ，以確保該群組的 instance 有足夠的資源可以提供給使用者。如果被導向的 instance 沒有足夠的資源，那請求將會被導向離使用者最近的並且有足夠資源的 instance</p>
<p>更多資訊可以參考 <a href="https://cloud.google.com/compute/docs/load-balancing/http/" target="_blank" rel="noopener">HTTP(s) Load Balancer in the documentation</a></p>
<p>首先，建立一個 <a href="https://cloud.google.com/compute/docs/load-balancing/health-checks" target="_blank" rel="noopener">health check</a> 。 Health check 可以核實 instance 有針對 HTTP 或 HTTPS 通道做回應</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute http-health-checks create http-basic-check</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br><span class="line">NAME             HOST PORT REQUEST_PATH</span><br><span class="line">http-basic-check      80   /</span><br></pre></td></tr></table></figure></p>
<p>定義一個 HTTP 服務，並且給予我們 instance 使用的 port 號, 現在平衡負載服務已經將流量轉發到指定的 port<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute instance-groups managed \</span><br><span class="line">       <span class="hljs-built_in">set</span>-named-ports nginx-group \</span><br><span class="line">       --named-ports http:80</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Updated [https://www.googleapis.com/compute/v1/projects/...].</span><br></pre></td></tr></table></figure></p>
<p>建立 <a href="https://cloud.google.com/compute/docs/reference/latest/backendServices" target="_blank" rel="noopener">後端服務</a><br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute backend-services create nginx-backend \</span><br><span class="line">      --protocol HTTP --http-health-checks http-basic-check --global</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br><span class="line">NAME          BACKENDS PROTOCOL</span><br><span class="line">nginx-backend          HTTP</span><br></pre></td></tr></table></figure></p>
<p>將我們的 instance 群組加到後端服務:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute backend-services add-backend nginx-backend \</span><br><span class="line">    --instance-group nginx-group \</span><br><span class="line">    --instance-group-zone us-central1<span class="hljs-_">-a</span> \</span><br><span class="line">    --global</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Updated [https://www.googleapis.com/compute/v1/projects/...].</span><br></pre></td></tr></table></figure></p>
<p>建立一個預設的 URL 指定，他將會把所有收到的請求導向我們的 instance<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute url-maps create web-map \</span><br><span class="line">    --default-service nginx-backend</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br><span class="line">NAME    DEFAULT_SERVICE</span><br><span class="line">Web-map nginx-backend</span><br></pre></td></tr></table></figure></p>
<p>若要直接將流量基於請求的 URL 不同，導向不同的 instance, 請參考 <a href="https://cloud.google.com/compute/docs/load-balancing/http/content-based-example" target="_blank" rel="noopener">content-based routing</a></p>
<p>建立一個 target HTTP proxy 來將請求導向我們的 URL map<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute target-http-proxies create http-lb-proxy \</span><br><span class="line">    --url-map web-map</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br><span class="line">NAME          URL_MAP</span><br><span class="line">http-lb-proxy web-map</span><br></pre></td></tr></table></figure></p>
<p>建立一個全球轉發規則來處理導向所有收到的請求。一個轉發規則將流量送到指定的 HTTP 或 HTTPS 代理根據請求的 IP 位址， IP 協議，或特定的 port 號。全球轉發規則不支援多個 port</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute forwarding-rules create http-content-rule \</span><br><span class="line">        --global \</span><br><span class="line">        --target-http-proxy http-lb-proxy \</span><br><span class="line">        --ports 80</span><br></pre></td></tr></table></figure>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Created [https://www.googleapis.com/compute/v1/projects/...].</span><br></pre></td></tr></table></figure></p>
<p>全球轉發規則建立之後，需要幾分鐘時間生效<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">gcloud compute forwarding-rules list</span><br></pre></td></tr></table></figure></p>
<p>(輸出)<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">NAME              REGION IP_ADDRESS    IP_PROTOCOL TARGET</span><br><span class="line">http-content-rule        X.X.X.X       TCP         http-lb-proxy</span><br><span class="line">nginx-lb   us-central1  X.X.X.X       TCP         us-central1/....</span><br></pre></td></tr></table></figure></p>
<p>我們現在應該要可以從瀏覽器經由<code>http://IP_ADDRESS/</code>來連接，這可能會需要幾分鐘生效。如果無法連接，多等一些時間，重新整理瀏覽器。</p>
<h3 id="測試進度-2"><a href="#測試進度-2" class="headerlink" title="測試進度"></a>測試進度</h3><p>點擊 <strong>Check my progress</strong> 來確認目前的進度。如果你已經完成目前的進度，你將獲得一個評價分數。</p>
<p><img src="https://lh3.googleusercontent.com/pA7515fJS19-2Syf8gLT7iV-tuDBjrqjSmXrBgF8_PHerYQxp0x185WfEq31zCS9YsacFiXPwzSakttU8dtyx7GzDHQI77YuUdue39QGcfZ2FpkJQZq-g5LbRn9Ufx7b2lnOL3s9yVAC8QvzKXmkON_eT0i83shqN3kDApaNHvkWbzi_ngwHYSK45FbRyGiLbv4zaa75BuAF0B-UzrOQGaJgbRLFlM5J0B9RnC2e-_PQUoE09uklcL_6zCVhoY0DyKsfRd5h1sC_sxkPGCQ4e3PgrVJfYKN7tOt_367N33n0YIUiphjPttzYy_HBgUHCjK5SMPXQCB5KWrzh428TIfqYulTKqXEaN_Gab2LW5bxZmrM0HKtVboub5-cN5Oam0_vvBXAPKrg5fMZJnfmbJQ4KZojyJgQyj9H23tIIDQt0ZY6VMk0ma_28nifDhoQ6Q67JXI0wNXSaiTC6wh20XGklLCsNCgUdw_adOp2iFEMp2Ik58xzhri9v4mcgF97tKLOjcYt1OHpFdNy-6kAYt8dCvEalqIhUJAaDBvzYg855suuf6tC7DoGAnnlplNU1tlt0yfa_cc--i9Xhy2T3ZnpO8Hnx9ekKzsuaYWBpTXxY41k9N1gUeColW4lVhiVUyvwwO4jyE8Zgx_x2FsneRemGiITRNcyZk1tGJra_g4k4fRKw7O7XeXc=w1034-h262-no" alt></p>
<p><br><br><br><br><br></p>
<h2 id="測試你的理解"><a href="#測試你的理解" class="headerlink" title="測試你的理解"></a>測試你的理解</h2><p>下面有多重選擇的問題來鞏固你對本教程概念的理解，盡你所能的回答吧：</p>
<p><img src="https://lh3.googleusercontent.com/uGpdRrP912S81P24a74yn4-coVYQre0jRQYCd9uH7DzNT-eUgU-DQv6D0DIuQtQTiS4eClxh9cmZjZY99vFQ1iKWxbr6xkyyt1IDQAn8urgbnV20TCrUV0T4fJjLtM1_EqgPFYhg0JyOFCRyMpnjgEgkyPth1RzMCDT3icG6nXeXZBXwVUISc9mfGZ-2q-l8QrawI1Of_J-qR1OE3GtjQZxWFO0XSf51TzGnlYCYfTPtXFyHpHRUByaJXgKNUyWKFF6s9lN_cnxzNK2lb9ZPDNQnGQv0F5JlsVg0AVp_qpAYz-u6PfJK3i7qvQibUANMTaupwuM9Uv3z4B-VgV4LjLjYS2sWObioxu36GEk40rfYifzwJAfFUNjVNAQS0XCI9Ms07oAcazoZcFQpG7WUU4bLcE1xnqsmNFVHHIV61fCBFjwqqauEQg6aBGQ9dG1g55_Led-oT12MIIzJVJkKespkOw4naHCoA5784H6PQcjC5tpN93qz3yKdPIKfuRcHwLV5pAk3VOLjYa93dCqSXxVizECXpp4vxUIokXrNHnZasLu5gsJPALT5Zdq5ec77LBbwV1ku4Q2Yek9Rnt-P8gdJ7C9WFBmFmxd5hfNiKl9tdF5l5s3vehdTloqfqoN7oWSt8lyaKv6FeEyCZYp9qDeOYuFV3G0dya6q87yQRWFGVOAo-zHoSUc=w1034-h322-no" alt></p>
<p>答案是 <code>true</code></p>
<p><br><br><br><br><br></p>
<h2 id="恭喜"><a href="#恭喜" class="headerlink" title="恭喜"></a>恭喜</h2><p>你已經完成本教程</p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/GCP-Essentials/">#GCP Essentials</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/QWIKLABS/">#QWIKLABS</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/Google-Load-Balancers/">#Google Load Balancers</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/zh-tw/UploadAndResizeImagesWithLaravel/">使用 Laravel 儲存並重新縮放圖片大小</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/zh-tw/createAPersistentDisk/">在 GCP 上建立一個 persistent disk</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c72643b9ea706001139fd89&amp;product=inline-share-buttons" async="async"></script>

</div>



<div class="comments">
    <h3 class="title is-4">留言</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://tn710617.github.io/zh-tw/HTTPAndNetworkLoadBalancer/';
        this.page.identifier = 'zh-tw/HTTPAndNetworkLoadBalancer/';
        
        this.language = 'zh';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'rayscodingjourney' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Ray&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
                       <a class="navbar-item" title="GitHub" href="https://github.com/tn710617">
                           
                           <i class="fab fa-github"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Medium" href="https://medium.com/@raycodingjourney">
                           
                           <i class="fab fa-medium"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Linkedin" href="https://www.linkedin.com/in/ray-lee-99315315a">
                           
                           <i class="fab fa-linkedin"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Facebook" href="https://www.facebook.com/profile.php?id=100001626039430">
                           
                           <i class="fab fa-facebook"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="CakeResume" href="https://www.cakeresume.com/resumes/ray-6edaef/edit">
                           
                           <i class="far fa-address-card"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="E-Mail" href="mailto:tn710617@gmail.com">
                           
                           <i class="far fa-envelope"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Skype" href="skype:adad0310?call|chat">
                           
                           <i class="fab fa-skype"></i>
                           
                       </a>
                          
                       
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.zh-tw.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>