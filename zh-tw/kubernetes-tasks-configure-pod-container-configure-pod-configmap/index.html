<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>&lt;未完成&gt; Configure a Pod to Use a ConfigMap - Ray&#39;s Coding Journey</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta name="keywords" content="Kubernetes,Kubernetes configMap">
<meta property="og:type" content="article">
<meta property="og:title" content="&lt;未完成&gt; Configure a Pod to Use a ConfigMap">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/kubernetes-tasks-configure-pod-container-configure-pod-configmap/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta property="og:locale" content="zh-tw">
<meta property="og:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">
<meta property="og:updated_time" content="2020-02-19T13:24:40.848Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="&lt;未完成&gt; Configure a Pod to Use a ConfigMap">
<meta name="twitter:description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


    <link href="/kubernetes-tasks-configure-pod-container-configure-pod-configmap/" rel="alternate" hreflang="en">








    <meta name="description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta name="keywords" content="Kubernetes,Kubernetes configMap">
<meta property="og:type" content="article">
<meta property="og:title" content="&lt;未完成&gt; Configure a Pod to Use a ConfigMap">
<meta property="og:url" content="https://tn710617.github.io/zh-tw/kubernetes-tasks-configure-pod-container-configure-pod-configmap/index.html">
<meta property="og:site_name" content="Ray&#39;s Coding Journey">
<meta property="og:description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta property="og:locale" content="zh-tw">
<meta property="og:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">
<meta property="og:updated_time" content="2020-02-19T13:24:40.848Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="&lt;未完成&gt; Configure a Pod to Use a ConfigMap">
<meta name="twitter:description" content="概述本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 官方文件, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no">





    <link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
        
    
        
    
        
    
        
    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135063928-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135063928-1');
</script>


    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/zh-tw">
                
                    
                    不學會死
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/zh-tw/archives">歸檔</a>
            
            <a class="navbar-item " href="/zh-tw/categories">分類</a>
            
            <a class="navbar-item " href="/zh-tw/tags">標籤</a>
            
            <a class="navbar-item " href="/zh-tw/schedule">行程</a>
            
            <a class="navbar-item " href="/zh-tw/about">關於</a>
            
            <a class="navbar-item " href="/zh-tw/japanese">日語</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="目錄">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#概述">1&nbsp;&nbsp;<b>概述</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#建立-ConfigMap">2&nbsp;&nbsp;<b>建立 ConfigMap</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#使用-kubectl-建立-ConfigMap">2.1&nbsp;&nbsp;使用 kubectl 建立 ConfigMap</a>
                    
                    
                    
                    <a class="navbar-item" href="#從資料夾建立-ConfigMap">2.1.1&nbsp;&nbsp;從資料夾建立 ConfigMap</a>
                    
                    
                    
                    <a class="navbar-item" href="#從檔案建立-ConfigMaps">2.1.2&nbsp;&nbsp;從檔案建立 ConfigMaps</a>
                    
                    
                    
                    <a class="navbar-item" href="#當從檔案建立-ConfigMap-時-自己定義-key">2.1.3&nbsp;&nbsp;當從檔案建立 ConfigMap 時, 自己定義 key</a>
                    
                    
                    
                    <a class="navbar-item" href="#從輸入值建立-ConfigMap">2.1.4&nbsp;&nbsp;從輸入值建立 ConfigMap</a>
                    
                    
                    
                    <a class="navbar-item" href="#從產生器建立-ConfigMap">2.2&nbsp;&nbsp;從產生器建立 ConfigMap</a>
                    
                    
                    
                    <a class="navbar-item" href="#從檔案建立-ConfigMaps-1">2.2.1&nbsp;&nbsp;從檔案建立 ConfigMaps</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Questions-and-Answers">3&nbsp;&nbsp;<b>Questions and Answers</b></a>
                    
                </div>
            </div>
            

            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/kubernetes-tasks-configure-pod-container-configure-pod-configmap/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-tw/kubernetes-tasks-configure-pod-container-configure-pod-configmap/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            &lt;未完成&gt; Configure a Pod to Use a ConfigMap
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-02-18T04:35:27.000Z" itemprop="datePublished">2月 18 2020</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/zh-tw/categories/Ops/">Ops</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            25 分钟 讀完 (大概 3689 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>本篇為 ConfigMap 的介紹與使用筆記, 參考來源為 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/" target="_blank" rel="noopener">官方文件</a>, 除了文件內容翻譯外, 也會有 Questions and Answers 區塊來將重點摘出。</p>
<a id="more"></a>
<h2 id="建立-ConfigMap"><a href="#建立-ConfigMap" class="headerlink" title="建立 ConfigMap"></a>建立 ConfigMap</h2><p>你可以使用 <code>kubectl create configmap</code> 或是 <code>kustomization.yaml</code> 中的 ConfigMap 產生器來建立 ConfigMap。 <code>kubectl</code> 從 1.14 開始支援 <code>kustomization.yaml</code></p>
<p><br></p>
<h3 id="使用-kubectl-建立-ConfigMap"><a href="#使用-kubectl-建立-ConfigMap" class="headerlink" title="使用 kubectl 建立 ConfigMap"></a>使用 kubectl 建立 ConfigMap</h3><p>使用 <code>kubectl create configmap</code> 指令, 從 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#create-configmaps-from-directories" target="_blank" rel="noopener">資料夾</a>, <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#create-configmaps-from-files" target="_blank" rel="noopener">檔案</a>, 或 <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#create-configmaps-from-literal-values" target="_blank" rel="noopener">輸入值</a> 來建立 ConfigMaps<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap &lt;map-name&gt; &lt;data-source&gt;</span><br></pre></td></tr></table></figure></p>
<p><map-name> 是你想要給予這個 COnfigMap 的名字, 而 <data-source> 是資料的來源, 可以是資料夾, 檔案, 或是輸入值</data-source></map-name></p>
<p>當你從檔案建立 ConfigMap, <data-source> 的 key 預設為檔案名稱, 而 value 為檔案內容</data-source></p>
<p>你可以使用 <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands/#describe" target="_blank" rel="noopener">kubectl describe</a> 或是 <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands/#get" target="_blank" rel="noopener">kubectl get</a> 來取得 ConfigMap 的資訊</p>
<p><br></p>
<h4 id="從資料夾建立-ConfigMap"><a href="#從資料夾建立-ConfigMap" class="headerlink" title="從資料夾建立 ConfigMap"></a>從資料夾建立 ConfigMap</h4><p>你可以使用 <code>kubectl create configmap</code> 從一個資料夾裡頭多個檔案來建立 ConfigMap。 當你從資料夾建立 ConfigMap, kubernetes 會辨識出資料夾內合法的檔案名稱, 然後將這些檔案都裝到一個新的 ConfigMap。 所以非 regular 類型的檔案都會被無視 (像是, 子資料夾, 連結, 裝置, 管道, 等等)<br>舉例來說:<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line"># 建立本地資料夾</span><br><span class="line">mkdir -p configure-pod-container/configmap/</span><br><span class="line"></span><br><span class="line"># 下載範例檔</span><br><span class="line">wget https://kubernetes.io/examples/configmap/game.properties -O configure-pod-container/configmap/game.properties</span><br><span class="line">wget https://kubernetes.io/examples/configmap/ui.properties -O configure-pod-container/configmap/ui.properties</span><br><span class="line"></span><br><span class="line"># 建立 configmap</span><br><span class="line">kubectl create configmap game-config --from-file=configure-pod-container/configmap/</span><br></pre></td></tr></table></figure></p>
<p>上面的指令會打包每個檔案, 此範例中為 <code>configure-pod-container/configmap/</code> 資料夾中的 <code>game.properties</code> 以及 <code>ui.properties</code>, 會裝到 game-config 這個 ConfigMap。 你可以使用下面的指令來顯示 ConfigMap 細節:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl describe configmaps game-config</span><br></pre></td></tr></table></figure></p>
<p>輸出類似這樣：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Name:         game-config</span><br><span class="line">Namespace:    default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">game.properties:</span><br><span class="line">----</span><br><span class="line">enemies=aliens</span><br><span class="line">lives=3</span><br><span class="line">enemies.cheat=true</span><br><span class="line">enemies.cheat.level=noGoodRotten</span><br><span class="line">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class="line">secret.code.allowed=true</span><br><span class="line">secret.code.lives=30</span><br><span class="line">ui.properties:</span><br><span class="line">----</span><br><span class="line">color.good=purple</span><br><span class="line">color.bad=yellow</span><br><span class="line">allow.textmode=true</span><br><span class="line">how.nice.to.look=fairlyNice</span><br></pre></td></tr></table></figure></p>
<p><code>config-pod-container/configmap/</code> 資料夾中的 <code>game.properties</code> 以及 <code>ui.properties</code> 被列在 ConfigMap 中的 <code>data</code> 區塊</p>
<p>執行指令檢視：<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmaps game-config -o yaml</span><br></pre></td></tr></table></figure></p>
<p>輸出類似：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: 2016-02-18T18:52:05Z</span><br><span class="line">  name: game-config</span><br><span class="line">  namespace: default</span><br><span class="line">  resourceVersion: &quot;516&quot;</span><br><span class="line">  uid: b4952dc3-d670-11e5-8cd0-68f728db1985</span><br><span class="line">data:</span><br><span class="line">  game.properties: |</span><br><span class="line">    enemies=aliens</span><br><span class="line">    lives=3</span><br><span class="line">    enemies.cheat=true</span><br><span class="line">    enemies.cheat.level=noGoodRotten</span><br><span class="line">    secret.code.passphrase=UUDDLRLRBABAS</span><br><span class="line">    secret.code.allowed=true</span><br><span class="line">    secret.code.lives=30</span><br><span class="line">  ui.properties: |</span><br><span class="line">    color.good=purple</span><br><span class="line">    color.bad=yellow</span><br><span class="line">    allow.textmode=true</span><br><span class="line">    how.nice.to.look=fairlyNice</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="從檔案建立-ConfigMaps"><a href="#從檔案建立-ConfigMaps" class="headerlink" title="從檔案建立 ConfigMaps"></a>從檔案建立 ConfigMaps</h4><p>你可以使用 <code>kubectl create configmap</code> 從單檔或多檔案建立 ConfigMap<br>例如, 執行以下指令:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties</span><br></pre></td></tr></table></figure></p>
<p>會建立以下 ConfigMap, 執行以下指令檢視：<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl describe configmaps name-config-2</span><br></pre></td></tr></table></figure></p>
<p>輸出類似：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Name:         game-config-2</span><br><span class="line">Namespace:    default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">game.properties:</span><br><span class="line">----</span><br><span class="line">enemies=aliens</span><br><span class="line">lives=3</span><br><span class="line">enemies.cheat=true</span><br><span class="line">enemies.cheat.level=noGoodRotten</span><br><span class="line">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class="line">secret.code.allowed=true</span><br><span class="line">secret.code.lives=30</span><br></pre></td></tr></table></figure></p>
<p>你可以多次使用 <code>--from-file</code> 這個 flag, 藉此從多個檔案建立 ConfigMap:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties --from-file=configure-pod-container/configmap/ui.properties</span><br></pre></td></tr></table></figure></p>
<p>執行以下指令來顯示 <code>game-config-2</code> 細節資訊<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl describe configmaps game-config-2</span><br></pre></td></tr></table></figure></p>
<p>輸出類似：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">Name:         game-config-2</span><br><span class="line">Namespace:    default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">game.properties:</span><br><span class="line">----</span><br><span class="line">enemies=aliens</span><br><span class="line">lives=3</span><br><span class="line">enemies.cheat=true</span><br><span class="line">enemies.cheat.level=noGoodRotten</span><br><span class="line">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class="line">secret.code.allowed=true</span><br><span class="line">secret.code.lives=30</span><br><span class="line">ui.properties:</span><br><span class="line">----</span><br><span class="line">color.good=purple</span><br><span class="line">color.bad=yellow</span><br><span class="line">allow.textmode=true</span><br><span class="line">how.nice.to.look=fairlyNice</span><br></pre></td></tr></table></figure></p>
<p>使用 <code>--from-env-file</code> 選項, 從 env-file 建立 ConfigMap, 例如以下為 env 範例<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line"># Env-files 含有一系列的環境變數</span><br><span class="line"># 以下為語法：</span><br><span class="line"># env file 中的每行必須是 VAR=VAL 格式</span><br><span class="line"># # 開頭的那行會被忽略 (也就是 comment)</span><br><span class="line"># 空白行會被忽略</span><br><span class="line"># quotation marks 在 configMap 中不具有特別意義, 也就是說會變成 configMap 的 value 一部分</span><br><span class="line"></span><br><span class="line"># 下載範例檔案</span><br><span class="line">wget https://kubernetes.io/examples/configmap/game-env-file.properties -O configure-pod-container/configmap/game-env-file.properties</span><br><span class="line"></span><br><span class="line"># 範例檔如下：</span><br><span class="line">cat configure-pod-container/configmap/game-env-file.properties</span><br><span class="line">enemies=aliens</span><br><span class="line">lives=3</span><br><span class="line">allowed=&quot;true&quot;</span><br><span class="line"></span><br><span class="line"># 這個 comment 以及上面的空行會被忽略</span><br></pre></td></tr></table></figure></p>
<p>執行以下指令：<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-env-file \</span><br><span class="line">       --from-env-file=configure-pod-container/configmap/game-env-file.properties</span><br></pre></td></tr></table></figure></p>
<p>會產生以下 ConfigMap, 執行以下指令檢視這個 ConfigMap<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmap game-config-env-file -o yaml</span><br></pre></td></tr></table></figure></p>
<p>輸出類似：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: 2017-12-27T18:36:28Z</span><br><span class="line">  name: game-config-env-file</span><br><span class="line">  namespace: default</span><br><span class="line">  resourceVersion: &quot;809965&quot;</span><br><span class="line">  uid: d9d1ca5b-eb34-11e7-887b-42010a8002b8</span><br><span class="line">data:</span><br><span class="line">  allowed: &apos;&quot;true&quot;&apos;</span><br><span class="line">  enemies: aliens</span><br><span class="line">  lives: &quot;3&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意</strong>: 當多次使用 <code>--from-env-file</code> 時, 只有最後一個會被採用</p>
<p>多次使用 <code>--from-env-file</code> 的行為如下：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line"># 下載範例</span><br><span class="line">wget https://kubernetes.io/examples/configmap/ui-env-file.properties -O configure-pod-container/configmap/ui-env-file.properties</span><br><span class="line"></span><br><span class="line"># 建立 ConfigMap</span><br><span class="line">kubectl create configmap config-multi-env-files \</span><br><span class="line">        --from-env-file=configure-pod-container/configmap/game-env-file.properties \</span><br><span class="line">        --from-env-file=configure-pod-container/configmap/ui-env-file.properties</span><br></pre></td></tr></table></figure></p>
<p>會產生以下的 ConfigMap, 執行以下指令檢視這個 ConfigMap<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmap config-multi-env-files -o yaml</span><br></pre></td></tr></table></figure></p>
<p>輸出如下：<br><figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  creationTimestamp:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-12</span><span class="hljs-bullet">-27</span><span class="hljs-attr">T18:38:34Z</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">config-multi-env-files</span></span><br><span class="line"><span class="hljs-attr">  namespace:</span> <span class="hljs-string">default</span></span><br><span class="line"><span class="hljs-attr">  resourceVersion:</span> <span class="hljs-string">"810136"</span></span><br><span class="line"><span class="hljs-attr">  uid:</span> <span class="hljs-number">252</span><span class="hljs-string">c4572-eb35-11e7-887b-42010a8002b8</span></span><br><span class="line"><span class="hljs-attr">data:</span></span><br><span class="line"><span class="hljs-attr">  color:</span> <span class="hljs-string">purple</span></span><br><span class="line"><span class="hljs-attr">  how:</span> <span class="hljs-string">fairlyNice</span></span><br><span class="line"><span class="hljs-attr">  textmode:</span> <span class="hljs-string">"true"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="當從檔案建立-ConfigMap-時-自己定義-key"><a href="#當從檔案建立-ConfigMap-時-自己定義-key" class="headerlink" title="當從檔案建立 ConfigMap 時, 自己定義 key"></a>當從檔案建立 ConfigMap 時, 自己定義 key</h4><p>當你使用 <code>--from-file</code> 來建立 ConfigMap 時, 你不一定要使用檔名為 key, 你也可以自己定義 key, 如以下語法：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-3 --from-file=&lt;my-key-name&gt;=&lt;path-to-file&gt;</span><br></pre></td></tr></table></figure></p>
<p><code>&lt;my-key-name&gt;</code> 為你想要的 key name, 而 <code>&lt;path-to-file&gt;</code> 為檔案來源<br>例如說<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-3 --from-file=game-special-key=configure-pod-container/configmap/game.properties</span><br></pre></td></tr></table></figure></p>
<p>以上指令會產生一個 ConfigMap, 執行以下指令來檢視它<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmaps game-config-3 -o yaml</span><br></pre></td></tr></table></figure></p>
<p>輸出類似:<br><figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  creationTimestamp:</span> <span class="hljs-number">2016</span><span class="hljs-bullet">-02</span><span class="hljs-bullet">-18</span><span class="hljs-attr">T18:54:22Z</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">game-config-3</span></span><br><span class="line"><span class="hljs-attr">  namespace:</span> <span class="hljs-string">default</span></span><br><span class="line"><span class="hljs-attr">  resourceVersion:</span> <span class="hljs-string">"530"</span></span><br><span class="line"><span class="hljs-attr">  uid:</span> <span class="hljs-number">05</span><span class="hljs-string">f8da22-d671-11e5-8cd0-68f728db1985</span></span><br><span class="line"><span class="hljs-attr">data:</span></span><br><span class="line"><span class="hljs-attr">  game-special-key:</span> <span class="hljs-string">|</span></span><br><span class="line"><span class="hljs-string">    enemies=aliens</span></span><br><span class="line"><span class="hljs-string">    lives=3</span></span><br><span class="line"><span class="hljs-string">    enemies.cheat=true</span></span><br><span class="line"><span class="hljs-string">    enemies.cheat.level=noGoodRotten</span></span><br><span class="line"><span class="hljs-string">    secret.code.passphrase=UUDDLRLRBABAS</span></span><br><span class="line"><span class="hljs-string">    secret.code.allowed=true</span></span><br><span class="line"><span class="hljs-string">    secret.code.lives=30</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="從輸入值建立-ConfigMap"><a href="#從輸入值建立-ConfigMap" class="headerlink" title="從輸入值建立 ConfigMap"></a>從輸入值建立 ConfigMap</h4><p>你可以使用 <code>kubectl create configmap</code> 的 <code>--from-literal</code> flag, 從命令行來定義輸入值<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charm</span><br></pre></td></tr></table></figure></p>
<p>這個 flag 可以使用多次, 每一次都會產生 ConfigMap 中的一個 key / value pair, 輸入以下指令檢視:<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmaps special-config -o yaml</span><br></pre></td></tr></table></figure></p>
<p>輸出類似：<br><figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  creationTimestamp:</span> <span class="hljs-number">2016</span><span class="hljs-bullet">-02</span><span class="hljs-bullet">-18</span><span class="hljs-attr">T19:14:38Z</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">special-config</span></span><br><span class="line"><span class="hljs-attr">  namespace:</span> <span class="hljs-string">default</span></span><br><span class="line"><span class="hljs-attr">  resourceVersion:</span> <span class="hljs-string">"651"</span></span><br><span class="line"><span class="hljs-attr">  uid:</span> <span class="hljs-string">dadce046-d673-11e5-8cd0-68f728db1985</span></span><br><span class="line"><span class="hljs-attr">data:</span></span><br><span class="line">  <span class="hljs-string">special.how:</span> <span class="hljs-string">very</span></span><br><span class="line">  <span class="hljs-string">special.type:</span> <span class="hljs-string">charm</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="從產生器建立-ConfigMap"><a href="#從產生器建立-ConfigMap" class="headerlink" title="從產生器建立 ConfigMap"></a>從產生器建立 ConfigMap</h3><p>從 1.14 開始, <code>kubectl</code> 支援使用 <code>kustomization.yaml</code>。 你可以使用產生器來建立 ConfigMap 並且在 Apiserver 中建立這個物件。 產生器必須被定義在 <code>kustomization.yaml</code> 檔案中</p>
<p><br></p>
<h4 id="從檔案建立-ConfigMaps-1"><a href="#從檔案建立-ConfigMaps-1" class="headerlink" title="從檔案建立 ConfigMaps"></a>從檔案建立 ConfigMaps</h4><p>舉例來說, 從 <code>configure-pod-container/configmap/game.properties</code> 這個檔案來建立 ConfigMap<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># 建立一個有產生器的 kustomization.yaml 檔</span></span><br><span class="line">cat &lt;&lt;EOF &gt;./kustomization.yaml</span><br><span class="line">configMapGenerator:</span><br><span class="line">- name: game-config-4</span><br><span class="line">  files:</span><br><span class="line">  - configure-pod-container/configmap/game.properties</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<p>apply 這個資料夾來建立 ConfigMap 物件<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl apply -k .</span><br><span class="line">configmap/game-config-4-m9dm2f92bt created</span><br></pre></td></tr></table></figure></p>
<p>你可以像這樣來確認 ConfigMap 是否有被建立：<br><figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configmap</span><br><span class="line">NAME                       DATA   AGE</span><br><span class="line">game-config-4-m9dm2f92bt   1      37s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kubectl describe configmaps/game-config-4-m9dm2f92bt</span><br><span class="line">Name:         game-config-4-m9dm2f92bt</span><br><span class="line">Namespace:    default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubectl.kubernetes.io/last-applied-configuration:</span><br><span class="line">                &#123;&quot;apiVersion&quot;:&quot;v1&quot;,&quot;data&quot;:&#123;&quot;game.properties&quot;:&quot;enemies=aliens\nlives=3\nenemies.cheat=true\nenemies.cheat.level=noGoodRotten\nsecret.code.p...</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">game.properties:</span><br><span class="line">----</span><br><span class="line">enemies=aliens</span><br><span class="line">lives=3</span><br><span class="line">enemies.cheat=true</span><br><span class="line">enemies.cheat.level=noGoodRotten</span><br><span class="line">secret.code.passphrase=UUDDLRLRBABAS</span><br><span class="line">secret.code.allowed=true</span><br><span class="line">secret.code.lives=30</span><br><span class="line">Events:  &lt;none&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以注意到, 被產生的 ConfigMap name 後面有串 hash 的字串, 這確保每次內容被修改時, 都會建立一個新的 ConfigMap</p>
<p><br><br><br></p>
<h2 id="Questions-and-Answers"><a href="#Questions-and-Answers" class="headerlink" title="Questions and Answers"></a>Questions and Answers</h2><h5 id="以下的-kubernetes-kustomization-yaml-代表什麼意思？"><a href="#以下的-kubernetes-kustomization-yaml-代表什麼意思？" class="headerlink" title="以下的 kubernetes kustomization.yaml 代表什麼意思？"></a><strong>以下的 kubernetes <code>kustomization.yaml</code> 代表什麼意思？</strong></h5><ul>
<li><p><strong>Example</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">configMapGenerator:</span></span><br><span class="line"><span class="hljs-attr">- name:</span> <span class="hljs-string">game-config-4</span></span><br><span class="line"><span class="hljs-attr">  files:</span></span><br><span class="line"><span class="hljs-bullet">  -</span> <span class="hljs-string">configure-pod-container/configmap/game.properties</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">configMapGenerator:</span></span><br><span class="line"><span class="hljs-comment"># 定義 configMap 物件名稱</span></span><br><span class="line"><span class="hljs-attr">- name:</span> <span class="hljs-string">game-config-4</span></span><br><span class="line">  <span class="hljs-comment"># 定義 data source</span></span><br><span class="line"><span class="hljs-attr">  files:</span></span><br><span class="line"><span class="hljs-bullet">  -</span> <span class="hljs-string">configure-pod-container/configmap/game.properties</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Kubernetes-中-如果我想要使用產生器來建立-ConfigMap-我可以在哪個檔案中定義？"><a href="#Kubernetes-中-如果我想要使用產生器來建立-ConfigMap-我可以在哪個檔案中定義？" class="headerlink" title="Kubernetes 中, 如果我想要使用產生器來建立 ConfigMap, 我可以在哪個檔案中定義？"></a><strong>Kubernetes 中, 如果我想要使用產生器來建立 ConfigMap, 我可以在哪個檔案中定義？</strong></h5><p><code>kustomization.yaml</code></p>
<h5 id="以下的-Kubernetes-ConfigMap-範例中-如果我不想使用檔名為-key-我想要自己定義-key-的話-我可以怎麼修改？"><a href="#以下的-Kubernetes-ConfigMap-範例中-如果我不想使用檔名為-key-我想要自己定義-key-的話-我可以怎麼修改？" class="headerlink" title="以下的 Kubernetes ConfigMap 範例中, 如果我不想使用檔名為 key, 我想要自己定義 key 的話, 我可以怎麼修改？"></a><strong>以下的 Kubernetes ConfigMap 範例中, 如果我不想使用檔名為 key, 我想要自己定義 key 的話, 我可以怎麼修改？</strong></h5><ul>
<li><p><strong>Example</strong>:</p>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-3 --from-file=&lt;path-to-file&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configmap game-config-3 --from-file=&lt;my-key-name&gt;=&lt;path-to-file&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Kubernetes-ConfigMap-中-當我使用-from-file-flag-來建立-ConfigMap-時-除了使用檔名為-key-之外-我可以自己定義-key-嗎？"><a href="#Kubernetes-ConfigMap-中-當我使用-from-file-flag-來建立-ConfigMap-時-除了使用檔名為-key-之外-我可以自己定義-key-嗎？" class="headerlink" title="Kubernetes ConfigMap 中, 當我使用 --from-file flag 來建立 ConfigMap 時, 除了使用檔名為 key 之外, 我可以自己定義 key 嗎？"></a><strong>Kubernetes ConfigMap 中, 當我使用 <code>--from-file</code> flag 來建立 ConfigMap 時, 除了使用檔名為 key 之外, 我可以自己定義 key 嗎？</strong></h5><p>可以</p>
<h5 id="Kubernetes-中-當我多次使用-from-env-file-這個-flag-多次-會發生什麼事？"><a href="#Kubernetes-中-當我多次使用-from-env-file-這個-flag-多次-會發生什麼事？" class="headerlink" title="Kubernetes 中, 當我多次使用 --from-env-file 這個 flag 多次, 會發生什麼事？"></a><strong>Kubernetes 中, 當我多次使用 <code>--from-env-file</code> 這個 flag 多次, 會發生什麼事？</strong></h5><p>只有最後一個會被採用</p>
<h5 id="Kubernetes-中-如果我想要從-env-檔來建立-ConfigMap-我可以使用哪一個-flag"><a href="#Kubernetes-中-如果我想要從-env-檔來建立-ConfigMap-我可以使用哪一個-flag" class="headerlink" title="Kubernetes 中, 如果我想要從 env 檔來建立 ConfigMap, 我可以使用哪一個 flag?"></a><strong>Kubernetes 中, 如果我想要從 env 檔來建立 ConfigMap, 我可以使用哪一個 flag?</strong></h5><p><code>--from-env-file</code></p>
<h5 id="Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理-quotation-marks-像是-39-或-quot-？"><a href="#Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理-quotation-marks-像是-39-或-quot-？" class="headerlink" title="Kubernetes ConfigMap 中, 當我使用 --from-env-file 時, Kubernetes 會如何處理 quotation marks, 像是 &#39;, 或 &quot;？"></a><strong>Kubernetes ConfigMap 中, 當我使用 <code>--from-env-file</code> 時, Kubernetes 會如何處理 quotation marks, 像是 <code>&#39;</code>, 或 <code>&quot;</code>？</strong></h5><p>會將他們變成 ConfigMap value 的一部分</p>
<h5 id="Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理-開頭的-comment？"><a href="#Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理-開頭的-comment？" class="headerlink" title="Kubernetes ConfigMap 中, 當我使用 --from-env-file 時, Kubernetes 會如何處理 # 開頭的 comment？"></a><strong>Kubernetes ConfigMap 中, 當我使用 <code>--from-env-file</code> 時, Kubernetes 會如何處理 # 開頭的 comment？</strong></h5><p>無視</p>
<h5 id="Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理空行？"><a href="#Kubernetes-ConfigMap-中-當我使用-from-env-file-時-Kubernetes-會如何處理空行？" class="headerlink" title="Kubernetes ConfigMap 中, 當我使用 --from-env-file 時, Kubernetes 會如何處理空行？"></a><strong>Kubernetes ConfigMap 中, 當我使用 <code>--from-env-file</code> 時, Kubernetes 會如何處理空行？</strong></h5><p>無視</p>
<h5 id="Kubernetes-ConfigMap-中-當我使用-from-env-file-時-內容必須是什麼格式？"><a href="#Kubernetes-ConfigMap-中-當我使用-from-env-file-時-內容必須是什麼格式？" class="headerlink" title="Kubernetes ConfigMap 中, 當我使用 --from-env-file 時, 內容必須是什麼格式？"></a><strong>Kubernetes ConfigMap 中, 當我使用 <code>--from-env-file</code> 時, 內容必須是什麼格式？</strong></h5><p>VAR=VAL</p>
<h5 id="以下的-K8s-ConfigMap-yaml-檔-代表什麼意思"><a href="#以下的-K8s-ConfigMap-yaml-檔-代表什麼意思" class="headerlink" title="以下的 K8s ConfigMap yaml 檔, 代表什麼意思?"></a><strong>以下的 K8s ConfigMap yaml 檔, 代表什麼意思?</strong></h5><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">cm-demo</span></span><br><span class="line"><span class="hljs-attr">  namespace:</span> <span class="hljs-string">default</span></span><br><span class="line"><span class="hljs-attr">data:</span></span><br><span class="line">  <span class="hljs-string">data.1:</span> <span class="hljs-string">hello</span></span><br><span class="line">  <span class="hljs-string">data.2:</span> <span class="hljs-string">world</span></span><br><span class="line"><span class="hljs-attr">  config:</span> <span class="hljs-string">|</span></span><br><span class="line"><span class="hljs-string">    property.1=value-1</span></span><br><span class="line"><span class="hljs-string">    property.2=value-2</span></span><br><span class="line"><span class="hljs-string">    property.3=value-3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<ul>
<li>data:<ul>
<li>data.1: 單個屬性, data.1 為 key, hello 為 value</li>
<li>data.2: 單個屬性, 同上</li>
<li>config: config 為整個配置文件, 內容如下</li>
<li><code>|</code> 為 Block Style Indicator, literal style, 如果 string 當中有空行, 會被保留下來, 可參考<a href="https://yaml-multiline.info/" target="_blank" rel="noopener">範例</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="Kubernetes-中-當我們不知道要怎麼樣建立一個資源時-可以使用哪一個指令來檢視範例？"><a href="#Kubernetes-中-當我們不知道要怎麼樣建立一個資源時-可以使用哪一個指令來檢視範例？" class="headerlink" title="Kubernetes 中, 當我們不知道要怎麼樣建立一個資源時, 可以使用哪一個指令來檢視範例？"></a><strong>Kubernetes 中, 當我們不知道要怎麼樣建立一個資源時, 可以使用哪一個指令來檢視範例？</strong></h5><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create RESOURCE -h</span><br></pre></td></tr></table></figure>
<h5 id="Kubernetes-中-如果我在-tls-資料夾下有-4-個-檔案-如下-現在我要建立一個-configMap-這個-configMap-需同時包含這-4-個檔案-檔名為-key-value-為檔案內容-那我可以怎麼做？"><a href="#Kubernetes-中-如果我在-tls-資料夾下有-4-個-檔案-如下-現在我要建立一個-configMap-這個-configMap-需同時包含這-4-個檔案-檔名為-key-value-為檔案內容-那我可以怎麼做？" class="headerlink" title="Kubernetes 中, 如果我在 tls 資料夾下有 4 個 檔案(如下), 現在我要建立一個 configMap, 這個 configMap 需同時包含這 4 個檔案, 檔名為 key, value 為檔案內容, 那我可以怎麼做？"></a><strong>Kubernetes 中, 如果我在 tls 資料夾下有 4 個 檔案(如下), 現在我要建立一個 configMap, 這個 configMap 需同時包含這 4 個檔案, 檔名為 key, value 為檔案內容, 那我可以怎麼做？</strong></h5><ul>
<li><strong>資料夾</strong>:<br><img src="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no" alt></li>
<li><strong>Answer</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configMap configMapName --from-file=./</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Kubernetes-中-如果我要-print-出-configMap-的內容-我可以使用哪一個指令？"><a href="#Kubernetes-中-如果我要-print-出-configMap-的內容-我可以使用哪一個指令？" class="headerlink" title="Kubernetes 中, 如果我要 print 出 configMap 的內容, 我可以使用哪一個指令？"></a><strong>Kubernetes 中, 如果我要 print 出 configMap 的內容, 我可以使用哪一個指令？</strong></h5><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl get configMap configMapName -o=format</span><br></pre></td></tr></table></figure>
<h5 id="Kubernetes-中-如果我在-tls-資料夾下有-4-個-檔案-如下-現在我要建立一個-configMap-這個-configMap-只包含-key-pem-的內容-檔名為-key-value-為檔案內容-那我可以怎麼做？"><a href="#Kubernetes-中-如果我在-tls-資料夾下有-4-個-檔案-如下-現在我要建立一個-configMap-這個-configMap-只包含-key-pem-的內容-檔名為-key-value-為檔案內容-那我可以怎麼做？" class="headerlink" title="Kubernetes 中, 如果我在 tls 資料夾下有 4 個 檔案(如下), 現在我要建立一個 configMap, 這個 configMap 只包含 key.pem 的內容, 檔名為 key, value 為檔案內容, 那我可以怎麼做？"></a><strong>Kubernetes 中, 如果我在 tls 資料夾下有 4 個 檔案(如下), 現在我要建立一個 configMap, 這個 configMap 只包含 <code>key.pem</code> 的內容, 檔名為 key, value 為檔案內容, 那我可以怎麼做？</strong></h5><ul>
<li><strong>資料夾</strong>:<br><img src="https://lh3.googleusercontent.com/NNOdN4AExN2Fl8LookXjbiQf5IBtXD5STcwdnrDJEjBCVTLNuew7CZ5wYLTEE0nuY4eyA2U-83A_HrXUJHfKaxNLc8ZBqjc10vGrnmZ4xrvTU4gO9QiPK8Plw6m2kdYmXkBAgbz4WkRd4wf02vfBJ_hBRp-F1zlRyeGWM0VBhwwTePzN4GyjaARzRzheRK3Ypjo11sfhlqEVv9U-N-c13mkxI64gPWjIMrMYHDwwFkeAR6THXvrHcKBCcVVbVQgLqrJy_kozCZhRN_W7fsxBNkePzthh2MFWMc0d1m777TdVGN8QDV1LL5JQQjzR1CPaOuQcPdFejlyoigKD9OVI8cukHylrZsDXkY2Cwthr5rsCUAbf2y4F1ukoPLs7wtcUU-Q9vIUg9hO240qQlE1XSLElG-vYQscofz6plL1ESvO7q08rjs2Z1FzYjQCgn0kFUs4TjKmXa5cZhjMhqxOFZcV2U1Qwn2iiaJXdMY4uF2hLcqgVEz4cNGhpZG6NExs7NaqlT_KE0Z8XxenIdULVvoznTdDCHVGT9kfZW2ANborDgbkN56Uq1lNsNfbFkUOrW_2unSw_oMjYhgMkzlw0zoME8HB9csZkf1DES64YDVAI95q5TYMspGm4n7xdhegquCOYGKcwDG9RKiqEovwhhLXP3KRU14_MU4qvT12V8XoyykOOPfGxm-KNYvY9EMIZ7hmQHyulbDcxgwU2wU8WxqaAM63R1w2CN6OjFgtEEVib4tmG4A=w488-h55-no" alt></li>
<li><strong>Answer</strong>:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configMap configMapName --from-file=./key.pem</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="kubectl-create-configmap-中-from-file-的-flag-可以重複使用嗎"><a href="#kubectl-create-configmap-中-from-file-的-flag-可以重複使用嗎" class="headerlink" title="kubectl create configmap 中, --from-file 的 flag 可以重複使用嗎?"></a><strong>kubectl create configmap 中, <code>--from-file</code> 的 flag 可以重複使用嗎?</strong></h5><p>可以哦</p>
<h5 id="以下的-Kubernetes-Pod-yaml-配置檔是什麼意思？"><a href="#以下的-Kubernetes-Pod-yaml-配置檔是什麼意思？" class="headerlink" title=" 以下的 Kubernetes Pod yaml 配置檔是什麼意思？"></a><strong> 以下的 Kubernetes Pod yaml 配置檔是什麼意思？</strong></h5><ul>
<li><p><strong>配置檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm1-pod</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm1</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"env"</span> <span class="hljs-string">]</span></span><br><span class="line"><span class="hljs-attr">      env:</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_HOST</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.host</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_PORT</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.port</span></span><br><span class="line"><span class="hljs-attr">      envFrom:</span></span><br><span class="line"><span class="hljs-attr">        - configMapRef:</span></span><br><span class="line"><span class="hljs-attr">            name:</span> <span class="hljs-string">cm-demo1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:    </p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># API version, 可參考[文件](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.16/#-strong-api-overview-strong-)</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 種類為 Pod</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># 該 Pod 的 name</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm1-pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 要實作的規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 該 Pod 內的容器規格</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line">      <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm1</span></span><br><span class="line">      <span class="hljs-comment"># 容器鏡像</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line">      <span class="hljs-comment"># 容器開啟後執行的 command</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"env"</span> <span class="hljs-string">]</span></span><br><span class="line"><span class="hljs-attr">      env:</span></span><br><span class="line">          <span class="hljs-comment"># env 的名稱</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_HOST</span></span><br><span class="line">          <span class="hljs-comment"># env 的值的來源</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line">            <span class="hljs-comment"># 引用 configMap</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line">              <span class="hljs-comment"># 引用的 configMap 的名稱</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line">              <span class="hljs-comment"># 引用的 configMap 檔案中的 key</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.host</span></span><br><span class="line">          <span class="hljs-comment"># 另一個 env 的名稱</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_PORT</span></span><br><span class="line">          <span class="hljs-comment"># env 的值的來源</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line">            <span class="hljs-comment"># 引用 configMap</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line">              <span class="hljs-comment"># 引用的 configMap 的名稱</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line">              <span class="hljs-comment"># 引用的 configMap 檔案中的 key</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.port</span></span><br><span class="line">      <span class="hljs-comment"># 或者, 也可以直接從一個檔案引用整個 configMap 檔案</span></span><br><span class="line"><span class="hljs-attr">      envFrom:</span></span><br><span class="line"><span class="hljs-attr">        - configMapRef:</span></span><br><span class="line"><span class="hljs-attr">            name:</span> <span class="hljs-string">cm-demo1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="以下的-Kubernetes-yaml-檔是什麼意思？"><a href="#以下的-Kubernetes-yaml-檔是什麼意思？" class="headerlink" title="以下的 Kubernetes yaml 檔是什麼意思？"></a><strong>以下的 Kubernetes yaml 檔是什麼意思？</strong></h5><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm3-pod</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm3</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"cat /etc/config/redis.conf"</span> <span class="hljs-string">]</span></span><br><span class="line"><span class="hljs-attr">      volumeMounts:</span></span><br><span class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line"><span class="hljs-attr">        mountPath:</span> <span class="hljs-string">/etc/config</span></span><br><span class="line"><span class="hljs-attr">  volumes:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line"><span class="hljs-attr">      configMap:</span></span><br><span class="line"><span class="hljs-attr">        name:</span> <span class="hljs-string">cm-demo2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># 版本</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 種類為 Pod</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-comment"># Pod 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># Pod 的名字</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm3-pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 的運行規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 定義容器規格</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line">      <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm3</span></span><br><span class="line">      <span class="hljs-comment"># 鏡像名稱</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line">      <span class="hljs-comment"># 容器啟動後運行指令</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"cat /etc/config/redis.conf"</span> <span class="hljs-string">]</span></span><br><span class="line">      <span class="hljs-comment"># mount 一個 volume</span></span><br><span class="line"><span class="hljs-attr">      volumeMounts:</span></span><br><span class="line">        <span class="hljs-comment"># 要 mount 的 volume 的名稱</span></span><br><span class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line">        <span class="hljs-comment"># 要將這個 volume mount 到哪個位置</span></span><br><span class="line"><span class="hljs-attr">        mountPath:</span> <span class="hljs-string">/etc/config</span></span><br><span class="line">  <span class="hljs-comment"># 定義 volume</span></span><br><span class="line"><span class="hljs-attr">  volumes:</span></span><br><span class="line">      <span class="hljs-comment"># volume 的名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line">      <span class="hljs-comment"># volume 來自於 configMap</span></span><br><span class="line"><span class="hljs-attr">      configMap:</span></span><br><span class="line">        <span class="hljs-comment"># configMap 的名稱</span></span><br><span class="line"><span class="hljs-attr">        name:</span> <span class="hljs-string">cm-demo2</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="以下的-Kubernetes-yaml-檔是什麼意思？-1"><a href="#以下的-Kubernetes-yaml-檔是什麼意思？-1" class="headerlink" title="以下的 Kubernetes yaml 檔是什麼意思？"></a><strong>以下的 Kubernetes yaml 檔是什麼意思？</strong></h5><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm4-pod</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm4</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,"-c","cat</span> <span class="hljs-string">/etc/config/path/to/msyql.conf"</span> <span class="hljs-string">]</span></span><br><span class="line"><span class="hljs-attr">      volumeMounts:</span></span><br><span class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line"><span class="hljs-attr">        mountPath:</span> <span class="hljs-string">/etc/config</span></span><br><span class="line"><span class="hljs-attr">  volumes:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line"><span class="hljs-attr">      configMap:</span></span><br><span class="line"><span class="hljs-attr">        name:</span> <span class="hljs-string">cm-demo1</span></span><br><span class="line"><span class="hljs-attr">        items:</span></span><br><span class="line"><span class="hljs-attr">        - key:</span> <span class="hljs-string">mysql.conf</span></span><br><span class="line"><span class="hljs-attr">          path:</span> <span class="hljs-string">path/to/msyql.conf</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># 版本</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 種類為 Pod</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># 該 Pod 的 name</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm4-pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 運行的規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 容器規格</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line">      <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm4</span></span><br><span class="line">      <span class="hljs-comment"># 鏡像名稱</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line">      <span class="hljs-comment"># 容器啟動後運行的指令</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,"-c","cat</span> <span class="hljs-string">/etc/config/path/to/msyql.conf"</span> <span class="hljs-string">]</span></span><br><span class="line">      <span class="hljs-comment"># 定義掛載 volume</span></span><br><span class="line"><span class="hljs-attr">      volumeMounts:</span></span><br><span class="line">        <span class="hljs-comment"># 要掛載的 volume 的名稱</span></span><br><span class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line">        <span class="hljs-comment"># 要掛載到哪一個路徑</span></span><br><span class="line"><span class="hljs-attr">        mountPath:</span> <span class="hljs-string">/etc/config</span></span><br><span class="line">  <span class="hljs-comment"># 定義 volumes</span></span><br><span class="line"><span class="hljs-attr">  volumes:</span></span><br><span class="line">      <span class="hljs-comment"># volume 名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">config-volume</span></span><br><span class="line">      <span class="hljs-comment"># volume 來源為 configMap</span></span><br><span class="line"><span class="hljs-attr">      configMap:</span></span><br><span class="line">        <span class="hljs-comment"># configMap 的名稱</span></span><br><span class="line"><span class="hljs-attr">        name:</span> <span class="hljs-string">cm-demo1</span></span><br><span class="line">        <span class="hljs-comment"># 定義要使用該 configMap 下的 key 以及 value 來為路徑</span></span><br><span class="line"><span class="hljs-attr">        items:</span></span><br><span class="line">          <span class="hljs-comment"># 定義 configMap 內的 key</span></span><br><span class="line"><span class="hljs-attr">        - key:</span> <span class="hljs-string">mysql.conf</span></span><br><span class="line">          <span class="hljs-comment"># 定義 value 在此 volume 中的路徑位置</span></span><br><span class="line"><span class="hljs-attr">          path:</span> <span class="hljs-string">path/to/msyql.conf</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="以下的-Kubernetes-yaml-檔是什麼意思？-2"><a href="#以下的-Kubernetes-yaml-檔是什麼意思？-2" class="headerlink" title="以下的 Kubernetes yaml 檔是什麼意思？"></a><strong>以下的 Kubernetes yaml 檔是什麼意思？</strong></h5><ul>
<li><p><strong>yaml 檔</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-attr">apiversion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">pod</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm2-pod</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm2</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"echo $(db_host) $(db_port)"</span> <span class="hljs-string">]</span></span><br><span class="line"><span class="hljs-attr">      env:</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">db_host</span></span><br><span class="line"><span class="hljs-attr">          valuefrom:</span></span><br><span class="line"><span class="hljs-attr">            configmapkeyref:</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.host</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">db_port</span></span><br><span class="line"><span class="hljs-attr">          valuefrom:</span></span><br><span class="line"><span class="hljs-attr">            configmapkeyref:</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.port</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Answer</strong>:</p>
<figure class="highlight yaml hljs"><table><tr><td class="code"><pre><span class="line"><span class="hljs-comment"># 版本</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-comment"># 類型為 Pod</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 的 metadata</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-comment"># 該 Pod 的 name</span></span><br><span class="line"><span class="hljs-attr">  name:</span> <span class="hljs-string">testcm2-pod</span></span><br><span class="line"><span class="hljs-comment"># 該 Pod 運行的規格</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-comment"># 容器規格</span></span><br><span class="line"><span class="hljs-attr">  containers:</span></span><br><span class="line">      <span class="hljs-comment"># 容器名稱</span></span><br><span class="line"><span class="hljs-attr">    - name:</span> <span class="hljs-string">testcm2</span></span><br><span class="line">      <span class="hljs-comment"># 鏡像名稱</span></span><br><span class="line"><span class="hljs-attr">      image:</span> <span class="hljs-string">busybox</span></span><br><span class="line">      <span class="hljs-comment"># 容器啟動時運行的指令, 印出變數</span></span><br><span class="line"><span class="hljs-attr">      command:</span> <span class="hljs-string">[</span> <span class="hljs-string">"/bin/sh"</span><span class="hljs-string">,</span> <span class="hljs-string">"-c"</span><span class="hljs-string">,</span> <span class="hljs-string">"echo $(DB_HOST) $(DB_PORT)"</span> <span class="hljs-string">]</span></span><br><span class="line">      <span class="hljs-comment"># 定義變數</span></span><br><span class="line"><span class="hljs-attr">      env:</span></span><br><span class="line">          <span class="hljs-comment"># 變數名稱為 DB_HOST</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_HOST</span></span><br><span class="line">          <span class="hljs-comment"># 定義 value 來源</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line">            <span class="hljs-comment"># 使用 configMap</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line">              <span class="hljs-comment"># configMap 的名稱為 cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line">              <span class="hljs-comment"># 裡頭的 key 為 db.host</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.host</span></span><br><span class="line">          <span class="hljs-comment"># 定義變數 DB_PORT</span></span><br><span class="line"><span class="hljs-attr">        - name:</span> <span class="hljs-string">DB_PORT</span></span><br><span class="line">          <span class="hljs-comment"># value 來源</span></span><br><span class="line"><span class="hljs-attr">          valueFrom:</span></span><br><span class="line">            <span class="hljs-comment"># 使用 configMap</span></span><br><span class="line"><span class="hljs-attr">            configMapKeyRef:</span></span><br><span class="line">              <span class="hljs-comment"># configMap 名稱為 cm-demo3</span></span><br><span class="line"><span class="hljs-attr">              name:</span> <span class="hljs-string">cm-demo3</span></span><br><span class="line">              <span class="hljs-comment"># configMap 內的 key 為 db.port</span></span><br><span class="line"><span class="hljs-attr">              key:</span> <span class="hljs-string">db.port</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Kubernetes-中-如果我要建立一個-configMap-key-value-不經由檔案提供-而是透過我的指令輸入提供-那我可以使用哪一個-flag"><a href="#Kubernetes-中-如果我要建立一個-configMap-key-value-不經由檔案提供-而是透過我的指令輸入提供-那我可以使用哪一個-flag" class="headerlink" title="Kubernetes 中, 如果我要建立一個 configMap, key/value 不經由檔案提供, 而是透過我的指令輸入提供, 那我可以使用哪一個 flag?"></a><strong>Kubernetes 中, 如果我要建立一個 configMap, key/value 不經由檔案提供, 而是透過我的指令輸入提供, 那我可以使用哪一個 flag?</strong></h5><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">kubectl create configMap configMapName --from-literal=key1=value --from-literal=key2=value</span><br></pre></td></tr></table></figure>
<h5 id="Kubernetes-中-當我建立-configMap-時-from-literal-這個-flag-可以重複使用嗎？"><a href="#Kubernetes-中-當我建立-configMap-時-from-literal-這個-flag-可以重複使用嗎？" class="headerlink" title="Kubernetes 中, 當我建立 configMap 時, --from-literal 這個 flag 可以重複使用嗎？"></a><strong>Kubernetes 中, 當我建立 configMap 時, <code>--from-literal</code> 這個 flag 可以重複使用嗎？</strong></h5><p>可以</p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/Kubernetes/">#Kubernetes</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/zh-tw/tags/Kubernetes-configMap/">#Kubernetes configMap</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop is-hidden-mobile article-nav-prev">
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/zh-tw/laravel-the-basics-csrf-protection/">Laravel - The Basics - CSRF Protection</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c72643b9ea706001139fd89&amp;product=inline-share-buttons" async="async"></script>

</div>



<div class="comments">
    <h3 class="title is-4">留言</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://tn710617.github.io/zh-tw/kubernetes-tasks-configure-pod-container-configure-pod-configmap/';
        this.page.identifier = 'zh-tw/kubernetes-tasks-configure-pod-container-configure-pod-configmap/';
        
        this.language = 'zh';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'rayscodingjourney' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Ray&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
                       <a class="navbar-item" title="GitHub" href="https://github.com/tn710617">
                           
                           <i class="fab fa-github"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Medium" href="https://medium.com/@raycodingjourney">
                           
                           <i class="fab fa-medium"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Linkedin" href="https://www.linkedin.com/in/ray-lee-99315315a">
                           
                           <i class="fab fa-linkedin"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Facebook" href="https://www.facebook.com/profile.php?id=100001626039430">
                           
                           <i class="fab fa-facebook"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="CakeResume" href="https://www.cakeresume.com/resumes/ray-6edaef/edit">
                           
                           <i class="far fa-address-card"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="E-Mail" href="mailto:tn710617@gmail.com">
                           
                           <i class="far fa-envelope"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Skype" href="skype:adad0310?call|chat">
                           
                           <i class="fab fa-skype"></i>
                           
                       </a>
                          
                       
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.zh-tw.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>