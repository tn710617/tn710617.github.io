<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>A flexible git flow - Learn or Die</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta name="keywords" content="git rebase -i,git rebase -i --onto,git reset --hard,git reset @^ --hard,git checkout -b,git flow">
<meta property="og:type" content="article">
<meta property="og:title" content="A flexible git flow">
<meta property="og:url" content="https://tn710617.github.io/flexibleGitFlow/index.html">
<meta property="og:site_name" content="Learn or Die">
<meta property="og:description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.imgur.com/k68xKOP.png">
<meta property="og:image" content="https://i.imgur.com/A9DB2U2.png">
<meta property="og:image" content="https://i.imgur.com/oIU88lD.png">
<meta property="og:image" content="https://i.imgur.com/qjFEZL4.png">
<meta property="og:image" content="https://i.imgur.com/ojrNLd5.png">
<meta property="og:image" content="https://i.imgur.com/cxAiRSi.png">
<meta property="og:image" content="https://i.imgur.com/02dAiQM.png">
<meta property="og:image" content="https://i.imgur.com/4ea0xNr.png">
<meta property="og:image" content="https://i.imgur.com/fVfHNBn.png">
<meta property="og:image" content="https://i.imgur.com/Z5fXui6.png">
<meta property="og:image" content="https://i.imgur.com/Lp2a8ue.png">
<meta property="og:image" content="https://i.imgur.com/qCpk4Ji.png">
<meta property="og:updated_time" content="2019-06-20T01:28:16.969Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A flexible git flow">
<meta name="twitter:description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta name="twitter:image" content="https://i.imgur.com/k68xKOP.png">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


    <link href="/zh-tw/flexibleGitFlow/" rel="alternate" hreflang="zh-TW">








    <meta name="description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta name="keywords" content="git rebase -i,git rebase -i --onto,git reset --hard,git reset @^ --hard,git checkout -b,git flow">
<meta property="og:type" content="article">
<meta property="og:title" content="A flexible git flow">
<meta property="og:url" content="https://tn710617.github.io/flexibleGitFlow/index.html">
<meta property="og:site_name" content="Learn or Die">
<meta property="og:description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.imgur.com/k68xKOP.png">
<meta property="og:image" content="https://i.imgur.com/A9DB2U2.png">
<meta property="og:image" content="https://i.imgur.com/oIU88lD.png">
<meta property="og:image" content="https://i.imgur.com/qjFEZL4.png">
<meta property="og:image" content="https://i.imgur.com/ojrNLd5.png">
<meta property="og:image" content="https://i.imgur.com/cxAiRSi.png">
<meta property="og:image" content="https://i.imgur.com/02dAiQM.png">
<meta property="og:image" content="https://i.imgur.com/4ea0xNr.png">
<meta property="og:image" content="https://i.imgur.com/fVfHNBn.png">
<meta property="og:image" content="https://i.imgur.com/Z5fXui6.png">
<meta property="og:image" content="https://i.imgur.com/Lp2a8ue.png">
<meta property="og:image" content="https://i.imgur.com/qCpk4Ji.png">
<meta property="og:updated_time" content="2019-06-20T01:28:16.969Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A flexible git flow">
<meta name="twitter:description" content="IntroductionToday I’m going to share a git flow with the following qualities:  In development, you could make arbitrary commits.  After testing, you could turn the arbitrary commits which are more fri">
<meta name="twitter:image" content="https://i.imgur.com/k68xKOP.png">





    <link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
        
    
        
    
        
    
        
    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135063928-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135063928-1');
</script>


    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    Learn or Die
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/archives">Archives</a>
            
            <a class="navbar-item " href="/categories">Categories</a>
            
            <a class="navbar-item " href="/tags">Tags</a>
            
            <a class="navbar-item " href="/schedule">Schedule</a>
            
            <a class="navbar-item " href="/about">About</a>
            
            <a class="navbar-item " href="/japanese">Japanese</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#Introduction">1&nbsp;&nbsp;<b>Introduction</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#An-ideal-commit">2&nbsp;&nbsp;<b>An ideal commit</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#For-instance">3&nbsp;&nbsp;<b>For instance?</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#What-exactly-we-want">4&nbsp;&nbsp;<b>What exactly we want?</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#What-we-need-in-a-list">5&nbsp;&nbsp;<b>What we need in a list</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Which-one-could-we-have">6&nbsp;&nbsp;<b>Which one could we have?</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#List-the-physical-need">7&nbsp;&nbsp;<b>List the physical need</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#What-it-actually-look-like">8&nbsp;&nbsp;<b>What it actually look like?</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#develop-branch">8.1&nbsp;&nbsp;develop branch:</a>
                    
                    
                    
                    <a class="navbar-item" href="#master-branch">8.2&nbsp;&nbsp;master branch:</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Hand-on-practice">9&nbsp;&nbsp;<b>Hand-on practice</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#The-very-beginning">9.1&nbsp;&nbsp;The very beginning</a>
                    
                    
                    
                    <a class="navbar-item" href="#develop-branch-1">9.2&nbsp;&nbsp;develop branch</a>
                    
                    
                    
                    <a class="navbar-item" href="#feature-branch">9.3&nbsp;&nbsp;feature branch</a>
                    
                    
                    
                    <a class="navbar-item" href="#Commit-freely">9.4&nbsp;&nbsp;Commit freely</a>
                    
                    
                    
                    <a class="navbar-item" href="#The-function-is-completed">9.5&nbsp;&nbsp;The function is completed!</a>
                    
                    
                    
                    <a class="navbar-item" href="#A-branch-for-being-merged">9.6&nbsp;&nbsp;A branch for being merged</a>
                    
                    
                    
                    <a class="navbar-item" href="#Compress-rename-commit">9.7&nbsp;&nbsp;Compress, rename commit</a>
                    
                    
                    
                    <a class="navbar-item" href="#merge">9.8&nbsp;&nbsp;merge</a>
                    
                    
                    
                    <a class="navbar-item" href="#The-second-phrase">9.9&nbsp;&nbsp;The second phrase</a>
                    
                    
                    
                    <a class="navbar-item" href="#The-second-rebasing-and-compressing">9.10&nbsp;&nbsp;The second rebasing and compressing.</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Conclusion">10&nbsp;&nbsp;<b>Conclusion</b></a>
                    
                </div>
            </div>
            

            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/flexibleGitFlow/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-tw/flexibleGitFlow/" class="dropdown-item">
                    繁體中文
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            A flexible git flow
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-03-22T03:09:12.000Z" itemprop="datePublished">Mar 22 2019</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/Git/">Git</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            13 minutes read (About 2005 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Today I’m going to share a git flow with the following qualities:</p>
<ol>
<li><p>In development, you could make arbitrary commits.</p>
</li>
<li><p>After testing, you could turn the arbitrary commits which are more friendly in development into commits compliant with production standard.</p>
</li>
<li><p>The content of two branches are exactly the same, however, with totally different commit history.</p>
</li>
</ol>
<a id="more"></a>
<p>In Ray’s case, when developing, I am used to write down the process, and list every possible logic that I think is feasible, and then try it. Normally a big function may consist of many small logic, and this git flow enables me to make all of them many individual commits in a feature branch. And finally after they are tested and there is no problem there, they could be turned into the commit with production standard as a big function.<br>In the process of implementing this git flow, I am more and more familiar with git rebase and some other advanced features of Git, and train myself to make each commit in a more strict style.<br>Here are some advantages that Ray personally think this git flow could provide:</p>
<ol>
<li>Because every commit is small with single logic, it features unspeakable convenience no matter in experiment or debug stage.</li>
<li>Record your logic in this small-commit way helps clean your mind, on the other hand, makes the logic of each function explicit.</li>
<li>Though the process looks a bit complicated, actually it only takes a little to organise branches once you are familiar with Git, and you could be more familiar with the advanced operation of Git</li>
<li>Because of the small commit, you could train yourself to make commits in a more strict way.</li>
</ol>
<h2 id="An-ideal-commit"><a href="#An-ideal-commit" class="headerlink" title="An ideal commit"></a>An ideal commit</h2><p>The git flow I am going to demonstrate today is just an example, and it doesn’t suit everyone. However, the point is the concept it takes to achieve this operation.</p>
<p>When we do commit locally, we hope that the commit can be as small as possible, because the smaller, the more specific and more precise function orientated the commit is, the more helpful and useful it will be when it comes to debug or experiment and validation of your logic.</p>
<h2 id="For-instance"><a href="#For-instance" class="headerlink" title="For instance?"></a>For instance?</h2><p>Let’s make it more specific!</p>
<p>Let’s say that you were debugging, and you found that the thing you printed out was different from your expectation, so you were trying different ways to get the result you wanted.</p>
<p>If your commit is compliant with the above mentioned principles, in this case, you will not need anoying and troublesome revising after each failed try. All that takes is a simple<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure></p>
<p>Even though the whoEven though the whole logic of a commit is wrong. If the function of this commit is specific enough, all you need is a simple<br><figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git reset @^ --hard</span><br></pre></td></tr></table></figure></p>
<h2 id="What-exactly-we-want"><a href="#What-exactly-we-want" class="headerlink" title="What exactly we want?"></a>What exactly we want?</h2><p>However, the git flow of production doesn’t allow us to do so. Each pushed commit in production git flow is required to run properly and towards designated function. That said, possibly, a designated function of production git flow would consist of many so called small commit we just mentioned.</p>
<h2 id="What-we-need-in-a-list"><a href="#What-we-need-in-a-list" class="headerlink" title="What we need in a list"></a>What we need in a list</h2><ul>
<li>In development: We need the absolute flexibility, able to make a commit as functional specific as possible.</li>
<li>In production: We need to make each commit compliant with the requirement of company, running errorlessly on designated function</li>
</ul>
<h2 id="Which-one-could-we-have"><a href="#Which-one-could-we-have" class="headerlink" title="Which one could we have?"></a>Which one could we have?</h2><p>They say, you can’t have a cake and eat it, is that true?<br>Could we have both?</p>
<h2 id="List-the-physical-need"><a href="#List-the-physical-need" class="headerlink" title="List the physical need"></a>List the physical need</h2><p>Let’s list and conclude more specifically what we need</p>
<ol>
<li>We need a develop branch for local development where we could make a commit whenever we feel comfortable</li>
<li>We need a master branch for production. In this branch, each commit represents a designated function by the company.</li>
<li>The content of above mentioned two branches should be exactly the same</li>
<li>(Optional)We would like to keep the respective history of both branches</li>
</ol>
<h2 id="What-it-actually-look-like"><a href="#What-it-actually-look-like" class="headerlink" title="What it actually look like?"></a>What it actually look like?</h2><h3 id="develop-branch"><a href="#develop-branch" class="headerlink" title="develop branch:"></a>develop branch:</h3><p>As the photo below. What’s on the left side is the content, while on the right is commit. Take a look and then you could find that each file represents a single commit named small function. It’s just an example, denoting a concept of smallest commit that I’m trying to convey</p>
<p><img src="https://i.imgur.com/k68xKOP.png" alt></p>
<h3 id="master-branch"><a href="#master-branch" class="headerlink" title="master branch:"></a>master branch:</h3><p>Now let’s take a look on master branch. You could see that through the photo below, we only have 4 commits, and each of them contains 4 files(except for .gitignore commit). It’s just an example, denoting that the actual commit compliant with production standard is always bigger than the ideal commit.</p>
<p><img src="https://i.imgur.com/A9DB2U2.png" alt></p>
<p><a href="https://github.com/tn710617/ray_gitflow" target="_blank" rel="noopener">Example</a></p>
<h2 id="Hand-on-practice"><a href="#Hand-on-practice" class="headerlink" title="Hand-on practice"></a>Hand-on practice</h2><h3 id="The-very-beginning"><a href="#The-very-beginning" class="headerlink" title="The very beginning"></a>The very beginning</h3><p>.gitignore is always the very beginning of everything.</p>
<ul>
<li><p>Create <code>.gitignore</code> file with <code>vim</code>, and then key in those files we would like to ignore, and then type <code>:wq</code> and leave.</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">vim .gitignore</span><br></pre></td></tr></table></figure>
</li>
<li><p>Complete the first commit</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git add .ignore; git commit -m <span class="hljs-string">'Added .gitignore'</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="develop-branch-1"><a href="#develop-branch-1" class="headerlink" title="develop branch"></a>develop branch</h3><p>Now, we will make a develop branch based on master branch. As mentioned above, the commits are going to be the most function orientated and smallest in develop branch, while the ones in master branch are going to be compliant with production standard.</p>
<ul>
<li>Firstly, let’s build develop branch based on master branch which has completed .gitignore setting.</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout -b develop</span><br></pre></td></tr></table></figure>
<h3 id="feature-branch"><a href="#feature-branch" class="headerlink" title="feature branch"></a>feature branch</h3><p>And then, we could start developing</p>
<ul>
<li>Make a feature branch</li>
<li>This feature branch represents the currently developing function</li>
<li>The function mentioned here is not the function we define on our own, instead, is required by company compliant with production standard.</li>
<li>So, a function with production standard is equal to a feature branch<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout -b feature;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Commit-freely"><a href="#Commit-freely" class="headerlink" title="Commit freely"></a>Commit freely</h3><ul>
<li>On feature branch , we could make commits arbitrarily as long as you feel comfortable. </li>
<li>Create file 1~4, and then each of them represents a smallest commit.<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">touch &#123;1..4&#125;;</span><br><span class="line">git add 1;</span><br><span class="line">git commit 1 -m <span class="hljs-string">'small function 1'</span>;</span><br><span class="line">git add 2;</span><br><span class="line">git commit 2 -m <span class="hljs-string">'small function 2'</span>;</span><br><span class="line">git add 3;</span><br><span class="line">git commit 3 -m <span class="hljs-string">'small function 3'</span>;</span><br><span class="line">git add 4;</span><br><span class="line">git commit 4 -m <span class="hljs-string">'small function 4'</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://i.imgur.com/oIU88lD.png" alt></p>
<h3 id="The-function-is-completed"><a href="#The-function-is-completed" class="headerlink" title="The function is completed!"></a>The function is completed!</h3><ul>
<li><p>After testing, we are pretty sure that everything is okay, so we are going to turn our arbirarily made commit into production standard commit.</p>
</li>
<li><p>as mentioned previouly, the coverage of a feature branch is a required function of production standard.</p>
</li>
<li><p>So? We are going to turn an entire branch into a single commit for production standard.</p>
</li>
<li><p>Since we are going to keep both branches with respective histories, we can’t directly do this on feature branch. Because develop branch is going to need it later.</p>
</li>
<li><p>Actually in this git flow, it’s not neccesary to keep develop branch. However, in this article, I will demonstrate it in the condition that the develop branch will be kept. If you don’t want to keep it, it will be mush simpler.</p>
</li>
</ul>
<h3 id="A-branch-for-being-merged"><a href="#A-branch-for-being-merged" class="headerlink" title="A branch for being merged"></a>A branch for being merged</h3><ul>
<li><p>Let’s build a disposable branch called toBeMerged production standard master branch.</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout -b toBeMerged</span><br></pre></td></tr></table></figure>
</li>
<li><p>Now, let’s make toBeMerged branch ready to be merged by master branch.</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git rebase -i master</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Compress-rename-commit"><a href="#Compress-rename-commit" class="headerlink" title="Compress, rename commit"></a>Compress, rename commit</h3><ul>
<li><p>I mentioned I was going to compress several small commits into a commit with production standard, right? So now I’m going to squash all of the small commits. We could use <code>fixup</code> option. Moreover, the commit name with production standard is defintely different from the commit we make during development, so we are going to rename this compressed commit as follows:</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">reword 96c6c18 small <span class="hljs-keyword">function</span> 1</span><br><span class="line">fixup 1dd84d2 small <span class="hljs-keyword">function</span> 2</span><br><span class="line">fixup 1a71401 small <span class="hljs-keyword">function</span> 3</span><br><span class="line">fixup f9c90c6 small <span class="hljs-keyword">function</span> 4</span><br></pre></td></tr></table></figure>
</li>
<li><p>I’m going to name this compressed commit as </p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">big <span class="hljs-keyword">function</span> 1</span><br></pre></td></tr></table></figure>
</li>
<li><p>Then, type <code>:wq</code> and leave</p>
</li>
<li>Now, we use <code>git log</code> to check it, it should look like as follows:<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git <span class="hljs-built_in">log</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://i.imgur.com/qjFEZL4.png" alt></p>
<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><ul>
<li><p>Let’s checkout master and merge this branch!</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout master;</span><br><span class="line">git merge toBeMerged;</span><br></pre></td></tr></table></figure>
</li>
<li><p>And then, let’s checkout develop branch and merge feature branch</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout develop;</span><br><span class="line">git merge feature;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Finally, let’s delete merged feature branch and toBeMerged branch.</p>
</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git branch -D feature toBeMerged</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Let’s review it. Remember what we want?</p>
<ul>
<li>On develop branch, the commits are smallest.</li>
<li>On master branch, the commits are compliant with production standard.</li>
<li>The content on both two branches should be the same.</li>
<li>(optional)Keep both branches</li>
</ul>
</li>
<li><p>Check if the master branch looks like the one we want.</p>
</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout master;</span><br><span class="line">git <span class="hljs-built_in">log</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/ojrNLd5.png" alt></p>
<ul>
<li>Check the content<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://i.imgur.com/cxAiRSi.png" alt></p>
<ul>
<li>Check commits on develop branch</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout develop;</span><br><span class="line">git tag <span class="hljs-string">'bigFunction1'</span></span><br><span class="line">git <span class="hljs-built_in">log</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/02dAiQM.png" alt></p>
<ul>
<li>Check the content</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/4ea0xNr.png" alt></p>
<h3 id="The-second-phrase"><a href="#The-second-phrase" class="headerlink" title="The second phrase"></a>The second phrase</h3><ul>
<li>The same as before, feature branch first, and then toBeMerged branch</li>
</ul>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git checkout develop;</span><br><span class="line">git checkout -b feature;</span><br><span class="line">touch &#123;5..8&#125;;</span><br><span class="line">git add 5;</span><br><span class="line">git commit -m <span class="hljs-string">'small function 5'</span>;</span><br><span class="line">git add 6;</span><br><span class="line">git commit -m <span class="hljs-string">'small function 6'</span>;</span><br><span class="line">git add 7;</span><br><span class="line">git commit -m <span class="hljs-string">'small function 7'</span>;</span><br><span class="line">git add 8;</span><br><span class="line">git commit -m <span class="hljs-string">'small function 8'</span>;</span><br><span class="line">git checkout -b toBeMerged;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Pay attention! in this case, we can’t turn toBeMerged branch into a right one for master branch with traditional rebase because they don’t have a mutual history.</p>
</li>
<li><p>Let’s think about it for a moment, what the toBeMerged branch should look like to match what we need for being merged by master branch?</p>
<ul>
<li><p>They need mutual history (Identical sha1 checksum)</p>
</li>
<li><p>Those previously merged uncompressed commits that already exist in develop branch shouldn’t appear in toBeMerged branch. Simply speaking, small function 1~4 were already compressed as big function 1, so small function 1~4 should appear again</p>
</li>
<li><p>Those newly added commit should be compressed into a single commit</p>
</li>
<li><p>After all above listed are done, you are ready to go</p>
</li>
</ul>
</li>
</ul>
<h3 id="The-second-rebasing-and-compressing"><a href="#The-second-rebasing-and-compressing" class="headerlink" title="The second rebasing and compressing."></a>The second rebasing and compressing.</h3><ul>
<li><p>So what are the steps?</p>
</li>
<li><p>We will use <code>git rebase</code>, <code>git rebase --onto</code>. We are going to rebase toBeMerged branch onto <code>master</code>, and omit whatever on <code>develop</code>, and then the one should be rebased is <code>toBeMerged</code>. Follow this order, we get the command as follows. You could refer to <a href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing" target="_blank" rel="noopener">official document</a> for more detail about <code>git rebase --onto</code></p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">git rebase -i --onto master develop toBeMerged</span><br></pre></td></tr></table></figure>
</li>
<li><p>The same as previous action, we compress the samll commits into the one compliant with production standard.</p>
<figure class="highlight bash hljs"><table><tr><td class="code"><pre><span class="line">reword 3668e72 small <span class="hljs-keyword">function</span> 5</span><br><span class="line">fixup fd05fa1 small <span class="hljs-keyword">function</span> 6</span><br><span class="line">fixup 3a87c08 small <span class="hljs-keyword">function</span> 7</span><br><span class="line">fixup c38957e small <span class="hljs-keyword">function</span> 8</span><br></pre></td></tr></table></figure>
</li>
<li><p>The name of compressed commit is <code>big function 2</code></p>
</li>
<li><p>Repeat mentioned steps, merge them first and delete them.</p>
</li>
<li><p>Let’s check the commit on develop branch, and the content</p>
</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">git checkout develop;</span><br><span class="line">git tag bigFunction2;</span><br><span class="line">git log --oneline</span><br></pre></td></tr></table></figure>
<ul>
<li>The commit on master</li>
</ul>
<p><img src="https://i.imgur.com/fVfHNBn.png" alt></p>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
<ul>
<li>The content on master</li>
</ul>
<p><img src="https://i.imgur.com/Z5fXui6.png" alt></p>
<ul>
<li>Let’s check the commit on master, and its content</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">git checkout master;</span><br><span class="line">git log</span><br></pre></td></tr></table></figure>
<ul>
<li>commit on develop branch</li>
</ul>
<p><img src="https://i.imgur.com/Lp2a8ue.png" alt></p>
<figure class="highlight plain hljs"><table><tr><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
<ul>
<li>content on develop branch</li>
</ul>
<p><img src="https://i.imgur.com/qCpk4Ji.png" alt></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The git flow in this article enables us to make commit as small as possible in development, even in the way we personally like, and no need to sacrifice for production standard.<br>The develop branch in this article is not necessary to be kept, because if there is some error in the commit with production standard, you will still need to fix it on the one with production standard. However, if you keep it, I reckon that there might be some further usage there. Well, I will leave it for your own explorations.<br>If you have any comments, feel free to drop me a message. I believe that communication and idea sharing is the shortcut of improving ourselves.</p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-rebase-i/">#git rebase -i</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-rebase-i-onto/">#git rebase -i --onto</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-reset-hard/">#git reset --hard</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-reset-hard/">#git reset @^ --hard</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-checkout-b/">#git checkout -b</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/git-flow/">#git flow</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/supervisor/">Deploy Supervisor on AWS and MacOS</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/PayPalRestAPI/">Easy Payment Gateway with PayPal REST API</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c72643b9ea706001139fd89&amp;product=inline-share-buttons" async="async"></script>

</div>



<div class="comments">
    <h3 class="title is-4">Comments</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://tn710617.github.io/flexibleGitFlow/';
        this.page.identifier = 'flexibleGitFlow/';
        
        this.language = 'en';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'rayscodingjourney' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Ray&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
                       <a class="navbar-item" title="GitHub" href="https://github.com/tn710617">
                           
                           <i class="fab fa-github"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Medium" href="https://medium.com/@raycodingjourney">
                           
                           <i class="fab fa-medium"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Linkedin" href="https://www.linkedin.com/in/ray-lee-99315315a">
                           
                           <i class="fab fa-linkedin"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Facebook" href="https://www.facebook.com/profile.php?id=100001626039430">
                           
                           <i class="fab fa-facebook"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="CakeResume" href="https://www.cakeresume.com/resumes/ray-6edaef/edit">
                           
                           <i class="far fa-address-card"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="E-Mail" href="mailto:tn710617@gmail.com">
                           
                           <i class="far fa-envelope"></i>
                           
                       </a>
                          
                       <a class="navbar-item" title="Skype" href="skype:adad0310?call|chat">
                           
                           <i class="fab fa-skype"></i>
                           
                       </a>
                          
                       
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>